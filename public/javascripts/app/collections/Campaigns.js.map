{"version":3,"sources":["app/collections/Campaigns.coffee"],"names":[],"mappings":";AAAA;EAAA;;;;AAAA,WAAW,QAAQ,iBAAR;;AACX,iBAAiB,QAAQ,4BAAR;;AAEjB,MAAM,CAAC,OAAP,GAAuB;;;;;;;sBACrB,QAAO;;sBACP,MAAK;;sBAEL,cAAa,SAAC,IAAD,EAAO,OAAP;;MAAO,UAAQ;;;MAC1B,OAAO,CAAC,OAAQ;;IAChB,OAAO,CAAC,IAAI,CAAC,IAAb,GAAoB;WACpB,IAAC,MAAD,CAAO,OAAP;EAHW;;sBAKb,iCAAgC,SAAC,OAAD,EAAa,YAAb;AAC9B;;MAD+B,UAAQ;;;MAAI,eAAa;;IACxD,SAAS,QAAQ,oBAAR;;MACT,OAAO,CAAC,OAAQ;;IAChB,OAAO,CAAC,IAAI,CAAC,OAAb,GAAuB;IACvB,UAAU,OAAO,CAAC,OAAR,IAAmB;AAC7B,WAAO,IAAC,MAAD,CAAO,OAAP,CACL,CAAC,IADI,CACC;aAAA;AACJ;QAAA,WAAW,KAAC,OAAD,CAAQ,SAAC,CAAD;AAAO;uBAAA,CAAC,CAAC,GAAF,CAAM,MAAN,gBAAiB,OAAjB;QAAP,CAAR;QACX,KAAC,OAAD,CAAQ,QAAR;;UACA,YAAY,CAAC,OAAQ;;;cACJ,CAAC,UAAW;;QAC7B,SAAS;AACT;AAAA;;UACE,QAAQ,CAAC,MAAT,GAAsB;UACtB,MAAM,CAAC,IAAP,CAAY,QAAQ,CAAC,MAAM,CAAC,gBAAhB,CAAiC,QAAQ,CAAC,GAAT,CAAa,MAAb,CAAjC,EAAuD,YAAvD,CAAZ;AAFF;AAGA,eAAO,CAAC,CAAC,IAAF,UAAO,MAAP;MATH;IAAA,QADD;EALuB;;;;GATO","file":"public/javascripts/app/collections/Campaigns.js","sourcesContent":["Campaign = require 'models/Campaign'\r\nCocoCollection = require 'collections/CocoCollection'\r\n\r\nmodule.exports = class Campaigns extends CocoCollection\r\n  model: Campaign\r\n  url: '/db/campaign'\r\n\r\n  fetchByType: (type, options={}) ->\r\n    options.data ?= {}\r\n    options.data.type = type\r\n    @fetch(options)\r\n    \r\n  fetchCampaignsAndRelatedLevels: (options={}, levelOptions={}) ->\r\n    Levels = require 'collections/Levels'\r\n    options.data ?= {}\r\n    options.data.project = 'slug'\r\n    exclude = options.exclude or []\r\n    return @fetch(options)\r\n      .then =>\r\n        toRemove = @filter (c) -> c.get('slug') in exclude\r\n        @remove toRemove\r\n        levelOptions.data ?= {}\r\n        levelOptions.data.project ?= 'thangs,name,slug,campaign,tasks'\r\n        jqxhrs = []\r\n        for campaign in @models\r\n          campaign.levels = new Levels()\r\n          jqxhrs.push campaign.levels.fetchForCampaign(campaign.get('slug'), levelOptions)\r\n        return $.when(jqxhrs...)\r\n"]}