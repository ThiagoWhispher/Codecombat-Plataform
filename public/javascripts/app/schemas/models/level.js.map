{"version":3,"sources":["app/schemas/models/level.coffee"],"names":[],"mappings":"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","file":"public/javascripts/app/schemas/models/level.js","sourcesContent":["c = require './../schemas'\r\nThangComponentSchema = require './thang_component'\r\n\r\nSpecificArticleSchema = c.object()\r\nc.extendNamedProperties SpecificArticleSchema  # name first\r\nSpecificArticleSchema.properties.body = {type: 'string', title: 'Content', description: 'The body content of the article, in Markdown.', format: 'markdown'}\r\nSpecificArticleSchema.properties.i18n = {type: 'object', format: 'i18n', props: ['name', 'body'], description: 'Help translate this article'}\r\nSpecificArticleSchema.displayProperty = 'name'\r\n\r\nside = {title: 'Side', description: 'A side.', type: 'string', 'enum': ['left', 'right', 'top', 'bottom']}\r\nthang = {title: 'Thang', description: 'The name of a Thang.', type: 'string', maxLength: 60, format: 'thang'}\r\n\r\neventPrereqValueTypes = ['boolean', 'integer', 'number', 'null', 'string'] # not 'object' or 'array'\r\nEventPrereqSchema = c.object {title: 'Event Prerequisite', format: 'event-prereq', description: 'Script requires that the value of some property on the event triggering it to meet some prerequisite.', required: ['eventProps']},\r\n  eventProps: c.array {'default': ['thang'], format: 'event-value-chain', maxItems: 10, title: 'Event Property', description: 'A chain of keys in the event, like \"thang.pos.x\" to access event.thang.pos.x.'}, c.shortString(title: 'Property', description: 'A key in the event property key chain.')\r\n  equalTo: c.object {type: eventPrereqValueTypes, title: '==', description: 'Script requires the event\\'s property chain value to be equal to this value.'}\r\n  notEqualTo: c.object {type: eventPrereqValueTypes, title: '!=', description: 'Script requires the event\\'s property chain value to *not* be equal to this value.'}\r\n  greaterThan: {type: 'number', title: '>', description: 'Script requires the event\\'s property chain value to be greater than this value.'}\r\n  greaterThanOrEqualTo: {type: 'number', title: '>=', description: 'Script requires the event\\'s property chain value to be greater or equal to this value.'}\r\n  lessThan: {type: 'number', title: '<', description: 'Script requires the event\\'s property chain value to be less than this value.'}\r\n  lessThanOrEqualTo: {type: 'number', title: '<=', description: 'Script requires the event\\'s property chain value to be less than or equal to this value.'}\r\n  containingString: c.shortString(title: 'Contains', description: 'Script requires the event\\'s property chain value to be a string containing this string.')\r\n  notContainingString: c.shortString(title: 'Does not contain', description: 'Script requires the event\\'s property chain value to *not* be a string containing this string.')\r\n  containingRegexp: c.shortString(title: 'Contains Regexp', description: 'Script requires the event\\'s property chain value to be a string containing this regular expression.')\r\n  notContainingRegexp: c.shortString(title: 'Does not contain regexp', description: 'Script requires the event\\'s property chain value to *not* be a string containing this regular expression.')\r\n\r\nGoalSchema = c.object {title: 'Goal', description: 'A goal that the player can accomplish.', required: ['name', 'id']},\r\n  name: c.shortString(title: 'Name', description: 'Name of the goal that the player will see, like \\\"Defeat eighteen dragons\\\".')\r\n  i18n: {type: 'object', format: 'i18n', props: ['name'], description: 'Help translate this goal'}\r\n  id: c.shortString(title: 'ID', description: 'Unique identifier for this goal, like \\\"defeat-dragons\\\".', pattern: '^[a-z0-9-]+$')  # unique somehow?\r\n  worldEndsAfter: {title: 'World Ends After', description: 'When included, ends the world this many seconds after this goal succeeds or fails.', type: 'number', minimum: 0, exclusiveMinimum: true, maximum: 300, default: 3}\r\n  howMany: {title: 'How Many', description: 'When included, require only this many of the listed goal targets instead of all of them.', type: 'integer', minimum: 1}\r\n  hiddenGoal: {title: 'Hidden', description: 'Hidden goals don\\'t show up in the goals area for the player until they\\'re failed. (Usually they\\'re obvious, like \"don\\'t die\".)', 'type': 'boolean' }\r\n  optional: {title: 'Optional', description: 'Optional goals do not need to be completed for overallStatus to be success.', type: 'boolean'}\r\n  team: c.shortString(title: 'Team', description: 'Name of the team this goal is for, if it is not for all of the playable teams.')\r\n  killThangs: c.array {title: 'Kill Thangs', description: 'A list of Thang IDs the player should kill, or team names.', uniqueItems: true, minItems: 1, 'default': ['ogres']}, thang\r\n  saveThangs: c.array {title: 'Save Thangs', description: 'A list of Thang IDs the player should save, or team names', uniqueItems: true, minItems: 1, 'default': ['Hero Placeholder']}, thang\r\n  getToLocations: c.object {title: 'Get To Locations', description: 'Will be set off when any of the \\\"who\\\" touch any of the \\\"targets\\\"', required: ['who', 'targets']},\r\n    who: c.array {title: 'Who', description: 'The Thangs who must get to the target locations.', minItems: 1}, thang\r\n    targets: c.array {title: 'Targets', description: 'The target locations to which the Thangs must get.', minItems: 1}, thang\r\n  getAllToLocations: c.array {title: 'Get all to locations', description: 'Similar to getToLocations but now a specific \\\"who\\\" can have a specific \\\"target\\\", also must be used with the HowMany property for desired effect', required: ['getToLocation']},\r\n  c.object {title: '', description: ''},\r\n    getToLocation: c.object {title: 'Get To Locations', description: 'TODO: explain', required: ['who', 'targets']},\r\n      who: c.array {title: 'Who', description: 'The Thangs who must get to the target locations.', minItems: 1}, thang\r\n      targets: c.array {title: 'Targets', description: 'The target locations to which the Thangs must get.', minItems: 1}, thang\r\n  keepFromLocations: c.object {title: 'Keep From Locations', description: 'TODO: explain', required: ['who', 'targets']},\r\n    who: c.array {title: 'Who', description: 'The Thangs who must not get to the target locations.', minItems: 1}, thang\r\n    targets: c.array {title: 'Targets', description: 'The target locations to which the Thangs must not get.', minItems: 1}, thang\r\n  keepAllFromLocations: c.array {title: 'Keep ALL From Locations', description: 'Similar to keepFromLocations but now a specific \\\"who\\\" can have a specific \\\"target\\\", also must be used with the HowMany property for desired effect', required: ['keepFromLocation']},\r\n  c.object {title: '', description: ''},\r\n    keepFromLocation: c.object {title: 'Keep From Locations', description: 'TODO: explain', required: ['who', 'targets']},\r\n      who: c.array {title: 'Who', description: 'The Thangs who must not get to the target locations.', minItems: 1}, thang\r\n      targets: c.array {title: 'Targets', description: 'The target locations to which the Thangs must not get.', minItems: 1}, thang\r\n  leaveOffSides: c.object {title: 'Leave Off Sides', description: 'Sides of the level to get some Thangs to leave across.', required: ['who', 'sides']},\r\n    who: c.array {title: 'Who', description: 'The Thangs which must leave off the sides of the level.', minItems: 1}, thang\r\n    sides: c.array {title: 'Sides', description: 'The sides off which the Thangs must leave.', minItems: 1}, side\r\n  keepFromLeavingOffSides: c.object {title: 'Keep From Leaving Off Sides', description: 'Sides of the level to keep some Thangs from leaving across.', required: ['who', 'sides']},\r\n    who: c.array {title: 'Who', description: 'The Thangs which must not leave off the sides of the level.', minItems: 1}, thang\r\n    sides: side, {title: 'Sides', description: 'The sides off which the Thangs must not leave.', minItems: 1}, side\r\n  collectThangs: c.object {title: 'Collect', description: 'Thangs that other Thangs must collect.', required: ['who', 'targets']},\r\n    who: c.array {title: 'Who', description: 'The Thangs which must collect the target items.', minItems: 1}, thang\r\n    targets: c.array {title: 'Targets', description: 'The target items which the Thangs must collect.', minItems: 1}, thang\r\n  keepFromCollectingThangs: c.object {title: 'Keep From Collecting', description: 'Thangs that the player must prevent other Thangs from collecting.', required: ['who', 'targets']},\r\n    who: c.array {title: 'Who', description: 'The Thangs which must not collect the target items.', minItems: 1}, thang\r\n    targets: c.array {title: 'Targets', description: 'The target items which the Thangs must not collect.', minItems: 1}, thang\r\n  codeProblems: c.array {title: 'Code Problems', description: 'A list of Thang IDs that should not have any code problems, or team names.', uniqueItems: true, minItems: 1, 'default': ['humans']}, thang\r\n  linesOfCode: {title: 'Lines of Code', description: 'A mapping of Thang IDs or teams to how many many lines of code should be allowed (well, statements).', type: 'object', default: {humans: 10}, additionalProperties: {type: 'integer', description: 'How many lines to allow for this Thang.'}}\r\n  html: c.object {title: 'HTML', description: 'A jQuery selector and what its result should be'},\r\n    selector: {type: 'string', description: 'jQuery selector to run on the user HTML, like \"h1:first-child\"'}\r\n    valueChecks: c.array {title: 'Value checks', description: 'Logical checks on the resulting value for this goal to pass.', format: 'event-prereqs'}, EventPrereqSchema\r\n\r\nResponseSchema = c.object {title: 'Dialogue Button', description: 'A button to be shown to the user with the dialogue.', required: ['text']},\r\n  text: {title: 'Title', description: 'The text that will be on the button', 'default': 'Okay', type: 'string', maxLength: 30}\r\n  channel: c.shortString(title: 'Channel', format: 'event-channel', description: 'Channel that this event will be broadcast over, like \"level:set-playing\".')\r\n  event: {type: 'object', title: 'Event', description: 'Event that will be broadcast when this button is pressed, like {playing: true}.'}\r\n  buttonClass: c.shortString(title: 'Button Class', description: 'CSS class that will be added to the button, like \"btn-primary\".')\r\n  i18n: {type: 'object', format: 'i18n', props: ['text'], description: 'Help translate this button'}\r\n\r\nPointSchema = c.object {title: 'Point', description: 'An {x, y} coordinate point.', format: 'point2d', default: { x:15, y:20 }},\r\n  x: {title: 'x', description: 'The x coordinate.', type: 'number'}\r\n  y: {title: 'y', description: 'The y coordinate.', type: 'number'}\r\n\r\nSpriteCommandSchema = c.object {title: 'Thang Command', description: 'Make a target Thang move or say something, or select/deselect it.', required: ['id'], default: {id: 'Hero Placeholder'}},\r\n  id: thang\r\n  select: {title: 'Select', description: 'Select or deselect this Thang.', type: 'boolean'}\r\n  say: c.object {title: 'Say', description: 'Make this Thang say a message.', required: ['text'], default: { mood: 'explain' }},\r\n    blurb: c.shortString(title: 'Blurb', description: 'A very short message to display above this Thang\\'s head. Plain text.', maxLength: 50)\r\n    mood: c.shortString(title: 'Mood', description: 'The mood with which the Thang speaks.', 'enum': ['explain', 'debrief', 'congrats', 'attack', 'joke', 'tip', 'alarm'])\r\n    text: {title: 'Text', description: 'A short message to display in the dialogue area. Markdown okay.', type: 'string', maxLength: 400}\r\n    sound: c.object {title: 'Sound', description: 'A dialogue sound file to accompany the message.', required: ['mp3', 'ogg'] },\r\n      mp3: c.shortString(title: 'MP3', format: 'sound-file')\r\n      ogg: c.shortString(title: 'OGG', format: 'sound-file')\r\n      preload: {title: 'Preload', description: 'Whether to load this sound file before the level can begin (typically for the first dialogue of a level).', type: 'boolean' }\r\n    responses: c.array {title: 'Buttons', description: 'An array of buttons to include with the dialogue, with which the user can respond.'}, ResponseSchema\r\n    i18n: {type: 'object', format: 'i18n', props: ['blurb', 'text', 'sound'], description: 'Help translate this message'}\r\n  move: c.object {title: 'Move', description: 'Tell the Thang to move.', required: ['target'], default: {target: {}, duration: 500}},\r\n    target: _.extend _.cloneDeep(PointSchema), {title: 'Target', description: 'Target point to which the Thang will move.', default: {x: 20, y: 20}}\r\n    duration: {title: 'Duration', description: 'Number of milliseconds over which to move, or 0 for an instant move.', type: 'integer', minimum: 0, format: 'milliseconds'}\r\n\r\nNoteGroupSchema = c.object {title: 'Note Group', description: 'A group of notes that should be sent out as a result of this script triggering.', displayProperty: 'name'},\r\n  name: {title: 'Name', description: 'Short name describing the script, like \\\"Anya greets the player\\\", for your convenience.', type: 'string'}\r\n  dom: c.object {title: 'DOM', description: 'Manipulate things in the play area DOM, outside of the level area canvas.'},\r\n    focus: c.shortString(title: 'Focus', description: 'Set the window focus to this DOM selector string.')\r\n    showVictory: {\r\n      title: 'Show Victory',\r\n      description: 'Show the done button and maybe also the victory modal.',\r\n      enum: [true, 'Done Button', 'Done Button And Modal'] # deprecate true, same as 'done_button_and_modal'\r\n    }\r\n    highlight: c.object {title: 'Highlight', description: 'Highlight the target DOM selector string with a big arrow.'},\r\n      target: c.shortString(title: 'Target', description: 'Target highlight element DOM selector string.')\r\n      delay: {type: 'integer', minimum: 0, title: 'Delay', description: 'Show the highlight after this many milliseconds. Doesn\\'t affect the dim shade cutout highlight method.'}\r\n      offset: _.extend _.cloneDeep(PointSchema), {title: 'Offset', description: 'Pointing arrow tip offset in pixels from the default target.', format: null}\r\n      rotation: {type: 'number', minimum: 0, title: 'Rotation', description: 'Rotation of the pointing arrow, in radians. PI / 2 points left, PI points up, etc.', format: 'radians'}\r\n      sides: c.array {title: 'Sides', description: 'Which sides of the target element to point at.'}, {type: 'string', 'enum': ['left', 'right', 'top', 'bottom'], title: 'Side', description: 'A side of the target element to point at.'}\r\n    lock: {title: 'Lock', description: 'Whether the interface should be locked so that the player\\'s focus is on the script, or specific areas to lock.', type: ['boolean', 'array'], items: {type: 'string', enum: ['surface', 'editor', 'palette', 'hud', 'playback', 'playback-hover', 'level']}}\r\n    letterbox: {type: 'boolean', title: 'Letterbox', description: 'Turn letterbox mode on or off. Disables surface and playback controls.'}\r\n\r\n  playback: c.object {title: 'Playback', description: 'Control the playback of the level.'},\r\n    playing: {type: 'boolean', title: 'Set Playing', description: 'Set whether playback is playing or paused.'}\r\n    scrub: c.object {title: 'Scrub', description: 'Scrub the level playback time to a certain point.', default: {offset: 2, duration: 1000, toRatio: 0.5}},\r\n      offset: {type: 'integer', title: 'Offset', description: 'Number of frames by which to adjust the scrub target time.'}\r\n      duration: {type: 'integer', title: 'Duration', description: 'Number of milliseconds over which to scrub time.', minimum: 0, format: 'milliseconds'}\r\n      toRatio: {type: 'number', title: 'To Progress Ratio', description: 'Set playback time to a target playback progress ratio.', minimum: 0, maximum: 1}\r\n      toTime: {type: 'number', title: 'To Time', description: 'Set playback time to a target playback point, in seconds.', minimum: 0}\r\n      toGoal: c.shortString(title: 'To Goal', description: 'Set playback time to when this goal was achieved. (TODO: not implemented.)')\r\n\r\n  script: c.object {title: 'Script', description: 'Extra configuration for this action group.'},\r\n    duration: {type: 'integer', minimum: 0, title: 'Duration', description: 'How long this script should last in milliseconds. 0 for indefinite.', format: 'milliseconds'}\r\n    skippable: {type: 'boolean', title: 'Skippable', description: 'Whether this script shouldn\\'t bother firing when the player skips past all current scripts.'}\r\n    beforeLoad: {type: 'boolean', title: 'Before Load', description: 'Whether this script should fire before the level is finished loading.'}\r\n\r\n  sprites: c.array {title: 'Sprites', description: 'Commands to issue to Sprites on the Surface.'}, SpriteCommandSchema\r\n\r\n  surface: c.object {title: 'Surface', description: 'Commands to issue to the Surface itself.'},\r\n    focus: c.object {title: 'Camera', description: 'Focus the camera on a specific point on the Surface.', format: 'viewport'},\r\n      target: {anyOf: [PointSchema, thang, {type: 'null'}], title: 'Target', description: 'Where to center the camera view.', default: {x: 0, y: 0}}\r\n      zoom: {type: 'number', minimum: 0, exclusiveMinimum: true, maximum: 64, title: 'Zoom', description: 'What zoom level to use.'}\r\n      duration: {type: 'number', minimum: 0, title: 'Duration', description: 'in ms'}\r\n      bounds: c.array {title: 'Boundary', maxItems: 2, minItems: 2, default: [{x: 0, y: 0}, {x: 46, y: 39}], format: 'bounds'}, PointSchema\r\n      isNewDefault: {type: 'boolean', format: 'hidden', title: 'New Default', description: 'Set this as new default zoom once scripts end.'} # deprecated\r\n    highlight: c.object {title: 'Highlight', description: 'Highlight specific Sprites on the Surface.'},\r\n      targets: c.array {title: 'Targets', description: 'Thang IDs of target Sprites to highlight.'}, thang\r\n      delay: {type: 'integer', minimum: 0, title: 'Delay', description: 'Delay in milliseconds before the highlight appears.'}\r\n    lockSelect: {type: 'boolean', title: 'Lock Select', description: 'Whether to lock Sprite selection so that the player can\\'t select/deselect anything.'}\r\n\r\n  sound: c.object {title: 'Sound', description: 'Commands to control sound playback.'},\r\n    suppressSelectionSounds: {type: 'boolean', title: 'Suppress Selection Sounds', description: 'Whether to suppress selection sounds made from clicking on Thangs.'}\r\n    music: c.object {title: 'Music', description: 'Control music playing'},\r\n      play: {title: 'Play', type: 'boolean'}\r\n      file: c.shortString(title: 'File', enum: ['/music/music_level_1', '/music/music_level_2', '/music/music_level_3', '/music/music_level_4', '/music/music_level_5'])\r\n\r\nScriptSchema = c.object {\r\n  title: 'Script'\r\n  description: 'A script fires off a chain of notes to interact with the game when a certain event triggers it.'\r\n  required: ['channel']\r\n  'default': {channel: 'world:won', noteChain: []}\r\n},\r\n  id: c.shortString(title: 'ID', description: 'A unique ID that other scripts can rely on in their Happens After prereqs, for sequencing.', pattern: '^[a-zA-Z 0-9:\\'\"_!-]+$')  # uniqueness? Ideally this would be just ids-like-this but we have a lot of legacy data.\r\n  channel: c.shortString(title: 'Event', format: 'event-channel', description: 'Event channel this script might trigger for, like \"world:won\".')\r\n  eventPrereqs: c.array {title: 'Event Checks', description: 'Logical checks on the event for this script to trigger.', format: 'event-prereqs'}, EventPrereqSchema\r\n  repeats: {title: 'Repeats', description: 'Whether this script can trigger more than once during a level.', enum: [true, false, 'session']}\r\n  scriptPrereqs: c.array {title: 'Happens After', description: 'Scripts that need to fire first.'},\r\n    c.shortString(title: 'ID', description: 'A unique ID of a script.')\r\n  notAfter: c.array {title: 'Not After', description: 'Do not run this script if any of these scripts have run.'},\r\n    c.shortString(title: 'ID', description: 'A unique ID of a script.')\r\n  noteChain: c.array {title: 'Actions', description: 'A list of things that happen when this script triggers.'}, NoteGroupSchema\r\n\r\nLevelThangSchema = c.object {\r\n  title: 'Thang',\r\n  description: 'Thangs are any units, doodads, or abstract things that you use to build the level. (\\\"Thing\\\" was too confusing to say.)',\r\n  format: 'thang'\r\n  required: ['id', 'thangType', 'components']\r\n  'default':\r\n    id: 'Boris'\r\n    thangType: 'Soldier'\r\n    components: []\r\n},\r\n  id: thang  # TODO: figure out if we can make this unique and how to set dynamic defaults\r\n  thangType: c.objectId(links: [{rel: 'db', href: '/db/thang.type/{($)}/version'}], title: 'Thang Type', description: 'A reference to the original Thang template being configured.', format: 'thang-type')\r\n  components: c.array {title: 'Components', description: 'Thangs are configured by changing the Components attached to them.', uniqueItems: true, format: 'thang-components-array'}, ThangComponentSchema  # TODO: uniqueness should be based on 'original', not whole thing\r\n\r\nLevelSystemSchema = c.object {\r\n  title: 'System'\r\n  description: 'Configuration for a System that this Level uses.'\r\n  format: 'level-system'\r\n  required: ['original', 'majorVersion']\r\n  'default':\r\n    majorVersion: 0\r\n    config: {}\r\n  links: [{rel: 'db', href: '/db/level.system/{(original)}/version/{(majorVersion)}'}]\r\n},\r\n  original: c.objectId(title: 'Original', description: 'A reference to the original System being configured.', format: 'hidden')\r\n  config: c.object {title: 'Configuration', description: 'System-specific configuration properties.', additionalProperties: true, format: 'level-system-configuration'}\r\n  majorVersion: {title: 'Major Version', description: 'Which major version of the System is being used.', type: 'integer', minimum: 0, format: 'hidden'}\r\n\r\nGeneralArticleSchema = c.object {\r\n  title: 'Article'\r\n  description: 'Reference to a general documentation article.'\r\n  required: ['original']\r\n  format: 'latest-version-reference'\r\n  'default':\r\n    original: null\r\n    majorVersion: 0\r\n  links: [{rel: 'db', href: '/db/article/{(original)}/version/{(majorVersion)}'}]\r\n},\r\n  original: c.objectId(title: 'Original', description: 'A reference to the original Article.')#, format: 'hidden')  # hidden?\r\n  majorVersion: {title: 'Major Version', description: 'Which major version of the Article is being used.', type: 'integer', minimum: 0} #, format: 'hidden'}  # hidden?\r\n\r\nLevelSchema = c.object {\r\n  title: 'Level'\r\n  description: 'A spectacular level which will delight and educate its stalwart players with the sorcery of coding.'\r\n  required: ['name']\r\n  'default':\r\n    name: 'Ineffable Wizardry'\r\n    description: 'This level is indescribably flarmy.'\r\n    documentation: {}\r\n    scripts: []\r\n    thangs: []\r\n    systems: []\r\n    victory: {}\r\n    type: 'hero'\r\n    goals: [\r\n      {id: 'ogres-die', name: 'Defeat the ogres.', killThangs: ['ogres'], worldEndsAfter: 3}\r\n      {id: 'humans-survive', name: 'Your hero must survive.', saveThangs: ['Hero Placeholder'], howMany: 1, worldEndsAfter: 3, hiddenGoal: true}\r\n    ]\r\n    concepts: ['basic_syntax']\r\n}\r\nc.extendNamedProperties LevelSchema  # let's have the name be the first property\r\n_.extend LevelSchema.properties,\r\n  description: {title: 'Description', description: 'A short explanation of what this level is about.', type: 'string', maxLength: 65536, format: 'markdown'}\r\n  studentPlayInstructions: {title: 'Student Play Instructions', description: 'Instructions for game dev levels when students play them.', type: 'string', maxLength: 65536, format: 'markdown'}\r\n  loadingTip: { type: 'string', title: 'Loading Tip', description: 'What to show for this level while it\\'s loading.' }\r\n  documentation: c.object {title: 'Documentation', description: 'Documentation articles relating to this level.', 'default': {specificArticles: [], generalArticles: []}},\r\n    specificArticles: c.array {title: 'Specific Articles', description: 'Specific documentation articles that live only in this level.', uniqueItems: true }, SpecificArticleSchema\r\n    generalArticles: c.array {title: 'General Articles', description: 'General documentation articles that can be linked from multiple levels.', uniqueItems: true}, GeneralArticleSchema\r\n    hints: c.array {title: 'Hints', description: 'Tips and tricks to help unstick a player for the level.', uniqueItems: true }, {\r\n      type: 'object'\r\n      properties: {\r\n        body: {type: 'string', title: 'Content', description: 'The body content of the article, in Markdown.', format: 'markdown'}\r\n        i18n: {type: 'object', format: 'i18n', props: ['body'], description: 'Help translate this hint'}\r\n      }\r\n    }\r\n    hintsB: c.array {title: 'HintsB', description: '2nd style of hints for a/b testing significant variations', uniqueItems: true }, {\r\n      type: 'object'\r\n      properties: {\r\n        body: {type: 'string', title: 'Content', description: 'The body content of the article, in Markdown.', format: 'markdown'}\r\n        i18n: {type: 'object', format: 'i18n', props: ['body'], description: 'Help translate this hint'}\r\n      }\r\n    }\r\n  nextLevel: {\r\n    type: 'object',\r\n    links: [{rel: 'extra', href: '/db/level/{($)}'}, {rel: 'db', href: '/db/level/{(original)}/version/{(majorVersion)}'}],\r\n    format: 'latest-version-reference',\r\n    title: 'Next Level',\r\n    description: 'Reference to the next level players will play after beating this one.'\r\n  }\r\n  scripts: c.array {title: 'Scripts', description: 'An array of scripts that trigger based on what the player does and affect things outside of the core level simulation.'}, ScriptSchema\r\n  thangs: c.array {title: 'Thangs', description: 'An array of Thangs that make up the level.' }, LevelThangSchema\r\n  systems: c.array {title: 'Systems', description: 'Levels are configured by changing the Systems attached to them.', uniqueItems: true }, LevelSystemSchema  # TODO: uniqueness should be based on 'original', not whole thing\r\n  victory: c.object {title: 'Victory Screen'}, {\r\n    body: {type: 'string', format: 'markdown', title: 'Body Text', description: 'Inserted into the Victory Modal once this level is complete. Tell the player they did a good job and what they accomplished!'},\r\n    i18n: {type: 'object', format: 'i18n', props: ['body'], description: 'Help translate this victory message'}\r\n  }\r\n  i18n: {type: 'object', format: 'i18n', props: ['name', 'description', 'loadingTip', 'studentPlayInstructions'], description: 'Help translate this level'}\r\n  banner: {type: 'string', format: 'image-file', title: 'Banner'}\r\n  goals: c.array {title: 'Goals', description: 'An array of goals which are visible to the player and can trigger scripts.'}, GoalSchema\r\n  type: c.shortString(title: 'Type', description: 'What type of level this is.', 'enum': ['campaign', 'ladder', 'ladder-tutorial', 'hero', 'hero-ladder', 'hero-coop', 'course', 'course-ladder', 'game-dev', 'web-dev'])\r\n  kind: c.shortString(title: 'Kind', description: 'Similar to type, but just for our organization.', enum: ['demo', 'usage', 'mastery', 'advanced', 'practice', 'challenge'])\r\n  terrain: c.terrainString\r\n  requiresSubscription: {title: 'Requires Subscription', description: 'Whether this level is available to subscribers only.', type: 'boolean'}\r\n  tasks: c.array {title: 'Tasks', description: 'Tasks to be completed for this level.'}, c.task\r\n  helpVideos: c.array {title: 'Help Videos'}, c.object {default: {style: 'eccentric', url: '', free: false}},\r\n    style: c.shortString title: 'Style', description: 'Like: original, eccentric, scripted, edited, etc.'\r\n    free: {type: 'boolean', title: 'Free', description: 'Whether this video is freely available to all players without a subscription.'}\r\n    url: c.url {title: 'URL', description: 'Link to the video on Vimeo.'}\r\n  replayable: {type: 'boolean', title: 'Replayable', description: 'Whether this (hero) level infinitely scales up its difficulty and can be beaten over and over for greater rewards.'}\r\n  buildTime: {type: 'number', description: 'How long it has taken to build this level.'}\r\n  practice: { type: 'boolean' }\r\n  practiceThresholdMinutes: {type: 'number', description: 'Players with larger playtimes may be directed to a practice level.'}\r\n  primerLanguage: { type: 'string', enum: ['javascript', 'python'], description: 'Programming language taught by this level.' }\r\n  shareable: { title: 'Shareable', type: ['string', 'boolean'], enum: [false, true, 'project'], description: 'Whether the level is not shareable (false), shareable (true), or a sharing-encouraged project level (\"project\"). Make sure to use \"project\" for project levels so they show up correctly in the Teacher Dashboard.' }\r\n\r\n  # Admin flags\r\n  adventurer: { type: 'boolean' }\r\n  adminOnly: { type: 'boolean' }\r\n  disableSpaces: { type: ['boolean','integer'] }\r\n  hidesSubmitUntilRun: { type: 'boolean' }\r\n  hidesPlayButton: { type: 'boolean' }\r\n  hidesRunShortcut: { type: 'boolean' }\r\n  hidesHUD: { type: 'boolean' }\r\n  hidesSay: { type: 'boolean' }\r\n  hidesCodeToolbar: { type: 'boolean' }\r\n  hidesRealTimePlayback: { type: 'boolean' }\r\n  backspaceThrottle: { type: 'boolean' }\r\n  lockDefaultCode: { type: ['boolean','integer'] }\r\n  moveRightLoopSnippet: { type: 'boolean' }\r\n  realTimeSpeedFactor: { type: 'number' }\r\n  autocompleteFontSizePx: { type: 'number' }\r\n  requiredCode: c.array {}, {\r\n    type: 'string'\r\n  }\r\n  suspectCode: c.array {}, {\r\n    type: 'object'\r\n    properties: {\r\n      name: { type: 'string' }\r\n      pattern: { type: 'string' }\r\n    }\r\n  }\r\n  requiredGear: { type: 'object', title: 'Required Gear', description: 'Slots that should require one of a set array of items for that slot', additionalProperties: {\r\n    type: 'array'\r\n    items: { type: 'string', links: [{rel: 'db', href: '/db/thang.type/{($)}/version'}], format: 'latest-version-original-reference' }\r\n  }}\r\n  restrictedGear: { type: 'object', title: 'Restricted Gear', description: 'Slots that should restrict all of a set array of items for that slot', additionalProperties: {\r\n    type: 'array'\r\n    items: { type: 'string', links: [{rel: 'db', href: '/db/thang.type/{($)}/version'}], format: 'latest-version-original-reference' }\r\n  }}\r\n  requiredProperties: { type: 'array', items: {type: 'string'}, description: 'Names of properties a hero must have equipped to play.', format: 'solution-gear', title: 'Required Properties' }\r\n  restrictedProperties: { type: 'array', items: {type: 'string'}, description: 'Names of properties a hero must not have equipped to play.', title: 'Restricted Properties' }\r\n  recommendedHealth: { type: 'number', minimum: 0, exclusiveMinimum: true, description: 'If set, will show the recommended health to be able to beat this level with the intended main solution to the player when choosing equipment.', format: 'solution-stats', title: 'Recommended Health' }\r\n  allowedHeroes: { type: 'array', title: 'Allowed Heroes', description: 'Which heroes can play this level. For any hero, leave unset.', items: {\r\n    type: 'string', links: [{rel: 'db', href: '/db/thang.type/{($)}/version'}], format: 'latest-version-original-reference'\r\n  }}\r\n  campaign: c.shortString title: 'Campaign', description: 'Which campaign this level is part of (like \"desert\").', format: 'hidden'  # Automatically set by campaign editor.\r\n  campaignIndex: c.int title: 'Campaign Index', description: 'The 0-based index of this level in its campaign.', format: 'hidden'  # Automatically set by campaign editor.\r\n  scoreTypes: c.array {title: 'Score Types', description: 'What metric to show leaderboards for.', uniqueItems: true},\r\n     c.shortString(title: 'Score Type', 'enum': ['time', 'damage-taken', 'damage-dealt', 'gold-collected', 'difficulty'])  # TODO: good version of LoC; total gear value.\r\n  concepts: c.array {title: 'Programming Concepts', description: 'Which programming concepts this level covers.', uniqueItems: true, format: 'concepts-list'}, c.concept\r\n  primaryConcepts: c.array {title: 'Primary Concepts', description: 'The main 1-3 concepts this level focuses on.', uniqueItems: true}, c.concept\r\n  picoCTFProblem: { type: 'string', description: 'Associated picoCTF problem ID, if this is a picoCTF level' }\r\n\r\n\r\nc.extendBasicProperties LevelSchema, 'level'\r\nc.extendSearchableProperties LevelSchema\r\nc.extendVersionedProperties LevelSchema, 'level'\r\nc.extendPermissionsProperties LevelSchema, 'level'\r\nc.extendPatchableProperties LevelSchema\r\nc.extendTranslationCoverageProperties LevelSchema\r\n\r\nmodule.exports = LevelSchema\r\n\r\n# To test:\r\n# 1: Copy the schema from http://localhost:3000/db/level/schema\r\n# 2. Open up the Treema demo page http://localhost:9090/demo.html\r\n# 3. tv4.addSchema(metaschema.id, metaschema)\r\n# 4. S = <paste big schema here>\r\n# 5. tv4.validateMultiple(S, metaschema) and look for errors\r\n"]}