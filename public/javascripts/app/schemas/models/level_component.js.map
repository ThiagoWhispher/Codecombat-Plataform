{"version":3,"sources":["app/schemas/models/level_component.coffee"],"names":[],"mappings":"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","file":"public/javascripts/app/schemas/models/level_component.js","sourcesContent":["c = require './../schemas'\r\nmetaschema = require './../metaschema'\r\n\r\nattackSelfCode = \"\"\"\r\nclass AttacksSelf extends Component\r\n  @className: 'AttacksSelf'\r\n  chooseAction: ->\r\n    @attack @\r\n\"\"\"\r\nsystems = [\r\n  'action', 'ai', 'alliance', 'collision', 'combat', 'display', 'event', 'existence', 'hearing',\r\n  'inventory', 'movement', 'programming', 'targeting', 'ui', 'vision', 'misc', 'physics', 'effect',\r\n  'magic', 'game'\r\n]\r\n\r\nPropertyDocumentationSchema = c.object {\r\n  title: 'Property Documentation'\r\n  description: 'Documentation entry for a property this Component will add to its Thang which other Components might want to also use.'\r\n  default:\r\n    name: 'foo'\r\n    type: 'object'\r\n    description: 'The `foo` property can satisfy all the #{spriteName}\\'s foobar needs. Use it wisely.'\r\n  required: ['name', 'type', 'description']\r\n},\r\n  name: {type: 'string', title: 'Name', description: 'Name of the property.'}\r\n  i18n: { type: 'object', format: 'i18n', props: ['name', 'description', 'context'], description: 'Help translate this property'}\r\n  context: {\r\n    type: 'object'\r\n    title: 'Example template context'\r\n    additionalProperties: { type: 'string' }\r\n  }\r\n  codeLanguages: c.array {title: 'Specific Code Languages', description: 'If present, then only the languages specified will show this documentation. Leave unset for language-independent documentation.', format: 'code-languages-array'}, c.shortString(title: 'Code Language', description: 'A specific code language to show this documentation for.', format: 'code-language')\r\n  # not actual JS types, just whatever they describe...\r\n  type: c.shortString(title: 'Type', description: 'Intended type of the property.')\r\n  description:\r\n    oneOf: [\r\n      {\r\n        type: 'object',\r\n        title: 'Language Descriptions',\r\n        description: 'Property descriptions by code language.',\r\n        additionalProperties: {type: 'string', description: 'Description of the property.', maxLength: 1000, format: 'markdown'}\r\n        format: 'code-languages-object'\r\n        default: {javascript: ''}\r\n      }\r\n      {title: 'Description', type: 'string', description: 'Description of the property.', maxLength: 1000, format: 'markdown'}\r\n    ]\r\n  args: c.array {title: 'Arguments', description: 'If this property has type \"function\", then provide documentation for any function arguments.'}, c.FunctionArgumentSchema\r\n  owner: {title: 'Owner', type: 'string', description: 'Owner of the property, like \"this\" or \"Math\".'}\r\n  example:\r\n    oneOf: [\r\n      {\r\n        type: 'object',\r\n        title: 'Language Examples',\r\n        description: 'Examples by code language.',\r\n        additionalProperties: {type: 'string', description: 'An example code block.', format: 'code'}\r\n        format: 'code-languages-object'\r\n        default: {javascript: ''}\r\n      }\r\n      {title: 'Example', type: 'string', description: 'An optional example code block.', format: 'javascript'}\r\n    ]\r\n  snippets: {type: 'object', title: 'Snippets', description: 'List of snippets for the respective programming languages', additionalProperties: c.codeSnippet, format: 'code-languages-object'}\r\n  returns: c.object {\r\n    title: 'Return Value'\r\n    description: 'Optional documentation of any return value.'\r\n    required: ['type']\r\n    default: {type: 'null'}\r\n  },\r\n    type: c.shortString(title: 'Type', description: 'Type of the return value')\r\n    example:\r\n      oneOf: [\r\n        {\r\n          type: 'object',\r\n          title: 'Language Examples',\r\n          description: 'Example return values by code language.',\r\n          additionalProperties: c.shortString(description: 'Example return value.', format: 'code')\r\n          format: 'code-languages-object'\r\n          default: {javascript: ''}\r\n        }\r\n        c.shortString(title: 'Example', description: 'Example return value')\r\n      ]\r\n    description:\r\n      oneOf: [\r\n        {\r\n          type: 'object',\r\n          title: 'Language Descriptions',\r\n          description: 'Example return values by code language.',\r\n          additionalProperties: {type: 'string', description: 'Description of the return value.', maxLength: 1000}\r\n          format: 'code-languages-object'\r\n          default: {javascript: ''}\r\n        }\r\n        {title: 'Description', type: 'string', description: 'Description of the return value.', maxLength: 1000}\r\n      ]\r\n    i18n: { type: 'object', format: 'i18n', props: ['description'], description: 'Help translate this return value'}\r\n  autoCompletePriority:\r\n    type: 'number'\r\n    title: 'Autocomplete Priority'\r\n    description: 'How important this property is to autocomplete.'\r\n    minimum: 0\r\n    default: 1.0\r\n  userShouldCaptureReturn:\r\n    type: 'object'\r\n    title: 'User Should Capture Return'\r\n    properties:\r\n      variableName:\r\n        type: 'string'\r\n        title: 'Variable Name'\r\n        description: 'Variable name this property is autocompleted into.'\r\n        default: 'result'\r\n\r\nDependencySchema = c.object {\r\n  title: 'Component Dependency'\r\n  description: 'A Component upon which this Component depends.'\r\n  required: ['original', 'majorVersion']\r\n  format: 'latest-version-reference'\r\n  links: [{rel: 'db', href: '/db/level.component/{(original)}/version/{(majorVersion)}'}]\r\n},\r\n  original: c.objectId(title: 'Original', description: 'A reference to another Component upon which this Component depends.')\r\n  majorVersion:\r\n    title: 'Major Version'\r\n    description: 'Which major version of the Component this Component needs.'\r\n    type: 'integer'\r\n    minimum: 0\r\n\r\nLevelComponentSchema = c.object {\r\n  title: 'Component'\r\n  description: 'A Component which can affect Thang behavior.'\r\n  required: ['system', 'name', 'code']\r\n  default:\r\n    system: 'ai'\r\n    name: 'AttacksSelf'\r\n    description: 'This Component makes the Thang attack itself.'\r\n    code: attackSelfCode\r\n    codeLanguage: 'coffeescript'\r\n    dependencies: []  # TODO: should depend on something by default\r\n    propertyDocumentation: []\r\n    configSchema: {}\r\n}\r\nc.extendNamedProperties LevelComponentSchema  # let's have the name be the first property\r\nLevelComponentSchema.properties.name.pattern = c.classNamePattern\r\n_.extend LevelComponentSchema.properties,\r\n  system:\r\n    title: 'System'\r\n    description: 'The short name of the System this Component belongs to, like \\\"ai\\\".'\r\n    type: 'string'\r\n    'enum': systems\r\n  description:\r\n    title: 'Description'\r\n    description: 'A short explanation of what this Component does.'\r\n    type: 'string'\r\n    maxLength: 2000\r\n  codeLanguage:\r\n    type: 'string'\r\n    title: 'Language'\r\n    description: 'Which programming language this Component is written in.'\r\n    'enum': ['coffeescript']\r\n  code:\r\n    title: 'Code'\r\n    description: 'The code for this Component, as a CoffeeScript class. TODO: add link to documentation for how to write these.'\r\n    type: 'string'\r\n    format: 'coffee'\r\n  js:\r\n    title: 'JavaScript'\r\n    description: 'The transpiled JavaScript code for this Component'\r\n    type: 'string'\r\n    format: 'hidden'\r\n  dependencies: c.array {title: 'Dependencies', description: 'An array of Components upon which this Component depends.', uniqueItems: true}, DependencySchema\r\n  propertyDocumentation: c.array {title: 'Property Documentation', description: 'An array of documentation entries for each notable property this Component will add to its Thang which other Components might want to also use.'}, PropertyDocumentationSchema\r\n  configSchema: _.extend metaschema, {title: 'Configuration Schema', description: 'A schema for validating the arguments that can be passed to this Component as configuration.', default: {type: 'object'}}\r\n  official:\r\n    type: 'boolean'\r\n    title: 'Official'\r\n    description: 'Whether this is an official CodeCombat Component.'\r\n  searchStrings: {type: 'string'}\r\n\r\nc.extendBasicProperties LevelComponentSchema, 'level.component'\r\nc.extendSearchableProperties LevelComponentSchema\r\nc.extendVersionedProperties LevelComponentSchema, 'level.component'\r\nc.extendPermissionsProperties LevelComponentSchema, 'level.component'\r\nc.extendPatchableProperties LevelComponentSchema\r\nc.extendTranslationCoverageProperties LevelComponentSchema\r\n\r\nmodule.exports = LevelComponentSchema\r\n"]}