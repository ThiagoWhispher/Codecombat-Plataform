{"version":3,"sources":["app/views/core/ModalView.coffee"],"names":[],"mappings":";AAAA;EAAA;;;AAAA,WAAW,QAAQ,YAAR;;AAEX,MAAM,CAAC,OAAP,GAAuB;;;sBACrB,YAAW;;sBACX,cAAa;;sBACb,uBAAsB;;sBACtB,oBAAmB;;sBACnB,QAAO;;sBACP,UAAS;;sBACT,WAAU,QAAQ,2BAAR;;sBAEV,SACE;IAAA,WAAW,aAAX;IACA,gBAAgB,aADhB;IAEA,YAAY,aAFZ;IAGA,qBAAqB,0BAHrB;;;sBAKF,YACE;IAAA,OAAO,MAAP;;;EAEW,mBAAC,OAAD;IACX,uBAA+C,OAAO,CAAE,iBAAT,IAAoB,IAAC,QAApE;MAAA,IAAC,UAAD,GAAa,IAAC,UAAS,CAAC,OAAX,CAAmB,OAAnB,EAA4B,EAA5B,EAAb;;IACA,IAAsC,wDAAtC;MAAA,IAAC,YAAD,GAAe,OAAO,CAAC,YAAvB;;IACA,sBAAkD,OAAO,CAAE,0BAA3D;MAAA,IAAC,kBAAD,GAAqB,OAAO,CAAC,kBAA7B;;IACA,4CAAM,SAAN;;MACA,IAAC,WAAW;;EALD;;sBAOb,gBACE;;sBAEF,cAAa;IACX;IACA,IAAG,QAAQ,CAAC,OAAO,CAAC,QAAjB,KAA6B,WAAhC;MACE,EAAE,IAAC,IAAH,CAAO,CAAC,IAAR,CAAa,qBAAb,CAAmC,CAAC,IAApC,CAAyC;eACvC,EAAE,IAAF,CAAO,CAAC,QAAR,CAAiB,mCAAjB,CAAqD,CAAC,WAAtD,CAAkE,oBAAlE;MADuC,CAAzC,EADF;;IAIA,IAAG,IAAC,kBAAJ;MACE,IAAC,IAAG,CAAC,IAAL,CAAU,eAAV,CAA0B,CAAC,GAA3B,CAA+B;QAAA,OAAU,IAAC,kBAAF,GAAoB,GAA7B;OAA/B,EADF;;IAEA,IAAC,IAAG,CAAC,EAAL,CAAQ,eAAR,EAAyB;aAAA;QACvB,KAAmB,KAAC,OAApB;UAAA,KAAC,SAAD;;eACA,KAAC,OAAD,GAAU;MAFa;IAAA,QAAzB;IAGA,IAAsD,IAAC,MAAvD;aAAA,IAAC,IAAG,CAAC,IAAL,CAAU,qBAAV,CAAgC,CAAC,QAAjC,CAA0C,OAA1C;;EAXW;;sBAab,cAAa;IACX;WAGA,EAAE,QAAQ,CAAC,aAAX,CAAyB,CAAC,IAA1B;EAJW;;sBAMb,cAAa,SAAC,GAAD;IACX,KAAsC,GAAtC;MAAA,MAAM,IAAC,IAAG,CAAC,IAAL,CAAU,aAAV,EAAN;;WACA,2CAAM,GAAN;EAFW;;sBAQb,OAAM;IACJ,IAAC,QAAD,CAAS,MAAT;IACA,KAA6C,IAAC,UAA9C;aAAA,IAAC,IAAG,CAAC,WAAL,CAAiB,MAAjB,CAAwB,CAAC,KAAzB,CAA+B,MAA/B;;EAFI;;sBAIN,WAAU;WACR,IAAC,QAAD,CAAS,QAAT;EADQ;;sBAGV,UAAS;IACP,KAAe,IAAC,OAAhB;MAAA,IAAC,KAAD;;IACA,IAAC,IAAG,CAAC,GAAL,CAAS,eAAT;WACA;EAHO;;;;GA9D8B","file":"public/javascripts/app/views/core/ModalView.js","sourcesContent":["CocoView = require './CocoView'\r\n\r\nmodule.exports = class ModalView extends CocoView\r\n  className: 'modal fade'\r\n  closeButton: true\r\n  closesOnClickOutside: true\r\n  modalWidthPercent: null\r\n  plain: false\r\n  instant: false\r\n  template: require 'templates/core/modal-base'\r\n\r\n  events:\r\n    'click a': 'toggleModal'\r\n    'click button': 'toggleModal'\r\n    'click li': 'toggleModal'\r\n    'click [data-i18n]': 'onClickTranslatedElement'\r\n\r\n  shortcuts:\r\n    'esc': 'hide'\r\n\r\n  constructor: (options) ->\r\n    @className = @className.replace ' fade', '' if options?.instant or @instant\r\n    @closeButton = options.closeButton if options?.closeButton?\r\n    @modalWidthPercent = options.modalWidthPercent if options?.modalWidthPercent\r\n    super arguments...\r\n    @options ?= {}\r\n\r\n  subscriptions:\r\n    {}\r\n\r\n  afterRender: ->\r\n    super()\r\n    if Backbone.history.fragment is \"employers\"\r\n      $(@$el).find(\".background-wrapper\").each ->\r\n        $(this).addClass(\"employer-modal-background-wrapper\").removeClass(\"background-wrapper\")\r\n\r\n    if @modalWidthPercent\r\n      @$el.find('.modal-dialog').css width: \"#{@modalWidthPercent}%\"\r\n    @$el.on 'hide.bs.modal', =>\r\n      @onHidden() unless @hidden\r\n      @hidden = true\r\n    @$el.find('.background-wrapper').addClass('plain') if @plain\r\n\r\n  afterInsert: ->\r\n    super()\r\n    # This makes sure if you press enter right after opening the players guide,\r\n    # it doesn't just reopen the modal.\r\n    $(document.activeElement).blur()\r\n\r\n  showLoading: ($el) ->\r\n    $el = @$el.find('.modal-body') unless $el\r\n    super($el)\r\n\r\n  # TODO: Combine hide/onHidden such that backbone 'hide/hidden.bs.modal' events and our 'hide/hidden' events are more 1-to-1\r\n  # For example:\r\n  #   pressing 'esc' or using `currentModal.hide()` triggers 'hide', 'hide.bs.modal', 'hidden', 'hidden.bs.modal'\r\n  #   clicking outside the modal triggers 'hide.bs.modal', 'hidden', 'hidden.bs.modal' (but not 'hide')\r\n  hide: ->\r\n    @trigger 'hide'\r\n    @$el.removeClass('fade').modal 'hide' unless @destroyed\r\n\r\n  onHidden: ->\r\n    @trigger 'hidden'\r\n\r\n  destroy: ->\r\n    @hide() unless @hidden\r\n    @$el.off 'hide.bs.modal'\r\n    super()\r\n"]}