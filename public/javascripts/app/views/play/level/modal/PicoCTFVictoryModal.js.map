{"version":3,"sources":["app/views/play/level/modal/PicoCTFVictoryModal.coffee"],"names":[],"mappings":";AAAA;EAAA;;;AAAA,YAAY,QAAQ,sBAAR;;AACZ,WAAW,QAAQ,kDAAR;;AACX,QAAQ,QAAQ,cAAR;;AAER,MAAM,CAAC,OAAP,GAAuB;;;;;;;gCACrB,KAAI;;gCACJ,WAAU;;gCACV,uBAAsB;;gCAEtB,aAAY,SAAC,OAAD;AACV;IAAA,IAAC,QAAD,GAAW,OAAO,CAAC;IACnB,IAAC,MAAD,GAAS,OAAO,CAAC;IAEjB,OAAO;MAAC,MAAM,OAAO,CAAC,KAAK,CAAC,WAArB;MAAkC,KAAK,IAAC,MAAK,CAAC,cAAc,CAAC,GAA7D;;IACP,IAAC,WAAU,CAAC,kBAAZ,CAA+B;MAAA,KAAK,iBAAL;MAAwB,QAAQ,MAAhC;MAAwC,MAAM,IAA9C;MAAoD,SAAS;eAAA,SAAC,QAAD;iBAC1F,OAAO,CAAC,GAAR,CAAY,WAAZ,EAAyB,IAAzB,EAA+B,kBAA/B,EAAmD,QAAnD;QAD0F;MAAA,QAA7D;KAA/B,CAEC,CAAC,IAFF;IAIA,IAAG,YAAY,IAAC,MAAK,CAAC,GAAP,CAAW,WAAX,CAAf;MACE,IAAC,UAAD,GAAiB,WAAO,CAAC,MAAR,CAAe,eAAa,SAAS,CAAC,QAAvB,GAAgC,WAAhC,GAA2C,SAAS,CAAC,YAApE;MACjB,IAAC,UAAD,GAAa,IAAC,WAAU,CAAC,SAAZ,CAAsB,IAAC,UAAvB,CAAiC,CAAC,MAFjD;;WAIA,IAAC,UAAD,CAAW,SAAX;EAbU;;gCAeZ,WAAU;WACR;EADQ;;;;GApBuC","file":"public/javascripts/app/views/play/level/modal/PicoCTFVictoryModal.js","sourcesContent":["ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/level/modal/picoctf-victory-modal'\r\nLevel = require 'models/Level'\r\n\r\nmodule.exports = class PicoCTFVictoryModal extends ModalView\r\n  id: 'picoctf-victory-modal'\r\n  template: template\r\n  closesOnClickOutside: false\r\n\r\n  initialize: (options) ->\r\n    @session = options.session\r\n    @level = options.level\r\n\r\n    form = {flag: options.world.picoCTFFlag, pid: @level.picoCTFProblem.pid}\r\n    @supermodel.addRequestResource(url: '/picoctf/submit', method: 'POST', data: form, success: (response) =>\r\n      console.log 'submitted', form, 'and got response', response\r\n    ).load()\r\n\r\n    if nextLevel = @level.get('nextLevel')\r\n      @nextLevel = new Level().setURL \"/db/level/#{nextLevel.original}/version/#{nextLevel.majorVersion}\"\r\n      @nextLevel = @supermodel.loadModel(@nextLevel).model\r\n\r\n    @playSound 'victory'\r\n\r\n  onLoaded: ->\r\n    super()\r\n"]}