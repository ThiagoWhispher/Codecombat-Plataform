{"version":3,"sources":["app/templates/play/level/play-web-dev-level-view.jade","app/views/play/level/PlayWebDevLevelView.coffee"],"names":[],"mappings":"AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtBA;AAAA;;ACAA;EAAA;;;AAAA,WAAW,QAAQ,qBAAR;;AAEX,QAAQ,QAAQ,cAAR;;AACR,eAAe,QAAQ,qBAAR;;AACf,iBAAiB,QAAQ,kBAAR;;AAEjB,QAAQ,gBAAR;;AAEA,MAAM,CAAC,OAAP,GAAuB;;;;;;;gCACrB,KAAI;;gCACJ,WAAU,QAAQ,8CAAR;;gCAEV,aAAY,SAAC,OAAD,EAAW,OAAX,EAAqB,SAArB;IAAC,IAAC,WAAD;IAAU,IAAC,WAAD;IAAU,IAAC,aAAD;IAC/B,IAAC,SAAD,GAAY,IAAC,iBAAD,CAAkB,QAAlB;IACZ,IAAC,MAAD,GAAS,IAAC,WAAU,CAAC,SAAZ,CAA0B,UAAM;MAAA,KAAK,IAAC,QAAN;KAAN,CAA1B,CAA8C,CAAC;WACxD,IAAC,QAAD,GAAW,IAAC,WAAU,CAAC,SAAZ,CAA0B,iBAAa;MAAA,KAAK,IAAC,UAAN;KAAb,CAA1B,CAAuD,CAAC;EAHzD;;gCAKZ,WAAU;AACR;IAAA;IACA,IAAC,cAAD,CAAe,IAAC,WAAD,GAAkB,mBAAe;MAAC,OAAO,IAAC,MAAT;KAAf,CAAjC;IACA,QAAQ,CAAC,QAAQ,CAAC,OAAlB,CAA0B,mBAA1B,EAA+C;MAAA,6CAAmB,6BAAnB;MAAkD,QAAQ,IAA1D;KAA/C;IACA,IAAC,IAAG,CAAC,IAAL,CAAU,WAAV,CAAsB,CAAC,KAAvB,CAA6B,IAA7B,CAAkC,CAAC,OAAnC,CAA2C,IAA3C;IACA,EAAE,MAAF,CAAS,CAAC,GAAV,CAAc,UAAd,EAA0B,QAA1B;IACA,IAAC,gBAAD,GAAmB;MACjB,UAAU,mBADO;MAEhB,UAAD,IAAC,SAFgB;MAGjB,WAAW,IAAC,QAAO,CAAC,EAHH;MAIjB,SAAS,IAAC,MAAK,CAAC,EAJC;MAKjB,WAAW,IAAC,MAAK,CAAC,GAAP,CAAW,MAAX,CALM;;iDAOL,CAAE,UAAhB,CAA2B,0BAA3B,EAAuD,IAAC,gBAAxD;EAbQ;;gCAgBV,YAAW,SAAC,KAAD;WACT,EAAE,IAAF,CAAO,CAAC,IAAR,CAAa,KAAK,CAAC,UAAnB;EADS;;gCAGX,UAAS;AACP;IAAA,uGAAsD,CAAE;IACxD,KAAyB,QAAO,CAAC,CAAC,IAAF,CAAO,IAAC,MAAK,CAAC,GAAP,CAAW,QAAX,CAAP,EAA6B;MAAA,IAAI,kBAAJ;KAA7B,CAAP,CAAzB;AAAA,aAAO,WAAP;;IACA,KAAyB,sBAAqB,CAAC,CAAC,IAAF,CAAO,IAAI,CAAC,UAAZ,EAAwB,SAAC,SAAD;AAAe;qDAAgB,CAAE;IAAjC,CAAxB,CAA6E,CAAC,MAAnG,CAAzB;AAAA,aAAO,WAAP;;AACA,WAAO,kBAAkB,CAAC,mBAAmB,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAA3D,CAAmE,mCAAnE,EAAwG,UAAxG;EAJA;;gCAMT,UAAS;AACP;;SAAW,CAAE,OAAb;;IACA,EAAE,MAAF,CAAS,CAAC,GAAV,CAAc,UAAd,EAA0B,SAA1B;WACA;EAHO;;;;GAlCwC","file":"public/javascripts/app/views/play/level/PlayWebDevLevelView.js","sourcesContent":["var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<div id=\\\"web-surface-view\\\"></div><div id=\\\"info-bar\\\" class=\\\"style-flat\\\">\");\nif ( !view.supermodel.finished())\n{\nbuf.push(\"<h1 data-i18n=\\\"common.loading\\\"></h1>\");\n}\nelse\n{\nbuf.push(\"<h1><span data-i18n=\\\"game_dev.creator\\\"></span><span>\" + (jade.escape(null == (jade.interp = ': ') ? \"\" : jade.interp)) + \"</span>\" + (jade.escape((jade.interp = view.session.get('creatorName')) == null ? '' : jade.interp)) + \"</h1>\");\n}\nbuf.push(\"</div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","RootView = require 'views/core/RootView'\r\n\r\nLevel = require 'models/Level'\r\nLevelSession = require 'models/LevelSession'\r\nWebSurfaceView = require './WebSurfaceView'\r\n\r\nrequire 'game-libraries'\r\n\r\nmodule.exports = class PlayWebDevLevelView extends RootView\r\n  id: 'play-web-dev-level-view'\r\n  template: require 'templates/play/level/play-web-dev-level-view'\r\n\r\n  initialize: (@options, @levelID, @sessionID) ->\r\n    @courseID = @getQueryVariable 'course'\r\n    @level = @supermodel.loadModel(new Level _id: @levelID).model\r\n    @session = @supermodel.loadModel(new LevelSession _id: @sessionID).model\r\n\r\n  onLoaded: ->\r\n    super()\r\n    @insertSubView @webSurface = new WebSurfaceView {level: @level}\r\n    Backbone.Mediator.publish 'tome:html-updated', html: @getHTML() ? '<h1>Player has no HTML</h1>', create: true\r\n    @$el.find('#info-bar').delay(4000).fadeOut(2000)\r\n    $('body').css('overflow', 'hidden')  # Don't show tiny scroll bar from our minimal additions to the iframe\r\n    @eventProperties = {\r\n      category: 'Play WebDev Level'\r\n      @courseID\r\n      sessionID: @session.id\r\n      levelID: @level.id\r\n      levelSlug: @level.get('slug')\r\n    }\r\n    window.tracker?.trackEvent 'Play WebDev Level - Load', @eventProperties\r\n\r\n\r\n  showError: (jqxhr) ->\r\n    $('h1').text jqxhr.statusText\r\n\r\n  getHTML: ->\r\n    playerHTML = @session.get('code')?['hero-placeholder']?.plan\r\n    return playerHTML unless hero = _.find @level.get('thangs'), id: 'Hero Placeholder'\r\n    return playerHTML unless programmableConfig = _.find(hero.components, (component) -> component.config?.programmableMethods).config\r\n    return programmableConfig.programmableMethods.plan.languages.html.replace /<playercode>[\\s\\S]*<\\/playercode>/, playerHTML\r\n\r\n  destroy: ->\r\n    @webSurface?.destroy()\r\n    $('body').css('overflow', 'initial')  # Recover from our modifications to body overflow before we leave\r\n    super()\r\n"]}