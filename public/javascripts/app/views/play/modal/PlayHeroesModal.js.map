{"version":3,"sources":["app/templates/play/modal/play-heroes-modal.jade","app/views/play/modal/PlayHeroesModal.coffee"],"names":[],"mappings":"AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9MA;AAAA;;ACAA;EAAA;;;;;AAAA,YAAY,QAAQ,sBAAR;;AACZ,WAAW,QAAQ,wCAAR;;AACX,wBAAwB,QAAQ,sCAAR;;AACxB,iBAAiB,QAAQ,4BAAR;;AACjB,YAAY,QAAQ,kBAAR;;AACZ,gBAAgB,QAAQ,2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","file":"public/javascripts/app/views/play/modal/PlayHeroesModal.js","sourcesContent":["var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),gems = locals_.gems,heroes = locals_.heroes,isIE = locals_.isIE,visibleHero = locals_.visibleHero,codeLanguages = locals_.codeLanguages,codeLanguage = locals_.codeLanguage,confirmButtonI18N = locals_.confirmButtonI18N,me = locals_.me,serverConfig = locals_.serverConfig;buf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"><img src=\\\"/images/pages/play/modal/heroes-background.png\\\" draggable=\\\"false\\\" id=\\\"play-heroes-background\\\"/><h1 data-i18n=\\\"choose_hero.choose_hero\\\"></h1><div id=\\\"gems-count-container\\\"><span id=\\\"gems-count\\\"><div class=\\\"gem gem-20\\\"></div><span class=\\\"spl\\\">\" + (jade.escape(null == (jade.interp = gems) ? \"\" : jade.interp)) + \"</span></span></div><div id=\\\"close-modal\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></div><div id=\\\"hero-carousel\\\" data-interval='0' class=\\\"carousel slide\\\"><div class=\\\"carousel-indicator-container\\\"><ol class=\\\"carousel-indicators\\\">\");\n// iterate heroes\n;(function(){\n  var $$obj = heroes;\n  if ('number' == typeof $$obj.length) {\n\n    for (var index = 0, $$l = $$obj.length; index < $$l; index++) {\n      var hero = $$obj[index];\n\nbuf.push(\"<li\" + (jade.attrs({ 'data-hero-id':(hero.get('original')), 'title':(hero.name), 'data-slide-to':(index), 'data-target':(\"#hero-carousel\"), \"class\": [(\"hero-indicator hero-index-\" + index + (hero.locked ? \" locked\" : \"\") + (hero.purchasable ? \" purchasable\" : \"\") + (hero.restricted ? \" restricted\" : \"\"))] }, {\"data-hero-id\":true,\"title\":true,\"data-slide-to\":true,\"data-target\":true,\"class\":true})) + \"><div class=\\\"hero-avatar\\\"></div>\");\nif ( hero.locked && !hero.purchasable)\n{\nif ( isIE)\n{\nbuf.push(\"<img src=\\\"/images/pages/game-menu/lock-processed.png\\\" draggable=\\\"false\\\" class=\\\"lock-indicator\\\"/>\");\n}\nelse\n{\nbuf.push(\"<img src=\\\"/images/pages/game-menu/lock.png\\\" draggable=\\\"false\\\" class=\\\"lock-indicator\\\"/>\");\n}\n}\nbuf.push(\"</li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var index in $$obj) {\n      $$l++;      var hero = $$obj[index];\n\nbuf.push(\"<li\" + (jade.attrs({ 'data-hero-id':(hero.get('original')), 'title':(hero.name), 'data-slide-to':(index), 'data-target':(\"#hero-carousel\"), \"class\": [(\"hero-indicator hero-index-\" + index + (hero.locked ? \" locked\" : \"\") + (hero.purchasable ? \" purchasable\" : \"\") + (hero.restricted ? \" restricted\" : \"\"))] }, {\"data-hero-id\":true,\"title\":true,\"data-slide-to\":true,\"data-target\":true,\"class\":true})) + \"><div class=\\\"hero-avatar\\\"></div>\");\nif ( hero.locked && !hero.purchasable)\n{\nif ( isIE)\n{\nbuf.push(\"<img src=\\\"/images/pages/game-menu/lock-processed.png\\\" draggable=\\\"false\\\" class=\\\"lock-indicator\\\"/>\");\n}\nelse\n{\nbuf.push(\"<img src=\\\"/images/pages/game-menu/lock.png\\\" draggable=\\\"false\\\" class=\\\"lock-indicator\\\"/>\");\n}\n}\nbuf.push(\"</li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ol></div><div class=\\\"carousel-inner\\\">\");\n// iterate heroes\n;(function(){\n  var $$obj = heroes;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var hero = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'data-hero-id':(hero.get('original')), \"class\": [(\"item hero-item\" + (hero.locked ? \" locked\" : \"\") + (hero.purchasable ? \" purchasable\" : \"\") + (hero.restricted ? \" restricted\" : \"\"))] }, {\"class\":true,\"data-hero-id\":true})) + \"><canvas class=\\\"hero-canvas\\\"></canvas><div class=\\\"hero-pose-image\\\"><img draggable=\\\"false\\\"/></div><div class=\\\"hero-stats\\\"><h2>\" + (jade.escape(null == (jade.interp = hero.name) ? \"\" : jade.interp)) + \"</h2><div class=\\\"hero-description\\\">\" + (jade.escape(null == (jade.interp = hero.description) ? \"\" : jade.interp)) + \"</div><div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"choose_hero.status\\\" class=\\\"stat-label\\\"></div><div\" + (jade.attrs({ 'data-i18n':(hero.restricted ? 'inventory.restricted_title' : (hero.purchasable ? 'play.purchasable' : (hero.locked ? 'play.locked' : 'play.available'))), \"class\": [('stat-value'),('hero-status-value')] }, {\"data-i18n\":true})) + \"></div></div><div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"editor.level_components_type\\\" class=\\\"stat-label\\\"> </div><div\" + (jade.attrs({ 'data-i18n':('general.' +hero.class), \"class\": [('stat-value')] }, {\"data-i18n\":true})) + \"></div></div><div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"choose_hero.weapons\\\" class=\\\"stat-label\\\"></div><div\" + (jade.attrs({ 'data-i18n':('choose_hero.weapons_'+hero.class), \"class\": [('stat-value')] }, {\"data-i18n\":true})) + \"></div></div>\");\nif ( hero.stats)\n{\nif ( hero.stats.skills.length)\n{\nbuf.push(\"<div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"choose_hero.skills\\\" class=\\\"stat-label\\\"></div><div class=\\\"stat-value\\\">\" + (jade.escape(null == (jade.interp = hero.stats.skills.join(', ')) ? \"\" : jade.interp)) + \"</div></div>\");\n}\n// iterate ['attack', 'health', 'speed']\n;(function(){\n  var $$obj = ['attack', 'health', 'speed'];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var stat = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'title':(hero.stats[stat].description), \"class\": [('hero-stat-row'),(stat)] }, {\"class\":true,\"title\":true})) + \"><div\" + (jade.attrs({ 'data-i18n':('choose_hero.'+stat), \"class\": [('stat-label')] }, {\"data-i18n\":true})) + \"></div><div class=\\\"stat-value\\\"><div class=\\\"stat-progress\\\"><div\" + (jade.attrs({ 'style':(\"width: \" + (parseInt(hero.stats[stat].relative * 100)) + \"%\"), \"class\": [('stat-progress-bar')] }, {\"style\":true})) + \"></div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var stat = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'title':(hero.stats[stat].description), \"class\": [('hero-stat-row'),(stat)] }, {\"class\":true,\"title\":true})) + \"><div\" + (jade.attrs({ 'data-i18n':('choose_hero.'+stat), \"class\": [('stat-label')] }, {\"data-i18n\":true})) + \"></div><div class=\\\"stat-value\\\"><div class=\\\"stat-progress\\\"><div\" + (jade.attrs({ 'style':(\"width: \" + (parseInt(hero.stats[stat].relative * 100)) + \"%\"), \"class\": [('stat-progress-bar')] }, {\"style\":true})) + \"></div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var hero = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'data-hero-id':(hero.get('original')), \"class\": [(\"item hero-item\" + (hero.locked ? \" locked\" : \"\") + (hero.purchasable ? \" purchasable\" : \"\") + (hero.restricted ? \" restricted\" : \"\"))] }, {\"class\":true,\"data-hero-id\":true})) + \"><canvas class=\\\"hero-canvas\\\"></canvas><div class=\\\"hero-pose-image\\\"><img draggable=\\\"false\\\"/></div><div class=\\\"hero-stats\\\"><h2>\" + (jade.escape(null == (jade.interp = hero.name) ? \"\" : jade.interp)) + \"</h2><div class=\\\"hero-description\\\">\" + (jade.escape(null == (jade.interp = hero.description) ? \"\" : jade.interp)) + \"</div><div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"choose_hero.status\\\" class=\\\"stat-label\\\"></div><div\" + (jade.attrs({ 'data-i18n':(hero.restricted ? 'inventory.restricted_title' : (hero.purchasable ? 'play.purchasable' : (hero.locked ? 'play.locked' : 'play.available'))), \"class\": [('stat-value'),('hero-status-value')] }, {\"data-i18n\":true})) + \"></div></div><div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"editor.level_components_type\\\" class=\\\"stat-label\\\"> </div><div\" + (jade.attrs({ 'data-i18n':('general.' +hero.class), \"class\": [('stat-value')] }, {\"data-i18n\":true})) + \"></div></div><div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"choose_hero.weapons\\\" class=\\\"stat-label\\\"></div><div\" + (jade.attrs({ 'data-i18n':('choose_hero.weapons_'+hero.class), \"class\": [('stat-value')] }, {\"data-i18n\":true})) + \"></div></div>\");\nif ( hero.stats)\n{\nif ( hero.stats.skills.length)\n{\nbuf.push(\"<div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"choose_hero.skills\\\" class=\\\"stat-label\\\"></div><div class=\\\"stat-value\\\">\" + (jade.escape(null == (jade.interp = hero.stats.skills.join(', ')) ? \"\" : jade.interp)) + \"</div></div>\");\n}\n// iterate ['attack', 'health', 'speed']\n;(function(){\n  var $$obj = ['attack', 'health', 'speed'];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var stat = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'title':(hero.stats[stat].description), \"class\": [('hero-stat-row'),(stat)] }, {\"class\":true,\"title\":true})) + \"><div\" + (jade.attrs({ 'data-i18n':('choose_hero.'+stat), \"class\": [('stat-label')] }, {\"data-i18n\":true})) + \"></div><div class=\\\"stat-value\\\"><div class=\\\"stat-progress\\\"><div\" + (jade.attrs({ 'style':(\"width: \" + (parseInt(hero.stats[stat].relative * 100)) + \"%\"), \"class\": [('stat-progress-bar')] }, {\"style\":true})) + \"></div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var stat = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'title':(hero.stats[stat].description), \"class\": [('hero-stat-row'),(stat)] }, {\"class\":true,\"title\":true})) + \"><div\" + (jade.attrs({ 'data-i18n':('choose_hero.'+stat), \"class\": [('stat-label')] }, {\"data-i18n\":true})) + \"></div><div class=\\\"stat-value\\\"><div class=\\\"stat-progress\\\"><div\" + (jade.attrs({ 'style':(\"width: \" + (parseInt(hero.stats[stat].relative * 100)) + \"%\"), \"class\": [('stat-progress-bar')] }, {\"style\":true})) + \"></div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><a role=\\\"button\\\" data-slide=\\\"prev\\\" href=\\\"#hero-carousel\\\" class=\\\"left\\\"><span class=\\\"glyphicon glyphicon-play\\\"></span></a><a role=\\\"button\\\" data-slide=\\\"next\\\" href=\\\"#hero-carousel\\\" class=\\\"right\\\"><span class=\\\"glyphicon glyphicon-play\\\"></span></a></div><div id=\\\"hero-footer\\\">\");\nif ( visibleHero)\n{\nif ( !visibleHero.get('original'))\n{\nbuf.push(\"<div id=\\\"loading-hero-explanation\\\"><h2 data-i18n=\\\"common.loading\\\">Loading...</h2></div>\");\n}\nelse if ( visibleHero.restricted)\n{\nbuf.push(\"<div id=\\\"restricted-hero-explanation\\\"><h2><span>\" + (jade.escape(null == (jade.interp = visibleHero.name) ? \"\" : jade.interp)) + \"</span><span data-i18n=\\\"inventory.restricted_title\\\" class=\\\"spl\\\">Restricted</span></h2><span data-i18n=\\\"choose_hero.restricted_to_certain_heroes\\\" class=\\\"spr\\\">Only certain heroes can play this level.</span></div><button id=\\\"restricted-hero-button\\\" data-i18n=\\\"inventory.restricted_title\\\" class=\\\"btn disabled btn-illustrated\\\">Restricted</button>\");\n}\nelse if ( visibleHero.purchasable)\n{\nbuf.push(\"<div id=\\\"purchasable-hero-explanation\\\"><h2 data-i18n=\\\"choose_hero.available_for_purchase\\\">Available for Purchase</h2></div><button id=\\\"purchase-hero-button\\\" class=\\\"btn unlock-button\\\"><span data-i18n=\\\"play.unlock\\\" class=\\\"spr\\\">Unlock</span>\");\nif(!visibleHero.get('gems')) {\nconsole.error('Huh, we loaded the hero with no gem cost.');\nvisibleHero.set('gems', {ninja: 400, librarian: 630, samurai: 1000, trapper: 1400, \"potion-master\": 1800, \"forest-archer\": 2500, sorcerer: 3400, raiser: 4600, necromancer: 6300, pixie: 8500, goliath: 12000, guardian: 16000, \"dark-wizard\": 21000, assassin: 29000}[visibleHero.get('slug')] || 99999);\n}\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = visibleHero.get('gems')) ? \"\" : jade.interp)) + \"</span><span class=\\\"gem gem-20\\\"></span></button>\");\n}\nelse if ( visibleHero.locked)\n{\nbuf.push(\"<div id=\\\"locked-hero-explanation\\\"><h2><span>\" + (jade.escape(null == (jade.interp = visibleHero.name) ? \"\" : jade.interp)) + \"</span><span data-i18n=\\\"play.locked\\\" class=\\\"spl\\\">Locked</span></h2><span data-i18n=\\\"choose_hero.level_to_unlock\\\" class=\\\"spr\\\">Level to unlock:</span><strong>\" + (jade.escape(null == (jade.interp = visibleHero.unlockLevelName || '???') ? \"\" : jade.interp)) + \"</strong></div>\");\n}\nelse if ( visibleHero.loaded)\n{\nbuf.push(\"<div class=\\\"form\\\"><div class=\\\"form-group select-group\\\"><span data-i18n=\\\"choose_hero.programming_language_description\\\" class=\\\"help-block\\\">Which programming language do you want to use?</span><select id=\\\"option-code-language\\\" name=\\\"code-language\\\">\");\n// iterate codeLanguages\n;(function(){\n  var $$obj = codeLanguages;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var option = $$obj[$index];\n\nbuf.push(\"<option\" + (jade.attrs({ 'value':(option.id), 'selected':(codeLanguage === option.id) }, {\"value\":true,\"selected\":true})) + \">\" + (jade.escape(null == (jade.interp = option.name) ? \"\" : jade.interp)) + \"</option>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var option = $$obj[$index];\n\nbuf.push(\"<option\" + (jade.attrs({ 'value':(option.id), 'selected':(codeLanguage === option.id) }, {\"value\":true,\"selected\":true})) + \">\" + (jade.escape(null == (jade.interp = option.name) ? \"\" : jade.interp)) + \"</option>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</select></div></div><a\" + (jade.attrs({ 'id':('confirm-button'), 'data-i18n':(confirmButtonI18N) }, {\"data-i18n\":true})) + \"></a>\");\n}\n}\nbuf.push(\"</div>\");\nif ( !me.finishedAnyLevels() && serverConfig.showCodePlayAds)\n{\nbuf.push(\"<a href=\\\"https://lenovogamestate.com/\\\">\");\nvar url = \"/images/common/codeplay/NA_ChooseHeroPage_Yoga520_800x90.png\"\nif ( me.isFromUk())\n{\nurl = \"/images/common/codeplay/UK_ChooseHeroPage_Yoga510_800x90.png\"\n}\nbuf.push(\"<img\" + (jade.attrs({ 'id':('codeplay-choose-hero-ad'), 'src':(url) }, {\"src\":true})) + \"/></a>\");\n}\nbuf.push(\"</div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/modal/play-heroes-modal'\r\nbuyGemsPromptTemplate = require 'templates/play/modal/buy-gems-prompt'\r\nCocoCollection = require 'collections/CocoCollection'\r\nThangType = require 'models/ThangType'\r\nSpriteBuilder = require 'lib/sprites/SpriteBuilder'\r\nAudioPlayer = require 'lib/AudioPlayer'\r\nutils = require 'core/utils'\r\nBuyGemsModal = require 'views/play/modal/BuyGemsModal'\r\nCreateAccountModal = require 'views/core/CreateAccountModal'\r\nPurchase = require 'models/Purchase'\r\nLayerAdapter = require 'lib/surface/LayerAdapter'\r\nLank = require 'lib/surface/Lank'\r\n\r\nmodule.exports = class PlayHeroesModal extends ModalView\r\n  className: 'modal fade play-modal'\r\n  template: template\r\n  id: 'play-heroes-modal'\r\n\r\n  events:\r\n    'slide.bs.carousel #hero-carousel': 'onHeroChanged'\r\n    'change #option-code-language': 'onCodeLanguageChanged'\r\n    'click #close-modal': 'hide'\r\n    'click #confirm-button': 'saveAndHide'\r\n    'click .unlock-button': 'onUnlockButtonClicked'\r\n    'click .buy-gems-prompt-button': 'onBuyGemsPromptButtonClicked'\r\n    'click': 'onClickedSomewhere'\r\n\r\n  shortcuts:\r\n    'left': -> @$el.find('#hero-carousel').carousel('prev') if @heroes.models.length and not @$el.hasClass 'secret'\r\n    'right': -> @$el.find('#hero-carousel').carousel('next') if @heroes.models.length and not @$el.hasClass 'secret'\r\n    'enter': -> @saveAndHide() if @visibleHero and not @visibleHero.locked\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    options ?= {}\r\n    @confirmButtonI18N = options.confirmButtonI18N ? \"common.save\"\r\n    @heroes = new CocoCollection([], {model: ThangType})\r\n    @heroes.url = '/db/thang.type?view=heroes'\r\n    @heroes.setProjection ['original','name','slug','soundTriggers','featureImages','gems','heroClass','description','components','extendedName','unlockLevelName','i18n','poseImage']\r\n    @heroes.comparator = 'gems'\r\n    @listenToOnce @heroes, 'sync', @onHeroesLoaded\r\n    @supermodel.loadCollection(@heroes, 'heroes')\r\n    @stages = {}\r\n    @layers = []\r\n    @session = options.session\r\n    @initCodeLanguageList options.hadEverChosenHero\r\n    @heroAnimationInterval = setInterval @animateHeroes, 1000\r\n\r\n  onHeroesLoaded: ->\r\n    @formatHero hero for hero in @heroes.models\r\n\r\n  formatHero: (hero) ->\r\n    hero.name = utils.i18n hero.attributes, 'extendedName'\r\n    hero.name ?= utils.i18n hero.attributes, 'name'\r\n    hero.description = utils.i18n hero.attributes, 'description'\r\n    hero.unlockLevelName = utils.i18n hero.attributes, 'unlockLevelName'\r\n    original = hero.get('original')\r\n    hero.locked = not me.ownsHero(original)\r\n    hero.purchasable = hero.locked and (original in (me.get('earned')?.heroes ? []))\r\n    if @options.level and allowedHeroes = @options.level.get 'allowedHeroes'\r\n      hero.restricted = not (hero.get('original') in allowedHeroes)\r\n    hero.class = (hero.get('heroClass') or 'warrior').toLowerCase()\r\n    hero.stats = hero.getHeroStats()\r\n\r\n  getRenderData: (context={}) ->\r\n    context = super(context)\r\n    context.heroes = @heroes.models\r\n    context.level = @options.level\r\n    context.codeLanguages = @codeLanguageList\r\n    context.codeLanguage = @codeLanguage = @options?.session?.get('codeLanguage') ? me.get('aceConfig')?.language ? 'python'\r\n    context.confirmButtonI18N = @confirmButtonI18N\r\n    context.visibleHero = @visibleHero\r\n    context.gems = me.gems()\r\n    context.isIE = @isIE()\r\n    context\r\n\r\n  afterRender: ->\r\n    super()\r\n    return unless @supermodel.finished()\r\n    @playSound 'game-menu-open'\r\n    @$el.find('.hero-avatar').addClass 'ie' if @isIE()\r\n    heroes = @heroes.models\r\n    @$el.find('.hero-indicator').each ->\r\n      heroID = $(@).data('hero-id')\r\n      hero = _.find heroes, (hero) -> hero.get('original') is heroID\r\n      $(@).find('.hero-avatar').css('background-image', \"url(#{hero.getPortraitURL()})\").addClass('has-tooltip').tooltip()\r\n    @canvasWidth = 313  # @$el.find('canvas').width() # unreliable, whatever\r\n    @canvasHeight = @$el.find('canvas').height()\r\n    heroConfig = @options?.session?.get('heroConfig') ? me.get('heroConfig') ? {}\r\n    heroIndex = Math.max 0, _.findIndex(heroes, ((hero) -> hero.get('original') is heroConfig.thangType))\r\n    @$el.find(\".hero-item:nth-child(#{heroIndex + 1}), .hero-indicator:nth-child(#{heroIndex + 1})\").addClass('active')\r\n    @onHeroChanged direction: null, relatedTarget: @$el.find('.hero-item')[heroIndex]\r\n    @$el.find('.hero-stat').addClass('has-tooltip').tooltip()\r\n    @buildCodeLanguages()\r\n\r\n  rerenderFooter: ->\r\n    @formatHero @visibleHero\r\n    @renderSelectors '#hero-footer'\r\n    @buildCodeLanguages()\r\n    @$el.find('#gems-count-container').toggle Boolean @visibleHero.purchasable\r\n\r\n  initCodeLanguageList: (hadEverChosenHero) ->\r\n    if application.isIPadApp\r\n      @codeLanguageList = [\r\n        {id: 'python', name: \"Python (#{$.i18n.t('choose_hero.default')})\"}\r\n        {id: 'javascript', name: 'JavaScript'}\r\n      ]\r\n    else\r\n      @codeLanguageList = switch me.getDefaultLanguageGroup()\r\n        when 'javascript'\r\n          [\r\n            {id: 'javascript', name: \"JavaScript (#{$.i18n.t('choose_hero.default')})\"}\r\n            {id: 'python', name: \"Python\"}\r\n            {id: 'coffeescript', name: \"CoffeeScript (#{$.i18n.t('choose_hero.experimental')})\"}\r\n            {id: 'lua', name: 'Lua'}\r\n          ]\r\n        else\r\n          [\r\n            {id: 'python', name: \"Python (#{$.i18n.t('choose_hero.default')})\"}\r\n            {id: 'javascript', name: 'JavaScript'}\r\n            {id: 'coffeescript', name: \"CoffeeScript (#{$.i18n.t('choose_hero.experimental')})\"}\r\n            {id: 'lua', name: 'Lua'}\r\n          ]\r\n\r\n      if me.isAdmin() or not application.isProduction()\r\n        @codeLanguageList.push {id: 'java', name: \"Java (#{$.i18n.t('choose_hero.experimental')})\"}\r\n\r\n  onHeroChanged: (e) ->\r\n    direction = e.direction  # 'left' or 'right'\r\n    heroItem = $(e.relatedTarget)\r\n    hero = _.find @heroes.models, (hero) -> hero.get('original') is heroItem.data('hero-id')\r\n    return console.error \"Couldn't find hero from heroItem:\", heroItem unless hero\r\n    heroIndex = heroItem.index()\r\n    hero = @loadHero hero, heroIndex\r\n    @preloadHero heroIndex + 1\r\n    @preloadHero heroIndex - 1\r\n    @selectedHero = hero unless hero.locked\r\n    @visibleHero = hero\r\n    @rerenderFooter()\r\n    @trigger 'hero-loaded', {hero: hero}\r\n\r\n  getFullHero: (original) ->\r\n    url = \"/db/thang.type/#{original}/version\"\r\n    if fullHero = @supermodel.getModel url\r\n      return fullHero\r\n    fullHero = new ThangType()\r\n    fullHero.setURL url\r\n    fullHero = (@supermodel.loadModel fullHero).model\r\n    fullHero\r\n\r\n  preloadHero: (heroIndex) ->\r\n    return unless hero = @heroes.models[heroIndex]\r\n    @loadHero hero, heroIndex, true\r\n\r\n  loadHero: (hero, heroIndex, preloading=false) ->\r\n    createjs.Ticker.removeEventListener 'tick', stage for stage in _.values @stages\r\n    createjs.Ticker.setFPS 30  # In case we paused it from being inactive somewhere else\r\n    if poseImage = hero.get 'poseImage'\r\n      $(\".hero-item[data-hero-id='#{hero.get('original')}'] canvas\").hide()\r\n      $(\".hero-item[data-hero-id='#{hero.get('original')}'] .hero-pose-image\").show().find('img').prop('src', '/file/' + poseImage)\r\n      @playSelectionSound hero unless preloading\r\n      return hero\r\n    if stage = @stages[heroIndex]\r\n      unless preloading\r\n        _.defer -> createjs.Ticker.addEventListener 'tick', stage  # Deferred, otherwise it won't start updating for some reason.\r\n        @playSelectionSound hero\r\n      return hero\r\n    fullHero = @getFullHero hero.get 'original'\r\n    onLoaded = =>\r\n      canvas = $(\".hero-item[data-hero-id='#{fullHero.get('original')}'] canvas\")\r\n      return unless canvas.length  # Don't render it if it's not on the screen.\r\n      unless fullHero.get 'raw'\r\n        console.error \"Couldn't make animation for #{fullHero.get('name')} with attributes #{_.cloneDeep(fullHero.attributes)}. Was it loaded with an improper projection or something?\", fullHero\r\n        @rerenderFooter()\r\n        return\r\n      canvas.show().prop width: @canvasWidth, height: @canvasHeight\r\n\r\n      layer = new LayerAdapter({webGL:true})\r\n      @layers.push layer\r\n      layer.resolutionFactor = 8 # hi res!\r\n      layer.buildAsync = false\r\n      multiplier = 7\r\n      layer.scaleX = layer.scaleY = multiplier\r\n      lank = new Lank(fullHero, {preloadSounds: false})\r\n\r\n      layer.addLank(lank)\r\n      layer.on 'new-spritesheet', ->\r\n        #- maybe put some more normalization here?\r\n        m = multiplier\r\n        m *= 0.75 if fullHero.get('slug') in ['knight', 'samurai', 'librarian', 'sorcerer', 'necromancer']  # These heroes are larger for some reason. Shrink 'em.\r\n        m *= 0.4 if fullHero.get('slug') is 'goliath'  # Just too big!\r\n        m *= 0.9 if fullHero.get('slug') is 'champion'  # Gotta fit her hair in there\r\n        layer.container.scaleX = layer.container.scaleY = m\r\n        layer.container.children[0].x = 160/m\r\n        layer.container.children[0].y = 250/m\r\n        if fullHero.get('slug') in ['forest-archer', 'librarian', 'sorcerer', 'potion-master', 'necromancer', 'code-ninja']\r\n          layer.container.children[0].y -= 3\r\n        if fullHero.get('slug') in ['librarian', 'sorcerer', 'potion-master', 'necromancer', 'goliath']\r\n          layer.container.children[0].x -= 3\r\n\r\n      stage = new createjs.SpriteStage(canvas[0])\r\n      @stages[heroIndex] = stage\r\n      stage.addChild layer.container\r\n      stage.update()\r\n      unless preloading\r\n        createjs.Ticker.addEventListener 'tick', stage\r\n        @playSelectionSound hero\r\n      @rerenderFooter()\r\n    if fullHero.loaded\r\n      _.defer onLoaded\r\n    else\r\n      @listenToOnce fullHero, 'sync', onLoaded\r\n    fullHero\r\n\r\n  animateHeroes: =>\r\n    return unless @visibleHero\r\n    heroIndex = Math.max 0, _.findIndex(@heroes.models, ((hero) => hero.get('original') is @visibleHero.get('original')))\r\n    animation = _.sample(['attack', 'move_side', 'move_fore'])  # Must be in LayerAdapter default actions.\r\n    @stages[heroIndex]?.children?[0]?.children?[0]?.gotoAndPlay? animation\r\n\r\n  playSelectionSound: (hero) ->\r\n    return if @$el.hasClass 'secret'\r\n    @currentSoundInstance?.stop()\r\n    return unless sounds = hero.get('soundTriggers')?.selected\r\n    return unless sound = sounds[Math.floor Math.random() * sounds.length]\r\n    name = AudioPlayer.nameForSoundReference sound\r\n    AudioPlayer.preloadSoundReference sound\r\n    @currentSoundInstance = AudioPlayer.playSound name, 1\r\n    @currentSoundInstance\r\n\r\n  buildCodeLanguages: ->\r\n    $select = @$el.find('#option-code-language')\r\n    $select.fancySelect().parent().find('.options li').each ->\r\n      languageName = $(@).text()\r\n      languageID = $(@).data('value')\r\n      blurb = $.i18n.t(\"choose_hero.#{languageID}_blurb\")\r\n      $(@).text(\"#{languageName} - #{blurb}\")\r\n\r\n  onCodeLanguageChanged: (e) ->\r\n    @codeLanguage = @$el.find('#option-code-language').val()\r\n    @codeLanguageChanged = true\r\n    window.tracker?.trackEvent 'Campaign changed code language', category: 'Campaign Hero Select', codeLanguage: @codeLanguage, levelSlug: @options.level?.get('slug')\r\n\r\n  #- Purchasing the hero\r\n\r\n  onUnlockButtonClicked: (e) ->\r\n    e.stopPropagation()\r\n    button = $(e.target).closest('button')\r\n    affordable = @visibleHero.get('gems') <= me.gems()\r\n    if not affordable\r\n      @playSound 'menu-button-click'\r\n      @askToBuyGems button unless features.freeOnly\r\n    else if button.hasClass('confirm')\r\n      @playSound 'menu-button-unlock-end'\r\n      purchase = Purchase.makeFor(@visibleHero)\r\n      purchase.save()\r\n\r\n      #- set local changes to mimic what should happen on the server...\r\n      purchased = me.get('purchased') ? {}\r\n      purchased.heroes ?= []\r\n      purchased.heroes.push(@visibleHero.get('original'))\r\n      me.set('purchased', purchased)\r\n      me.set('spent', (me.get('spent') ? 0) + @visibleHero.get('gems'))\r\n\r\n      #- ...then rerender visible hero\r\n      heroEntry = @$el.find(\".hero-item[data-hero-id='#{@visibleHero.get('original')}']\")\r\n      heroEntry.find('.hero-status-value').attr('data-i18n', 'play.available').i18n()\r\n      heroEntry.removeClass 'locked purchasable'\r\n      @selectedHero = @visibleHero\r\n      @rerenderFooter()\r\n\r\n      Backbone.Mediator.publish 'store:hero-purchased', hero: @visibleHero, heroSlug: @visibleHero.get('slug')\r\n    else\r\n      @playSound 'menu-button-unlock-start'\r\n      button.addClass('confirm').text($.i18n.t('play.confirm'))\r\n      @$el.one 'click', (e) ->\r\n        button.removeClass('confirm').text($.i18n.t('play.unlock')) if e.target isnt button[0]\r\n\r\n  askToSignUp: ->\r\n    createAccountModal = new CreateAccountModal supermodel: @supermodel\r\n    return @openModalView createAccountModal\r\n\r\n  askToBuyGems: (unlockButton) ->\r\n    @$el.find('.unlock-button').popover 'destroy'\r\n    popoverTemplate = buyGemsPromptTemplate {}\r\n    unlockButton.popover(\r\n      animation: true\r\n      trigger: 'manual'\r\n      placement: 'left'\r\n      content: ' '  # template has it\r\n      container: @$el\r\n      template: popoverTemplate\r\n    ).popover 'show'\r\n    popover = unlockButton.data('bs.popover')\r\n    popover?.$tip?.i18n()\r\n\r\n  onBuyGemsPromptButtonClicked: (e) ->\r\n    return @askToSignUp() if me.get('anonymous')\r\n    @openModalView new BuyGemsModal()\r\n\r\n  onClickedSomewhere: (e) ->\r\n    return if @destroyed\r\n    @$el.find('.unlock-button').popover 'destroy'\r\n\r\n\r\n  #- Exiting\r\n\r\n  saveAndHide: ->\r\n    hero = @selectedHero?.get('original')\r\n    hero ?= @visibleHero?.get('original') if @visibleHero?.loaded and not @visibleHero.locked\r\n    unless hero\r\n      console.error 'Somehow we tried to hide without having a hero selected yet...'\r\n      noty {\r\n        text: \"Error: hero not loaded. If this keeps happening, please report the bug.\"\r\n        layout: 'topCenter'\r\n        timeout: 10000\r\n        type: 'error'\r\n      }\r\n      return\r\n\r\n    if @session\r\n      changed = @updateHeroConfig(@session, hero)\r\n      if @session.get('codeLanguage') isnt @codeLanguage\r\n        @session.set('codeLanguage', @codeLanguage)\r\n        changed = true\r\n        #Backbone.Mediator.publish 'tome:change-language', language: @codeLanguage, reload: true  # We'll reload the PlayLevelView instead.\r\n\r\n      @session.patch() if changed\r\n\r\n    changed = @updateHeroConfig(me, hero)\r\n    aceConfig = _.clone(me.get('aceConfig')) or {}\r\n    if @codeLanguage isnt aceConfig.language\r\n      aceConfig.language = @codeLanguage\r\n      me.set 'aceConfig', aceConfig\r\n      changed = true\r\n\r\n    me.patch() if changed\r\n\r\n    @hide()\r\n    @trigger?('confirm-click', hero: @selectedHero)\r\n\r\n  updateHeroConfig: (model, hero) ->\r\n    return false unless hero\r\n    heroConfig = _.clone(model.get('heroConfig')) or {}\r\n    if heroConfig.thangType isnt hero\r\n      heroConfig.thangType = hero\r\n      model.set('heroConfig', heroConfig)\r\n      return true\r\n\r\n  onHidden: ->\r\n    super()\r\n    @playSound 'game-menu-close'\r\n\r\n  destroy: ->\r\n    clearInterval @heroAnimationInterval\r\n    for heroIndex, stage of @stages\r\n      createjs.Ticker.removeEventListener \"tick\", stage\r\n      stage.removeAllChildren()\r\n    layer.destroy() for layer in @layers\r\n    super()\r\n"]}