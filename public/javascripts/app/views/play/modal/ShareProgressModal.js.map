{"version":3,"sources":["app/templates/play/modal/share-progress-modal.jade","app/views/play/modal/ShareProgressModal.coffee"],"names":[],"mappings":"AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;;ACAA;EAAA;;;AAAA,YAAY,QAAQ,sBAAR;;AACZ,WAAW,QAAQ,2CAAR;;AACX,UAAU,QAAQ,cAAR;;AAEV,MAAM,CAAC,OAAP,GAAuB;;;;;;;+BACrB,KAAI;;+BACJ,WAAU;;+BACV,QAAO;;+BACP,uBAAsB;;+BAEtB,SACE;IAAA,oBAAoB,MAApB;IACA,wBAAwB,MADxB;IAEA,mBAAmB,aAFnB;;;+BAIF,cAAa,SAAC,CAAD;AACX;IAAA,QAAQ,EAAE,cAAF,CAAiB,CAAC,GAAlB;IACR,KAAO,kBAAkB,CAAC,IAAnB,CAAwB,KAAxB,CAAP;MACE,EAAE,cAAF,CAAiB,CAAC,MAAlB,EAA0B,CAAC,QAA3B,CAAoC,WAApC;MACA,EAAE,gBAAF,CAAmB,CAAC,IAApB;AACA,aAAO,MAHT;;IAKA,UAAU,IAAC,WAAU,CAAC,kBAAZ,CAA+B,qBAA/B,EAAsD;MAC9D,KAAK,gCADyD;MAE9D,MAAM;QAAC,OAAO,KAAR;QAAe,MAAM,6BAArB;OAFwD;MAG9D,QAAQ,MAHsD;KAAtD,EAIP,CAJO;IAKV,OAAO,CAAC,IAAR;IAEA,OAAO,CAAC,IAAR,CAAa,mBAAb,EAAkC,IAAlC;WACA,IAAC,KAAD;EAfW;;;;GAXmC","file":"public/javascripts/app/views/play/modal/ShareProgressModal.js","sourcesContent":["var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"><img src=\\\"/images/pages/play/modal/parental_prompt_modal_background.png\\\" class=\\\"background-img\\\"/><img src=\\\"/images/pages/play/modal/parental_nudge_wizard.png\\\" class=\\\"wizard-img\\\"/><div class=\\\"blurb-container\\\"> <h1 data-i18n=\\\"share_progress_modal.title\\\"></h1><p data-i18n=\\\"share_progress_modal.blurb\\\"></p><div class=\\\"container-fluid send-container\\\"><div class=\\\"row\\\"><div class=\\\"col-xs-12 email-form\\\"><p data-i18n=\\\"share_progress_modal.form_blurb\\\"></p><div><label data-i18n=\\\"share_progress_modal.form_label\\\"></label><input type=\\\"email\\\" data-i18n=\\\"[placeholder]share_progress_modal.placeholder\\\" class=\\\"form-control email-input\\\"/></div></div></div><div class=\\\"row\\\"><div class=\\\"col-xs-8\\\"><div data-i18n=\\\"share_progress_modal.email_invalid\\\" class=\\\"email-invalid\\\"></div></div><div class=\\\"col-xs-4 text-right\\\"><button data-i18n=\\\"common.send\\\" class=\\\"btn btn-illustrated send-btn\\\"></button></div></div><div class=\\\"row continue-container\\\"><div class=\\\"col-xs-12 text-left\\\"><a data-i18n=\\\"common.continue\\\" class=\\\"continue-link\\\"></a></div></div></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/modal/share-progress-modal'\r\nstorage = require 'core/storage'\r\n\r\nmodule.exports = class ShareProgressModal extends ModalView\r\n  id: 'share-progress-modal'\r\n  template: template\r\n  plain: true\r\n  closesOnClickOutside: false\r\n\r\n  events:\r\n    'click .close-btn': 'hide'\r\n    'click .continue-link': 'hide'\r\n    'click .send-btn': 'onClickSend'\r\n\r\n  onClickSend: (e) ->\r\n    email = $('.email-input').val()\r\n    unless /[\\w\\.]+@\\w+\\.\\w+/.test email\r\n      $('.email-input').parent().addClass('has-error')\r\n      $('.email-invalid').show()\r\n      return false\r\n\r\n    request = @supermodel.addRequestResource 'send_one_time_email', {\r\n      url: '/db/user/-/send_one_time_email'\r\n      data: {email: email, type: 'share progress modal parent'}\r\n      method: 'POST'\r\n    }, 0\r\n    request.load()\r\n\r\n    storage.save 'sent-parent-email', true\r\n    @hide()\r\n"]}