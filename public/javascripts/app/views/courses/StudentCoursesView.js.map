{"version":3,"sources":["app/templates/courses/student-courses-view.jade","app/views/courses/StudentCoursesView.coffee"],"names":[],"mappings":"AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtLA;AAAA;;ACAA;EAAA;;;AAAA,MAAM,QAAQ,kBAAR;;AACN,qBAAqB,QAAQ,+BAAR;;AACrB,iBAAiB,QAAQ,4BAAR;;AACjB,SAAS,QAAQ,eAAR;;AACT,YAAY,QAAQ,kBAAR;;AACZ,OAAO,QAAQ,aAAR;;AACP,iBAAiB,QAAQ,uBAAR;;AACjB,WAAW,QAAQ,qBAAR;;AACX,WAAW,QAAQ,wCAAR;;AACX,QAAQ,QAAQ,YAAR;;AAKR,MAAM,CAAC,OAAP,GAAuB;;;+B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","file":"public/javascripts/app/views/courses/StudentCoursesView.js","sourcesContent":["var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),features = locals_.features,me = locals_.me,view = locals_.view,usesSocialMedia = locals_.usesSocialMedia,isIE = locals_.isIE,fbRef = locals_.fbRef;buf.push(\"<div id=\\\"site-nav\\\"><a href=\\\"/\\\"><img id=\\\"nav-logo\\\" src=\\\"/images/pages/base/logo.png\\\" title=\\\"CodeCombat - Learn how to code by playing a game\\\" alt=\\\"CodeCombat\\\"/></a><div id=\\\"site-nav-links\\\"><a href=\\\"/\\\"><img id=\\\"small-nav-logo\\\" src=\\\"/images/pages/base/logo.png\\\" title=\\\"CodeCombat - Learn how to code by playing a game\\\" alt=\\\"CodeCombat\\\"/></a><a href=\\\"/\\\"><span class=\\\"glyphicon glyphicon-home\\\"></span></a>\");\nif ( !features.playViewsOnly)\n{\nbuf.push(\"<a href=\\\"/play\\\" data-i18n=\\\"common.play\\\"></a><a href=\\\"/play/ladder\\\" data-i18n=\\\"game_menu.multiplayer_tab\\\"></a>\");\nif ( me.isStudent())\n{\nbuf.push(\"<a href=\\\"/students\\\" data-i18n=\\\"nav.my_courses\\\"></a>\");\n}\nif ( me.isTeacher())\n{\nbuf.push(\"<a href=\\\"/teachers/classes\\\" data-i18n=\\\"nav.my_classrooms\\\"></a>\");\n}\nbuf.push(\"<a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a><a\" + (jade.attrs({ 'href':(view.forumLink()), 'data-i18n':(\"nav.forum\") }, {\"href\":true,\"data-i18n\":true})) + \"></a><a href=\\\"/community\\\" data-i18n=\\\"nav.community\\\"></a>\");\nif ( me.get('anonymous') === false)\n{\nbuf.push(\"<span class=\\\"dropdown\\\"><button href=\\\"#\\\" data-toggle=\\\"dropdown\\\" class=\\\"btn btn-sm header-font dropdown-toggle\\\">\");\nif ( me.get('photoURL'))\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(me.getPhotoURL(18)), 'alt':(\"\"), \"class\": [('account-settings-image')] }, {\"src\":true,\"alt\":true})) + \"/>\");\n}\nelse\n{\nbuf.push(\"<i class=\\\"glyphicon glyphicon-user\\\"></i>\");\n}\nbuf.push(\"<span data-i18n=\\\"nav.account\\\" href=\\\"/account\\\" class=\\\"spl spr\\\"></span><span class=\\\"caret\\\"></span></button><ul role=\\\"menu\\\" class=\\\"dropdown-menu\\\"><li class=\\\"user-dropdown-header\\\"><span class=\\\"user-level\\\">\" + (jade.escape(null == (jade.interp = me.level()) ? \"\" : jade.interp)) + \"</span><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\") }, {\"href\":true})) + \"><div\" + (jade.attrs({ 'style':(\"background-image: url(\" + (me.getPhotoURL()) + \")\"), \"class\": [('img-circle')] }, {\"style\":true})) + \"></div></a><h3>\" + (jade.escape(null == (jade.interp = me.broadName()) ? \"\" : jade.interp)) + \"</h3></li><li><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\"), 'data-i18n':(\"nav.profile\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li><li><a href=\\\"/account/settings\\\" data-i18n=\\\"play.settings\\\"></a></li>\");\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()))\n{\nbuf.push(\"<li><a href=\\\"/account/payments\\\" data-i18n=\\\"account.payments\\\"></a></li>\");\n}\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()) || me.hasSubscription())\n{\nbuf.push(\"<li><a href=\\\"/account/subscription\\\" data-i18n=\\\"account.subscription\\\"></a></li>\");\n}\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()))\n{\nbuf.push(\"<li><a href=\\\"/account/prepaid\\\" data-i18n=\\\"account.prepaid_codes\\\"></a></li>\");\n}\nbuf.push(\"<li><a id=\\\"logout-button\\\" data-i18n=\\\"login.log_out\\\"></a></li></ul></span>\");\n}\nelse\n{\nbuf.push(\"<button data-i18n=\\\"login.sign_up\\\" class=\\\"btn btn-sm btn-primary header-font signup-button\\\"></button><button data-i18n=\\\"login.log_in\\\" class=\\\"btn btn-sm btn-default header-font login-button\\\"></button>\");\n}\n}\nbuf.push(\"<select class=\\\"language-dropdown form-control\\\"></select></div></div><div id=\\\"site-content-area\\\"><p data-i18n=\\\"courses.to_join_ask\\\"></p><div id=\\\"join-classroom-form\\\" class=\\\"form-horizontal\\\"><div class=\\\"form-group\\\"><div class=\\\"col-sm-2\\\"><button\" + (jade.attrs({ 'id':('join-class-btn'), 'disabled':(view.state==='enrolling'), 'data-i18n':(\"courses.join_this_class\"), \"class\": [('btn'),('btn-default'),('btn-block')] }, {\"disabled\":true,\"data-i18n\":true})) + \"></button></div><div class=\\\"col-sm-6\\\"><input\" + (jade.attrs({ 'id':('classroom-code-input'), 'data-i18n':(\"[placeholder]courses.enter_here\"), 'placeholder':('<enter unlock code here>'), 'value':(view.classCode), 'disabled':(view.state==='enrolling'), \"class\": [('form-control')] }, {\"data-i18n\":true,\"placeholder\":true,\"value\":true,\"disabled\":true})) + \"/></div></div>\");\nif ( view.state === 'enrolling')\n{\nbuf.push(\"<div class=\\\"progress progress-striped active\\\"><div style=\\\"width: 100%\\\" data-i18n=\\\"courses.joining\\\" class=\\\"progress-bar\\\"></div></div>\");\n}\nif ( view.state === 'unknown_error')\n{\nbuf.push(\"<div class=\\\"alert alert-danger\\\">\" + (jade.escape(null == (jade.interp = view.stateMessage) ? \"\" : jade.interp)) + \"</div>\");\n}\nvar justJoinedCourseInstance = view.courseInstances.find(function(ci) { return ci.justJoined; });\nif ( justJoinedCourseInstance)\n{\nvar course = view.courses.get(justJoinedCourseInstance.get('courseID'));\nvar classroom = view.classrooms.get(justJoinedCourseInstance.get('classroomID'));\nif ( course && classroom)\n{\nbuf.push(\"<div class=\\\"alert alert-info\\\"><span data-i18n=\\\"courses.successfully_joined\\\" class=\\\"spr\\\"></span><span class=\\\"spr\\\">\\\"\" + (jade.escape((jade.interp = classroom.get('name')) == null ? '' : jade.interp)) + \"\\\"!</span><a\" + (jade.attrs({ 'href':(\"/students/\" + (course.id) + \"/\" + (justJoinedCourseInstance.id) + \"\") }, {\"href\":true})) + \"><strong><span data-i18n=\\\"courses.click_to_start\\\" class=\\\"spr\\\"></span><span>\\\"\" + (jade.escape((jade.interp = course.get('name')) == null ? '' : jade.interp)) + \"\\\".</span></strong></a></div>\");\n}\n}\nbuf.push(\"</div><div class=\\\"panel panel-default\\\"><div class=\\\"panel-heading\\\"><div data-i18n=\\\"courses.my_courses\\\" class=\\\"panel-title\\\"></div></div><div class=\\\"list-group\\\"><div class=\\\"list-group-item\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-3\\\"><strong data-i18n=\\\"courses.classroom\\\"></strong></div><div class=\\\"col-sm-3\\\"><strong data-i18n=\\\"courses.course\\\"></strong></div></div></div>\");\n// iterate view.courseInstances.models\n;(function(){\n  var $$obj = view.courseInstances.models;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var courseInstance = $$obj[$index];\n\nvar classroom = view.classrooms.get(courseInstance.get('classroomID'))\nvar course = view.courses.get(courseInstance.get('courseID'))\nif ( !(classroom && course))\n{\ncontinue;\n}\nbuf.push(\"<div class=\\\"list-group-item\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-3\\\">\");\nif ( classroom)\n{\nbuf.push(\"\" + (jade.escape((jade.interp = classroom.get('name')) == null ? '' : jade.interp)) + \"\");\n}\nbuf.push(\"</div><div class=\\\"col-sm-3\\\">\");\nif ( course)\n{\nbuf.push(\"\" + (jade.escape((jade.interp = course.get('name')) == null ? '' : jade.interp)) + \"\");\n}\nbuf.push(\"</div><div class=\\\"col-sm-6\\\"><a\" + (jade.attrs({ 'href':(\"/students/\" + (course.id) + \"/\" + (courseInstance.id) + \"\"), 'data-i18n':(\"courses.enter\"), \"class\": [('btn'),('btn-default'),('btn-sm')] }, {\"href\":true,\"data-i18n\":true})) + \"></a></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var courseInstance = $$obj[$index];\n\nvar classroom = view.classrooms.get(courseInstance.get('classroomID'))\nvar course = view.courses.get(courseInstance.get('courseID'))\nif ( !(classroom && course))\n{\ncontinue;\n}\nbuf.push(\"<div class=\\\"list-group-item\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-3\\\">\");\nif ( classroom)\n{\nbuf.push(\"\" + (jade.escape((jade.interp = classroom.get('name')) == null ? '' : jade.interp)) + \"\");\n}\nbuf.push(\"</div><div class=\\\"col-sm-3\\\">\");\nif ( course)\n{\nbuf.push(\"\" + (jade.escape((jade.interp = course.get('name')) == null ? '' : jade.interp)) + \"\");\n}\nbuf.push(\"</div><div class=\\\"col-sm-6\\\"><a\" + (jade.attrs({ 'href':(\"/students/\" + (course.id) + \"/\" + (courseInstance.id) + \"\"), 'data-i18n':(\"courses.enter\"), \"class\": [('btn'),('btn-default'),('btn-sm')] }, {\"href\":true,\"data-i18n\":true})) + \"></a></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div><div class=\\\"panel panel-default\\\"><div class=\\\"panel-heading\\\"><div data-i18n=\\\"courses.my_classes\\\" class=\\\"panel-title\\\"></div></div><div class=\\\"list-group\\\">\");\n// iterate view.classrooms.models\n;(function(){\n  var $$obj = view.classrooms.models;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var classroom = $$obj[$index];\n\nbuf.push(\"<div class=\\\"list-group-item\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-3\\\">\" + (jade.escape(null == (jade.interp = classroom.get('name')) ? \"\" : jade.interp)) + \"</div><div class=\\\"col-sm-9\\\">\" + (jade.escape(null == (jade.interp = classroom.get('description')) ? \"\" : jade.interp)) + \"</div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var classroom = $$obj[$index];\n\nbuf.push(\"<div class=\\\"list-group-item\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-3\\\">\" + (jade.escape(null == (jade.interp = classroom.get('name')) ? \"\" : jade.interp)) + \"</div><div class=\\\"col-sm-9\\\">\" + (jade.escape(null == (jade.interp = classroom.get('description')) ? \"\" : jade.interp)) + \"</div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div><div class=\\\"achievement-corner\\\"></div><div id=\\\"site-footer\\\"><img id=\\\"footer-background\\\" src=\\\"/images/pages/base/nav_background.png\\\"/><div\" + (jade.attrs({ 'id':('footer-links'), \"class\": [(features.playViewsOnly ? 'hide' : '')] }, {\"class\":true})) + \"><a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<a tabindex=\\\"-1\\\" data-i18n=\\\"nav.contact\\\" class=\\\"contact-modal\\\"></a>\");\n}\nbuf.push(\"<a href=\\\"http://blog.codecombat.com/\\\" data-i18n=\\\"nav.blog\\\"></a><a href=\\\"https://jobs.lever.co/codecombat\\\" tabindex=\\\"-1\\\" data-i18n=\\\"nav.careers\\\"></a><a href=\\\"/legal\\\" tabindex=\\\"-1\\\" data-i18n=\\\"nav.legal\\\"></a><a href=\\\"/privacy\\\" tabindex=\\\"-1\\\" data-i18n=\\\"legal.privacy_title\\\"></a><a href=\\\"/contribute\\\" tabindex=\\\"-1\\\" data-i18n=\\\"nav.contribute\\\"></a>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<a href=\\\"/play/ladder\\\" tabindex=\\\"-1\\\" data-i18n=\\\"game_menu.multiplayer_tab\\\"></a>\");\n}\nif ( me.isAdmin())\n{\nbuf.push(\"<a href=\\\"/admin\\\">Admin</a>\");\n}\nif ( usesSocialMedia)\n{\nbuf.push(\"<div class=\\\"share-buttons\\\">\");\nif ( !isIE)\n{\nbuf.push(\"<div data-href=\\\"http://codecombat.com\\\" data-size=\\\"medium\\\" class=\\\"g-plusone\\\"></div>\");\n}\nbuf.push(\"<div\" + (jade.attrs({ 'data-href':(\"https://www.facebook.com/codecombat\"), 'data-send':(\"false\"), 'data-layout':(\"button_count\"), 'data-width':(\"350\"), 'data-show-faces':(\"true\"), 'data-ref':(\"coco_footer_\" + (fbRef) + \"\"), \"class\": [('fb-like')] }, {\"data-href\":true,\"data-send\":true,\"data-layout\":true,\"data-width\":true,\"data-show-faces\":true,\"data-ref\":true})) + \"></div>\");\nif ( !isIE)\n{\nbuf.push(\"<a href=\\\"https://twitter.com/CodeCombat\\\" data-show-count=\\\"true\\\" data-show-screen-name=\\\"false\\\" data-dnt=\\\"true\\\" data-align=\\\"right\\\" data-i18n=\\\"nav.twitter_follow\\\" class=\\\"twitter-follow-button\\\"></a><iframe src=\\\"https://ghbtns.com/github-btn.html?user=codecombat&amp;repo=codecombat&amp;type=watch&amp;count=true\\\" allowtransparency=\\\"true\\\" frameborder=\\\"0\\\" scrolling=\\\"0\\\" width=\\\"110\\\" height=\\\"20\\\" class=\\\"github-star-button\\\"></iframe>\");\n}\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div><div id=\\\"footer-credits\\\"><span><span>© All Rights Reserved</span><br/><span>CodeCombat 2015</span></span><img id=\\\"footer-logo\\\" src=\\\"/images/pages/base/logo.png\\\" alt=\\\"CodeCombat\\\"/><span><span>Site Design by</span><br/><a href=\\\"http://www.fullyillustrated.com/\\\">Fully Illustrated</a></span><!--a.firebase-bade(href=\\\"https://www.firebase.com/\\\")  // Not using right now--><!--  img(src=\\\"/images/pages/base/firebase.png\\\", alt=\\\"Powered by Firebase\\\")--></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","app = require 'core/application'\r\nCreateAccountModal = require 'views/core/CreateAccountModal'\r\nCocoCollection = require 'collections/CocoCollection'\r\nCourse = require 'models/Course'\r\nClassroom = require 'models/Classroom'\r\nUser = require 'models/User'\r\nCourseInstance = require 'models/CourseInstance'\r\nRootView = require 'views/core/RootView'\r\ntemplate = require 'templates/courses/student-courses-view'\r\nutils = require 'core/utils'\r\n\r\n# TODO: Implement join class\r\n# TODO: Implement course instance links\r\n\r\nmodule.exports = class StudentCoursesView extends RootView\r\n  id: 'student-courses-view'\r\n  template: template\r\n\r\n  events:\r\n    'click #join-class-btn': 'onClickJoinClassButton'\r\n\r\n  constructor: (options) ->\r\n    super(options)\r\n    @courseInstances = new CocoCollection([], { url: \"/db/user/#{me.id}/course_instances\", model: CourseInstance})\r\n    @courseInstances.comparator = (ci) -> return ci.get('classroomID') + ci.get('courseID')\r\n    @supermodel.loadCollection(@courseInstances, 'course_instances')\r\n    @classrooms = new CocoCollection([], { url: \"/db/classroom\", model: Classroom })\r\n    @supermodel.loadCollection(@classrooms, 'classrooms', { data: {memberID: me.id} })\r\n    @courses = new CocoCollection([], { url: \"/db/course\", model: Course})\r\n    @supermodel.loadCollection(@courses, 'courses')\r\n\r\n  onLoaded: ->\r\n    if (@classCode = utils.getQueryVariable('_cc', false)) and not me.isAnonymous()\r\n      @joinClass()\r\n    super()\r\n\r\n  onClickJoinClassButton: (e) ->\r\n    return @openModalView new CreateAccountModal() if me.isAnonymous()\r\n    @classCode = @$('#classroom-code-input').val()\r\n    @joinClass()\r\n\r\n  joinClass: () ->\r\n    @state = 'enrolling'\r\n    @renderSelectors '#join-classroom-form'\r\n    $.ajax({\r\n      method: 'POST'\r\n      url: '/db/classroom/-/members'\r\n      data: code: @classCode\r\n      context: @\r\n      success: @onJoinClassroomSuccess\r\n      error: (jqxhr, textStatus, errorThrown) ->\r\n        application.tracker?.trackEvent 'Failed to join classroom with code', status: textStatus\r\n        @state = 'unknown_error'\r\n        if jqxhr.status is 422\r\n          @stateMessage = 'Please enter a code.'\r\n        else if jqxhr.status is 404\r\n          @stateMessage = 'Code not found.'\r\n        else\r\n          @stateMessage = \"#{jqxhr.responseText}\"\r\n        @renderSelectors '#join-classroom-form'\r\n    })\r\n\r\n  onJoinClassroomSuccess: (data, textStatus, jqxhr) ->\r\n    classroom = new Classroom(data)\r\n    application.tracker?.trackEvent 'Joined classroom', {\r\n      classroomID: classroom.id,\r\n      classroomName: classroom.get('name')\r\n      ownerID: classroom.get('ownerID')\r\n    }\r\n    @classrooms.add(classroom)\r\n    @render()\r\n\r\n    classroomCourseInstances = new CocoCollection([], { url: \"/db/course_instance\", model: CourseInstance })\r\n    classroomCourseInstances.fetch({ data: {classroomID: classroom.id} })\r\n    @listenToOnce classroomCourseInstances, 'sync', ->\r\n\r\n      # join any course instances in the classroom which are free to join\r\n      jqxhrs = []\r\n      for courseInstance in classroomCourseInstances.models\r\n        course = @courses.get(courseInstance.get('courseID'))\r\n        if course.get('free')\r\n          jqxhrs.push $.ajax({\r\n            method: 'POST'\r\n            url: _.result(courseInstance, 'url') + '/members'\r\n            data: { userID: me.id }\r\n            context: @\r\n            success: (data) ->\r\n              @courseInstances.add(data)\r\n              @courseInstances.get(data._id).justJoined = true\r\n          })\r\n      $.when(jqxhrs...).done =>\r\n        @state = ''\r\n        @render()\r\n"]}