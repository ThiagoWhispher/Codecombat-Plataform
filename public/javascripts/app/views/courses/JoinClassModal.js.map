{"version":3,"sources":["app/templates/courses/join-class-modal.jade","app/views/courses/JoinClassModal.coffee"],"names":[],"mappings":"AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/BA;AAAA;;ACAA;EAAA;;;AAAA,YAAY,QAAQ,sBAAR;;AACZ,WAAW,QAAQ,oCAAR;;AACX,YAAY,QAAQ,kBAAR;;AACZ,OAAO,QAAQ,aAAR;;AAEP,MAAM,CAAC,OAAP,GAAuB;;;;;;;2BACrB,KAAI;;2BACJ,WAAU;;2BAEV,SACE;IAAA,yBAAyB,wBAAzB;;;2BAEF,aAAY,SAAC,GAAD;AACV;IADa,IAAC,4BAAH,MAAiB,IAAd;IACd,IAAC,UAAD,GAAiB;IACjB,IAAC,QAAD,GAAe;IACf,QAAQ,IAAC,WAAU,CAAC,YAAZ,CAAyB,IAAC,UAAS,CAAC,WAAX,CAAuB,IAAC,UAAxB,CAAzB;IACR,KAAO,EAAE,CAAC,GAAH,CAAO,eAAP,CAAP;MACE,IAAC,WAAU,CAAC,YAAZ,CAAyB,CAAC,CAAC,IAAF,CAAO,cAAY,EAAE,CAAC,EAAf,GAAkB,uBAAzB,CAAzB,EADF;;IAEA,IAAC,SAAD,CAAU,IAAC,UAAX,EAAsB,OAAtB,EAA+B;aAC7B,IAAC,QAAD,CAAS,OAAT;IAD6B,CAA/B;IAEA,IAAC,SAAD,CAAU,IAAC,UAAX,EAAsB,MAAtB,EAA8B;aAC5B,IAAC;IAD2B,CAA9B;IAEA,IAAC,SAAD,CAAU,IAAC,UAAX,EAAsB,cAAtB,EAAsC;aACpC,IAAC,QAAD,CAAS,cAAT,EAAyB,IAAC,UAA1B;IADoC,CAAtC;WAEA,IAAC,SAAD,CAAU,IAAC,UAAX,EAAsB,YAAtB,EAAoC;aAClC,IAAC,QAAD,CAAS,YAAT,EAAuB,IAAC,UAAxB,EAAmC,KAAnC;IADkC,CAApC;EAZU;;2BAgBZ,yBAAwB;WACtB,IAAC,UAAS,CAAC,YAAX,CAAwB,IAAC,UAAzB;EADsB;;;;GAvBoB","file":"public/javascripts/app/views/courses/JoinClassModal.js","sourcesContent":["var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,me = locals_.me;buf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content style-flat\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nif ( view.classroom.loaded)\n{\nbuf.push(\"<div class=\\\"text-center\\\"><h3 class=\\\"modal-title\\\"><span data-i18n=\\\"courses.join\\\"></span><span class=\\\"spr\\\"> </span><span>\" + (jade.escape(null == (jade.interp = view.classroom.get('name')) ? \"\" : jade.interp)) + \"</span></h3><b class=\\\"small-details\\\"><span data-i18n=\\\"courses.instructor\\\" class=\\\"spr\\\"></span><span>\" + (jade.escape(null == (jade.interp = view.classroom.owner.get('name')) ? \"\" : jade.interp)) + \"</span></b></div>\");\n}\nbuf.push(\"</div><div class=\\\"modal-body\\\">\");\nif ( view.classroom.loaded)\n{\nbuf.push(\"<p><span data-i18n=\\\"courses.youve_been_invited_1\\\" class=\\\"spr\\\"></span><span>\" + (jade.escape(null == (jade.interp = view.classroom.get('name')) ? \"\" : jade.interp)) + \"</span><span data-i18n=\\\"courses.youve_been_invited_2\\\" class=\\\"spr\\\"></span><span>\" + (jade.escape(null == (jade.interp = view.classroom.capitalLanguage) ? \"\" : jade.interp)) + \"</span><span data-i18n=\\\"courses.youve_been_invited_3\\\" class=\\\"spl\\\"></span></p><p><span data-i18n=\\\"courses.by_joining_1\\\" class=\\\"spr\\\"></span><span>\" + (jade.escape(null == (jade.interp = view.classroom.get('name')) ? \"\" : jade.interp)) + \"</span><span class=\\\"spr\\\">, </span><span>\" + (jade.escape(null == (jade.interp = view.classroom.owner.get('name')) ? \"\" : jade.interp)) + \"</span><span class=\\\"spr\\\"> </span><span data-i18n=\\\"courses.by_joining_2\\\"></span></p>\");\nif (!( me.get('emailVerified')))\n{\nbuf.push(\"<div class=\\\"text-center m-t-4\\\"><div><b class=\\\"small-details\\\"><span data-i18n=\\\"courses.sent_verification\\\"></span></b></div><div class=\\\"small\\\">\" + (jade.escape(null == (jade.interp = me.get('email')) ? \"\" : jade.interp)) + \"</div><div class=\\\"small\\\"><span data-i18n=\\\"courses.you_can_edit\\\" class=\\\"spr\\\"></span><a href=\\\"/account/settings\\\"><span data-i18n=\\\"courses.account_settings\\\"></span></a></div></div>\");\n}\n}\nbuf.push(\"</div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-footer\\\"><div class=\\\"text-center\\\"><button data-i18n=\\\"courses.join_class_2\\\" class=\\\"join-class-btn btn btn-lg btn-navy\\\"></button><button data-dismiss=\\\"modal\\\" data-i18n=\\\"common.cancel\\\" class=\\\"btn btn-lg\\\"></button></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/courses/join-class-modal'\r\nClassroom = require 'models/Classroom'\r\nUser = require 'models/User'\r\n\r\nmodule.exports = class JoinClassModal extends ModalView\r\n  id: 'join-class-modal'\r\n  template: template\r\n\r\n  events:\r\n    'click .join-class-btn': 'onClickJoinClassButton'\r\n\r\n  initialize: ({ @classCode } = {}) ->\r\n    @classroom = new Classroom()\r\n    @teacher = new User()\r\n    jqxhr = @supermodel.trackRequest @classroom.fetchByCode(@classCode)\r\n    unless me.get('emailVerified')\r\n      @supermodel.trackRequest $.post(\"/db/user/#{me.id}/request-verify-email\")\r\n    @listenTo @classroom, 'error', ->\r\n      @trigger('error')\r\n    @listenTo @classroom, 'sync', ->\r\n      @render\r\n    @listenTo @classroom, 'join:success', ->\r\n      @trigger('join:success', @classroom)\r\n    @listenTo @classroom, 'join:error', ->\r\n      @trigger('join:error', @classroom, jqxhr)\r\n      # @close()\r\n\r\n  onClickJoinClassButton: ->\r\n    @classroom.joinWithCode(@classCode)\r\n"]}