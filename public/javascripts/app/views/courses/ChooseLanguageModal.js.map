{"version":3,"sources":["app/templates/courses/choose-language-modal.jade","app/views/courses/ChooseLanguageModal.coffee"],"names":[],"mappings":"AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;;ACAA;EAAA;;;AAAA,YAAY,QAAQ,sBAAR;;AACZ,WAAW,QAAQ,yCAAR;;AAEX,MAAM,CAAC,OAAP,GAAuB;;;;;;;gCACrB,KAAI;;gCACJ,WAAU;;gCAEV,SACE;IAAA,0BAA0B,6BAA1B;;;gCAEF,aAAY,SAAC,OAAD;;MACV,UAAW;;WACX,IAAC,YAAD,GAAe,OAAO,CAAC;EAFb;;gCAIZ,8BAA6B,SAAC,CAAD;IAC3B,IAAC,eAAD,GAAkB,EAAE,CAAC,CAAC,MAAJ,CAAW,CAAC,OAAZ,CAAoB,kBAApB,CAAuC,CAAC,IAAxC,CAA6C,UAA7C;IAClB,IAAG,IAAC,YAAJ;aACE,IAAC,WAAD,GADF;KAAA;aAGE,IAAC,oBAAD,GAHF;;EAF2B;;gCAO7B,aAAY;WACV,CAAC,CAAC,IAAF,CAAO;MACL,QAAQ,MADH;MAEL,KAAK,cAFA;MAGL,SAAS,IAHJ;MAIL,SAAS,IAAC,gBAJL;KAAP;EADU;;gCAQZ,kBAAiB;IACf,EAAE,CAAC,KAAH;IACA,EAAE,CAAC,KAAH,CAAS;MACP,KAAK,cADE;KAAT;WAGA,IAAC,aAAD,CAAc,EAAd,EAAkB,MAAlB,EAA0B,IAAC,oBAA3B;EALe;;gCAOjB,sBAAqB;AACnB;IAAA,YAAY,CAAC,CAAC,KAAF,CAAQ,EAAE,CAAC,GAAH,CAAO,WAAP,KAAuB,EAA/B;IACZ,SAAS,CAAC,QAAV,GAAqB,IAAC;IACtB,EAAE,CAAC,GAAH,CAAO,WAAP,EAAoB,SAApB;IACA,MAAM,EAAE,CAAC,KAAH;IACN,IAAG,GAAH;MACE,IAAC,EAAD,CAAG,cAAH,CAAkB,CAAC,IAAnB;MACA,IAAC,EAAD,CAAG,kBAAH,CAAsB,CAAC,WAAvB,CAAmC,MAAnC;aACA,IAAC,aAAD,CAAc,EAAd,EAAkB,MAAlB,EAA0B,IAAC,uBAA3B,EAHF;KAAA;aAKE,IAAC,uBAAD,GALF;;EALmB;;gCAYrB,yBAAwB;AACtB;IAAA,IAAC,QAAD,CAAS,cAAT;;SACc,CAAE,UAAhB,CAA2B,gBAA3B,EAA6C;QAAA,UAAU,SAAV;QAAqB,OAAO,IAAC,eAA7B;OAA7C;;WACA,IAAC,KAAD;EAHsB;;;;GA7CyB","file":"public/javascripts/app/views/courses/ChooseLanguageModal.js","sourcesContent":["var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<div class=\\\"modal-dialog game\\\"><div class=\\\"background-wrapper\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nbuf.push(\"<div class=\\\"clearfix\\\"></div><div class=\\\"text-center\\\"><h2 data-i18n=\\\"courses.greetings\\\" class=\\\"modal-title\\\"></h2><h3 data-i18n=\\\"choose_hero.programming_language_description\\\"></h3></div></div><div class=\\\"modal-body\\\"><div id=\\\"choice-area\\\" class=\\\"text-center\\\"><button data-language=\\\"python\\\" class=\\\"lang-choice-btn btn btn-success btn-lg\\\"><img src=\\\"/images/common/code_languages/python_small.png\\\"/><span class=\\\"spl\\\">Python</span></button><p data-i18n=\\\"choose_hero.python_blurb\\\"></p><button data-language=\\\"javascript\\\" class=\\\"lang-choice-btn btn btn-default\\\"><img src=\\\"/images/common/code_languages/javascript_small.png\\\"/><span class=\\\"spl\\\">JavaScript</span></button><p data-i18n=\\\"choose_hero.javascript_blurb\\\"></p></div><div id=\\\"saving-progress\\\" class=\\\"progress progress-striped active hide\\\"><div style=\\\"width: 100%\\\" class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-footer\\\"></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/courses/choose-language-modal'\r\n\r\nmodule.exports = class ChooseLanguageModal extends ModalView\r\n  id: 'choose-language-modal'\r\n  template: template\r\n\r\n  events:\r\n    'click .lang-choice-btn': 'onClickLanguageChoiceButton'\r\n\r\n  initialize: (options) ->\r\n    options ?= {}\r\n    @logoutFirst = options.logoutFirst\r\n\r\n  onClickLanguageChoiceButton: (e) ->\r\n    @chosenLanguage = $(e.target).closest('.lang-choice-btn').data('language')\r\n    if @logoutFirst\r\n      @logoutUser()\r\n    else\r\n      @saveLanguageSetting()\r\n\r\n  logoutUser: ->\r\n    $.ajax({\r\n      method: 'POST'\r\n      url: '/auth/logout'\r\n      context: @\r\n      success: @onUserLoggedOut\r\n    })\r\n\r\n  onUserLoggedOut: ->\r\n    me.clear()\r\n    me.fetch({\r\n      url: '/auth/whoami'\r\n    })\r\n    @listenToOnce me, 'sync', @saveLanguageSetting\r\n\r\n  saveLanguageSetting: ->\r\n    aceConfig = _.clone(me.get('aceConfig') or {})\r\n    aceConfig.language = @chosenLanguage\r\n    me.set('aceConfig', aceConfig)\r\n    res = me.patch()\r\n    if res\r\n      @$('#choice-area').hide()\r\n      @$('#saving-progress').removeClass('hide')\r\n      @listenToOnce me, 'sync', @onLanguageSettingSaved\r\n    else\r\n      @onLanguageSettingSaved()\r\n\r\n  onLanguageSettingSaved: ->\r\n    @trigger('set-language')\r\n    window.tracker?.trackEvent 'Chose language', category: 'Courses', label: @chosenLanguage\r\n    @hide()\r\n"]}