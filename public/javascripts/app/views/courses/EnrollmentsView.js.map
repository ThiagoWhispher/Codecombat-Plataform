{"version":3,"sources":["app/templates/courses/enrollments-view.jade","app/views/courses/EnrollmentsView.coffee"],"names":[],"mappings":"AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjNA;AAAA;;ACAA;EAAA;;;AAAA,WAAW,QAAQ,qBAAR;;AACX,aAAa,QAAQ,wBAAR;;AACb,QAAQ,QAAQ,cAAR;;AACR,WAAW,QAAQ,sBAAR;;AACX,WAAW,QAAQ,oCAAR;;AACX,QAAQ,QA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","file":"public/javascripts/app/views/courses/EnrollmentsView.js","sourcesContent":["var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),me = locals_.me,moment = locals_.moment,serverConfig = locals_.serverConfig,view = locals_.view,document = locals_.document,_ = locals_._;var addCredits_mixin = function(){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\nbuf.push(\"<div class=\\\"text-center m-b-3 m-t-3\\\"><h5 data-i18n=\\\"courses.get_enrollments\\\"></h5>\");\nif ( me.get('enrollmentRequestSent'))\n{\nbuf.push(\"<div id=\\\"enrollment-request-sent-blurb\\\" class=\\\"small\\\"><p data-i18n=\\\"teacher.enroll_request_sent_blurb1\\\"></p><p data-i18n=\\\"teacher.enroll_request_sent_blurb2\\\"></p><p data-i18n=\\\"[html]teacher.enroll_request_sent_blurb3\\\"></p></div><button id=\\\"request-sent-btn\\\" disabled=\\\"disabled\\\" data-i18n=\\\"teacher.request_sent\\\" class=\\\"btn-lg btn btn-forest\\\"></button>\");\n}\nelse\n{\nbuf.push(\"<p data-i18n=\\\"teacher.get_enrollments_blurb\\\" class=\\\"m-y-2\\\"></p><button id=\\\"contact-us-btn\\\" data-i18n=\\\"contribute.contact_us_url\\\" class=\\\"btn-lg btn btn-forest\\\"></button>\");\n}\nbuf.push(\"</div>\");\n};\nvar prepaidCard_mixin = function(prepaid, className){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\nbuf.push(\"<div\" + (jade.attrs({ \"class\": [('prepaid-card'),('bg-navy'),('text-center'),('m-b-2'),('p-a-2'),(className)] }, {\"class\":true})) + \"><h1 class=\\\"m-t-2 m-b-0\\\">\" + (jade.escape(null == (jade.interp = prepaid.openSpots()) ? \"\" : jade.interp)) + \"</h1>\");\nif ( prepaid.get('type') === 'starter_license')\n{\nbuf.push(\"<div data-i18n=\\\"teacher.starter_licenses\\\"></div>\");\n}\nelse\n{\nbuf.push(\"<div data-i18n=\\\"teacher.credits\\\"></div>\");\n}\nbuf.push(\"<hr/><em class=\\\"small-details\\\"><div data-i18n=\\\"teacher.start_date\\\" class=\\\"pull-left\\\"></div><div class=\\\"pull-right\\\">\" + (jade.escape(null == (jade.interp = moment(prepaid.get('startDate')).utc().format('l')) ? \"\" : jade.interp)) + \"</div><div class=\\\"clearfix\\\"></div><div data-i18n=\\\"teacher.end_date\\\" class=\\\"pull-left\\\"></div><div class=\\\"pull-right\\\">\" + (jade.escape(null == (jade.interp = moment(prepaid.get('endDate')).utc().format('l')) ? \"\" : jade.interp)) + \"</div><div class=\\\"clearfix\\\"></div></em></div>\");\n};\nvar accountLinks_mixin = function(){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\nbuf.push(\"<li><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\"), 'data-i18n':(\"nav.profile\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li><li><a href=\\\"/account/settings\\\" data-i18n=\\\"play.settings\\\"></a></li><li><a id=\\\"logout-button\\\" data-i18n=\\\"login.log_out\\\"></a></li>\");\n};\nbuf.push(\"<div class=\\\"style-flat\\\"><nav id=\\\"main-nav\\\" class=\\\"navbar navbar-default\\\"><div class=\\\"container-fluid container\\\"><div class=\\\"row\\\"><div class=\\\"col-md-12\\\"><div class=\\\"navbar-header\\\"><button data-toggle=\\\"collapse\\\" data-target=\\\"#navbar-collapse\\\" aria-expanded=\\\"false\\\" class=\\\"navbar-toggle collapsed\\\"><span data-i18n=\\\"nav.toggle_nav\\\" class=\\\"sr-only\\\"></span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span></button><a href=\\\"/\\\" class=\\\"navbar-brand\\\">\");\nif ( serverConfig.codeNinjas)\n{\nbuf.push(\"<img id=\\\"logo-img\\\" src=\\\"/images/pages/base/logo.png\\\" class=\\\"code-ninjas-powered-by\\\"/><img src=\\\"/images/pages/base/code-ninjas-logo-right.png\\\" class=\\\"code-ninjas-logo\\\"/>\");\n}\nelse\n{\nbuf.push(\"<img id=\\\"logo-img\\\" src=\\\"/images/pages/base/logo.png\\\"/>\");\n}\nbuf.push(\"<span class=\\\"glyphicon glyphicon-home\\\"></span></a></div><div id=\\\"navbar-collapse\\\" class=\\\"collapse navbar-collapse\\\"><ul class=\\\"nav navbar-nav\\\">\");\nif ( (!me.isStudent() && !me.isTeacher()))\n{\nbuf.push(\"<li><a href=\\\"/play\\\" data-i18n=\\\"common.play\\\"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"play/ladder\\\" data-i18n=\\\"game_menu.multiplayer_tab\\\"></a></li>\");\nif ( me.isStudent())\n{\nbuf.push(\"<li><a href=\\\"/students\\\" data-i18n=\\\"nav.my_courses\\\"></a></li>\");\n}\nif ( !me.isAnonymous() && me.isTeacher())\n{\nbuf.push(\"<li><a href=\\\"/teachers/classes\\\" data-i18n=\\\"nav.my_classrooms\\\"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a></li><li><a\" + (jade.attrs({ 'href':(view.forumLink()), 'data-i18n':(\"nav.forum\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li></ul>\");\nif ( me.isAnonymous())\n{\nbuf.push(\"<ul class=\\\"nav navbar-nav\\\"><li><a id=\\\"create-account-link\\\" data-i18n=\\\"login.sign_up\\\" class=\\\"signup-button\\\"></a></li><li><a id=\\\"login-link\\\" data-i18n=\\\"login.log_in\\\" class=\\\"login-button\\\"></a></li></ul>\");\n}\nelse\n{\nbuf.push(\"<ul class=\\\"nav navbar-nav hidden-md hidden-lg\\\"><li class=\\\"disabled\\\"><a><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),('img-circle-small'),('m-r-1'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/><span>\" + (jade.escape(null == (jade.interp = me.displayName()) ? \"\" : jade.interp)) + \"</span></a></li>\");\naccountLinks_mixin();\nbuf.push(\"</ul><ul class=\\\"nav navbar-nav\\\"><li class=\\\"dropdown hidden-xs hidden-sm\\\"><a href=\\\"#\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" class=\\\"dropdown-toggle\\\"><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),('img-circle-small'),('m-r-1'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/><span data-i18n=\\\"nav.my_account\\\"></span></a><ul class=\\\"dropdown-menu\\\"><li class=\\\"user-dropdown-header text-center\\\"><span class=\\\"user-level\\\">\" + (jade.escape(null == (jade.interp = me.level()) ? \"\" : jade.interp)) + \"</span><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\") }, {\"href\":true})) + \"><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/></a><h5>\" + (jade.escape(null == (jade.interp = me.broadName()) ? \"\" : jade.interp)) + \"</h5></li>\");\naccountLinks_mixin();\nbuf.push(\"</ul></li></ul>\");\n}\nbuf.push(\"<ul class=\\\"nav navbar-nav\\\"><li><div id=\\\"language-dropdown-wrapper\\\"><select class=\\\"language-dropdown form-control\\\"></select></div></li></ul></div></div></div></div></nav>\");\nvar path = document.location.pathname\nbuf.push(\"<div id=\\\"teacher-dashboard-nav\\\"><nav class=\\\"navbar\\\"><div class=\\\"container-fluid container\\\"><div class=\\\"navbar-header\\\"><button type=\\\"button\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#teacher-dashboard-nav-collapse\\\" class=\\\"navbar-toggle collapsed\\\"><span class=\\\"sr-only\\\">Toggle navigation</span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span></button><span data-i18n=\\\"teacher.teacher_dashboard\\\" class=\\\"navbar-brand text-h4\\\"></span></div><div id=\\\"teacher-dashboard-nav-collapse\\\" class=\\\"collapse navbar-collapse\\\"><ul class=\\\"nav navbar-nav\\\"><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/classes') === 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/classes\\\"><small data-i18n=\\\"teacher.my_classes\\\" class=\\\"label\\\"></small></a></li><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/courses') === 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/courses\\\"><small data-i18n=\\\"teacher.courses\\\" class=\\\"label\\\"></small></a></li><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/licenses') === 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/licenses\\\"><small data-i18n=\\\"teacher.enrollments\\\" class=\\\"label\\\"></small></a></li><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/resources') === 0 && path.indexOf('/teachers/resources/faq') !== 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/resources\\\"><small data-i18n=\\\"teacher.resource_hub\\\" class=\\\"label\\\"></small></a></li><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/resources/faq') === 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/resources/faq\\\"><small data-i18n=\\\"teacher.educator_faq\\\" class=\\\"label\\\"></small></a></li></ul></div></div></nav></div><div id=\\\"site-content-area\\\">\");\nif ( me.isAnonymous() || (!me.isTeacher() && !view.classrooms.size()))\n{\nbuf.push(\"<div class=\\\"container\\\"><div class=\\\"access-restricted container text-center m-y-3\\\"><h5 data-i18n=\\\"teacher.access_restricted\\\"></h5><p data-i18n=\\\"teacher.teacher_account_required\\\"></p>\");\nif ( me.isAnonymous())\n{\nbuf.push(\"<div data-i18n=\\\"login.log_in\\\" class=\\\"login-button btn btn-lg btn-primary\\\"></div><a href=\\\"/teachers/signup\\\" data-i18n=\\\"teacher.create_teacher_account\\\" class=\\\"btn btn-lg btn-primary-alt\\\"></a>\");\n}\nelse\n{\nbuf.push(\"<a href=\\\"/teachers/update-account\\\" data-i18n=\\\"teachers_quote.convert_account_title\\\" class=\\\"btn btn-lg btn-primary\\\"></a><button id=\\\"logout-button\\\" data-i18n=\\\"login.log_out\\\" class=\\\"btn btn-lg btn-primary-alt\\\"></button>\");\n}\nbuf.push(\"</div><div class=\\\"container\\\"><div class=\\\"teacher-account-blurb text-center col-xs-6 col-xs-offset-3 m-y-3\\\"><h5 data-i18n=\\\"teacher.what_is_a_teacher_account\\\"></h5><p data-i18n=\\\"teacher.teacher_account_explanation\\\"></p></div></div></div>\");\n}\nelse\n{\nif ( !me.isTeacher() && !me.isAdmin())\n{\nbuf.push(\"<div class=\\\"alert alert-danger text-center\\\"><div class=\\\"container\\\"><!-- DNT: Temporary--><h3>ATTENTION: Please upgrade your account to a Teacher Account.</h3><p>We are transitioning to a new improved classroom management system for instructors.\\nPlease convert your account to ensure you retain access to your classrooms.</p><a href=\\\"/teachers/update-account\\\" class=\\\"btn btn-primary btn-lg\\\">Upgrade to teacher account</a></div></div>\");\n}\nif ( view.state.get('shouldUpsell'))\n{\nbuf.push(\"<div class=\\\"bg-forest\\\"><div class=\\\"container\\\"><div class=\\\"row\\\"><div class=\\\"col-xs-9 m-t-1\\\"><b><span data-i18n=\\\"special_offer.special_offer\\\" class=\\\"text-uppercase\\\"></span>\" + (jade.escape(null == (jade.interp = ': ') ? \"\" : jade.interp)) + \"<span data-i18n=\\\"special_offer.student_starter_license\\\"></span></b><div class=\\\"small-details\\\"><i\" + (jade.attrs({ 'data-i18n':(\"special_offer.purchase_starter_licenses_to_grant\"), 'data-i18n-options':(JSON.stringify(view.i18nData())) }, {\"data-i18n\":true,\"data-i18n-options\":true})) + \"></i></div></div><div class=\\\"col-xs-3\\\"><a href=\\\"/teachers/starter-licenses\\\" class=\\\"btn btn-lg btn-forest-alt m-t-2 m-b-2\\\"><b data-i18n=\\\"general.learn_more\\\"></b></a></div></div></div></div>\");\n}\nbuf.push(\"<div class=\\\"container m-t-5\\\"><h3 data-i18n=\\\"teacher.enrollments\\\"></h3><h4 id=\\\"enrollments-blurb\\\" data-i18n=\\\"teacher.enrollments_blurb\\\"> </h4>\");\nvar available = view.state.get('prepaidGroups').available\nvar pending = view.state.get('prepaidGroups').pending\nvar anyPrepaids = available || pending\nbuf.push(\"<div class=\\\"text-center m-t-3\\\"><span class=\\\"glyphicon glyphicon-question-sign\\\"></span>\" + (jade.escape(null == (jade.interp = ' ') ? \"\" : jade.interp)) + \"<a id=\\\"how-to-enroll-link\\\" data-i18n=\\\"teacher.how_to_apply_licenses\\\"></a></div><div class=\\\"row m-t-3\\\">\");\nif ( anyPrepaids)\n{\nbuf.push(\"<div id=\\\"prepaids-col\\\" class=\\\"col-md-9\\\">\");\nif ( _.size(available) > 0)\n{\nbuf.push(\"<h5 data-i18n=\\\"teacher.available_credits\\\" class=\\\"m-b-1\\\"></h5><div class=\\\"row\\\">\");\n// iterate available\n;(function(){\n  var $$obj = available;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var prepaid = $$obj[$index];\n\nbuf.push(\"<div class=\\\"col-sm-4 col-xs-6\\\">\");\nprepaidCard_mixin(prepaid);\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var prepaid = $$obj[$index];\n\nbuf.push(\"<div class=\\\"col-sm-4 col-xs-6\\\">\");\nprepaidCard_mixin(prepaid);\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nif ( _.size(pending) > 0)\n{\nbuf.push(\"<h5 data-i18n=\\\"teacher.pending_credits\\\" class=\\\"m-b-1 m-t-3\\\"></h5><div class=\\\"row\\\">\");\n// iterate pending\n;(function(){\n  var $$obj = pending;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var prepaid = $$obj[$index];\n\nbuf.push(\"<div class=\\\"col-sm-4 col-xs-6\\\">\");\nprepaidCard_mixin(prepaid, 'pending-prepaid-card');\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var prepaid = $$obj[$index];\n\nbuf.push(\"<div class=\\\"col-sm-4 col-xs-6\\\">\");\nprepaidCard_mixin(prepaid, 'pending-prepaid-card');\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div><div id=\\\"actions-col\\\" class=\\\"col-md-3\\\">\");\naddCredits_mixin();\nbuf.push(\"</div>\");\n}\nelse\n{\nbuf.push(\"<!-- no prepaids--><div class=\\\"col-sm-6 col-sm-offset-3 col-lg-4 col-lg-offset-4\\\">\");\naddCredits_mixin();\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div></div>\");\n}\nbuf.push(\"</div><div class=\\\"container-fluid\\\"><div id=\\\"footer\\\" class=\\\"small\\\"><div class=\\\"container\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong>CodeCombat</strong></li><li><a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a></li><li><a href=\\\"/about#jobs\\\" data-i18n=\\\"nav.jobs\\\"></a></li><li><a href=\\\"http://blog.codecombat.com/\\\" data-i18n=\\\"nav.blog\\\"></a></li><li><a href=\\\"/legal\\\" data-i18n=\\\"nav.legal\\\"></a></li><li><a href=\\\"/privacy\\\" data-i18n=\\\"nav.privacy\\\"></a></li></ul></div>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.schools\\\"></strong></li><li><a href=\\\"/teachers/resources/faq\\\" data-i18n=\\\"teacher.educator_faq\\\"></a></li><li><a href=\\\"/teachers/classes\\\" data-i18n=\\\"nav.my_classrooms\\\"></a></li><li><a href=\\\"/teachers/resources\\\" data-i18n=\\\"nav.resource_hub\\\"></a></li><li><a href=\\\"/teachers/demo\\\" data-i18n=\\\"new_home.request_demo\\\"></a></li></ul></div>\");\n}\nbuf.push(\"<div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.get_involved\\\"></strong></li><li><a href=\\\"/community\\\" data-i18n=\\\"nav.community\\\"></a></li><li><a href=\\\"/contribute\\\" data-i18n=\\\"nav.contribute\\\"></a></li>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<li><a\" + (jade.attrs({ 'href':(view.forumLink()), 'data-i18n':(\"nav.forum\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"/play/ladder\\\" data-i18n=\\\"game_menu.multiplayer_tab\\\"></a></li><li><a href=\\\"https://github.com/codecombat/codecombat\\\" data-i18n=\\\"nav.open_source\\\"></a></li></ul></div><div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.support\\\"></strong></li>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<li><a tabindex=\\\"-1\\\" data-i18n=\\\"nav.contact\\\" class=\\\"contact-modal\\\"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"https://www.facebook.com/codecombat\\\" data-i18n=\\\"nav.facebook\\\"></a></li><li><a href=\\\"https://twitter.com/codecombat\\\" data-i18n=\\\"nav.twitter\\\"></a></li></ul></div></div></div></div><div id=\\\"final-footer\\\" class=\\\"small text-center\\\">Copyright ©2016 CodeCombat. All Rights Reserved.<br class=\\\"hidden-lg hidden-md\\\"/><img src=\\\"/images/pages/base/logo.png\\\" alt=\\\"CodeCombat\\\"/><br class=\\\"hidden-lg hidden-md\\\"/>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<span data-i18n=\\\"nav.help_pref\\\" class=\\\"spr\\\"></span>\");\nvar supportEmail = (me.get('preferredLanguage', true) || 'en-US').split('-')[0] == 'nl' ? 'klantenservice@codecombat.nl' : 'team@codecombat.com';\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"mailto:\" + supportEmail) }, {\"href\":true})) + \">\" + (jade.escape(null == (jade.interp = supportEmail) ? \"\" : jade.interp)) + \"</a><span data-i18n=\\\"nav.help_suff\\\" class=\\\"spl\\\"></span>\");\n}\nbuf.push(\"</div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","RootView = require 'views/core/RootView'\r\nClassrooms = require 'collections/Classrooms'\r\nState = require 'models/State'\r\nPrepaids = require 'collections/Prepaids'\r\ntemplate = require 'templates/courses/enrollments-view'\r\nUsers = require 'collections/Users'\r\nCourses = require 'collections/Courses'\r\nHowToEnrollModal = require 'views/teachers/HowToEnrollModal'\r\nTeachersContactModal = require 'views/teachers/TeachersContactModal'\r\nActivateLicensesModal = require 'views/courses/ActivateLicensesModal'\r\nutils = require 'core/utils'\r\n\r\n{\r\n  STARTER_LICENSE_COURSE_IDS\r\n  FREE_COURSE_IDS\r\n} = require 'core/constants'\r\n\r\nmodule.exports = class EnrollmentsView extends RootView\r\n  id: 'enrollments-view'\r\n  template: template\r\n\r\n  events:\r\n    'click #enroll-students-btn': 'onClickEnrollStudentsButton'\r\n    'click #how-to-enroll-link': 'onClickHowToEnrollLink'\r\n    'click #contact-us-btn': 'onClickContactUsButton'\r\n\r\n  getTitle: -> return $.i18n.t('teacher.enrollments')\r\n  \r\n  i18nData: ->\r\n    starterLicenseCourseList: @state.get('starterLicenseCourseList')\r\n\r\n  initialize: (options) ->\r\n    @state = new State({\r\n      totalEnrolled: 0\r\n      totalNotEnrolled: 0\r\n      classroomNotEnrolledMap: {}\r\n      classroomEnrolledMap: {}\r\n      numberOfStudents: 15\r\n      totalCourses: 0\r\n      prepaidGroups: {\r\n        'available': []\r\n        'pending': []\r\n      }\r\n      shouldUpsell: true\r\n    })\r\n    window.tracker?.trackEvent 'Classes Licenses Loaded', category: 'Teachers', ['Mixpanel']\r\n    super(options)\r\n\r\n    @courses = new Courses()\r\n    @supermodel.trackRequest @courses.fetch({data: { project: 'free,i18n,name' }})\r\n    @listenTo @courses, 'sync', ->\r\n      @state.set { starterLicenseCourseList: @getStarterLicenseCourseList() }\r\n    # Listen for language change\r\n    @listenTo me, 'change:preferredLanguage', ->\r\n      @state.set { starterLicenseCourseList: @getStarterLicenseCourseList() }\r\n    @members = new Users()\r\n    @classrooms = new Classrooms()\r\n    @classrooms.comparator = '_id'\r\n    @listenToOnce @classrooms, 'sync', @onceClassroomsSync\r\n    @supermodel.trackRequest @classrooms.fetchMine()\r\n    @prepaids = new Prepaids()\r\n    @supermodel.trackRequest @prepaids.fetchByCreator(me.id)\r\n    @debouncedRender = _.debounce @render, 0\r\n    @listenTo @prepaids, 'sync', @updatePrepaidGroups\r\n    @listenTo(@state, 'all', @debouncedRender)\r\n    @listenTo(me, 'change:enrollmentRequestSent', @debouncedRender)\r\n\r\n    leadPriorityRequest = me.getLeadPriority()\r\n    @supermodel.trackRequest leadPriorityRequest\r\n    leadPriorityRequest.then ({ priority }) =>\r\n      shouldUpsell = (priority is 'low')\r\n      @state.set({ shouldUpsell })\r\n      if shouldUpsell\r\n        application.tracker?.trackEvent 'Starter License Upsell: Banner Viewed', {price: @state.get('centsPerStudent'), seats: @state.get('quantityToBuy')}\r\n\r\n  getStarterLicenseCourseList: ->\r\n    return if !@courses.loaded\r\n    COURSE_IDS = _.difference(STARTER_LICENSE_COURSE_IDS, FREE_COURSE_IDS)\r\n    starterLicenseCourseList = _.difference(STARTER_LICENSE_COURSE_IDS, FREE_COURSE_IDS).map (_id) =>\r\n      utils.i18n(@courses.findWhere({_id})?.attributes or {}, 'name')\r\n    starterLicenseCourseList.push($.t('general.and') + ' ' + starterLicenseCourseList.pop())\r\n    starterLicenseCourseList.join(', ')\r\n\r\n  onceClassroomsSync: ->\r\n    for classroom in @classrooms.models\r\n      @supermodel.trackRequests @members.fetchForClassroom(classroom, {remove: false, removeDeleted: true})\r\n\r\n  onLoaded: ->\r\n    @calculateEnrollmentStats()\r\n    @state.set('totalCourses', @courses.size())\r\n    super()\r\n\r\n  updatePrepaidGroups: ->\r\n    @state.set('prepaidGroups', @prepaids.groupBy((p) -> p.status()))\r\n\r\n  calculateEnrollmentStats: ->\r\n    @removeDeletedStudents()\r\n\r\n    # sort users into enrolled, not enrolled\r\n    groups = @members.groupBy (m) -> m.isEnrolled()\r\n    enrolledUsers = new Users(groups.true)\r\n    @notEnrolledUsers = new Users(groups.false)\r\n\r\n    map = {}\r\n\r\n    for classroom in @classrooms.models\r\n      map[classroom.id] = _.countBy(classroom.get('members'), (userID) -> enrolledUsers.get(userID)?).false\r\n\r\n    @state.set({\r\n      totalEnrolled: enrolledUsers.size()\r\n      totalNotEnrolled: @notEnrolledUsers.size()\r\n      classroomNotEnrolledMap: map\r\n    })\r\n\r\n    true\r\n\r\n  removeDeletedStudents: (e) ->\r\n    for classroom in @classrooms.models\r\n      _.remove(classroom.get('members'), (memberID) =>\r\n        not @members.get(memberID) or @members.get(memberID)?.get('deleted')\r\n      )\r\n    true\r\n\r\n  onClickHowToEnrollLink: ->\r\n    @openModalView(new HowToEnrollModal())\r\n\r\n  onClickContactUsButton: ->\r\n    window.tracker?.trackEvent 'Classes Licenses Contact Us', category: 'Teachers', ['Mixpanel']\r\n    @openModalView(new TeachersContactModal())\r\n\r\n  onClickEnrollStudentsButton: ->\r\n    window.tracker?.trackEvent 'Classes Licenses Enroll Students', category: 'Teachers', ['Mixpanel']\r\n    modal = new ActivateLicensesModal({ selectedUsers: @notEnrolledUsers, users: @members })\r\n    @openModalView(modal)\r\n    modal.once 'hidden', =>\r\n      @prepaids.add(modal.prepaids.models, { merge: true })\r\n      @debouncedRender() # Because one changed model does not a collection update make\r\n"]}