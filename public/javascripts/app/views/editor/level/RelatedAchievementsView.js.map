{"version":3,"sources":["app/views/editor/level/RelatedAchievementsView.coffee"],"names":[],"mappings":";AAAA;EAAA;;;AAAA,WAAW,QAAQ,qBAAR;;AACX,WAAW,QAAQ,6CAAR;;AACX,gCAAgC,QAAQ,2CAAR;;AAChC,cAAc,QAAQ,oBAAR;;AACd,sBAAsB,QAAQ,8BAAR;;AACtB,MAAM,QAAQ,kBAAR;;AAEN,MAAM,CAAC,OAAP,GAAuB;;;oCACrB,KAAI;;oCACJ,WAAU;;oCACV,YAAW;;oCAEX,SACE;IAAA,iCAAiC,oBAAjC;;;oCAEF,gBACE;IAAA,wBAAwB,gBAAxB;;;EAEW,iCAAC,OAAD;IACX,yDAAM,OAAN;IACA,IAAC,MAAD,GAAS,OAAO,CAAC;IACjB,IAAC,UAAD,GAAa,IAAC,MAAK,CAAC,GAAP,CAAW,UAAX;IACb,IAAC,aAAD,GAAoB,kCAA8B,IAAC,UAA/B;EAJT;;oCAMb,mBAAkB;IAChB,IAAU,IAAC,oBAAX;AAAA;;IACA,IAAC,WAAU,CAAC,cAAZ,CAA2B,IAAC,aAA5B,EAA0C,cAA1C;IACA,IAAC,oBAAD,GAAuB;WACvB,IAAC,OAAD;EAJgB;;oCAMlB,wBAAuB,SAAC,WAAD;;oCAKvB,qBAAoB;AAClB;IAAA,QAAY,wBAAoB;MAAA,OAAO,WAAP;MAAoB,YAAY,aAAhC;MAA+C,OAAO,IAAC,MAAvD;KAApB;IACZ,KAAK,CAAC,IAAN,CAAW,eAAX,EAA4B,IAAC,sBAA7B;WACA,IAAC,cAAD,CAAe,KAAf;EAHkB;;oCAKpB,iBAAgB,SAAC,CAAD;IAEd,IAAc,CAAC,CAAC,SAAF,KAAe,4BAA7B;AAAA;;WACA,IAAC,iBAAD;EAHc;;;;GAjCqC","file":"public/javascripts/app/views/editor/level/RelatedAchievementsView.js","sourcesContent":["CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/editor/level/related-achievements'\r\nRelatedAchievementsCollection = require 'collections/RelatedAchievementsCollection'\r\nAchievement = require 'models/Achievement'\r\nNewAchievementModal = require './modals/NewAchievementModal'\r\napp = require 'core/application'\r\n\r\nmodule.exports = class RelatedAchievementsView extends CocoView\r\n  id: 'related-achievements-view'\r\n  template: template\r\n  className: 'tab-pane'\r\n\r\n  events:\r\n    'click #new-achievement-button': 'makeNewAchievement'\r\n\r\n  subscriptions:\r\n    'editor:view-switched': 'onViewSwitched'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @level = options.level\r\n    @relatedID = @level.get('original')\r\n    @achievements = new RelatedAchievementsCollection @relatedID\r\n\r\n  loadAchievements: ->\r\n    return if @loadingAchievements\r\n    @supermodel.loadCollection @achievements, 'achievements'\r\n    @loadingAchievements = true\r\n    @render()\r\n\r\n  onNewAchievementSaved: (achievement) ->\r\n    # We actually open the new tab in NewAchievementModal, so we don't replace this window.\r\n    #url = '/editor/achievement/' + (achievement.get('slug') or achievement.id)\r\n    #app.router.navigate(, {trigger: true})  # Let's open a new tab instead.\r\n\r\n  makeNewAchievement: ->\r\n    modal = new NewAchievementModal model: Achievement, modelLabel: 'Achievement', level: @level\r\n    modal.once 'model-created', @onNewAchievementSaved\r\n    @openModalView modal\r\n\r\n  onViewSwitched: (e) ->\r\n    # Lazily load.\r\n    return unless e.targetURL is '#related-achievements-view'\r\n    @loadAchievements()\r\n"]}