{"version":3,"sources":["app/templates/play/campaign-view.jade","app/templates/play/common/ladder_submission.jade","app/templates/play/ladder/ladder-tab-view.jade","app/templates/play/ladder/ladder.jade","app/templates/play/ladder/my_matches_tab.jade","app/templates/play/ladder/play_modal.jade","app/templates/play/ladder/simulate_tab.jade","app/templates/play/ladder_home.jade","app/templates/play/level/chat.jade","app/templates/play/level/control-bar-view.jade","app/templates/play/level/duel-stats-view.jade","app/templates/play/level/goals.jade","app/templates/play/level/gold.jade","app/templates/play/level/hints-view.jade","app/templates/play/level/hud.jade","app/templates/play/level/hud_prop.jade","app/templates/play/level/level-dialogue-view.jade","app/templates/play/level/level-flags-view.jade","app/templates/play/level/level-playback-view.jade","app/templates/play/level/level_loading.jade","app/templates/play/level/modal/course-victory-modal.jade","app/templates/play/level/modal/game-dev-victory-modal.jade","app/templates/play/level/modal/hero-victory-modal.jade","app/templates/play/level/modal/image-gallery-modal.jade","app/templates/play/level/modal/infinite_loop.jade","app/templates/play/level/modal/keyboard_shortcuts.jade","app/templates/play/level/modal/new-item-view.jade","app/templates/play/level/modal/picoctf-victory-modal.jade","app/templates/play/level/modal/progress-view.jade","app/templates/play/level/modal/reload-level-modal.jade","app/templates/play/level/modal/victory.jade","app/templates/play/level/play-game-dev-level-view.jade","app/templates/play/level/play-web-dev-level-view.jade","app/templates/play/level/team_gold.jade","app/templates/play/level/thang_avatar.jade","app/templates/play/level/tome/cast-button-view.jade","app/templates/play/level/tome/problem_alert.jade","app/templates/play/level/tome/spell-palette-thang-entry.jade","app/templates/play/level/tome/spell-palette-view.jade","app/templates/play/level/tome/spell-top-bar-view.jade","app/templates/play/level/tome/spell.jade","app/templates/play/level/tome/spell_debug.jade","app/templates/play/level/tome/spell_palette_entry.jade","app/templates/play/level/tome/spell_palette_entry_popover.jade","app/templates/play/level/tome/spell_toolbar.jade","app/templates/play/level/tome/spell_translation.jade","app/templates/play/level/tome/tome.jade","app/templates/play/level/web-surface-view.jade","app/templates/play/menu/game-menu-modal.jade","app/templates/play/menu/guide-view.jade","app/templates/play/menu/inventory-modal.jade","app/templates/play/menu/item-view.jade","app/templates/play/menu/options-view.jade","app/templates/play/menu/save-load-view.jade","app/templates/play/modal/buy-gems-modal.jade","app/templates/play/modal/buy-gems-prompt.jade","app/templates/play/modal/item-details-view.jade","app/templates/play/modal/leaderboard-modal.jade","app/templates/play/modal/leaderboard-tab-view.jade","app/templates/play/modal/play-account-modal.jade","app/templates/play/modal/play-achievements-modal.jade","app/templates/play/modal/play-heroes-modal.jade","app/templates/play/modal/play-items-modal.jade","app/templates/play/modal/play-settings-modal.jade","app/templates/play/modal/poll-modal.jade","app/templates/play/modal/share-progress-modal.jade","app/templates/play/play-level-view.jade","app/templates/play/spectate.jade","app/views/play/CampaignView.coffee","app/views/play/SpectateView.coffee","app/views/play/common/LadderSubmissionView.coffee","app/views/play/level/ControlBarView.coffee","app/views/play/level/DialogueAnimator.coffee","app/views/play/level/DuelStatsView.coffee","app/views/play/level/HintsState.coffee","app/views/play/level/HintsView.coffee","app/views/play/level/LevelChatView.coffee","app/views/play/level/LevelDialogueView.coffee","app/views/play/level/LevelFlagsView.coffee","app/views/play/level/LevelGoalsView.coffee","app/views/play/level/LevelGoldView.coffee","app/views/play/level/LevelHUDView.coffee","app/views/play/level/LevelLoadingView.coffee","app/views/play/level/LevelPlaybackView.coffee","app/views/play/level/PlayGameDevLevelView.coffee","app/views/play/level/PlayLevelView.coffee","app/views/play/level/PlayWebDevLevelView.coffee","app/views/play/level/ThangAvatarView.coffee","app/views/play/level/WebSurfaceView.coffee","app/views/play/level/modal/CourseVictoryModal.coffee","app/views/play/level/modal/GameDevVictoryModal.coffee","app/views/play/level/modal/HeroVictoryModal.coffee","app/views/play/level/modal/ImageGalleryModal.coffee","app/views/play/level/modal/InfiniteLoopModal.coffee","app/views/play/level/modal/KeyboardShortcutsModal.coffee","app/views/play/level/modal/NewItemView.coffee","app/views/play/level/modal/PicoCTFVictoryModal.coffee","app/views/play/level/modal/ProgressView.coffee","app/views/play/level/modal/ReloadLevelModal.coffee","app/views/play/level/modal/VictoryModal.coffee","app/views/play/level/tome/CastButtonView.coffee","app/views/play/level/tome/DocFormatter.coffee","app/views/play/level/tome/Problem.coffee","app/views/play/level/tome/ProblemAlertView.coffee","app/views/play/level/tome/Spell.coffee","app/views/play/level/tome/SpellDebugView.coffee","app/views/play/level/tome/SpellPaletteEntryView.coffee","app/views/play/level/tome/SpellPaletteThangEntryView.coffee","app/views/play/level/tome/SpellPaletteView.coffee","app/views/play/level/tome/SpellToolbarView.coffee","app/views/play/level/tome/SpellTopBarView.coffee","app/views/play/level/tome/SpellTranslationView.coffee","app/views/play/level/tome/SpellView.coffee","app/views/play/level/tome/TomeView.coffee","app/views/play/level/tome/editor/autocomplete.coffee","app/views/play/level/tome/editor/fuzziac.js","app/views/play/level/tome/editor/snippets.coffee","app/views/play/menu/GameMenuModal.coffee","app/views/play/menu/GuideView.coffee","app/views/play/menu/InventoryModal.coffee","app/views/play/menu/ItemView.coffee","app/views/play/menu/OptionsView.coffee","app/views/play/menu/SaveLoadView.coffee","app/views/play/modal/BuyGemsModal.coffee","app/views/play/modal/ItemDetailsView.coffee","app/views/play/modal/LeaderboardModal.coffee","app/views/play/modal/LeaderboardTabView.coffee","app/views/play/modal/PlayAccountModal.coffee","app/views/play/modal/PlayAchievementsModal.coffee","app/views/play/modal/PlayHeroesModal.coffee","app/views/play/modal/PlayItemsModal.coffee","app/views/play/modal/PlaySettingsModal.coffee","app/views/play/modal/PollModal.coffee","app/views/play/modal/ShareProgressModal.coffee"],"names":[],"mappings":"AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjnBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArQA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArZA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlOA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/EA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArFA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1VA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7CA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApDA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9BA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApXA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArDA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1BA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7EA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3CA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5DA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3EA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArDA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9BA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/NA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvEA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/FA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5LA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzFA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvFA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvFA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1FA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApFA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjFA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9MA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArPA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5DA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1CA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;;ACAA;EAAA;;;;;AAAA,WAAW,QAAQ,qBAAR;;AACX,WAAW,QAAQ,8BAAR;;AACX,eAAe,QAAQ,qBAAR;;AACf,oBAAoB,QAAQ,0BAAR;;AACpB,iBAAiB,QAAQ,4BAAR;;AACjB,WAAW,QAAQ,iBAAR;;AACX,cAAc,QAAQ,iBAAR;;AACd,oBAAoB,QAAQ,uBAAR;;AACpB,YAAY,QAAQ,kBAAR;;AACZ,cAAc,QAAQ,yBAAR;;AACd,UAAU,QAAQ,cAAR;;AACV,qBAAqB,QAAQ,+BAAR;;AACrB,iBAAiB,QAAQ,2BAAR;;AACjB,mBAAmB,QAAQ,mCAAR;;AACnB,QAAQ,QAAQ,cAAR;;AACR,QAAQ,QAAQ,Y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AAC,UAAV,GAAuB;EA1FF;;;;;;;CCxPzB;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"public/javascripts/app/views/play.js","sourcesContent":["var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,campaign = locals_.campaign,features = locals_.features,serverConfig = locals_.serverConfig,levels = locals_.levels,i18n = locals_.i18n,translate = locals_.translate,levelStatusMap = locals_.levelStatusMap,editorMode = locals_.editorMode,levelDifficultyMap = locals_.levelDifficultyMap,levelPlayCountMap = locals_.levelPlayCountMap,marked = locals_.marked,picoCTF = locals_.picoCTF,me = locals_.me,adjacentCampaigns = locals_.adjacentCampaigns,_ = locals_._,campaigns = locals_.campaigns,levelsCompleted = locals_.levelsCompleted,levelsTotal = locals_.levelsTotal;if ( view.showAds())\n{\nbuf.push(\"<!-- TODO: loading this multiple times yields script error:--><!-- Uncaught TagError: adsbygoogle.push() error: All ins elements in the DOM with class=adsbygoogle already have ads in them.--><div class=\\\"ad-container\\\">\");\nif ( campaign)\n{\nbuf.push(\"<script async=\\\"async\\\" src=\\\"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\\\"></script><ins style=\\\"display:inline-block;width:728px;height:90px\\\" data-ad-client=\\\"ca-pub-6640930638193614\\\" data-ad-slot=\\\"4924994487\\\" class=\\\"adsbygoogle\\\"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script>\");\n}\nelse\n{\nbuf.push(\"<script async=\\\"async\\\" src=\\\"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\\\"></script><ins style=\\\"display:inline-block;width:728px;height:90px\\\" data-ad-client=\\\"ca-pub-6640930638193614\\\" data-ad-slot=\\\"4469166082\\\" class=\\\"adsbygoogle\\\"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});\\n</script>\");\n}\nbuf.push(\"</div>\");\n}\nbuf.push(\"<!-- TODO: .gameplay-container causes world map buttons to briefly appear in top left of screen--><div class=\\\"gameplay-container\\\">\");\nif ( features.codePlay)\n{\nbuf.push(\"<img src=\\\"/images/common/codeplay/CodePlay_Lockup.png\\\" class=\\\"small-nav-logo codeplay-logo\\\"/>\");\n}\nelse\n{\nbuf.push(\"<a href=\\\"/\\\" class=\\\"picoctf-hide\\\"><img src=\\\"/images/pages/base/logo.png\\\" title=\\\"CodeCombat - Learn how to code by playing a game\\\" alt=\\\"CodeCombat\\\" class=\\\"small-nav-logo\\\"/></a><div class=\\\"picoctf-show\\\"><a href=\\\"http://staging.picoctf.com\\\" class=\\\"picoctf-logo\\\"><img src=\\\"/images/pages/play/picoctf-logo-white.png\\\" title=\\\"picoCTF home\\\" alt=\\\"picoCTF home\\\" class=\\\"small-nav-logo\\\"/></a><a href=\\\"http://codecombat.com\\\" class=\\\"picoctf-powered-by\\\"><em class=\\\"spr\\\">powered by</em><img src=\\\"/images/pages/base/logo.png\\\" title=\\\"Powered by CodeCombat - Learn how to code by playing a game \\\" alt=\\\"Powered by CodeCombat\\\"/></a></div>\");\n}\nif ( serverConfig.codeNinjas)\n{\nbuf.push(\"<a href=\\\"https://code.ninja\\\"><img src=\\\"/images/pages/base/code-ninjas-logo-right.png\\\" title=\\\"Code Ninjas home\\\" alt=\\\"Code Ninjas home\\\" class=\\\"small-nav-logo code-ninjas-logo\\\"/></a>\");\n}\nif ( campaign)\n{\nbuf.push(\"<div class=\\\"map\\\"><div class=\\\"gradient horizontal-gradient top-gradient\\\"></div><div class=\\\"gradient vertical-gradient right-gradient\\\"></div><div class=\\\"gradient horizontal-gradient bottom-gradient\\\"></div><div class=\\\"gradient vertical-gradient left-gradient\\\"></div><div alt=\\\"\\\" draggable=\\\"false\\\" class=\\\"map-background\\\"></div>\");\n// iterate levels\n;(function(){\n  var $$obj = levels;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var level = $$obj[$index];\n\nif ((campaign.levelIsPractice(level) || !level.unlockedInSameCampaign) && level.hidden)\n{\ncontinue;\n}\nbuf.push(\"<div\" + (jade.attrs({ 'style':(\"left: \" + (level.position.x) + \"%; bottom: \" + (level.position.y) + \"%; background-color: \" + (level.color) + \"\"), 'data-level-slug':(level.slug), 'data-level-original':(level.original), 'title':(i18n(level, 'name') + (level.disabled ? \" (\" + translate('common.coming_soon') + \")\" : '')), \"class\": [(\"level\" + (level.next ? \" next\" : \"\") + (level.disabled ? \" disabled\" : \"\") + (level.locked ? \" locked\" : \"\") + \" \" + (levelStatusMap[level.slug] || \"\"))] }, {\"style\":true,\"class\":true,\"data-level-slug\":true,\"data-level-original\":true,\"title\":true})) + \">\");\nif ( level.unlocksHero && (!level.purchasedHero || editorMode) && (level.hidden || levelStatusMap[level.slug] === 'complete'))\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(\"/file/db/thang.type/\" + (level.unlocksHero) + \"/portrait.png\"), \"class\": [('hero-portrait')] }, {\"src\":true})) + \"/>\");\n}\nbuf.push(\"<a\" + (jade.attrs({ 'href':(level.type == 'hero' ? '#' : level.disabled ? \"/play\" : \"/play/\" + (level.levelPath || 'level') + \"/\" + (level.slug) + \"\"), 'disabled':(level.disabled), 'data-level-slug':(level.slug), 'data-level-path':(level.levelPath || 'level'), 'data-level-name':(level.name) }, {\"href\":true,\"disabled\":true,\"data-level-slug\":true,\"data-level-path\":true,\"data-level-name\":true})) + \"></a>\");\nif ( levelStatusMap[level.slug] === 'complete')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/star.png\\\" class=\\\"star\\\"/>\");\n}\nif ( editorMode)\n{\nvar kindKey = ((level.kind && level.kind[0]) || \"\").toUpperCase();\nbuf.push(\"<!--if kindKey--><div\" + (jade.attrs({ \"class\": [(\"level-kind \" + level.kind)] }, {\"class\":true})) + \">\" + (jade.escape(null == (jade.interp = kindKey) ? \"\" : jade.interp)) + \"</div>\");\nvar acronym = level.name.replace(/(A |The )/g, '').replace(/[^A-Z]/g, '');\nbuf.push(\"<div class=\\\"level-acronym\\\">\" + (jade.escape(null == (jade.interp = acronym) ? \"\" : jade.interp)) + \"</div>\");\n}\nif ( !level.hidden)\n{\nif ( level.replayable)\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level-banner-replayable.png\\\" class=\\\"banner\\\"/>\");\n}\nelse if ( level.type === 'hero-ladder' || level.type === 'course-ladder')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level-banner-multiplayer.png\\\" class=\\\"banner\\\"/>\");\n}\nelse if ( ['kithgard-gates', 'siege-of-stonehold', 'clash-of-clones', 'summits-gate', 'kithgard-mastery'].indexOf(level.slug) !== -1 && levelStatusMap[level.slug] !== 'complete')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level-banner-special.png\\\" class=\\\"banner\\\"/>\");\n}\nelse if ( level.unlocksHero && levelStatusMap[level.slug] !== 'complete')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level-banner-unlock.png\\\" class=\\\"banner\\\"/><img\" + (jade.attrs({ 'src':(\"/file/db/thang.type/\" + (level.unlocksHero) + \"/portrait.png\"), \"class\": [('hero-portrait'),('hero-portrait-on-banner')] }, {\"src\":true})) + \"/>\");\n}\nelse if ( level.unlocksItem && levelStatusMap[level.slug] !== 'complete')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level-banner-unlock.png\\\" class=\\\"banner\\\"/><img\" + (jade.attrs({ 'src':(\"/file/db/thang.type/\" + (level.unlocksItem) + \"/portrait.png\"), \"class\": [('item-portrait'),('item-portrait-on-banner')] }, {\"src\":true})) + \"/>\");\n}\nelse if ( levelStatusMap[level.slug] === 'started')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level-banner-started.png\\\" class=\\\"banner\\\"/>\");\n}\nelse if ( levelStatusMap[level.slug] !== 'complete')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level-banner-unstarted.png\\\" class=\\\"banner\\\"/>\");\n}\nif ( levelDifficultyMap[level.slug])\n{\nbuf.push(\"<div class=\\\"level-difficulty-banner-text\\\">\" + (jade.escape(null == (jade.interp = levelDifficultyMap[level.slug]) ? \"\" : jade.interp)) + \"</div>\");\n}\n}\nbuf.push(\"</div><div\" + (jade.attrs({ 'style':(\"left: \" + (level.position.x) + \"%; bottom: \" + (level.position.y) + \"%\"), \"class\": [(\"level-shadow\" + (level.next ? \" next\" : \"\") + (level.locked ? \" locked\" : \"\") + \" \" + (levelStatusMap[level.slug] || \"\"))] }, {\"style\":true,\"class\":true})) + \"></div><div\" + (jade.attrs({ 'data-level-slug':(level.slug), 'data-level-path':(level.levelPath || 'level'), 'data-level-name':(level.name), \"class\": [('level-info-container')] }, {\"data-level-slug\":true,\"data-level-path\":true,\"data-level-name\":true})) + \">\");\nvar playCount = levelPlayCountMap[level.slug]\nbuf.push(\"<div class=\\\"progress progress-striped active hide\\\"><div style=\\\"width: 100%\\\" class=\\\"progress-bar\\\"></div></div>\");\nvar showsLeaderboard = levelStatusMap[level.slug] === 'complete' && ((level.scoreTypes && level.scoreTypes.length) || ['hero-ladder', 'course-ladder'].indexOf(level.type) !== -1);\nbuf.push(\"<div\" + (jade.attrs({ \"class\": [(\"level-info \" + (levelStatusMap[level.slug] || \"\") + (level.requiresSubscription ? \" premium\" : \"\") + (showsLeaderboard ? \" shows-leaderboard\" : \"\"))] }, {\"class\":true})) + \"><div class=\\\"level-status\\\"></div><h3>\" + (jade.escape(null == (jade.interp = i18n(level, 'name') + (level.disabled ? \" (\" + translate('common.coming_soon') + \")\" : (level.locked ? \" (\" + translate('play.locked') + \")\" : \"\"))) ? \"\" : jade.interp)) + \"</h3>\");\nvar description = i18n(level, 'description') || level.description || \"\"\nbuf.push(\"<div class=\\\"level-description\\\">\" + (null == (jade.interp = marked(description, {sanitize: !picoCTF})) ? \"\" : jade.interp) + \"</div>\");\nif ( level.disabled)\n{\nbuf.push(\"<p><span data-i18n=\\\"play.awaiting_levels_adventurer_prefix\\\" class=\\\"spr\\\">We release five levels per week.</span><a href=\\\"/contribute/adventurer\\\" class=\\\"spr\\\"><strong data-i18n=\\\"play.awaiting_levels_adventurer\\\">Sign up as an Adventurer</strong></a><span data-i18n=\\\"play.awaiting_levels_adventurer_suffix\\\" class=\\\"spl\\\">to be the first to play new levels.</span></p>\");\n}\nif ( level.displayConcepts && level.displayConcepts.length)\n{\nbuf.push(\"<p>\");\n// iterate level.displayConcepts\n;(function(){\n  var $$obj = level.displayConcepts;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var concept = $$obj[$index];\n\nbuf.push(\"<kbd\" + (jade.attrs({ 'data-i18n':(\"concepts.\" + concept) }, {\"data-i18n\":true})) + \"></kbd>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var concept = $$obj[$index];\n\nbuf.push(\"<kbd\" + (jade.attrs({ 'data-i18n':(\"concepts.\" + concept) }, {\"data-i18n\":true})) + \"></kbd>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</p>\");\n}\nif ( !level.disabled && !level.locked)\n{\nif ( playCount && playCount.sessions)\n{\nbuf.push(\"<div class=\\\"play-counts hidden\\\"><span class=\\\"spl spr\\\">\" + (jade.escape(null == (jade.interp = playCount.sessions) ? \"\" : jade.interp)) + \"</span><span data-i18n=\\\"play.players\\\">players</span><span class=\\\"spr\\\">, \" + (jade.escape((jade.interp = Math.round(playCount.playtime / 3600)) == null ? '' : jade.interp)) + \"</span><span data-i18n=\\\"play.hours_played\\\">hours played</span></div>\");\n}\nif ( showsLeaderboard)\n{\nbuf.push(\"<button\" + (jade.attrs({ 'data-level-slug':(level.slug), \"class\": [('btn'),('btn-warning'),('btn'),('btn-lg'),('btn-illustrated'),('view-solutions')] }, {\"data-level-slug\":true})) + \"><span data-i18n=\\\"leaderboard.scores\\\"></span></button>\");\n}\nbuf.push(\"<button data-i18n=\\\"common.play\\\" class=\\\"btn btn-success btn btn-lg btn-illustrated start-level\\\">Play</button>\");\nif ( me.get('courseInstances') && me.get('courseInstances').length)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-level-original':(level.original), \"class\": [('course-version'),('hidden')] }, {\"data-level-original\":true})) + \"><em data-i18n=\\\"general.or\\\"></em>...<br/><button class=\\\"btn btn-primary btn btn-lg btn-illustrated\\\"><span data-i18n=\\\"play.play_classroom_version\\\">Play Classroom Version</span></button></div>\");\n}\n}\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var level = $$obj[$index];\n\nif ((campaign.levelIsPractice(level) || !level.unlockedInSameCampaign) && level.hidden)\n{\ncontinue;\n}\nbuf.push(\"<div\" + (jade.attrs({ 'style':(\"left: \" + (level.position.x) + \"%; bottom: \" + (level.position.y) + \"%; background-color: \" + (level.color) + \"\"), 'data-level-slug':(level.slug), 'data-level-original':(level.original), 'title':(i18n(level, 'name') + (level.disabled ? \" (\" + translate('common.coming_soon') + \")\" : '')), \"class\": [(\"level\" + (level.next ? \" next\" : \"\") + (level.disabled ? \" disabled\" : \"\") + (level.locked ? \" locked\" : \"\") + \" \" + (levelStatusMap[level.slug] || \"\"))] }, {\"style\":true,\"class\":true,\"data-level-slug\":true,\"data-level-original\":true,\"title\":true})) + \">\");\nif ( level.unlocksHero && (!level.purchasedHero || editorMode) && (level.hidden || levelStatusMap[level.slug] === 'complete'))\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(\"/file/db/thang.type/\" + (level.unlocksHero) + \"/portrait.png\"), \"class\": [('hero-portrait')] }, {\"src\":true})) + \"/>\");\n}\nbuf.push(\"<a\" + (jade.attrs({ 'href':(level.type == 'hero' ? '#' : level.disabled ? \"/play\" : \"/play/\" + (level.levelPath || 'level') + \"/\" + (level.slug) + \"\"), 'disabled':(level.disabled), 'data-level-slug':(level.slug), 'data-level-path':(level.levelPath || 'level'), 'data-level-name':(level.name) }, {\"href\":true,\"disabled\":true,\"data-level-slug\":true,\"data-level-path\":true,\"data-level-name\":true})) + \"></a>\");\nif ( levelStatusMap[level.slug] === 'complete')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/star.png\\\" class=\\\"star\\\"/>\");\n}\nif ( editorMode)\n{\nvar kindKey = ((level.kind && level.kind[0]) || \"\").toUpperCase();\nbuf.push(\"<!--if kindKey--><div\" + (jade.attrs({ \"class\": [(\"level-kind \" + level.kind)] }, {\"class\":true})) + \">\" + (jade.escape(null == (jade.interp = kindKey) ? \"\" : jade.interp)) + \"</div>\");\nvar acronym = level.name.replace(/(A |The )/g, '').replace(/[^A-Z]/g, '');\nbuf.push(\"<div class=\\\"level-acronym\\\">\" + (jade.escape(null == (jade.interp = acronym) ? \"\" : jade.interp)) + \"</div>\");\n}\nif ( !level.hidden)\n{\nif ( level.replayable)\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level-banner-replayable.png\\\" class=\\\"banner\\\"/>\");\n}\nelse if ( level.type === 'hero-ladder' || level.type === 'course-ladder')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level-banner-multiplayer.png\\\" class=\\\"banner\\\"/>\");\n}\nelse if ( ['kithgard-gates', 'siege-of-stonehold', 'clash-of-clones', 'summits-gate', 'kithgard-mastery'].indexOf(level.slug) !== -1 && levelStatusMap[level.slug] !== 'complete')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level-banner-special.png\\\" class=\\\"banner\\\"/>\");\n}\nelse if ( level.unlocksHero && levelStatusMap[level.slug] !== 'complete')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level-banner-unlock.png\\\" class=\\\"banner\\\"/><img\" + (jade.attrs({ 'src':(\"/file/db/thang.type/\" + (level.unlocksHero) + \"/portrait.png\"), \"class\": [('hero-portrait'),('hero-portrait-on-banner')] }, {\"src\":true})) + \"/>\");\n}\nelse if ( level.unlocksItem && levelStatusMap[level.slug] !== 'complete')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level-banner-unlock.png\\\" class=\\\"banner\\\"/><img\" + (jade.attrs({ 'src':(\"/file/db/thang.type/\" + (level.unlocksItem) + \"/portrait.png\"), \"class\": [('item-portrait'),('item-portrait-on-banner')] }, {\"src\":true})) + \"/>\");\n}\nelse if ( levelStatusMap[level.slug] === 'started')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level-banner-started.png\\\" class=\\\"banner\\\"/>\");\n}\nelse if ( levelStatusMap[level.slug] !== 'complete')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level-banner-unstarted.png\\\" class=\\\"banner\\\"/>\");\n}\nif ( levelDifficultyMap[level.slug])\n{\nbuf.push(\"<div class=\\\"level-difficulty-banner-text\\\">\" + (jade.escape(null == (jade.interp = levelDifficultyMap[level.slug]) ? \"\" : jade.interp)) + \"</div>\");\n}\n}\nbuf.push(\"</div><div\" + (jade.attrs({ 'style':(\"left: \" + (level.position.x) + \"%; bottom: \" + (level.position.y) + \"%\"), \"class\": [(\"level-shadow\" + (level.next ? \" next\" : \"\") + (level.locked ? \" locked\" : \"\") + \" \" + (levelStatusMap[level.slug] || \"\"))] }, {\"style\":true,\"class\":true})) + \"></div><div\" + (jade.attrs({ 'data-level-slug':(level.slug), 'data-level-path':(level.levelPath || 'level'), 'data-level-name':(level.name), \"class\": [('level-info-container')] }, {\"data-level-slug\":true,\"data-level-path\":true,\"data-level-name\":true})) + \">\");\nvar playCount = levelPlayCountMap[level.slug]\nbuf.push(\"<div class=\\\"progress progress-striped active hide\\\"><div style=\\\"width: 100%\\\" class=\\\"progress-bar\\\"></div></div>\");\nvar showsLeaderboard = levelStatusMap[level.slug] === 'complete' && ((level.scoreTypes && level.scoreTypes.length) || ['hero-ladder', 'course-ladder'].indexOf(level.type) !== -1);\nbuf.push(\"<div\" + (jade.attrs({ \"class\": [(\"level-info \" + (levelStatusMap[level.slug] || \"\") + (level.requiresSubscription ? \" premium\" : \"\") + (showsLeaderboard ? \" shows-leaderboard\" : \"\"))] }, {\"class\":true})) + \"><div class=\\\"level-status\\\"></div><h3>\" + (jade.escape(null == (jade.interp = i18n(level, 'name') + (level.disabled ? \" (\" + translate('common.coming_soon') + \")\" : (level.locked ? \" (\" + translate('play.locked') + \")\" : \"\"))) ? \"\" : jade.interp)) + \"</h3>\");\nvar description = i18n(level, 'description') || level.description || \"\"\nbuf.push(\"<div class=\\\"level-description\\\">\" + (null == (jade.interp = marked(description, {sanitize: !picoCTF})) ? \"\" : jade.interp) + \"</div>\");\nif ( level.disabled)\n{\nbuf.push(\"<p><span data-i18n=\\\"play.awaiting_levels_adventurer_prefix\\\" class=\\\"spr\\\">We release five levels per week.</span><a href=\\\"/contribute/adventurer\\\" class=\\\"spr\\\"><strong data-i18n=\\\"play.awaiting_levels_adventurer\\\">Sign up as an Adventurer</strong></a><span data-i18n=\\\"play.awaiting_levels_adventurer_suffix\\\" class=\\\"spl\\\">to be the first to play new levels.</span></p>\");\n}\nif ( level.displayConcepts && level.displayConcepts.length)\n{\nbuf.push(\"<p>\");\n// iterate level.displayConcepts\n;(function(){\n  var $$obj = level.displayConcepts;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var concept = $$obj[$index];\n\nbuf.push(\"<kbd\" + (jade.attrs({ 'data-i18n':(\"concepts.\" + concept) }, {\"data-i18n\":true})) + \"></kbd>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var concept = $$obj[$index];\n\nbuf.push(\"<kbd\" + (jade.attrs({ 'data-i18n':(\"concepts.\" + concept) }, {\"data-i18n\":true})) + \"></kbd>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</p>\");\n}\nif ( !level.disabled && !level.locked)\n{\nif ( playCount && playCount.sessions)\n{\nbuf.push(\"<div class=\\\"play-counts hidden\\\"><span class=\\\"spl spr\\\">\" + (jade.escape(null == (jade.interp = playCount.sessions) ? \"\" : jade.interp)) + \"</span><span data-i18n=\\\"play.players\\\">players</span><span class=\\\"spr\\\">, \" + (jade.escape((jade.interp = Math.round(playCount.playtime / 3600)) == null ? '' : jade.interp)) + \"</span><span data-i18n=\\\"play.hours_played\\\">hours played</span></div>\");\n}\nif ( showsLeaderboard)\n{\nbuf.push(\"<button\" + (jade.attrs({ 'data-level-slug':(level.slug), \"class\": [('btn'),('btn-warning'),('btn'),('btn-lg'),('btn-illustrated'),('view-solutions')] }, {\"data-level-slug\":true})) + \"><span data-i18n=\\\"leaderboard.scores\\\"></span></button>\");\n}\nbuf.push(\"<button data-i18n=\\\"common.play\\\" class=\\\"btn btn-success btn btn-lg btn-illustrated start-level\\\">Play</button>\");\nif ( me.get('courseInstances') && me.get('courseInstances').length)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-level-original':(level.original), \"class\": [('course-version'),('hidden')] }, {\"data-level-original\":true})) + \"><em data-i18n=\\\"general.or\\\"></em>...<br/><button class=\\\"btn btn-primary btn btn-lg btn-illustrated\\\"><span data-i18n=\\\"play.play_classroom_version\\\">Play Classroom Version</span></button></div>\");\n}\n}\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\n// iterate adjacentCampaigns\n;(function(){\n  var $$obj = adjacentCampaigns;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var adjacentCampaign = $$obj[$index];\n\nbuf.push(\"<a\" + (jade.attrs({ 'href':((editorMode ? \"/editor/campaign/\" : \"/play/\") + adjacentCampaign.slug) }, {\"href\":true})) + \"><span\" + (jade.attrs({ 'style':(adjacentCampaign.style), 'title':(adjacentCampaign.name), 'data-campaign-id':(adjacentCampaign.id), 'data-campaign-slug':(adjacentCampaign.slug), \"class\": [('glyphicon'),('glyphicon-share-alt'),('campaign-switch')] }, {\"style\":true,\"title\":true,\"data-campaign-id\":true,\"data-campaign-slug\":true})) + \"></span></a>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var adjacentCampaign = $$obj[$index];\n\nbuf.push(\"<a\" + (jade.attrs({ 'href':((editorMode ? \"/editor/campaign/\" : \"/play/\") + adjacentCampaign.slug) }, {\"href\":true})) + \"><span\" + (jade.attrs({ 'style':(adjacentCampaign.style), 'title':(adjacentCampaign.name), 'data-campaign-id':(adjacentCampaign.id), 'data-campaign-slug':(adjacentCampaign.slug), \"class\": [('glyphicon'),('glyphicon-share-alt'),('campaign-switch')] }, {\"style\":true,\"title\":true,\"data-campaign-id\":true,\"data-campaign-slug\":true})) + \"></span></a>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"portal\\\"><div class=\\\"portals\\\">\");\n// iterate features.campaignSlugs || ['dungeon', 'beta-campaigns-1', 'forest', 'beta-campaigns-2', 'desert', 'mountain', 'glacier', 'volcano']\n;(function(){\n  var $$obj = features.campaignSlugs || ['dungeon', 'beta-campaigns-1', 'forest', 'beta-campaigns-2', 'desert', 'mountain', 'glacier', 'volcano'];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var campaignSlug = $$obj[$index];\n\nif ( campaignSlug === 'beta-campaigns-1' || campaignSlug === 'beta-campaigns-2')\n{\nif (features.freeOnly) continue;\nvar betaSlugs = campaignSlug === 'beta-campaigns-1' ? _.shuffle(['campaign-game-dev-1', 'campaign-web-dev-1']) : _.shuffle(['campaign-game-dev-2', 'campaign-web-dev-2']);\nbuf.push(\"<div class=\\\"beta-container\\\">\");\n// iterate betaSlugs\n;(function(){\n  var $$obj = betaSlugs;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var campaignSlug = $$obj[$index];\n\nvar campaign = campaigns[campaignSlug];\nif ( !campaign)\n{\ncontinue;\n}\nbuf.push(\"<div\" + (jade.attrs({ 'data-campaign-slug':(campaignSlug), \"class\": [(\"beta-campaign\" + (campaign ? \"\" : \" silhouette\") + (campaign && campaign.locked && !godmode ? \" locked\" : \"\"))] }, {\"class\":true,\"data-campaign-slug\":true})) + \"><div\" + (jade.attrs({ \"class\": [('background-container'),(\"\" + (campaignSlug) + \"\")] }, {\"class\":true})) + \"></div><div class=\\\"campaign-label\\\"><h3 class=\\\"campaign-name\\\">\");\nif ( campaign)\n{\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = i18n(campaign.attributes, 'fullName')) ? \"\" : jade.interp)) + \"</span>\");\nif ( campaign.levelsTotal)\n{\nbuf.push(\"<span class=\\\"spl\\\">\" + (jade.escape(null == (jade.interp = campaign.levelsCompleted) ? \"\" : jade.interp)) + \"</span>/<span>\" + (jade.escape(null == (jade.interp = campaign.levelsTotal) ? \"\" : jade.interp)) + \"</span>\");\n}\n}\nelse\n{\nbuf.push(\"<span>???</span>\");\n}\nbuf.push(\"</h3>\");\nif ( campaign && campaign.locked && !godmode)\n{\nbuf.push(\"<h4 data-i18n=\\\"play.locked\\\" class=\\\"campaign-locked\\\">Locked</h4>\");\n}\nelse if ( campaign)\n{\nbuf.push(\"<btn data-i18n=\\\"common.play\\\" class=\\\"btn btn-illustrated btn-lg btn-primary play-button\\\"></btn>\");\n}\nif ( campaign && campaign.get('description'))\n{\nbuf.push(\"<p class=\\\"campaign-description\\\"><span>\" + (jade.escape(null == (jade.interp = i18n(campaign.attributes, 'description')) ? \"\" : jade.interp)) + \"</span></p>\");\n}\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var campaignSlug = $$obj[$index];\n\nvar campaign = campaigns[campaignSlug];\nif ( !campaign)\n{\ncontinue;\n}\nbuf.push(\"<div\" + (jade.attrs({ 'data-campaign-slug':(campaignSlug), \"class\": [(\"beta-campaign\" + (campaign ? \"\" : \" silhouette\") + (campaign && campaign.locked && !godmode ? \" locked\" : \"\"))] }, {\"class\":true,\"data-campaign-slug\":true})) + \"><div\" + (jade.attrs({ \"class\": [('background-container'),(\"\" + (campaignSlug) + \"\")] }, {\"class\":true})) + \"></div><div class=\\\"campaign-label\\\"><h3 class=\\\"campaign-name\\\">\");\nif ( campaign)\n{\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = i18n(campaign.attributes, 'fullName')) ? \"\" : jade.interp)) + \"</span>\");\nif ( campaign.levelsTotal)\n{\nbuf.push(\"<span class=\\\"spl\\\">\" + (jade.escape(null == (jade.interp = campaign.levelsCompleted) ? \"\" : jade.interp)) + \"</span>/<span>\" + (jade.escape(null == (jade.interp = campaign.levelsTotal) ? \"\" : jade.interp)) + \"</span>\");\n}\n}\nelse\n{\nbuf.push(\"<span>???</span>\");\n}\nbuf.push(\"</h3>\");\nif ( campaign && campaign.locked && !godmode)\n{\nbuf.push(\"<h4 data-i18n=\\\"play.locked\\\" class=\\\"campaign-locked\\\">Locked</h4>\");\n}\nelse if ( campaign)\n{\nbuf.push(\"<btn data-i18n=\\\"common.play\\\" class=\\\"btn btn-illustrated btn-lg btn-primary play-button\\\"></btn>\");\n}\nif ( campaign && campaign.get('description'))\n{\nbuf.push(\"<p class=\\\"campaign-description\\\"><span>\" + (jade.escape(null == (jade.interp = i18n(campaign.attributes, 'description')) ? \"\" : jade.interp)) + \"</span></p>\");\n}\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nelse\n{\nvar campaign = campaigns[campaignSlug];\nvar godmode = me.get('permissions', true).indexOf('godmode') != -1;\nbuf.push(\"<div\" + (jade.attrs({ 'data-campaign-slug':(campaignSlug), \"class\": [(\"campaign \" + (campaignSlug) + \"\" + (campaign ? \"\" : \" silhouette\") + (campaign && campaign.locked && !godmode ? \" locked\" : \"\"))] }, {\"class\":true,\"data-campaign-slug\":true})) + \"><div class=\\\"campaign-label\\\"><h2 class=\\\"campaign-name\\\">\");\nif ( campaign)\n{\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = i18n(campaign.attributes, 'fullName')) ? \"\" : jade.interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<span>???</span>\");\n}\nbuf.push(\"</h2>\");\nif ( campaign && campaign.levelsTotal)\n{\nbuf.push(\"<h3 class=\\\"levels-completed\\\"><span>\" + (jade.escape(null == (jade.interp = campaign.levelsCompleted) ? \"\" : jade.interp)) + \"</span>/<span>\" + (jade.escape(null == (jade.interp = campaign.levelsTotal) ? \"\" : jade.interp)) + \"</span></h3>\");\n}\nif ( campaign && campaign.locked && !godmode)\n{\nbuf.push(\"<h3 data-i18n=\\\"play.locked\\\" class=\\\"campaign-locked\\\">Locked</h3>\");\n}\nelse if ( campaign)\n{\nbuf.push(\"<btn data-i18n=\\\"common.play\\\" class=\\\"btn btn-illustrated btn-lg btn-success play-button\\\"></btn>\");\n}\nif ( campaign && campaign.get('description'))\n{\nbuf.push(\"<p class=\\\"campaign-description\\\"><span>\" + (jade.escape(null == (jade.interp = i18n(campaign.attributes, 'description')) ? \"\" : jade.interp)) + \"</span></p>\");\n}\nbuf.push(\"</div></div>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var campaignSlug = $$obj[$index];\n\nif ( campaignSlug === 'beta-campaigns-1' || campaignSlug === 'beta-campaigns-2')\n{\nif (features.freeOnly) continue;\nvar betaSlugs = campaignSlug === 'beta-campaigns-1' ? _.shuffle(['campaign-game-dev-1', 'campaign-web-dev-1']) : _.shuffle(['campaign-game-dev-2', 'campaign-web-dev-2']);\nbuf.push(\"<div class=\\\"beta-container\\\">\");\n// iterate betaSlugs\n;(function(){\n  var $$obj = betaSlugs;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var campaignSlug = $$obj[$index];\n\nvar campaign = campaigns[campaignSlug];\nif ( !campaign)\n{\ncontinue;\n}\nbuf.push(\"<div\" + (jade.attrs({ 'data-campaign-slug':(campaignSlug), \"class\": [(\"beta-campaign\" + (campaign ? \"\" : \" silhouette\") + (campaign && campaign.locked && !godmode ? \" locked\" : \"\"))] }, {\"class\":true,\"data-campaign-slug\":true})) + \"><div\" + (jade.attrs({ \"class\": [('background-container'),(\"\" + (campaignSlug) + \"\")] }, {\"class\":true})) + \"></div><div class=\\\"campaign-label\\\"><h3 class=\\\"campaign-name\\\">\");\nif ( campaign)\n{\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = i18n(campaign.attributes, 'fullName')) ? \"\" : jade.interp)) + \"</span>\");\nif ( campaign.levelsTotal)\n{\nbuf.push(\"<span class=\\\"spl\\\">\" + (jade.escape(null == (jade.interp = campaign.levelsCompleted) ? \"\" : jade.interp)) + \"</span>/<span>\" + (jade.escape(null == (jade.interp = campaign.levelsTotal) ? \"\" : jade.interp)) + \"</span>\");\n}\n}\nelse\n{\nbuf.push(\"<span>???</span>\");\n}\nbuf.push(\"</h3>\");\nif ( campaign && campaign.locked && !godmode)\n{\nbuf.push(\"<h4 data-i18n=\\\"play.locked\\\" class=\\\"campaign-locked\\\">Locked</h4>\");\n}\nelse if ( campaign)\n{\nbuf.push(\"<btn data-i18n=\\\"common.play\\\" class=\\\"btn btn-illustrated btn-lg btn-primary play-button\\\"></btn>\");\n}\nif ( campaign && campaign.get('description'))\n{\nbuf.push(\"<p class=\\\"campaign-description\\\"><span>\" + (jade.escape(null == (jade.interp = i18n(campaign.attributes, 'description')) ? \"\" : jade.interp)) + \"</span></p>\");\n}\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var campaignSlug = $$obj[$index];\n\nvar campaign = campaigns[campaignSlug];\nif ( !campaign)\n{\ncontinue;\n}\nbuf.push(\"<div\" + (jade.attrs({ 'data-campaign-slug':(campaignSlug), \"class\": [(\"beta-campaign\" + (campaign ? \"\" : \" silhouette\") + (campaign && campaign.locked && !godmode ? \" locked\" : \"\"))] }, {\"class\":true,\"data-campaign-slug\":true})) + \"><div\" + (jade.attrs({ \"class\": [('background-container'),(\"\" + (campaignSlug) + \"\")] }, {\"class\":true})) + \"></div><div class=\\\"campaign-label\\\"><h3 class=\\\"campaign-name\\\">\");\nif ( campaign)\n{\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = i18n(campaign.attributes, 'fullName')) ? \"\" : jade.interp)) + \"</span>\");\nif ( campaign.levelsTotal)\n{\nbuf.push(\"<span class=\\\"spl\\\">\" + (jade.escape(null == (jade.interp = campaign.levelsCompleted) ? \"\" : jade.interp)) + \"</span>/<span>\" + (jade.escape(null == (jade.interp = campaign.levelsTotal) ? \"\" : jade.interp)) + \"</span>\");\n}\n}\nelse\n{\nbuf.push(\"<span>???</span>\");\n}\nbuf.push(\"</h3>\");\nif ( campaign && campaign.locked && !godmode)\n{\nbuf.push(\"<h4 data-i18n=\\\"play.locked\\\" class=\\\"campaign-locked\\\">Locked</h4>\");\n}\nelse if ( campaign)\n{\nbuf.push(\"<btn data-i18n=\\\"common.play\\\" class=\\\"btn btn-illustrated btn-lg btn-primary play-button\\\"></btn>\");\n}\nif ( campaign && campaign.get('description'))\n{\nbuf.push(\"<p class=\\\"campaign-description\\\"><span>\" + (jade.escape(null == (jade.interp = i18n(campaign.attributes, 'description')) ? \"\" : jade.interp)) + \"</span></p>\");\n}\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nelse\n{\nvar campaign = campaigns[campaignSlug];\nvar godmode = me.get('permissions', true).indexOf('godmode') != -1;\nbuf.push(\"<div\" + (jade.attrs({ 'data-campaign-slug':(campaignSlug), \"class\": [(\"campaign \" + (campaignSlug) + \"\" + (campaign ? \"\" : \" silhouette\") + (campaign && campaign.locked && !godmode ? \" locked\" : \"\"))] }, {\"class\":true,\"data-campaign-slug\":true})) + \"><div class=\\\"campaign-label\\\"><h2 class=\\\"campaign-name\\\">\");\nif ( campaign)\n{\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = i18n(campaign.attributes, 'fullName')) ? \"\" : jade.interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<span>???</span>\");\n}\nbuf.push(\"</h2>\");\nif ( campaign && campaign.levelsTotal)\n{\nbuf.push(\"<h3 class=\\\"levels-completed\\\"><span>\" + (jade.escape(null == (jade.interp = campaign.levelsCompleted) ? \"\" : jade.interp)) + \"</span>/<span>\" + (jade.escape(null == (jade.interp = campaign.levelsTotal) ? \"\" : jade.interp)) + \"</span></h3>\");\n}\nif ( campaign && campaign.locked && !godmode)\n{\nbuf.push(\"<h3 data-i18n=\\\"play.locked\\\" class=\\\"campaign-locked\\\">Locked</h3>\");\n}\nelse if ( campaign)\n{\nbuf.push(\"<btn data-i18n=\\\"common.play\\\" class=\\\"btn btn-illustrated btn-lg btn-success play-button\\\"></btn>\");\n}\nif ( campaign && campaign.get('description'))\n{\nbuf.push(\"<p class=\\\"campaign-description\\\"><span>\" + (jade.escape(null == (jade.interp = i18n(campaign.attributes, 'description')) ? \"\" : jade.interp)) + \"</span></p>\");\n}\nbuf.push(\"</div></div>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div>\");\n}\nbuf.push(\"<div class=\\\"game-controls header-font picoctf-hide\\\"><button data-i18n=\\\"[title]play.poll\\\" class=\\\"btn poll hidden\\\"></button>\");\nif ( !features.codePlay)\n{\nbuf.push(\"<a href=\\\"/clans\\\" data-i18n=\\\"[title]clans.clans\\\" class=\\\"btn clans\\\"></a>\");\n}\nbuf.push(\"<button data-toggle=\\\"coco-modal\\\" data-target=\\\"play/modal/PlayItemsModal\\\" data-i18n=\\\"[title]play.items\\\" class=\\\"btn items\\\"></button><button data-toggle=\\\"coco-modal\\\" data-target=\\\"play/modal/PlayHeroesModal\\\" data-i18n=\\\"[title]play.heroes\\\" class=\\\"btn heroes\\\"></button><button data-toggle=\\\"coco-modal\\\" data-target=\\\"play/modal/PlayAchievementsModal\\\" data-i18n=\\\"[title]play.achievements\\\" class=\\\"btn achievements\\\"></button>\");\nif ( !me.get('anonymous', true) && !features.codePlay)\n{\nbuf.push(\"<a href=\\\"/account/settings\\\" data-original-title=\\\"Configuração\\\" class=\\\"btn account\\\"></a>\");\n}\nbuf.push(\"</div><div class=\\\"user-status header-font picoctf-hide\\\"><div class=\\\"user-status-line\\\"><span class=\\\"gem gem-30\\\"></span><span id=\\\"gems-count\\\" class=\\\"spr\\\">\" + (jade.escape(null == (jade.interp = me.gems()) ? \"\" : jade.interp)) + \"</span><span data-i18n=\\\"general.player_level\\\" class=\\\"level-indicator\\\"></span><span class=\\\"player-level spr\\\">\" + (jade.escape(null == (jade.interp = me.level()) ? \"\" : jade.interp)) + \"</span><span class=\\\"player-hero-icon\\\"></span>\");\nif ( me.get('anonymous'))\n{\nbuf.push(\"<span data-i18n=\\\"play.anonymous\\\" class=\\\"player-name spr\\\">Anonymous Player</span><button data-i18n=\\\"login.log_in\\\" class=\\\"btn btn-illustrated login-button btn-warning\\\"></button><button data-i18n=\\\"signup.sign_up\\\" class=\\\"btn btn-illustrated signup-button btn-danger\\\"></button>\");\n}\nelse\n{\nbuf.push(\"<a href=\\\"/account/settings\\\" class=\\\"player-name spr\\\">\" + (jade.escape(null == (jade.interp = me.get('name')) ? \"\" : jade.interp)) + \"</a><button id=\\\"logout-button\\\" data-i18n=\\\"login.log_out\\\" class=\\\"btn btn-illustrated btn-warning\\\">Log Out</button>\");\nif ( me.isPremium())\n{\nbuf.push(\"<button data-i18n=\\\"nav.contact\\\" data-toggle=\\\"coco-modal\\\" data-target=\\\"core/ContactModal\\\" class=\\\"btn btn-illustrated btn-primary\\\">Contact</button>\");\n}\n}\nbuf.push(\"</div></div><button id=\\\"volume-button\\\" data-i18n=\\\"[title]play.adjust_volume\\\" title=\\\"Adjust volume\\\" class=\\\"btn btn-lg btn-inverse campaign-control-button picoctf-hide\\\"><div class=\\\"glyphicon glyphicon-volume-off\\\"></div><div class=\\\"glyphicon glyphicon-volume-down\\\"></div><div class=\\\"glyphicon glyphicon-volume-up\\\"></div></button>\");\nif ( campaign && !editorMode)\n{\nbuf.push(\"<button id=\\\"back-button\\\" data-i18n=\\\"[title]resources.campaigns\\\" title=\\\"Campaigns\\\" class=\\\"btn btn-lg btn-inverse campaign-control-button picoctf-hide\\\"><div class=\\\"glyphicon glyphicon-globe\\\"></div></button>\");\n}\nif ( editorMode)\n{\nbuf.push(\"<button id=\\\"clear-storage-button\\\" data-i18n=\\\"[title]editor.clear_storage\\\" title=\\\"Clear your local changes\\\" class=\\\"btn btn-lg btn-inverse campaign-control-button\\\"><div class=\\\"glyphicon glyphicon-refresh\\\"></div></button>\");\n}\nif ( campaign && campaign.loaded)\n{\nbuf.push(\"<h1 id=\\\"campaign-status\\\" class=\\\"picoctf-hide\\\"><div class=\\\"campaign-status-background\\\"><div class=\\\"campaign-name\\\"><span>\" + (jade.escape(null == (jade.interp = i18n(campaign.attributes, 'fullName')) ? \"\" : jade.interp)) + \"</span></div><div class=\\\"levels-completed\\\"><span>\" + (jade.escape(null == (jade.interp = levelsCompleted) ? \"\" : jade.interp)) + \"</span>/<span>\" + (jade.escape(null == (jade.interp = levelsTotal) ? \"\" : jade.interp)) + \"</span></div></div></h1>\");\n}\nbuf.push(\"</div>\");\nif ( campaign && !me.finishedAnyLevels() && serverConfig.showCodePlayAds)\n{\nbuf.push(\"<a href=\\\"https://lenovogamestate.com/\\\">\");\nvar url = \"/images/common/codeplay/NA_LevelsPage_Cube_160x480.png\"\nif ( me.isFromUk())\n{\nurl = \"/images/common/codeplay/UK_LevelsPage_Cube_160x480.png\"\n}\nbuf.push(\"<img\" + (jade.attrs({ 'id':('codeplay-ad'), 'src':(url) }, {\"src\":true})) + \"/></a>\");\n};return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),lastSubmitted = locals_.lastSubmitted,simulateURL = locals_.simulateURL;buf.push(\"<button class=\\\"btn btn-lg btn-block btn-success rank-button btn-illustrated\\\"><span data-i18n=\\\"ladder.rank_no_code\\\" class=\\\"unavailable secret\\\">No New Code to Rank</span><span data-i18n=\\\"ladder.rank_my_game\\\" class=\\\"rank secret\\\">Rank My Game!</span><span data-i18n=\\\"ladder.rank_submitting\\\" class=\\\"submitting secret\\\">Submitting...</span><span data-i18n=\\\"ladder.rank_submitted\\\" class=\\\"submitted secret\\\">Submitted for Ranking</span><span data-i18n=\\\"ladder.rank_failed\\\" class=\\\"failed secret\\\">Failed to Rank</span><span data-i18n=\\\"ladder.rank_being_ranked\\\" class=\\\"ranking secret\\\">Game Being Ranked</span></button>\");\nif ( lastSubmitted)\n{\nbuf.push(\"<div class=\\\"last-submitted secret\\\"><span data-i18n=\\\"ladder.rank_last_submitted\\\">submitted </span>\" + (jade.escape((jade.interp = lastSubmitted) == null ? '' : jade.interp)) + \"</div>\");\n}\nbuf.push(\"<a\" + (jade.attrs({ 'href':(simulateURL), 'data-i18n':(\"ladder.help_simulate\"), \"class\": [('help-simulate'),('secret')] }, {\"href\":true,\"data-i18n\":true})) + \">Help simulate games?</a><div class=\\\"clearfix\\\"></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,me = locals_.me,_ = locals_._,moment = locals_.moment,onFacebook = locals_.onFacebook,onGPlus = locals_.onGPlus;var league = view.options.league\nbuf.push(\"<div class=\\\"row\\\">\");\n// iterate view.teams\n;(function(){\n  var $$obj = view.teams;\n  if ('number' == typeof $$obj.length) {\n\n    for (var teamIndex = 0, $$l = $$obj.length; teamIndex < $$l; teamIndex++) {\n      var team = $$obj[teamIndex];\n\nbuf.push(\"<div class=\\\"column col-md-6\\\"><div\" + (jade.attrs({ 'id':(\"histogram-display-\" + (team.name) + \"\"), 'data-team-name':(team.name), \"class\": [(\"histogram-display\")] }, {\"id\":true,\"class\":true,\"data-team-name\":true})) + \"></div><table\" + (jade.attrs({ 'data-team':(team.id), \"class\": [('table'),('table-bordered'),('table-condensed'),('table-hover'),('ladder-table')] }, {\"data-team\":true})) + \">\");\nvar levelType = view.level.get('type', true)\nvar topSessions = team.leaderboard.topPlayers.models;\nvar showJustTop = team.leaderboard.inTopSessions() || me.get('anonymous');\nif(!showJustTop && topSessions.length == 20) topSessions = topSessions.slice(0, 10);\nbuf.push(\"<thead><tr><th\" + (jade.attrs({ 'colspan':(levelType == 'hero-ladder' ? 3 : 2) }, {\"colspan\":true})) + \"></th><th\" + (jade.attrs({ 'colspan':(4), 'style':(\"color: \" + (team.primaryColor) + \"\") }, {\"colspan\":true,\"style\":true})) + \"><span>\" + (jade.escape(null == (jade.interp = team.displayName) ? \"\" : jade.interp)) + \"</span><span data-i18n=\\\"ladder.leaderboard\\\" class=\\\"spl\\\">Leaderboard</span></th></tr><tr><th\" + (jade.attrs({ 'colspan':(levelType == 'hero-ladder' ? 3 : 2) }, {\"colspan\":true})) + \"></th><th data-i18n=\\\"general.score\\\">Score</th><th data-i18n=\\\"general.name\\\" class=\\\"name-col-cell\\\">Name</th><th data-i18n=\\\"general.when\\\">When</th><th></th><th class=\\\"iconic-cell\\\"><div class=\\\"glyphicon glyphicon-eye-open\\\"></div></th></tr></thead><tbody>         \");\n// iterate topSessions\n;(function(){\n  var $$obj = topSessions;\n  if ('number' == typeof $$obj.length) {\n\n    for (var rank = 0, $$l = $$obj.length; rank < $$l; rank++) {\n      var session = $$obj[rank];\n\nvar myRow = session.get('creator') == me.id\nvar sessionStats = league ? (_.find(session.get('leagues') || [], {leagueID: league.id}) || {}).stats || {} : session.attributes;\nbuf.push(\"<tr\" + (jade.attrs({ 'data-player-id':(session.get('creator')), 'data-session-id':(session.id), \"class\": [(myRow ? \"success\" : \"\")] }, {\"class\":true,\"data-player-id\":true,\"data-session-id\":true})) + \"><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + session.get('submittedCodeLanguage') + \"_icon.png)\"), 'title':(view.capitalize(session.get('submittedCodeLanguage'))), \"class\": [('code-language-cell')] }, {\"style\":true,\"title\":true})) + \"></td>\");\nif ( levelType == 'hero-ladder')\n{\nbuf.push(\"<td\" + (jade.attrs({ 'style':(\"background-image: url(/file/db/thang.type/\" + ((session.get('heroConfig') || {}).thangType || '529ffbf1cf1818f2be000001') + \"/portrait.png)\"), \"class\": [('hero-portrait-cell')] }, {\"style\":true})) + \"></td>\");\n}\nbuf.push(\"<td class=\\\"rank-cell\\\">\" + (jade.escape(null == (jade.interp = rank + 1) ? \"\" : jade.interp)) + \"</td><td class=\\\"score-cell\\\">\" + (jade.escape(null == (jade.interp = Math.round((sessionStats.totalScore || session.get('totalScore') / 2) * 100)) ? \"\" : jade.interp)) + \"</td><td\" + (jade.attrs({ \"class\": [('name-col-cell' + ((new RegExp('(Simple|Shaman|Brawler|Chieftain|Thoktar) CPU')).test(session.get('creatorName')) ? ' ai' : ''))] }, {\"class\":true})) + \">\" + (jade.escape(null == (jade.interp = session.get('creatorName') || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"age-cell\\\">\" + (jade.escape(null == (jade.interp = moment(session.get('submitDate')).fromNow().replace('a few ', '')) ? \"\" : jade.interp)) + \"</td><td class=\\\"fight-cell\\\"><a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.level.get('slug') || view.level.id) + \"?team=\" + (team.otherTeam) + \"&opponent=\" + (session.id) + \"\" + (league ? \"&league=\" + league.id : \"\")) }, {\"href\":true})) + \"><span data-i18n=\\\"ladder.fight\\\">Fight!</span></a></td><td class=\\\"spectate-cell iconic-cell\\\"><div class=\\\"glyphicon glyphicon-eye-open\\\"></div></td></tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var rank in $$obj) {\n      $$l++;      var session = $$obj[rank];\n\nvar myRow = session.get('creator') == me.id\nvar sessionStats = league ? (_.find(session.get('leagues') || [], {leagueID: league.id}) || {}).stats || {} : session.attributes;\nbuf.push(\"<tr\" + (jade.attrs({ 'data-player-id':(session.get('creator')), 'data-session-id':(session.id), \"class\": [(myRow ? \"success\" : \"\")] }, {\"class\":true,\"data-player-id\":true,\"data-session-id\":true})) + \"><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + session.get('submittedCodeLanguage') + \"_icon.png)\"), 'title':(view.capitalize(session.get('submittedCodeLanguage'))), \"class\": [('code-language-cell')] }, {\"style\":true,\"title\":true})) + \"></td>\");\nif ( levelType == 'hero-ladder')\n{\nbuf.push(\"<td\" + (jade.attrs({ 'style':(\"background-image: url(/file/db/thang.type/\" + ((session.get('heroConfig') || {}).thangType || '529ffbf1cf1818f2be000001') + \"/portrait.png)\"), \"class\": [('hero-portrait-cell')] }, {\"style\":true})) + \"></td>\");\n}\nbuf.push(\"<td class=\\\"rank-cell\\\">\" + (jade.escape(null == (jade.interp = rank + 1) ? \"\" : jade.interp)) + \"</td><td class=\\\"score-cell\\\">\" + (jade.escape(null == (jade.interp = Math.round((sessionStats.totalScore || session.get('totalScore') / 2) * 100)) ? \"\" : jade.interp)) + \"</td><td\" + (jade.attrs({ \"class\": [('name-col-cell' + ((new RegExp('(Simple|Shaman|Brawler|Chieftain|Thoktar) CPU')).test(session.get('creatorName')) ? ' ai' : ''))] }, {\"class\":true})) + \">\" + (jade.escape(null == (jade.interp = session.get('creatorName') || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"age-cell\\\">\" + (jade.escape(null == (jade.interp = moment(session.get('submitDate')).fromNow().replace('a few ', '')) ? \"\" : jade.interp)) + \"</td><td class=\\\"fight-cell\\\"><a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.level.get('slug') || view.level.id) + \"?team=\" + (team.otherTeam) + \"&opponent=\" + (session.id) + \"\" + (league ? \"&league=\" + league.id : \"\")) }, {\"href\":true})) + \"><span data-i18n=\\\"ladder.fight\\\">Fight!</span></a></td><td class=\\\"spectate-cell iconic-cell\\\"><div class=\\\"glyphicon glyphicon-eye-open\\\"></div></td></tr>\");\n    }\n\n  }\n}).call(this);\n\nif ( !showJustTop && team.leaderboard.nearbySessions().length)\n{\nbuf.push(\"<tr class=\\\"active\\\"><td colspan=\\\"4\\\" class=\\\"ellipsis-row\\\">...</td></tr>\");\n// iterate team.leaderboard.nearbySessions()\n;(function(){\n  var $$obj = team.leaderboard.nearbySessions();\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var session = $$obj[$index];\n\nvar myRow = session.get('creator') == me.id\nvar sessionStats = league ? (_.find(session.get('leagues'), {leagueID: league.id}) || {}).stats || {} : session.attributes;\nbuf.push(\"<tr\" + (jade.attrs({ 'data-player-id':(session.get('creator')), 'data-session-id':(session.id), \"class\": [(myRow ? \"success\" : \"\")] }, {\"class\":true,\"data-player-id\":true,\"data-session-id\":true})) + \"><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + session.get('submittedCodeLanguage') + \"_icon.png)\"), \"class\": [('code-language-cell')] }, {\"style\":true})) + \"></td>\");\nif ( levelType == 'hero-ladder')\n{\nbuf.push(\"<td\" + (jade.attrs({ 'style':(\"background-image: url(/file/db/thang.type/\" + ((session.get('heroConfig') || {}).thangType || '529ffbf1cf1818f2be000001') + \"/portrait.png)\"), \"class\": [('hero-portrait-cell')] }, {\"style\":true})) + \"></td>\");\n}\nbuf.push(\"<td class=\\\"rank-cell\\\">\" + (jade.escape(null == (jade.interp = session.rank) ? \"\" : jade.interp)) + \"</td><td class=\\\"score-cell\\\">\" + (jade.escape(null == (jade.interp = Math.round((sessionStats.totalScore || session.get('totalScore') / 2) * 100)) ? \"\" : jade.interp)) + \"</td><td\" + (jade.attrs({ \"class\": [('name-col-cell' + ((new RegExp('(Simple|Shaman|Brawler|Chieftain|Thoktar) CPU')).test(session.get('creatorName')) ? ' ai' : ''))] }, {\"class\":true})) + \">\" + (jade.escape(null == (jade.interp = session.get('creatorName') || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"age-cell\\\">\" + (jade.escape(null == (jade.interp = moment(session.get('submitDate')).fromNow().replace('a few ', '')) ? \"\" : jade.interp)) + \"</td><td class=\\\"fight-cell\\\"><a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.level.get('slug') || view.level.id) + \"?team=\" + (team.otherTeam) + \"&opponent=\" + (session.id) + \"\" + (league ? \"&league=\" + league.id : \"\")) }, {\"href\":true})) + \"><span data-i18n=\\\"ladder.fight\\\">Fight!</span></a></td><td class=\\\"spectate-cell iconic-cell\\\"><div class=\\\"glyphicon glyphicon-eye-open\\\"></div></td></tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var session = $$obj[$index];\n\nvar myRow = session.get('creator') == me.id\nvar sessionStats = league ? (_.find(session.get('leagues'), {leagueID: league.id}) || {}).stats || {} : session.attributes;\nbuf.push(\"<tr\" + (jade.attrs({ 'data-player-id':(session.get('creator')), 'data-session-id':(session.id), \"class\": [(myRow ? \"success\" : \"\")] }, {\"class\":true,\"data-player-id\":true,\"data-session-id\":true})) + \"><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + session.get('submittedCodeLanguage') + \"_icon.png)\"), \"class\": [('code-language-cell')] }, {\"style\":true})) + \"></td>\");\nif ( levelType == 'hero-ladder')\n{\nbuf.push(\"<td\" + (jade.attrs({ 'style':(\"background-image: url(/file/db/thang.type/\" + ((session.get('heroConfig') || {}).thangType || '529ffbf1cf1818f2be000001') + \"/portrait.png)\"), \"class\": [('hero-portrait-cell')] }, {\"style\":true})) + \"></td>\");\n}\nbuf.push(\"<td class=\\\"rank-cell\\\">\" + (jade.escape(null == (jade.interp = session.rank) ? \"\" : jade.interp)) + \"</td><td class=\\\"score-cell\\\">\" + (jade.escape(null == (jade.interp = Math.round((sessionStats.totalScore || session.get('totalScore') / 2) * 100)) ? \"\" : jade.interp)) + \"</td><td\" + (jade.attrs({ \"class\": [('name-col-cell' + ((new RegExp('(Simple|Shaman|Brawler|Chieftain|Thoktar) CPU')).test(session.get('creatorName')) ? ' ai' : ''))] }, {\"class\":true})) + \">\" + (jade.escape(null == (jade.interp = session.get('creatorName') || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"age-cell\\\">\" + (jade.escape(null == (jade.interp = moment(session.get('submitDate')).fromNow().replace('a few ', '')) ? \"\" : jade.interp)) + \"</td><td class=\\\"fight-cell\\\"><a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.level.get('slug') || view.level.id) + \"?team=\" + (team.otherTeam) + \"&opponent=\" + (session.id) + \"\" + (league ? \"&league=\" + league.id : \"\")) }, {\"href\":true})) + \"><span data-i18n=\\\"ladder.fight\\\">Fight!</span></a></td><td class=\\\"spectate-cell iconic-cell\\\"><div class=\\\"glyphicon glyphicon-eye-open\\\"></div></td></tr>\");\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push(\"</tbody></table>\");\nif ( teamIndex == 1)\n{\nbuf.push(\"<div data-i18n=\\\"editor.more\\\" class=\\\"btn btn-sm load-more-ladder-entries\\\">More</div>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var teamIndex in $$obj) {\n      $$l++;      var team = $$obj[teamIndex];\n\nbuf.push(\"<div class=\\\"column col-md-6\\\"><div\" + (jade.attrs({ 'id':(\"histogram-display-\" + (team.name) + \"\"), 'data-team-name':(team.name), \"class\": [(\"histogram-display\")] }, {\"id\":true,\"class\":true,\"data-team-name\":true})) + \"></div><table\" + (jade.attrs({ 'data-team':(team.id), \"class\": [('table'),('table-bordered'),('table-condensed'),('table-hover'),('ladder-table')] }, {\"data-team\":true})) + \">\");\nvar levelType = view.level.get('type', true)\nvar topSessions = team.leaderboard.topPlayers.models;\nvar showJustTop = team.leaderboard.inTopSessions() || me.get('anonymous');\nif(!showJustTop && topSessions.length == 20) topSessions = topSessions.slice(0, 10);\nbuf.push(\"<thead><tr><th\" + (jade.attrs({ 'colspan':(levelType == 'hero-ladder' ? 3 : 2) }, {\"colspan\":true})) + \"></th><th\" + (jade.attrs({ 'colspan':(4), 'style':(\"color: \" + (team.primaryColor) + \"\") }, {\"colspan\":true,\"style\":true})) + \"><span>\" + (jade.escape(null == (jade.interp = team.displayName) ? \"\" : jade.interp)) + \"</span><span data-i18n=\\\"ladder.leaderboard\\\" class=\\\"spl\\\">Leaderboard</span></th></tr><tr><th\" + (jade.attrs({ 'colspan':(levelType == 'hero-ladder' ? 3 : 2) }, {\"colspan\":true})) + \"></th><th data-i18n=\\\"general.score\\\">Score</th><th data-i18n=\\\"general.name\\\" class=\\\"name-col-cell\\\">Name</th><th data-i18n=\\\"general.when\\\">When</th><th></th><th class=\\\"iconic-cell\\\"><div class=\\\"glyphicon glyphicon-eye-open\\\"></div></th></tr></thead><tbody>         \");\n// iterate topSessions\n;(function(){\n  var $$obj = topSessions;\n  if ('number' == typeof $$obj.length) {\n\n    for (var rank = 0, $$l = $$obj.length; rank < $$l; rank++) {\n      var session = $$obj[rank];\n\nvar myRow = session.get('creator') == me.id\nvar sessionStats = league ? (_.find(session.get('leagues') || [], {leagueID: league.id}) || {}).stats || {} : session.attributes;\nbuf.push(\"<tr\" + (jade.attrs({ 'data-player-id':(session.get('creator')), 'data-session-id':(session.id), \"class\": [(myRow ? \"success\" : \"\")] }, {\"class\":true,\"data-player-id\":true,\"data-session-id\":true})) + \"><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + session.get('submittedCodeLanguage') + \"_icon.png)\"), 'title':(view.capitalize(session.get('submittedCodeLanguage'))), \"class\": [('code-language-cell')] }, {\"style\":true,\"title\":true})) + \"></td>\");\nif ( levelType == 'hero-ladder')\n{\nbuf.push(\"<td\" + (jade.attrs({ 'style':(\"background-image: url(/file/db/thang.type/\" + ((session.get('heroConfig') || {}).thangType || '529ffbf1cf1818f2be000001') + \"/portrait.png)\"), \"class\": [('hero-portrait-cell')] }, {\"style\":true})) + \"></td>\");\n}\nbuf.push(\"<td class=\\\"rank-cell\\\">\" + (jade.escape(null == (jade.interp = rank + 1) ? \"\" : jade.interp)) + \"</td><td class=\\\"score-cell\\\">\" + (jade.escape(null == (jade.interp = Math.round((sessionStats.totalScore || session.get('totalScore') / 2) * 100)) ? \"\" : jade.interp)) + \"</td><td\" + (jade.attrs({ \"class\": [('name-col-cell' + ((new RegExp('(Simple|Shaman|Brawler|Chieftain|Thoktar) CPU')).test(session.get('creatorName')) ? ' ai' : ''))] }, {\"class\":true})) + \">\" + (jade.escape(null == (jade.interp = session.get('creatorName') || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"age-cell\\\">\" + (jade.escape(null == (jade.interp = moment(session.get('submitDate')).fromNow().replace('a few ', '')) ? \"\" : jade.interp)) + \"</td><td class=\\\"fight-cell\\\"><a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.level.get('slug') || view.level.id) + \"?team=\" + (team.otherTeam) + \"&opponent=\" + (session.id) + \"\" + (league ? \"&league=\" + league.id : \"\")) }, {\"href\":true})) + \"><span data-i18n=\\\"ladder.fight\\\">Fight!</span></a></td><td class=\\\"spectate-cell iconic-cell\\\"><div class=\\\"glyphicon glyphicon-eye-open\\\"></div></td></tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var rank in $$obj) {\n      $$l++;      var session = $$obj[rank];\n\nvar myRow = session.get('creator') == me.id\nvar sessionStats = league ? (_.find(session.get('leagues') || [], {leagueID: league.id}) || {}).stats || {} : session.attributes;\nbuf.push(\"<tr\" + (jade.attrs({ 'data-player-id':(session.get('creator')), 'data-session-id':(session.id), \"class\": [(myRow ? \"success\" : \"\")] }, {\"class\":true,\"data-player-id\":true,\"data-session-id\":true})) + \"><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + session.get('submittedCodeLanguage') + \"_icon.png)\"), 'title':(view.capitalize(session.get('submittedCodeLanguage'))), \"class\": [('code-language-cell')] }, {\"style\":true,\"title\":true})) + \"></td>\");\nif ( levelType == 'hero-ladder')\n{\nbuf.push(\"<td\" + (jade.attrs({ 'style':(\"background-image: url(/file/db/thang.type/\" + ((session.get('heroConfig') || {}).thangType || '529ffbf1cf1818f2be000001') + \"/portrait.png)\"), \"class\": [('hero-portrait-cell')] }, {\"style\":true})) + \"></td>\");\n}\nbuf.push(\"<td class=\\\"rank-cell\\\">\" + (jade.escape(null == (jade.interp = rank + 1) ? \"\" : jade.interp)) + \"</td><td class=\\\"score-cell\\\">\" + (jade.escape(null == (jade.interp = Math.round((sessionStats.totalScore || session.get('totalScore') / 2) * 100)) ? \"\" : jade.interp)) + \"</td><td\" + (jade.attrs({ \"class\": [('name-col-cell' + ((new RegExp('(Simple|Shaman|Brawler|Chieftain|Thoktar) CPU')).test(session.get('creatorName')) ? ' ai' : ''))] }, {\"class\":true})) + \">\" + (jade.escape(null == (jade.interp = session.get('creatorName') || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"age-cell\\\">\" + (jade.escape(null == (jade.interp = moment(session.get('submitDate')).fromNow().replace('a few ', '')) ? \"\" : jade.interp)) + \"</td><td class=\\\"fight-cell\\\"><a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.level.get('slug') || view.level.id) + \"?team=\" + (team.otherTeam) + \"&opponent=\" + (session.id) + \"\" + (league ? \"&league=\" + league.id : \"\")) }, {\"href\":true})) + \"><span data-i18n=\\\"ladder.fight\\\">Fight!</span></a></td><td class=\\\"spectate-cell iconic-cell\\\"><div class=\\\"glyphicon glyphicon-eye-open\\\"></div></td></tr>\");\n    }\n\n  }\n}).call(this);\n\nif ( !showJustTop && team.leaderboard.nearbySessions().length)\n{\nbuf.push(\"<tr class=\\\"active\\\"><td colspan=\\\"4\\\" class=\\\"ellipsis-row\\\">...</td></tr>\");\n// iterate team.leaderboard.nearbySessions()\n;(function(){\n  var $$obj = team.leaderboard.nearbySessions();\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var session = $$obj[$index];\n\nvar myRow = session.get('creator') == me.id\nvar sessionStats = league ? (_.find(session.get('leagues'), {leagueID: league.id}) || {}).stats || {} : session.attributes;\nbuf.push(\"<tr\" + (jade.attrs({ 'data-player-id':(session.get('creator')), 'data-session-id':(session.id), \"class\": [(myRow ? \"success\" : \"\")] }, {\"class\":true,\"data-player-id\":true,\"data-session-id\":true})) + \"><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + session.get('submittedCodeLanguage') + \"_icon.png)\"), \"class\": [('code-language-cell')] }, {\"style\":true})) + \"></td>\");\nif ( levelType == 'hero-ladder')\n{\nbuf.push(\"<td\" + (jade.attrs({ 'style':(\"background-image: url(/file/db/thang.type/\" + ((session.get('heroConfig') || {}).thangType || '529ffbf1cf1818f2be000001') + \"/portrait.png)\"), \"class\": [('hero-portrait-cell')] }, {\"style\":true})) + \"></td>\");\n}\nbuf.push(\"<td class=\\\"rank-cell\\\">\" + (jade.escape(null == (jade.interp = session.rank) ? \"\" : jade.interp)) + \"</td><td class=\\\"score-cell\\\">\" + (jade.escape(null == (jade.interp = Math.round((sessionStats.totalScore || session.get('totalScore') / 2) * 100)) ? \"\" : jade.interp)) + \"</td><td\" + (jade.attrs({ \"class\": [('name-col-cell' + ((new RegExp('(Simple|Shaman|Brawler|Chieftain|Thoktar) CPU')).test(session.get('creatorName')) ? ' ai' : ''))] }, {\"class\":true})) + \">\" + (jade.escape(null == (jade.interp = session.get('creatorName') || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"age-cell\\\">\" + (jade.escape(null == (jade.interp = moment(session.get('submitDate')).fromNow().replace('a few ', '')) ? \"\" : jade.interp)) + \"</td><td class=\\\"fight-cell\\\"><a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.level.get('slug') || view.level.id) + \"?team=\" + (team.otherTeam) + \"&opponent=\" + (session.id) + \"\" + (league ? \"&league=\" + league.id : \"\")) }, {\"href\":true})) + \"><span data-i18n=\\\"ladder.fight\\\">Fight!</span></a></td><td class=\\\"spectate-cell iconic-cell\\\"><div class=\\\"glyphicon glyphicon-eye-open\\\"></div></td></tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var session = $$obj[$index];\n\nvar myRow = session.get('creator') == me.id\nvar sessionStats = league ? (_.find(session.get('leagues'), {leagueID: league.id}) || {}).stats || {} : session.attributes;\nbuf.push(\"<tr\" + (jade.attrs({ 'data-player-id':(session.get('creator')), 'data-session-id':(session.id), \"class\": [(myRow ? \"success\" : \"\")] }, {\"class\":true,\"data-player-id\":true,\"data-session-id\":true})) + \"><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + session.get('submittedCodeLanguage') + \"_icon.png)\"), \"class\": [('code-language-cell')] }, {\"style\":true})) + \"></td>\");\nif ( levelType == 'hero-ladder')\n{\nbuf.push(\"<td\" + (jade.attrs({ 'style':(\"background-image: url(/file/db/thang.type/\" + ((session.get('heroConfig') || {}).thangType || '529ffbf1cf1818f2be000001') + \"/portrait.png)\"), \"class\": [('hero-portrait-cell')] }, {\"style\":true})) + \"></td>\");\n}\nbuf.push(\"<td class=\\\"rank-cell\\\">\" + (jade.escape(null == (jade.interp = session.rank) ? \"\" : jade.interp)) + \"</td><td class=\\\"score-cell\\\">\" + (jade.escape(null == (jade.interp = Math.round((sessionStats.totalScore || session.get('totalScore') / 2) * 100)) ? \"\" : jade.interp)) + \"</td><td\" + (jade.attrs({ \"class\": [('name-col-cell' + ((new RegExp('(Simple|Shaman|Brawler|Chieftain|Thoktar) CPU')).test(session.get('creatorName')) ? ' ai' : ''))] }, {\"class\":true})) + \">\" + (jade.escape(null == (jade.interp = session.get('creatorName') || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"age-cell\\\">\" + (jade.escape(null == (jade.interp = moment(session.get('submitDate')).fromNow().replace('a few ', '')) ? \"\" : jade.interp)) + \"</td><td class=\\\"fight-cell\\\"><a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.level.get('slug') || view.level.id) + \"?team=\" + (team.otherTeam) + \"&opponent=\" + (session.id) + \"\" + (league ? \"&league=\" + league.id : \"\")) }, {\"href\":true})) + \"><span data-i18n=\\\"ladder.fight\\\">Fight!</span></a></td><td class=\\\"spectate-cell iconic-cell\\\"><div class=\\\"glyphicon glyphicon-eye-open\\\"></div></td></tr>\");\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push(\"</tbody></table>\");\nif ( teamIndex == 1)\n{\nbuf.push(\"<div data-i18n=\\\"editor.more\\\" class=\\\"btn btn-sm load-more-ladder-entries\\\">More</div>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"<div class=\\\"column col-md-4 secret\\\"><h4 data-i18n=\\\"ladder.friends_playing\\\" class=\\\"friends-header\\\">Friends Playing</h4>\");\nif ( me.get('anonymous'))\n{\nbuf.push(\"<div class=\\\"alert alert-info\\\"><a data-toggle=\\\"coco-modal\\\" data-target=\\\"core/CreateAccountModal\\\" data-i18n=\\\"ladder.log_in_for_friends\\\">Log in to play with your friends!</a></div>\");\n}\nelse\n{\nif ( !onFacebook || !onGPlus)\n{\nbuf.push(\"<div class=\\\"connect-buttons\\\"><span data-i18n=\\\"ladder.social_connect_blurb\\\">Connect and play against your friends!</span><br/>\");\nif ( !onFacebook)\n{\nbuf.push(\"<button data-i18n=\\\"community.facebook\\\" class=\\\"btn btn-sm connect-facebook\\\">Facebook</button>\");\n}\nif ( !onGPlus)\n{\nbuf.push(\"<button data-i18n=\\\"community.gplus\\\" class=\\\"btn btn-sm connect-google-plus\\\">Google+</button>\");\n}\nbuf.push(\"</div>\");\n}\nif ( view.friends)\n{\n// iterate view.friends\n;(function(){\n  var $$obj = view.friends;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var friend = $$obj[$index];\n\nbuf.push(\"<p class=\\\"friend-entry\\\"><img\" + (jade.attrs({ 'src':(friend.imageSource), \"class\": [('img-thumbnail')] }, {\"src\":true})) + \"/><span>\" + (jade.escape(null == (jade.interp = friend.creatorName + ' (' + friend.name + ')') ? \"\" : jade.interp)) + \"</span><br/><span>\" + (jade.escape(null == (jade.interp = Math.round(friend.totalScore * 100)) ? \"\" : jade.interp)) + \"</span><span>: </span><span>\" + (jade.escape(null == (jade.interp = friend.team) ? \"\" : jade.interp)) + \"</span><br/><a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.level.get('slug') || view.level.id) + \"/?team=\" + (friend.otherTeam) + \"&opponent=\" + (friend._id) + \"\" + (league ? \"&league=\" + league.id : \"\")) }, {\"href\":true})) + \"><span data-i18n=\\\"ladder.fight\\\">Fight!</span></a></p>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var friend = $$obj[$index];\n\nbuf.push(\"<p class=\\\"friend-entry\\\"><img\" + (jade.attrs({ 'src':(friend.imageSource), \"class\": [('img-thumbnail')] }, {\"src\":true})) + \"/><span>\" + (jade.escape(null == (jade.interp = friend.creatorName + ' (' + friend.name + ')') ? \"\" : jade.interp)) + \"</span><br/><span>\" + (jade.escape(null == (jade.interp = Math.round(friend.totalScore * 100)) ? \"\" : jade.interp)) + \"</span><span>: </span><span>\" + (jade.escape(null == (jade.interp = friend.team) ? \"\" : jade.interp)) + \"</span><br/><a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.level.get('slug') || view.level.id) + \"/?team=\" + (friend.otherTeam) + \"&opponent=\" + (friend._id) + \"\" + (league ? \"&league=\" + league.id : \"\")) }, {\"href\":true})) + \"><span data-i18n=\\\"ladder.fight\\\">Fight!</span></a></p>\");\n    }\n\n  }\n}).call(this);\n\n}\nelse if ( onFacebook || onGPlus)\n{\nbuf.push(\"<p data-i18n=\\\"ladder.invite_friends_to_battle\\\">Invite your friends to join you in battle!</p>\");\n}\n}\nbuf.push(\"</div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),features = locals_.features,me = locals_.me,view = locals_.view,i18n = locals_.i18n,_ = locals_._,usesSocialMedia = locals_.usesSocialMedia,isIE = locals_.isIE,fbRef = locals_.fbRef;buf.push(\"<div id=\\\"site-nav\\\"><a href=\\\"/\\\"><img id=\\\"nav-logo\\\" src=\\\"/images/pages/base/logo.png\\\" title=\\\"CodeCombat - Learn how to code by playing a game\\\" alt=\\\"CodeCombat\\\"/></a><div id=\\\"site-nav-links\\\"><a href=\\\"/\\\"><img id=\\\"small-nav-logo\\\" src=\\\"/images/pages/base/logo.png\\\" title=\\\"CodeCombat - Learn how to code by playing a game\\\" alt=\\\"CodeCombat\\\"/></a><a href=\\\"/\\\"><span class=\\\"glyphicon glyphicon-home\\\"></span></a>\");\nif ( !features.playViewsOnly)\n{\nbuf.push(\"<a href=\\\"/play\\\" data-i18n=\\\"common.play\\\"></a><a href=\\\"/play/ladder\\\" data-i18n=\\\"game_menu.multiplayer_tab\\\"></a>\");\nif ( me.isStudent())\n{\nbuf.push(\"<a href=\\\"/students\\\" data-i18n=\\\"nav.my_courses\\\"></a>\");\n}\nif ( me.isTeacher())\n{\nbuf.push(\"<a href=\\\"/teachers/classes\\\" data-i18n=\\\"nav.my_classrooms\\\"></a>\");\n}\nbuf.push(\"<a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a><a\" + (jade.attrs({ 'href':(view.forumLink()), 'data-i18n':(\"nav.forum\") }, {\"href\":true,\"data-i18n\":true})) + \"></a><a href=\\\"/community\\\" data-i18n=\\\"nav.community\\\"></a>\");\nif ( me.get('anonymous') === false)\n{\nbuf.push(\"<span class=\\\"dropdown\\\"><button href=\\\"#\\\" data-toggle=\\\"dropdown\\\" class=\\\"btn btn-sm header-font dropdown-toggle\\\">\");\nif ( me.get('photoURL'))\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(me.getPhotoURL(18)), 'alt':(\"\"), \"class\": [('account-settings-image')] }, {\"src\":true,\"alt\":true})) + \"/>\");\n}\nelse\n{\nbuf.push(\"<i class=\\\"glyphicon glyphicon-user\\\"></i>\");\n}\nbuf.push(\"<span data-i18n=\\\"nav.account\\\" href=\\\"/account\\\" class=\\\"spl spr\\\"></span><span class=\\\"caret\\\"></span></button><ul role=\\\"menu\\\" class=\\\"dropdown-menu\\\"><li class=\\\"user-dropdown-header\\\"><span class=\\\"user-level\\\">\" + (jade.escape(null == (jade.interp = me.level()) ? \"\" : jade.interp)) + \"</span><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\") }, {\"href\":true})) + \"><div\" + (jade.attrs({ 'style':(\"background-image: url(\" + (me.getPhotoURL()) + \")\"), \"class\": [('img-circle')] }, {\"style\":true})) + \"></div></a><h3>\" + (jade.escape(null == (jade.interp = me.broadName()) ? \"\" : jade.interp)) + \"</h3></li><li><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\"), 'data-i18n':(\"nav.profile\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li><li><a href=\\\"/account/settings\\\" data-i18n=\\\"play.settings\\\"></a></li>\");\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()))\n{\nbuf.push(\"<li><a href=\\\"/account/payments\\\" data-i18n=\\\"account.payments\\\"></a></li>\");\n}\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()) || me.hasSubscription())\n{\nbuf.push(\"<li><a href=\\\"/account/subscription\\\" data-i18n=\\\"account.subscription\\\"></a></li>\");\n}\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()))\n{\nbuf.push(\"<li><a href=\\\"/account/prepaid\\\" data-i18n=\\\"account.prepaid_codes\\\"></a></li>\");\n}\nbuf.push(\"<li><a id=\\\"logout-button\\\" data-i18n=\\\"login.log_out\\\"></a></li></ul></span>\");\n}\nelse\n{\nbuf.push(\"<button data-i18n=\\\"login.sign_up\\\" class=\\\"btn btn-sm btn-primary header-font signup-button\\\"></button><button data-i18n=\\\"login.log_in\\\" class=\\\"btn btn-sm btn-default header-font login-button\\\"></button>\");\n}\n}\nbuf.push(\"<select class=\\\"language-dropdown form-control\\\"></select></div></div><div id=\\\"site-content-area\\\">\");\nvar base = \"/images/pages/play/ladder/prize_\";\nbuf.push(\"<div id=\\\"ladder-top\\\">\");\nif ( view.leagueType === 'course' && view.course)\n{\nbuf.push(\"<div id=\\\"course-header\\\"><div id=\\\"course-details-link\\\"><a\" + (jade.attrs({ 'href':(\"/students/\" + (view.course.id) + \"/\" + (view.league.id) + \"\") }, {\"href\":true})) + \"><span class=\\\"glyphicon glyphicon-arrow-left\\\"></span><span class=\\\"spl\\\">Levels</span></a></div><div class=\\\"text-center\\\"><span id=\\\"course-name\\\"><span>\" + (jade.escape(null == (jade.interp = i18n(view.course.attributes, 'name')) ? \"\" : jade.interp)) + \"</span><span class=\\\"spl\\\">- Arena</span></span></div></div>\");\n}\nbuf.push(\"<div id=\\\"level-column\\\">\");\nif ( view.level.get('name') != 'Cavern Survival')\n{\nif ( view.levelDescription)\n{\nbuf.push(\"<div>\" + (null == (jade.interp = view.levelDescription) ? \"\" : jade.interp) + \"</div>\");\n}\n}\nelse\n{\nbuf.push(\"<img src=\\\"/file/db/level/544437e0645c0c0000c3291d/OCT30-Cavern Survival.png\\\"/>\");\n}\nif ( view.leagueType === 'clan')\n{\nbuf.push(\"<h1 class=\\\"league-header\\\"><a\" + (jade.attrs({ 'href':(\"/clans/\" + (view.league.id) + \"\") }, {\"href\":true})) + \">\" + (jade.escape(null == (jade.interp = view.league.get('name')) ? \"\" : jade.interp)) + \"</a><span data-i18n=\\\"ladder.league\\\" class=\\\"spl\\\">League</span></h1>\");\n}\nbuf.push(\"</div>\");\nif ( view.level.get('name') == 'Greed')\n{\nbuf.push(\"<div class=\\\"tournament-blurb\\\"><h2><span data-i18n=\\\"ladder.tournament_ended\\\">Tournament ended</span> \" + (jade.escape((jade.interp = view.tournamentTimeLeft) == null ? '' : jade.interp)) + \"</h2><p><span data-i18n=\\\"ladder.tournament_blurb\\\">Write code, collect gold, build armies, crush foes, win prizes, and upgrade your career in our $40,000 Greed tournament! Check out the details</span> <a href=\\\"http://blog.codecombat.com/a-31-trillion-390-billion-statement-programming-war-between-545-wizards\\\" data-i18n=\\\"ladder.tournament_blurb_blog\\\">on our blog</a>.</p><p><strong>Tournament ended! </strong><a href=\\\"#winners\\\">Behold the winners</a>. Thanks for playing! You can <strong>still play</strong> Greed and all of our other <a href=\\\"/play/ladder\\\">multiplayer arenas</a>.</p><p>Want to commiserate? Head over to <a href=\\\"http://discourse.codecombat.com/\\\">the forum</a> and discuss your strategies, your triumphs, and your turmoils.</p><div class=\\\"sponsor-logos\\\"><a href=\\\"https://heapanalytics.com/\\\"><img\" + (jade.attrs({ 'src':(base + \"heap.png\") }, {\"src\":true})) + \"/></a><a href=\\\"https://www.firebase.com/\\\"><img\" + (jade.attrs({ 'src':(base + \"firebase.png\") }, {\"src\":true})) + \"/></a><a href=\\\"https://onemonthrails.com/\\\"><img\" + (jade.attrs({ 'src':(base + \"one_month.png\") }, {\"src\":true})) + \"/></a><a href=\\\"http://www.jetbrains.com/webstorm/\\\"><img\" + (jade.attrs({ 'src':(base + \"webstorm.png\") }, {\"src\":true})) + \"/></a><a href=\\\"http://shop.oreilly.com/category/ebooks.do\\\"><img\" + (jade.attrs({ 'src':(base + \"oreilly.png\") }, {\"src\":true})) + \"/></a><a href=\\\"http://aws.amazon.com/\\\"><img\" + (jade.attrs({ 'src':(base + \"aws.png\") }, {\"src\":true})) + \"/></a></div></div>\");\n}\nif ( view.level.get('name') == 'Criss-Cross')\n{\nbuf.push(\"<div class=\\\"tournament-blurb\\\"><h2><span data-i18n=\\\"ladder.tournament_ended\\\">Tournament ended</span> \" + (jade.escape((jade.interp = view.tournamentTimeLeft) == null ? '' : jade.interp)) + \"</h2><p><span data-i18n=\\\"ladder.tournament_blurb_criss_cross\\\">Win bids, construct paths, outwit opponents, grab gems, and upgrade your career in our Criss-Cross tournament! Check out the details</span> <a href=\\\"http://blog.codecombat.com/a-good-new-fashioned-programming-throwdown\\\" data-i18n=\\\"ladder.tournament_blurb_blog\\\">on our blog</a>.</p><p><strong>Tournament ended! </strong><a href=\\\"#winners\\\">Behold the winners</a>. Thanks for playing! You can <strong>still play</strong> Criss-Cross and all of our other <a href=\\\"/play/ladder\\\">multiplayer arenas</a>.</p><p>Want to commiserate? Head over to <a href=\\\"http://discourse.codecombat.com/\\\">the forum</a> and discuss your strategies, your triumphs, and your turmoils.</p></div>\");\n}\nif ( view.level.get('name') == 'Zero Sum' && !view.league)\n{\nbuf.push(\"<div class=\\\"tournament-blurb\\\"><h2><span> </span> Zero Sum - A destruição</h2><p><span></span> O \\\"Zero Sum\\\" é um modo de combate de feiticeiros que tem como objetivo\\n aniquilar seu inimigo em dois minutos, entretanto um terceiro elemento surpresa\\n aparece para atrapalhar o duelo sendo muito forte e ágil. Colete os itens\\n disponivel no mapa para construir seu exército e ter forças para derrota-lo\\n antes que seja seu fim.</p></div>\");\n}\nif ( view.level.get('name') == 'Cavern Survival')\n{\nbuf.push(\"<div class=\\\"tournament-blurb\\\"><h2><span></span> Cavern Survival - A sobrevivência</h2><p></p> O \\\"Cavern Survival\\\" é um modo de sobrevivência, no qual, o jogador que\\n sobreviver por mais tempo vence. Seu personagem ficará em uma sala separada\\n do seu inimigo, mas seu rival será outro. Uma série de ogros invadirá ambas\\n as regiões com o objetivo de eliminar os dois players, utilize táticas defensivas\\n para acabar de uma vez com as chances do seu oponente.<p></p> Essa é a unica arena que seus equipamentos e heróis serão levados em consideração,\\n então compre seu arsenal e enfrente seu inimigo preparado.</div>\");\n}\nif ( view.level.get('name') == 'Ace of Coders')\n{\nbuf.push(\"<div class=\\\"tournament-blurb\\\"><h2><span></span> Ace of Coders - A arena</h2><p></p> O “Ace of coders” é um modo de confronto frontal em que os usuários escrevem\\n seus códigos de combate e seus inimigos tentam vencer-los utilizando estratégias\\n diferentes ou um código mais otimizado que pensem em situações diversas para\\n neutralizar seu oponente. Alguns conceitos podem ser aprendidos fora da\\n plataforma para aplicá-los em suas instruções, tornando-se algo divertido,\\n desafiador e didático.</div>\");\n}\nbuf.push(\"<div id=\\\"columns\\\" class=\\\"row\\\"><div class=\\\"column col-md-2\\\"></div>\");\nif ( view.teams)\n{\n// iterate view.teams\n;(function(){\n  var $$obj = view.teams;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var team = $$obj[$index];\n\nbuf.push(\"<div class=\\\"column col-md-4\\\"><a\" + (jade.attrs({ 'data-team':(team.id), \"class\": [(\"play-button btn btn-illustrated btn-block btn-lg \" + (team.id == 'ogres' ? 'btn-primary' : 'btn-danger'))] }, {\"class\":true,\"data-team\":true})) + \"><span data-i18n=\\\"play.play_as\\\">Play As</span> <span>\" + (jade.escape(null == (jade.interp = team.displayName) ? \"\" : jade.interp)) + \"</span></a></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var team = $$obj[$index];\n\nbuf.push(\"<div class=\\\"column col-md-4\\\"><a\" + (jade.attrs({ 'data-team':(team.id), \"class\": [(\"play-button btn btn-illustrated btn-block btn-lg \" + (team.id == 'ogres' ? 'btn-primary' : 'btn-danger'))] }, {\"class\":true,\"data-team\":true})) + \"><span data-i18n=\\\"play.play_as\\\">Play As</span> <span>\" + (jade.escape(null == (jade.interp = team.displayName) ? \"\" : jade.interp)) + \"</span></a></div>\");\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push(\"<div class=\\\"column col-md-2\\\"></div></div>\");\nif ( view.leagueType !== 'course')\n{\nbuf.push(\"<div class=\\\"spectate-button-container\\\"><a\" + (jade.attrs({ 'href':(\"/play/spectate/\" + (view.level.get('slug')) + \"\" + (view.league ? \"?league=\" + view.league.id : \"\")), \"class\": [('spectate-button'),('btn'),('btn-illustrated'),('btn-info'),('center')] }, {\"href\":true})) + \"><span data-i18n=\\\"play.spectate\\\">Spectate</span></a></div>\");\n}\nbuf.push(\"</div><ul class=\\\"nav nav-pills\\\"><li class=\\\"active\\\"><a href=\\\"#ladder\\\" data-toggle=\\\"tab\\\" data-i18n=\\\"general.ladder\\\">Ladder</a></li>\");\nif ( !me.get('anonymous'))\n{\nbuf.push(\"<li><a href=\\\"#my-matches\\\" data-toggle=\\\"tab\\\" data-i18n=\\\"ladder.my_matches\\\">My Matches</a></li>\");\nif ( view.leagueType !== 'course')\n{\nbuf.push(\"<li><a href=\\\"#simulate\\\" data-toggle=\\\"tab\\\" data-i18n=\\\"ladder.simulate\\\">Simulate</a></li>\");\n}\n}\nif ( view.level.get('name') == 'Greed')\n{\nbuf.push(\"<li><a href=\\\"#prizes\\\" data-toggle=\\\"tab\\\" data-i18n=\\\"ladder_prizes.prizes\\\">Prizes</a></li>\");\n}\nif ( view.level.get('name') == 'Greed')\n{\nbuf.push(\"<li><a href=\\\"#rules\\\" data-toggle=\\\"tab\\\" data-i18n=\\\"ladder.rules\\\">Rules</a></li>\");\n}\nbuf.push(\"</ul><div class=\\\"tab-content\\\"><div id=\\\"ladder\\\" class=\\\"tab-pane active well\\\"><div id=\\\"ladder-tab-view\\\"></div></div><div id=\\\"my-matches\\\" class=\\\"tab-pane well\\\"><div id=\\\"my-matches-tab-view\\\"></div></div><div id=\\\"simulate\\\" class=\\\"tab-pane well\\\"><div id=\\\"simulate-tab-view\\\"></div></div>\");\nif ( view.level.get('name') == 'Greed')\n{\nbuf.push(\"<div id=\\\"prizes\\\" class=\\\"tab-pane well\\\"><h1 data-i18n=\\\"ladder_prizes.title\\\">Tournament Prizes</h1><p><span data-i18n=\\\"ladder_prizes.blurb_1\\\">These prizes will be awarded according to</span> <a href=\\\"#rules\\\" data-i18n=\\\"ladder_prizes.blurb_2\\\">the tournament rules</a> <span data-i18n=\\\"ladder_prizes.blurb_3\\\">to the top human and ogre players.</span> <strong data-i18n=\\\"ladder_prizes.blurb_4\\\">Two teams means double the prizes!</strong> <span data-i18n=\\\"ladder_prizes.blurb_5\\\">(There will be two first place winners, two second-place winners, etc.)</span></p><table id=\\\"prize_table\\\" class=\\\"table\\\"><thead><tr><td data-i18n=\\\"ladder_prizes.rank\\\">Rank</td><td data-i18n=\\\"ladder_prizes.prizes\\\">Prizes</td><td data-i18n=\\\"ladder_prizes.total_value\\\">Total Value</td></tr></thead><tbody><tr> <td>1st</td><td> <ul class=\\\"list-unstyled\\\"><li><img\" + (jade.attrs({ 'src':(base + \"cash1.png\") }, {\"src\":true})) + \"/><span>$512 </span><span data-i18n=\\\"ladder_prizes.in_cash\\\">in cash</span></li><li><img\" + (jade.attrs({ 'src':(base + \"custom_wizard.png\") }, {\"src\":true})) + \"/><span data-i18n=\\\"ladder_prizes.custom_wizard\\\">Custom CodeCombat Wizard</span></li><li><img\" + (jade.attrs({ 'src':(base + \"custom_avatar.png\") }, {\"src\":true})) + \"/><span data-i18n=\\\"ladder_prizes.custom_avatar\\\">Custom CodeCombat avatar</span></li><li><img\" + (jade.attrs({ 'src':(base + \"heap.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://heapanalytics.com/\\\">Heap Analytics</a> <span data-i18n=\\\"ladder_prizes.heap\\\">for six months of \\\"Startup\\\" access</span> - $354</span></li><li><img\" + (jade.attrs({ 'src':(base + \"firebase.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://www.firebase.com/\\\">Firebase</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $300</span></li><li><img\" + (jade.attrs({ 'src':(base + \"one_month.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://onemonthrails.com/\\\">One Month Rails</a> <span data-i18n=\\\"ladder_prizes.one_month_coupon\\\">coupon: choose either Rails or HTML</span> - $99</span></li><li><img\" + (jade.attrs({ 'src':(base + \"webstorm.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://www.jetbrains.com/webstorm/\\\">Webstorm</a> <span data-i18n=\\\"ladder_prizes.license\\\">license</span> - $49</span></li><li><img\" + (jade.attrs({ 'src':(base + \"oreilly.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://shop.oreilly.com/category/ebooks.do\\\">O'Reilly</a> <span data-i18n=\\\"ladder_prizes.oreilly\\\">ebook of your choice</span> - $40</span></li><li><img\" + (jade.attrs({ 'src':(base + \"aws.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://aws.amazon.com/\\\">Amazon Web Services</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $50</span></li></ul></td><td>$2054</td></tr><tr> <td>2nd</td><td> <ul class=\\\"list-unstyled\\\"><li><img\" + (jade.attrs({ 'src':(base + \"cash2.png\") }, {\"src\":true})) + \"/><span>$256 </span><span data-i18n=\\\"ladder_prizes.in_cash\\\">in cash</span></li><li><img\" + (jade.attrs({ 'src':(base + \"custom_avatar.png\") }, {\"src\":true})) + \"/><span data-i18n=\\\"ladder_prizes.custom_avatar\\\">Custom CodeCombat avatar</span></li><li><img\" + (jade.attrs({ 'src':(base + \"heap.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://heapanalytics.com/\\\">Heap Analytics</a> <span data-i18n=\\\"ladder_prizes.heap\\\">for six months of \\\"Startup\\\" access</span> - $354</span></li><li><img\" + (jade.attrs({ 'src':(base + \"firebase.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://www.firebase.com/\\\">Firebase</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $300</span></li><li><img\" + (jade.attrs({ 'src':(base + \"one_month.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://onemonthrails.com/\\\">One Month Rails</a> <span data-i18n=\\\"ladder_prizes.one_month_discount\\\">discount, 30% off: choose either Rails or HTML</span> - $30</span></li><li><img\" + (jade.attrs({ 'src':(base + \"webstorm.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://www.jetbrains.com/webstorm/\\\">Webstorm</a> <span data-i18n=\\\"ladder_prizes.license\\\">license</span> - $49</span></li><li><img\" + (jade.attrs({ 'src':(base + \"oreilly.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://shop.oreilly.com/category/ebooks.do\\\">O'Reilly</a> <span data-i18n=\\\"ladder_prizes.oreilly\\\">ebook of your choice</span> - $40</span></li><li><img\" + (jade.attrs({ 'src':(base + \"aws.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://aws.amazon.com/\\\">Amazon Web Services</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $50</span></li></ul></td><td>$1229</td></tr><tr> <td>3rd</td><td><ul class=\\\"list-unstyled\\\"><li><img\" + (jade.attrs({ 'src':(base + \"cash2.png\") }, {\"src\":true})) + \"/><span>$128 </span><span data-i18n=\\\"ladder_prizes.in_cash\\\">in cash</span></li><li><img\" + (jade.attrs({ 'src':(base + \"custom_avatar.png\") }, {\"src\":true})) + \"/><span data-i18n=\\\"ladder_prizes.custom_avatar\\\">Custom CodeCombat avatar</span></li><li><img\" + (jade.attrs({ 'src':(base + \"heap.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://heapanalytics.com/\\\">Heap Analytics</a> <span data-i18n=\\\"ladder_prizes.heap\\\">for six months of \\\"Startup\\\" access</span> - $354</span></li><li><img\" + (jade.attrs({ 'src':(base + \"firebase.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://www.firebase.com/\\\">Firebase</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $300</span></li><li><img\" + (jade.attrs({ 'src':(base + \"one_month.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://onemonthrails.com/\\\">One Month Rails</a> <span data-i18n=\\\"ladder_prizes.one_month_discount\\\">discount, 30% off: choose either Rails or HTML</span> - $30</span></li><li><img\" + (jade.attrs({ 'src':(base + \"webstorm.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://www.jetbrains.com/webstorm/\\\">Webstorm</a> <span data-i18n=\\\"ladder_prizes.license\\\">license</span> - $49</span></li><li><img\" + (jade.attrs({ 'src':(base + \"oreilly.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://shop.oreilly.com/category/ebooks.do\\\">O'Reilly</a> <span data-i18n=\\\"ladder_prizes.oreilly\\\">ebook of your choice</span> - $40</span></li><li><img\" + (jade.attrs({ 'src':(base + \"aws.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://aws.amazon.com/\\\">Amazon Web Services</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $50</span></li></ul></td><td>$1101</td></tr><tr> <td>4th</td><td><ul class=\\\"list-unstyled\\\"><li><img\" + (jade.attrs({ 'src':(base + \"cash3.png\") }, {\"src\":true})) + \"/><span>$64 </span><span data-i18n=\\\"ladder_prizes.in_cash\\\">in cash</span></li><li><img\" + (jade.attrs({ 'src':(base + \"heap.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://heapanalytics.com/\\\">Heap Analytics</a> <span data-i18n=\\\"ladder_prizes.heap\\\">for six months of \\\"Startup\\\" access</span> - $354</span></li><li><img\" + (jade.attrs({ 'src':(base + \"firebase.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://www.firebase.com/\\\">Firebase</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $300</span></li><li><img\" + (jade.attrs({ 'src':(base + \"one_month.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://onemonthrails.com/\\\">One Month Rails</a> <span data-i18n=\\\"ladder_prizes.one_month_discount\\\">discount, 30% off: choose either Rails or HTML</span> - $30</span></li><li><img\" + (jade.attrs({ 'src':(base + \"webstorm.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://www.jetbrains.com/webstorm/\\\">Webstorm</a> <span data-i18n=\\\"ladder_prizes.license\\\">license</span> - $49</span></li><li><img\" + (jade.attrs({ 'src':(base + \"oreilly.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://shop.oreilly.com/category/ebooks.do\\\">O'Reilly</a> <span data-i18n=\\\"ladder_prizes.oreilly\\\">ebook of your choice</span> - $40</span></li><li><img\" + (jade.attrs({ 'src':(base + \"aws.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://aws.amazon.com/\\\">Amazon Web Services</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $50</span></li></ul></td><td>$887</td></tr><tr> <td>5th</td><td><ul class=\\\"list-unstyled\\\"><li><img\" + (jade.attrs({ 'src':(base + \"cash3.png\") }, {\"src\":true})) + \"/><span>$32 </span><span data-i18n=\\\"ladder_prizes.in_cash\\\">in cash</span></li><li><img\" + (jade.attrs({ 'src':(base + \"heap.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://heapanalytics.com/\\\">Heap Analytics</a> <span data-i18n=\\\"ladder_prizes.heap\\\">for six months of \\\"Startup\\\" access</span> - $354</span></li><li><img\" + (jade.attrs({ 'src':(base + \"firebase.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://www.firebase.com/\\\">Firebase</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $300</span></li><li><img\" + (jade.attrs({ 'src':(base + \"one_month.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://onemonthrails.com/\\\">One Month Rails</a> <span data-i18n=\\\"ladder_prizes.one_month_discount\\\">discount, 30% off: choose either Rails or HTML</span> - $30</span></li><li><img\" + (jade.attrs({ 'src':(base + \"webstorm.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://www.jetbrains.com/webstorm/\\\">Webstorm</a> <span data-i18n=\\\"ladder_prizes.license\\\">license</span> - $49</span></li><li><img\" + (jade.attrs({ 'src':(base + \"oreilly.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://shop.oreilly.com/category/ebooks.do\\\">O'Reilly</a> <span data-i18n=\\\"ladder_prizes.oreilly\\\">ebook of your choice</span> - $40</span></li><li><img\" + (jade.attrs({ 'src':(base + \"aws.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://aws.amazon.com/\\\">Amazon Web Services</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $50</span></li></ul></td><td>$855</td></tr><tr> <td>6th</td><td><ul class=\\\"list-unstyled\\\"><li><img\" + (jade.attrs({ 'src':(base + \"cash3.png\") }, {\"src\":true})) + \"/><span>$16 </span><span data-i18n=\\\"ladder_prizes.in_cash\\\">in cash</span></li><li><img\" + (jade.attrs({ 'src':(base + \"firebase.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://www.firebase.com/\\\">Firebase</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $300</span></li><li><img\" + (jade.attrs({ 'src':(base + \"one_month.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://onemonthrails.com/\\\">One Month Rails</a> <span data-i18n=\\\"ladder_prizes.one_month_discount\\\">discount, 30% off: choose either Rails or HTML</span> - $30</span></li><li><img\" + (jade.attrs({ 'src':(base + \"webstorm.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://www.jetbrains.com/webstorm/\\\">Webstorm</a> <span data-i18n=\\\"ladder_prizes.license\\\">license</span> - $49</span></li><li><img\" + (jade.attrs({ 'src':(base + \"oreilly.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://shop.oreilly.com/category/ebooks.do\\\">O'Reilly</a> <span data-i18n=\\\"ladder_prizes.oreilly\\\">ebook of your choice</span> - $40</span></li><li><img\" + (jade.attrs({ 'src':(base + \"aws.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://aws.amazon.com/\\\">Amazon Web Services</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $50</span></li></ul></td><td>$485</td></tr><tr> <td>7th</td><td><ul class=\\\"list-unstyled\\\"><li><img\" + (jade.attrs({ 'src':(base + \"cash3.png\") }, {\"src\":true})) + \"/><span>$8 </span><span data-i18n=\\\"ladder_prizes.in_cash\\\">in cash</span></li><li><img\" + (jade.attrs({ 'src':(base + \"firebase.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://www.firebase.com/\\\">Firebase</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $300</span></li><li><img\" + (jade.attrs({ 'src':(base + \"one_month.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://onemonthrails.com/\\\">One Month Rails</a> <span data-i18n=\\\"ladder_prizes.one_month_discount\\\">discount, 30% off: choose either Rails or HTML</span> - $30</span></li><li><img\" + (jade.attrs({ 'src':(base + \"webstorm.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://www.jetbrains.com/webstorm/\\\">Webstorm</a> <span data-i18n=\\\"ladder_prizes.license\\\">license</span> - $49</span></li><li><img\" + (jade.attrs({ 'src':(base + \"oreilly.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://shop.oreilly.com/category/ebooks.do\\\">O'Reilly</a> <span data-i18n=\\\"ladder_prizes.oreilly\\\">ebook of your choice</span> - $40</span></li><li><img\" + (jade.attrs({ 'src':(base + \"aws.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://aws.amazon.com/\\\">Amazon Web Services</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $50</span></li></ul></td><td>$477</td></tr><tr> <td>8th</td><td><ul class=\\\"list-unstyled\\\"><li><img\" + (jade.attrs({ 'src':(base + \"cash3.png\") }, {\"src\":true})) + \"/><span>$4 </span><span data-i18n=\\\"ladder_prizes.in_cash\\\">in cash</span></li><li><img\" + (jade.attrs({ 'src':(base + \"firebase.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://www.firebase.com/\\\">Firebase</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $300</span></li><li><img\" + (jade.attrs({ 'src':(base + \"one_month.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://onemonthrails.com/\\\">One Month Rails</a> <span data-i18n=\\\"ladder_prizes.one_month_discount\\\">discount, 30% off: choose either Rails or HTML</span> - $30</span></li><li><img\" + (jade.attrs({ 'src':(base + \"webstorm.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://www.jetbrains.com/webstorm/\\\">Webstorm</a> <span data-i18n=\\\"ladder_prizes.license\\\">license</span> - $49</span></li><li><img\" + (jade.attrs({ 'src':(base + \"oreilly.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://shop.oreilly.com/category/ebooks.do\\\">O'Reilly</a> <span data-i18n=\\\"ladder_prizes.oreilly\\\">ebook of your choice</span> - $40</span></li><li><img\" + (jade.attrs({ 'src':(base + \"aws.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://aws.amazon.com/\\\">Amazon Web Services</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $50</span></li></ul></td><td>$473</td></tr><tr> <td>9th</td><td><ul class=\\\"list-unstyled\\\"><li><img\" + (jade.attrs({ 'src':(base + \"cash3.png\") }, {\"src\":true})) + \"/><span>$2 </span><span data-i18n=\\\"ladder_prizes.in_cash\\\">in cash</span></li><li><img\" + (jade.attrs({ 'src':(base + \"firebase.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://www.firebase.com/\\\">Firebase</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $300</span></li><li><img\" + (jade.attrs({ 'src':(base + \"one_month.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://onemonthrails.com/\\\">One Month Rails</a> <span data-i18n=\\\"ladder_prizes.one_month_discount\\\">discount, 30% off: choose either Rails or HTML</span> - $30</span></li><li><img\" + (jade.attrs({ 'src':(base + \"webstorm.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://www.jetbrains.com/webstorm/\\\">Webstorm</a> <span data-i18n=\\\"ladder_prizes.license\\\">license</span> - $49</span></li><li><img\" + (jade.attrs({ 'src':(base + \"oreilly.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://shop.oreilly.com/category/ebooks.do\\\">O'Reilly</a> <span data-i18n=\\\"ladder_prizes.oreilly\\\">ebook of your choice</span> - $40</span></li><li><img\" + (jade.attrs({ 'src':(base + \"aws.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://aws.amazon.com/\\\">Amazon Web Services</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $50</span></li></ul></td><td>$471</td></tr><tr> <td>10th</td><td><ul class=\\\"list-unstyled\\\"><li><img\" + (jade.attrs({ 'src':(base + \"cash3.png\") }, {\"src\":true})) + \"/><span>$1 </span><span data-i18n=\\\"ladder_prizes.in_cash\\\">in cash</span></li><li><img\" + (jade.attrs({ 'src':(base + \"firebase.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://www.firebase.com/\\\">Firebase</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $300</span></li><li><img\" + (jade.attrs({ 'src':(base + \"one_month.png\") }, {\"src\":true})) + \"/><span><a href=\\\"https://onemonthrails.com/\\\">One Month Rails</a> <span data-i18n=\\\"ladder_prizes.one_month_discount\\\">discount, 30% off: choose either Rails or HTML</span> - $30</span></li><li><img\" + (jade.attrs({ 'src':(base + \"webstorm.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://www.jetbrains.com/webstorm/\\\">Webstorm</a> <span data-i18n=\\\"ladder_prizes.license\\\">license</span> - $49</span></li><li><img\" + (jade.attrs({ 'src':(base + \"oreilly.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://shop.oreilly.com/category/ebooks.do\\\">O'Reilly</a> <span data-i18n=\\\"ladder_prizes.oreilly\\\">ebook of your choice</span> - $40</span></li><li><img\" + (jade.attrs({ 'src':(base + \"aws.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://aws.amazon.com/\\\">Amazon Web Services</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $50</span></li></ul></td><td>$470</td></tr><tr> <td>11 - 40</td><td><ul class=\\\"list-unstyled\\\"><li><img\" + (jade.attrs({ 'src':(base + \"webstorm.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://www.jetbrains.com/webstorm/\\\">Webstorm</a> <span data-i18n=\\\"ladder_prizes.license\\\">license</span> - $49</span></li><li><img\" + (jade.attrs({ 'src':(base + \"oreilly.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://shop.oreilly.com/category/ebooks.do\\\">O'Reilly</a> <span data-i18n=\\\"ladder_prizes.oreilly\\\">ebook of your choice</span> - $40</span></li><li><img\" + (jade.attrs({ 'src':(base + \"aws.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://aws.amazon.com/\\\">Amazon Web Services</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $50</span></li></ul></td><td>$139</td></tr><tr> <td>41 - 100</td><td><ul class=\\\"list-unstyled\\\"><li><img\" + (jade.attrs({ 'src':(base + \"oreilly.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://shop.oreilly.com/category/ebooks.do\\\">O'Reilly</a> <span data-i18n=\\\"ladder_prizes.oreilly\\\">ebook of your choice</span> - $40</span></li><li><img\" + (jade.attrs({ 'src':(base + \"aws.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://aws.amazon.com/\\\">Amazon Web Services</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $50</span></li></ul></td><td>$90</td></tr><tr> <td>101+</td><td><ul class=\\\"list-unstyled\\\"><li><img\" + (jade.attrs({ 'src':(base + \"aws.png\") }, {\"src\":true})) + \"/><span><a href=\\\"http://aws.amazon.com/\\\">Amazon Web Services</a> <span data-i18n=\\\"ladder_prizes.credits\\\">credits</span> - $50</span></li></ul></td><td>$50</td></tr></tbody></table></div>\");\n}\nif ( view.level.get('name') == 'Greed')\n{\nbuf.push(\"<div id=\\\"rules\\\" class=\\\"tab-pane well\\\"><h1 data-i18n=\\\"ladder.tournament_rules\\\">Tournament Rules</h1><h2>General</h2><p>You don't have to buy anything to participate in the tournament, and trying to pay us won't increase your odds of winning. Although we don't anticipate the rules changing, they are subject to change.</p><h2>Dates and Times</h2><p>The tournament starts on Tuesday, May 20 at 8:30AM and ends on Tuesday, June 10 at 5:00PM PDT. After the tournament finishes, we will check the games manually to prevent duplicate entries and cheating. We will email all the winners within two weeks of the end date.</p><h2>Eligilibity</h2><p>The tournament is open to anyone over the age of 13. Players are allowed to form teams to compete, but we will only be rewarding submissions, so if a team of 10 wins, they will need to split the prize.</p><p>The tournament is NOT open to people who live in countries or states that prohibit participating or receiving a prize in a challenge (these include, but are not limited to Brazil, Quebec, Italy, Cuba, Sudan, Iran, North Korea, and Syria). To clarify, people from the aforementioned places are welcome to play the Greed level, but cannot receive prizes. Organizations involved in putting the tournament together (namely CodeCombat and all of our employees) are excluded from participating/winning prizes.</p><h2>Submission Requirements</h2><p> \\nTo be eligible to win prizes, players must submit their code to the Greed ladder for ranking AND defeat our default AI. Every player that submits their code to the ladder and beats our default AI will receive $50 in AWS credits as described on the <a href=\\\"#prizes\\\" data-i18n=\\\"ladder_prizes.tournament_prizes\\\">Tournament Prizes</a> page.</p><p>There are some restrictions regarding who can use the AWS credits. Please see the additional rules of use on <a href=\\\"https://aws.amazon.com/awscredits\\\">Amazon's AWS credits page.</a></p><h2>Submission Rights</h2><p>We reserve the right to use your submission and site identity (including username, avatar, and any information you mark as public) to promote the tournament. This is in keeping with our overall site terms of service.</p><h2>Judging Criteria</h2><p>We will calculate final rankings by running the top games from the public leaderboard from both teams against each other and sorting solutions by wins and losses. The number of games from each side to be used in the final ranking is yet to be determined, but is probably around 150. The final ranking will be performed with a snapshot of solutions taken the end of the contest. The final ranking methedology is subject to change. We will not be evaluating code in any manual way for common traits like adequate documentation, cleanliness, etc. We reserve the right to disqualify any player for any reason. The public leaderboards are a good proxy for your final rank, but are not guaranteed to be accurate. To repeat, <strong>the leaderboards are only a preliminary proxy for your final rank</strong>.</p><p>Your rank will change as players submit more solutions and more matches are played according to <a href=\\\"https://github.com/codecombat/bayesian-battle\\\">our open-source ranking library, Bayesian Battle</a>, but our final ranking will use an exhaustive pairwise matching round amongst the top players as described above.</p><h2>Prizes</h2><p> \\nPrizes will be awarded to everyone that achieves a rank covered on the <a href=\\\"#prizes\\\" data-i18n=\\\"ladder.prizes\\\">Tournament Prizes</a> page.</p><p>Please remember that the player ranks listed on the prize page refer to ranks WITHIN a leaderboard. So if you are the #2 Ogre player, you will win the #2 prize. Similarly, if you are the #3 Human player, you will receive the #3 prize. If you have submissions on both leaderboards, we will only count your highest submission for the purposes of distributing prizes. As a result, your final ranking may be higher than your preliminary ranking due to removing duplicate submissions above you.</p><h2>Verifying Potential Winners</h2><p>We may ask players to identify themselves so that we can detect duplicate entries. This may be done in the form of a Facebook, Google+, or LinkedIn profile, but we may need more information. All players eligible for prizes agree that refusing to provide us with identifying information may lead to ineligibility for prizes. </p><p>On a related note, if we have reason to believe that a player has intentionally submitted duplicate entries for the purpose of receiving more prizes or manipulating the leaderboards in any way, we will remove that player and all submissions we believe to be associated with them. We want this to be fair for everyone.</p><h2>Prize Distribution</h2><p>Different sponsors require different ways of claiming their prizes, and we will work with winners to ensure they are able to redeem their prizes in a timely fashion. For cash prizes, we will deliver the money via PayPal. We will not ship checks, money orders, or cash through the mail. We will assume reasonable international money transfer costs to deliver cash prizes through Paypal.</p><p>Winners are responsible for any taxes associated with claiming their prizes. CodeCombat is not responsible for filing paperwork on behalf of winners for tax claims. </p><h2>Contact</h2><p>If you have any questions or would like to get in touch with us for any other reason, we can be reached at team@codecombat.com. You can also post to our public <a href=\\\"http://discourse.codecombat.com/\\\">Discourse forum</a>.</p></div>\");\n}\nif ( view.level.get('name') == 'Greed' || view.level.get('name') == 'Criss-Cross' || view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<div id=\\\"winners\\\" class=\\\"tab-pane well\\\"><h1 data-i18n=\\\"ladder.winners\\\">Winners</h1><table class=\\\"table table-hover table-condensed\\\"><thead><tr><th data-i18n=\\\"ladder_prizes.rank\\\">Rank</th>\");\nif ( view.level.get('name') == 'Criss-Cross' || view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<th></th>\");\n}\nbuf.push(\"<th>Human</th>\");\nif ( view.level.get('name') == 'Greed' || view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<th>Human wins/losses/ties</th>\");\n}\nelse\n{\nbuf.push(\"<th>Human score</th>\");\n}\nif ( view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<th></th>\");\n}\nif ( view.level.get('name') == 'Criss-Cross' || view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<th></th>\");\n}\nbuf.push(\"<th>Ogre</th>\");\nif ( view.level.get('name') == 'Greed' || view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<th>Ogre wins/losses/ties</th>\");\n}\nelse\n{\nbuf.push(\"<th>Ogre score</th>\");\n}\nbuf.push(\"<th data-i18n=\\\"play.spectate\\\">Spectate</th></tr></thead><tbody>\");\n// iterate view.winners.humans\n;(function(){\n  var $$obj = view.winners.humans;\n  if ('number' == typeof $$obj.length) {\n\n    for (var index = 0, $$l = $$obj.length; index < $$l; index++) {\n      var human = $$obj[index];\n\nvar ogre = view.winners.ogres[index]\nbuf.push(\"<tr> <td>\" + (jade.escape(null == (jade.interp = human.rank) ? \"\" : jade.interp)) + \"</td>\");\nif ( view.level.get('name') == 'Criss-Cross' || view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + human.codeLanguage + \"_icon.png)\"), 'title':(_.string.capitalize(human.codeLanguage)), \"class\": [('code-language-cell')] }, {\"style\":true,\"title\":true})) + \"></td>\");\n}\nbuf.push(\"<td>\" + (jade.escape(null == (jade.interp = human.name) ? \"\" : jade.interp)) + \"</td>\");\nif ( view.level.get('name') == 'Greed' || view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<td><span class=\\\"win\\\">\" + (jade.escape(null == (jade.interp = human.wins) ? \"\" : jade.interp)) + \"</span> - <span class=\\\"loss\\\">\" + (jade.escape(null == (jade.interp = human.losses) ? \"\" : jade.interp)) + \"</span> - \");\nif ( view.level.get('name') == 'Greed')\n{\nbuf.push(\"<span class=\\\"tie\\\">\" + (jade.escape(null == (jade.interp = 377 - human.wins - human.losses) ? \"\" : jade.interp)) + \"</span>\");\n}\nelse if ( view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<span class=\\\"tie\\\">\" + (jade.escape(null == (jade.interp = 108 - human.wins - human.losses) ? \"\" : jade.interp)) + \"</span>\");\n}\nbuf.push(\"</td>\");\n}\nelse\n{\nbuf.push(\"<td><span>\" + (jade.escape(null == (jade.interp = Math.round(100 * human.score)) ? \"\" : jade.interp)) + \"</span></td>\");\n}\nif ( ogre)\n{\nif ( view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<td>\" + (jade.escape(null == (jade.interp = ogre.rank) ? \"\" : jade.interp)) + \"</td>\");\n}\nif ( view.level.get('name') == 'Criss-Cross' || view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + ogre.codeLanguage + \"_icon.png)\"), 'title':(_.string.capitalize(ogre.codeLanguage)), \"class\": [('code-language-cell')] }, {\"style\":true,\"title\":true})) + \"></td>\");\n}\nbuf.push(\"<td>\" + (jade.escape(null == (jade.interp = ogre.name) ? \"\" : jade.interp)) + \"</td>\");\nif ( view.level.get('name') == 'Greed' || view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<td><span class=\\\"win\\\">\" + (jade.escape(null == (jade.interp = ogre.wins) ? \"\" : jade.interp)) + \"</span> - <span class=\\\"loss\\\">\" + (jade.escape(null == (jade.interp = ogre.losses) ? \"\" : jade.interp)) + \"</span> - \");\nif ( view.level.get('name') == 'Greed')\n{\nbuf.push(\"<span class=\\\"tie\\\">\" + (jade.escape(null == (jade.interp = 407 - ogre.wins - ogre.losses) ? \"\" : jade.interp)) + \"</span>\");\n}\nelse if ( view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<span class=\\\"tie\\\">\" + (jade.escape(null == (jade.interp = Math.max(0, 163 - ogre.wins - ogre.losses)) ? \"\" : jade.interp)) + \"</span>\");\n}\nbuf.push(\"</td>\");\n}\nelse\n{\nbuf.push(\"<td><span>\" + (jade.escape(null == (jade.interp = Math.round(100 * ogre.score)) ? \"\" : jade.interp)) + \"</span></td>\");\n}\nbuf.push(\"<td><a\" + (jade.attrs({ 'href':(\"/play/spectate/\" + view.level.get('slug') + \"?session-one=\" + human.sessionID + \"&session-two=\" + ogre.sessionID), 'data-i18n':(\"ladder.watch_battle\") }, {\"href\":true,\"data-i18n\":true})) + \">Watch the battle</a></td>\");\n}\nelse\n{\nbuf.push(\"<td></td><td></td><td></td>\");\n}\nbuf.push(\"</tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var index in $$obj) {\n      $$l++;      var human = $$obj[index];\n\nvar ogre = view.winners.ogres[index]\nbuf.push(\"<tr> <td>\" + (jade.escape(null == (jade.interp = human.rank) ? \"\" : jade.interp)) + \"</td>\");\nif ( view.level.get('name') == 'Criss-Cross' || view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + human.codeLanguage + \"_icon.png)\"), 'title':(_.string.capitalize(human.codeLanguage)), \"class\": [('code-language-cell')] }, {\"style\":true,\"title\":true})) + \"></td>\");\n}\nbuf.push(\"<td>\" + (jade.escape(null == (jade.interp = human.name) ? \"\" : jade.interp)) + \"</td>\");\nif ( view.level.get('name') == 'Greed' || view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<td><span class=\\\"win\\\">\" + (jade.escape(null == (jade.interp = human.wins) ? \"\" : jade.interp)) + \"</span> - <span class=\\\"loss\\\">\" + (jade.escape(null == (jade.interp = human.losses) ? \"\" : jade.interp)) + \"</span> - \");\nif ( view.level.get('name') == 'Greed')\n{\nbuf.push(\"<span class=\\\"tie\\\">\" + (jade.escape(null == (jade.interp = 377 - human.wins - human.losses) ? \"\" : jade.interp)) + \"</span>\");\n}\nelse if ( view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<span class=\\\"tie\\\">\" + (jade.escape(null == (jade.interp = 108 - human.wins - human.losses) ? \"\" : jade.interp)) + \"</span>\");\n}\nbuf.push(\"</td>\");\n}\nelse\n{\nbuf.push(\"<td><span>\" + (jade.escape(null == (jade.interp = Math.round(100 * human.score)) ? \"\" : jade.interp)) + \"</span></td>\");\n}\nif ( ogre)\n{\nif ( view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<td>\" + (jade.escape(null == (jade.interp = ogre.rank) ? \"\" : jade.interp)) + \"</td>\");\n}\nif ( view.level.get('name') == 'Criss-Cross' || view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + ogre.codeLanguage + \"_icon.png)\"), 'title':(_.string.capitalize(ogre.codeLanguage)), \"class\": [('code-language-cell')] }, {\"style\":true,\"title\":true})) + \"></td>\");\n}\nbuf.push(\"<td>\" + (jade.escape(null == (jade.interp = ogre.name) ? \"\" : jade.interp)) + \"</td>\");\nif ( view.level.get('name') == 'Greed' || view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<td><span class=\\\"win\\\">\" + (jade.escape(null == (jade.interp = ogre.wins) ? \"\" : jade.interp)) + \"</span> - <span class=\\\"loss\\\">\" + (jade.escape(null == (jade.interp = ogre.losses) ? \"\" : jade.interp)) + \"</span> - \");\nif ( view.level.get('name') == 'Greed')\n{\nbuf.push(\"<span class=\\\"tie\\\">\" + (jade.escape(null == (jade.interp = 407 - ogre.wins - ogre.losses) ? \"\" : jade.interp)) + \"</span>\");\n}\nelse if ( view.level.get('name') == 'Zero Sum')\n{\nbuf.push(\"<span class=\\\"tie\\\">\" + (jade.escape(null == (jade.interp = Math.max(0, 163 - ogre.wins - ogre.losses)) ? \"\" : jade.interp)) + \"</span>\");\n}\nbuf.push(\"</td>\");\n}\nelse\n{\nbuf.push(\"<td><span>\" + (jade.escape(null == (jade.interp = Math.round(100 * ogre.score)) ? \"\" : jade.interp)) + \"</span></td>\");\n}\nbuf.push(\"<td><a\" + (jade.attrs({ 'href':(\"/play/spectate/\" + view.level.get('slug') + \"?session-one=\" + human.sessionID + \"&session-two=\" + ogre.sessionID), 'data-i18n':(\"ladder.watch_battle\") }, {\"href\":true,\"data-i18n\":true})) + \">Watch the battle</a></td>\");\n}\nelse\n{\nbuf.push(\"<td></td><td></td><td></td>\");\n}\nbuf.push(\"</tr>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tbody></table></div>\");\n}\nif ( view.level.get('name') == 'Ace of Coders')\n{\nbuf.push(\"<div id=\\\"winners\\\" class=\\\"tab-pane well\\\"><h1 data-i18n=\\\"ladder.winners\\\">Winners</h1><table class=\\\"table table-hover table-condensed\\\"><thead><tr><th data-i18n=\\\"ladder_prizes.rank\\\">Rank</th><th></th><th data-i18n=\\\"general.player\\\">Player</th><th>Wins</th><th>Losses</th><th data-i18n=\\\"play.spectate\\\">Spectate</th></tr></thead><tbody>\");\n// iterate view.winners.humans\n;(function(){\n  var $$obj = view.winners.humans;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var player = $$obj[$index];\n\nbuf.push(\"<tr> <td>\" + (jade.escape(null == (jade.interp = player.rank) ? \"\" : jade.interp)) + \"</td><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + player.codeLanguage + \"_icon.png)\"), 'title':(_.string.capitalize(player.codeLanguage)), \"class\": [('code-language-cell')] }, {\"style\":true,\"title\":true})) + \"></td><td>\" + (jade.escape(null == (jade.interp = player.name) ? \"\" : jade.interp)) + \"</td><td><span class=\\\"win\\\">\" + (jade.escape(null == (jade.interp = player.wins) ? \"\" : jade.interp)) + \"</span></td><td><span class=\\\"loss\\\">\" + (jade.escape(null == (jade.interp = player.losses) ? \"\" : jade.interp)) + \"</span></td><td>\");\nif ( player.team == \"ogres\")\n{\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"/play/spectate/\" + view.level.get('slug') + \"?session-one=55df8c9207d920b7e4262f33\" + \"&session-two=\" + player.sessionID), 'data-i18n':(\"ladder.watch_battle\") }, {\"href\":true,\"data-i18n\":true})) + \">Watch the battle</a>\");\n}\nelse\n{\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"/play/spectate/\" + view.level.get('slug') + \"?session-one=\" + player.sessionID + \"&session-two=55e1d23686c019bc47b640fe\"), 'data-i18n':(\"ladder.watch_battle\") }, {\"href\":true,\"data-i18n\":true})) + \">Watch the battle</a>\");\n}\nbuf.push(\"</td></tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var player = $$obj[$index];\n\nbuf.push(\"<tr> <td>\" + (jade.escape(null == (jade.interp = player.rank) ? \"\" : jade.interp)) + \"</td><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + player.codeLanguage + \"_icon.png)\"), 'title':(_.string.capitalize(player.codeLanguage)), \"class\": [('code-language-cell')] }, {\"style\":true,\"title\":true})) + \"></td><td>\" + (jade.escape(null == (jade.interp = player.name) ? \"\" : jade.interp)) + \"</td><td><span class=\\\"win\\\">\" + (jade.escape(null == (jade.interp = player.wins) ? \"\" : jade.interp)) + \"</span></td><td><span class=\\\"loss\\\">\" + (jade.escape(null == (jade.interp = player.losses) ? \"\" : jade.interp)) + \"</span></td><td>\");\nif ( player.team == \"ogres\")\n{\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"/play/spectate/\" + view.level.get('slug') + \"?session-one=55df8c9207d920b7e4262f33\" + \"&session-two=\" + player.sessionID), 'data-i18n':(\"ladder.watch_battle\") }, {\"href\":true,\"data-i18n\":true})) + \">Watch the battle</a>\");\n}\nelse\n{\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"/play/spectate/\" + view.level.get('slug') + \"?session-one=\" + player.sessionID + \"&session-two=55e1d23686c019bc47b640fe\"), 'data-i18n':(\"ladder.watch_battle\") }, {\"href\":true,\"data-i18n\":true})) + \">Watch the battle</a>\");\n}\nbuf.push(\"</td></tr>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tbody></table></div>\");\n}\nbuf.push(\"</div></div><div class=\\\"achievement-corner\\\"></div><div id=\\\"site-footer\\\"><img id=\\\"footer-background\\\" src=\\\"/images/pages/base/nav_background.png\\\"/><div\" + (jade.attrs({ 'id':('footer-links'), \"class\": [(features.playViewsOnly ? 'hide' : '')] }, {\"class\":true})) + \"><a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<a tabindex=\\\"-1\\\" data-i18n=\\\"nav.contact\\\" class=\\\"contact-modal\\\"></a>\");\n}\nbuf.push(\"<a href=\\\"http://blog.codecombat.com/\\\" data-i18n=\\\"nav.blog\\\"></a><a href=\\\"https://jobs.lever.co/codecombat\\\" tabindex=\\\"-1\\\" data-i18n=\\\"nav.careers\\\"></a><a href=\\\"/legal\\\" tabindex=\\\"-1\\\" data-i18n=\\\"nav.legal\\\"></a><a href=\\\"/privacy\\\" tabindex=\\\"-1\\\" data-i18n=\\\"legal.privacy_title\\\"></a><a href=\\\"/contribute\\\" tabindex=\\\"-1\\\" data-i18n=\\\"nav.contribute\\\"></a>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<a href=\\\"/play/ladder\\\" tabindex=\\\"-1\\\" data-i18n=\\\"game_menu.multiplayer_tab\\\"></a>\");\n}\nif ( me.isAdmin())\n{\nbuf.push(\"<a href=\\\"/admin\\\">Admin</a>\");\n}\nif ( usesSocialMedia)\n{\nbuf.push(\"<div class=\\\"share-buttons\\\">\");\nif ( !isIE)\n{\nbuf.push(\"<div data-href=\\\"http://codecombat.com\\\" data-size=\\\"medium\\\" class=\\\"g-plusone\\\"></div>\");\n}\nbuf.push(\"<div\" + (jade.attrs({ 'data-href':(\"https://www.facebook.com/codecombat\"), 'data-send':(\"false\"), 'data-layout':(\"button_count\"), 'data-width':(\"350\"), 'data-show-faces':(\"true\"), 'data-ref':(\"coco_footer_\" + (fbRef) + \"\"), \"class\": [('fb-like')] }, {\"data-href\":true,\"data-send\":true,\"data-layout\":true,\"data-width\":true,\"data-show-faces\":true,\"data-ref\":true})) + \"></div>\");\nif ( !isIE)\n{\nbuf.push(\"<a href=\\\"https://twitter.com/CodeCombat\\\" data-show-count=\\\"true\\\" data-show-screen-name=\\\"false\\\" data-dnt=\\\"true\\\" data-align=\\\"right\\\" data-i18n=\\\"nav.twitter_follow\\\" class=\\\"twitter-follow-button\\\"></a><iframe src=\\\"https://ghbtns.com/github-btn.html?user=codecombat&amp;repo=codecombat&amp;type=watch&amp;count=true\\\" allowtransparency=\\\"true\\\" frameborder=\\\"0\\\" scrolling=\\\"0\\\" width=\\\"110\\\" height=\\\"20\\\" class=\\\"github-star-button\\\"></iframe>\");\n}\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div><div id=\\\"footer-credits\\\"><span><span>© All Rights Reserved</span><br/><span>CodeCombat 2015</span></span><img id=\\\"footer-logo\\\" src=\\\"/images/pages/base/logo.png\\\" alt=\\\"CodeCombat\\\"/><span><span>Site Design by</span><br/><a href=\\\"http://www.fullyillustrated.com/\\\">Fully Illustrated</a></span><!--a.firebase-bade(href=\\\"https://www.firebase.com/\\\")  // Not using right now--><!--  img(src=\\\"/images/pages/base/firebase.png\\\", alt=\\\"Powered by Firebase\\\")--></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<div class=\\\"row\\\">\");\n// iterate view.teams\n;(function(){\n  var $$obj = view.teams;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var team = $$obj[$index];\n\nbuf.push(\"<div class=\\\"matches-column col-md-6\\\"><table class=\\\"table table-bordered table-condensed my-matches-table\\\"><tr><th\" + (jade.attrs({ 'colspan':(5), 'style':(\"color: \" + (team.primaryColor) + \"\") }, {\"colspan\":true,\"style\":true})) + \"><span data-i18n=\\\"ladder.summary_your\\\">Your </span>\" + (jade.escape((jade.interp = team.displayName) == null ? '' : jade.interp)) + \"\\n <span data-i18n=\\\"ladder.summary_matches\\\">Matches - </span>\" + (jade.escape((jade.interp = team.wins) == null ? '' : jade.interp)) + \"<span data-i18n=\\\"ladder.summary_wins\\\"> Wins, </span>\" + (jade.escape((jade.interp = team.losses) == null ? '' : jade.interp)) + \"<span data-i18n=\\\"ladder.summary_losses\\\"> Losses </span></th></tr>\");\nif ( team.session)\n{\nbuf.push(\"<tr><th colspan=\\\"5\\\"><div\" + (jade.attrs({ 'data-session-id':(team.session.id), \"class\": [('ladder-submission-view')] }, {\"data-session-id\":true})) + \"></div></th></tr>\");\n}\nif ( team.scoreHistory)\n{\nbuf.push(\"<tr><th\" + (jade.attrs({ 'colspan':(5), 'style':(\"color: \" + (team.primaryColor) + \"\") }, {\"colspan\":true,\"style\":true})) + \"><div\" + (jade.attrs({ 'data-team-name':(team.name), 'id':(\"score-chart-\" + (team.name) + \"\"), \"class\": [(\"score-chart-wrapper\")] }, {\"class\":true,\"data-team-name\":true,\"id\":true})) + \"></div></th></tr>\");\n}\nbuf.push(\"<tr><th data-i18n=\\\"general.result\\\">Result</th><th></th><th data-i18n=\\\"general.opponent\\\">Opponent</th><th data-i18n=\\\"general.when\\\">When</th><th></th></tr>\");\n// iterate team.matches\n;(function(){\n  var $$obj = team.matches;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var match = $$obj[$index];\n\nbuf.push(\"<tr\" + (jade.attrs({ 'title':(match.simulator), \"class\": [((match.stale ? \"stale \" : \"\") + (match.fresh ? \"fresh \" : \"\") + match.state)] }, {\"class\":true,\"title\":true})) + \"><td class=\\\"state-cell\\\">\");\nif ( match.state === 'win')\n{\nbuf.push(\"<span data-i18n=\\\"general.win\\\" class=\\\"win\\\">Win</span>\");\n}\nif ( match.state === 'loss')\n{\nbuf.push(\"<span data-i18n=\\\"general.loss\\\" class=\\\"loss\\\">Loss</span>\");\n}\nif ( match.state === 'tie')\n{\nbuf.push(\"<span data-i18n=\\\"general.tie\\\" class=\\\"tie\\\">Tie</span>\");\n}\nbuf.push(\"</td><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + match.codeLanguage +  \"_icon.png)\"), \"class\": [('code-language-cell')] }, {\"style\":true})) + \"></td><td class=\\\"name-cell\\\">\" + (jade.escape(null == (jade.interp = match.opponentName || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"time-cell\\\">\" + (jade.escape(null == (jade.interp = match.when) ? \"\" : jade.interp)) + \"</td><td class=\\\"battle-cell\\\">\");\nvar levelID = view.level.get('slug') || view.level.id\nvar league = view.options.league\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"/play/level/\" + (levelID) + \"?team=\" + (team.id) + \"&opponent=\" + (match.sessionID) + \"\" + (league ? \"&league=\" + league.id : \"\")) }, {\"href\":true})) + \">\");\nif ( (match.state === 'win'))\n{\nbuf.push(\"<span data-i18n=\\\"ladder.watch_victory\\\">Watch your victory</span>\");\n}\nelse\n{\nbuf.push(\"<span data-i18n=\\\"ladder.defeat_the\\\">Defeat the</span> \\n\" + (jade.escape((jade.interp = team.otherTeamDisplayName) == null ? '' : jade.interp)) + \"\");\n}\nbuf.push(\"</a></td></tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var match = $$obj[$index];\n\nbuf.push(\"<tr\" + (jade.attrs({ 'title':(match.simulator), \"class\": [((match.stale ? \"stale \" : \"\") + (match.fresh ? \"fresh \" : \"\") + match.state)] }, {\"class\":true,\"title\":true})) + \"><td class=\\\"state-cell\\\">\");\nif ( match.state === 'win')\n{\nbuf.push(\"<span data-i18n=\\\"general.win\\\" class=\\\"win\\\">Win</span>\");\n}\nif ( match.state === 'loss')\n{\nbuf.push(\"<span data-i18n=\\\"general.loss\\\" class=\\\"loss\\\">Loss</span>\");\n}\nif ( match.state === 'tie')\n{\nbuf.push(\"<span data-i18n=\\\"general.tie\\\" class=\\\"tie\\\">Tie</span>\");\n}\nbuf.push(\"</td><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + match.codeLanguage +  \"_icon.png)\"), \"class\": [('code-language-cell')] }, {\"style\":true})) + \"></td><td class=\\\"name-cell\\\">\" + (jade.escape(null == (jade.interp = match.opponentName || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"time-cell\\\">\" + (jade.escape(null == (jade.interp = match.when) ? \"\" : jade.interp)) + \"</td><td class=\\\"battle-cell\\\">\");\nvar levelID = view.level.get('slug') || view.level.id\nvar league = view.options.league\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"/play/level/\" + (levelID) + \"?team=\" + (team.id) + \"&opponent=\" + (match.sessionID) + \"\" + (league ? \"&league=\" + league.id : \"\")) }, {\"href\":true})) + \">\");\nif ( (match.state === 'win'))\n{\nbuf.push(\"<span data-i18n=\\\"ladder.watch_victory\\\">Watch your victory</span>\");\n}\nelse\n{\nbuf.push(\"<span data-i18n=\\\"ladder.defeat_the\\\">Defeat the</span> \\n\" + (jade.escape((jade.interp = team.otherTeamDisplayName) == null ? '' : jade.interp)) + \"\");\n}\nbuf.push(\"</a></td></tr>\");\n    }\n\n  }\n}).call(this);\n\nif ( !team.matches.length)\n{\nbuf.push(\"<tr>\");\nif ( team.isRanking)\n{\nbuf.push(\"<td colspan=\\\"4\\\" class=\\\"alert alert-info\\\"><span data-i18n=\\\"ladder.code_being_simulated\\\">Your new code is being simulated by other players for ranking.\\nThis will refresh as new matches come in.</span></td>\");\n}\nelse\n{\nbuf.push(\"<td colspan=\\\"4\\\" class=\\\"alert alert-warning\\\"><span data-i18n=\\\"ladder.no_ranked_matches_pre\\\">No ranked matches for the</span>\" + (jade.escape((jade.interp = team.name) == null ? '' : jade.interp)) + \"<span data-i18n=\\\"ladder.no_ranked_matches_post\\\">team! Play against some competitors and then come back here to get your game ranked.</span></td>\");\n}\nbuf.push(\"</tr>\");\n}\nbuf.push(\"</table></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var team = $$obj[$index];\n\nbuf.push(\"<div class=\\\"matches-column col-md-6\\\"><table class=\\\"table table-bordered table-condensed my-matches-table\\\"><tr><th\" + (jade.attrs({ 'colspan':(5), 'style':(\"color: \" + (team.primaryColor) + \"\") }, {\"colspan\":true,\"style\":true})) + \"><span data-i18n=\\\"ladder.summary_your\\\">Your </span>\" + (jade.escape((jade.interp = team.displayName) == null ? '' : jade.interp)) + \"\\n <span data-i18n=\\\"ladder.summary_matches\\\">Matches - </span>\" + (jade.escape((jade.interp = team.wins) == null ? '' : jade.interp)) + \"<span data-i18n=\\\"ladder.summary_wins\\\"> Wins, </span>\" + (jade.escape((jade.interp = team.losses) == null ? '' : jade.interp)) + \"<span data-i18n=\\\"ladder.summary_losses\\\"> Losses </span></th></tr>\");\nif ( team.session)\n{\nbuf.push(\"<tr><th colspan=\\\"5\\\"><div\" + (jade.attrs({ 'data-session-id':(team.session.id), \"class\": [('ladder-submission-view')] }, {\"data-session-id\":true})) + \"></div></th></tr>\");\n}\nif ( team.scoreHistory)\n{\nbuf.push(\"<tr><th\" + (jade.attrs({ 'colspan':(5), 'style':(\"color: \" + (team.primaryColor) + \"\") }, {\"colspan\":true,\"style\":true})) + \"><div\" + (jade.attrs({ 'data-team-name':(team.name), 'id':(\"score-chart-\" + (team.name) + \"\"), \"class\": [(\"score-chart-wrapper\")] }, {\"class\":true,\"data-team-name\":true,\"id\":true})) + \"></div></th></tr>\");\n}\nbuf.push(\"<tr><th data-i18n=\\\"general.result\\\">Result</th><th></th><th data-i18n=\\\"general.opponent\\\">Opponent</th><th data-i18n=\\\"general.when\\\">When</th><th></th></tr>\");\n// iterate team.matches\n;(function(){\n  var $$obj = team.matches;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var match = $$obj[$index];\n\nbuf.push(\"<tr\" + (jade.attrs({ 'title':(match.simulator), \"class\": [((match.stale ? \"stale \" : \"\") + (match.fresh ? \"fresh \" : \"\") + match.state)] }, {\"class\":true,\"title\":true})) + \"><td class=\\\"state-cell\\\">\");\nif ( match.state === 'win')\n{\nbuf.push(\"<span data-i18n=\\\"general.win\\\" class=\\\"win\\\">Win</span>\");\n}\nif ( match.state === 'loss')\n{\nbuf.push(\"<span data-i18n=\\\"general.loss\\\" class=\\\"loss\\\">Loss</span>\");\n}\nif ( match.state === 'tie')\n{\nbuf.push(\"<span data-i18n=\\\"general.tie\\\" class=\\\"tie\\\">Tie</span>\");\n}\nbuf.push(\"</td><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + match.codeLanguage +  \"_icon.png)\"), \"class\": [('code-language-cell')] }, {\"style\":true})) + \"></td><td class=\\\"name-cell\\\">\" + (jade.escape(null == (jade.interp = match.opponentName || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"time-cell\\\">\" + (jade.escape(null == (jade.interp = match.when) ? \"\" : jade.interp)) + \"</td><td class=\\\"battle-cell\\\">\");\nvar levelID = view.level.get('slug') || view.level.id\nvar league = view.options.league\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"/play/level/\" + (levelID) + \"?team=\" + (team.id) + \"&opponent=\" + (match.sessionID) + \"\" + (league ? \"&league=\" + league.id : \"\")) }, {\"href\":true})) + \">\");\nif ( (match.state === 'win'))\n{\nbuf.push(\"<span data-i18n=\\\"ladder.watch_victory\\\">Watch your victory</span>\");\n}\nelse\n{\nbuf.push(\"<span data-i18n=\\\"ladder.defeat_the\\\">Defeat the</span> \\n\" + (jade.escape((jade.interp = team.otherTeamDisplayName) == null ? '' : jade.interp)) + \"\");\n}\nbuf.push(\"</a></td></tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var match = $$obj[$index];\n\nbuf.push(\"<tr\" + (jade.attrs({ 'title':(match.simulator), \"class\": [((match.stale ? \"stale \" : \"\") + (match.fresh ? \"fresh \" : \"\") + match.state)] }, {\"class\":true,\"title\":true})) + \"><td class=\\\"state-cell\\\">\");\nif ( match.state === 'win')\n{\nbuf.push(\"<span data-i18n=\\\"general.win\\\" class=\\\"win\\\">Win</span>\");\n}\nif ( match.state === 'loss')\n{\nbuf.push(\"<span data-i18n=\\\"general.loss\\\" class=\\\"loss\\\">Loss</span>\");\n}\nif ( match.state === 'tie')\n{\nbuf.push(\"<span data-i18n=\\\"general.tie\\\" class=\\\"tie\\\">Tie</span>\");\n}\nbuf.push(\"</td><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + match.codeLanguage +  \"_icon.png)\"), \"class\": [('code-language-cell')] }, {\"style\":true})) + \"></td><td class=\\\"name-cell\\\">\" + (jade.escape(null == (jade.interp = match.opponentName || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"time-cell\\\">\" + (jade.escape(null == (jade.interp = match.when) ? \"\" : jade.interp)) + \"</td><td class=\\\"battle-cell\\\">\");\nvar levelID = view.level.get('slug') || view.level.id\nvar league = view.options.league\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"/play/level/\" + (levelID) + \"?team=\" + (team.id) + \"&opponent=\" + (match.sessionID) + \"\" + (league ? \"&league=\" + league.id : \"\")) }, {\"href\":true})) + \">\");\nif ( (match.state === 'win'))\n{\nbuf.push(\"<span data-i18n=\\\"ladder.watch_victory\\\">Watch your victory</span>\");\n}\nelse\n{\nbuf.push(\"<span data-i18n=\\\"ladder.defeat_the\\\">Defeat the</span> \\n\" + (jade.escape((jade.interp = team.otherTeamDisplayName) == null ? '' : jade.interp)) + \"\");\n}\nbuf.push(\"</a></td></tr>\");\n    }\n\n  }\n}).call(this);\n\nif ( !team.matches.length)\n{\nbuf.push(\"<tr>\");\nif ( team.isRanking)\n{\nbuf.push(\"<td colspan=\\\"4\\\" class=\\\"alert alert-info\\\"><span data-i18n=\\\"ladder.code_being_simulated\\\">Your new code is being simulated by other players for ranking.\\nThis will refresh as new matches come in.</span></td>\");\n}\nelse\n{\nbuf.push(\"<td colspan=\\\"4\\\" class=\\\"alert alert-warning\\\"><span data-i18n=\\\"ladder.no_ranked_matches_pre\\\">No ranked matches for the</span>\" + (jade.escape((jade.interp = team.name) == null ? '' : jade.interp)) + \"<span data-i18n=\\\"ladder.no_ranked_matches_post\\\">team! Play against some competitors and then come back here to get your game ranked.</span></td>\");\n}\nbuf.push(\"</tr>\");\n}\nbuf.push(\"</table></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<div class=\\\"modal-dialog game\\\"><div class=\\\"background-wrapper\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nbuf.push(\"<h3 data-i18n=\\\"ladder.choose_opponent\\\">Choose an Opponent</h3></div><div class=\\\"modal-body\\\">\");\nif ( !view.level.isType('course-ladder'))\n{\nbuf.push(\"<h4 data-i18n=\\\"ladder.select_your_language\\\" class=\\\"language-selection\\\">Select your language!</h4><div class=\\\"form-group select-group\\\"><select id=\\\"tome-language\\\" name=\\\"language\\\">\");\n// iterate view.languages\n;(function(){\n  var $$obj = view.languages;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var option = $$obj[$index];\n\nbuf.push(\"<option\" + (jade.attrs({ 'value':(option.id), 'selected':((view.language === option.id)) }, {\"value\":true,\"selected\":true})) + \">\" + (jade.escape(null == (jade.interp = option.name) ? \"\" : jade.interp)) + \"</option>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var option = $$obj[$index];\n\nbuf.push(\"<option\" + (jade.attrs({ 'value':(option.id), 'selected':((view.language === option.id)) }, {\"value\":true,\"selected\":true})) + \">\" + (jade.escape(null == (jade.interp = option.name) ? \"\" : jade.interp)) + \"</option>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</select></div>\");\n}\nbuf.push(\"<div id=\\\"noob-view\\\" class=\\\"secret\\\"><a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.levelID) + \"-tutorial\" + (view.options.league ? \"?league=\" + view.options.league.id : \"\")), \"class\": [('btn'),('btn-success'),('btn-block'),('btn-lg')] }, {\"href\":true})) + \"><p><strong data-i18n=\\\"ladder.tutorial_play\\\">Play Tutorial</strong></p><span data-i18n=\\\"ladder.tutorial_recommended\\\">Recommended if you've never played before</span></a><span id=\\\"skip-tutorial-button\\\" data-i18n=\\\"ladder.tutorial_skip\\\" class=\\\"btn btn-primary btn-block btn-lg\\\">Skip Tutorial</span></div><div id=\\\"normal-view\\\">\");\nif ( view.tutorialLevelExists)\n{\nbuf.push(\"<p class=\\\"tutorial-suggestion\\\"><strong data-i18n=\\\"ladder.tutorial_not_sure\\\">Not sure what's going on?</strong> <a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.levelID) + \"-tutorial\" + (view.options.league ? \"?league=\" + view.options.league.id : \"\")), 'data-i18n':(\"ladder.tutorial_play_first\") }, {\"href\":true,\"data-i18n\":true})) + \">Play the tutorial first.</a></p>\");\n}\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.levelID) + \"?team=\" + (view.team) + \"\" + (view.options.league ? \"&league=\" + view.options.league.id : \"\")) }, {\"href\":true})) + \"><div class=\\\"play-option\\\"><img\" + (jade.attrs({ 'src':(view.myPortrait), \"class\": [('my-icon'),('only-one')] }, {\"src\":true})) + \"/><img\" + (jade.attrs({ 'src':(\"/images/pages/play/ladder/\" + (view.team) + \"_ladder_tutorial.png\"), 'style':(\"border: 1px solid \" + (view.teamColor) + \"; background: \" + (view.teamBackgroundColor) + \"\"), \"class\": [('my-team-icon'),('img-circle'),('only-one')] }, {\"src\":true,\"style\":true})) + \"/><img\" + (jade.attrs({ 'src':(view.genericPortrait), \"class\": [('opponent-icon')] }, {\"src\":true})) + \"/><img\" + (jade.attrs({ 'src':(\"/images/pages/play/ladder/\" + (view.otherTeam) + \"_ladder_tutorial.png\"), 'style':(\"border: 1px solid \" + (view.opponentTeamColor) + \"; background: \" + (view.opponentTeamBackgroundColor) + \"\"), \"class\": [('opponent-team-icon'),('img-circle')] }, {\"src\":true,\"style\":true})) + \"/><div class=\\\"my-name name-label only-one\\\"><span>\" + (jade.escape(null == (jade.interp = view.myName) ? \"\" : jade.interp)) + \"</span></div><div class=\\\"opponent-name name-label\\\"><span data-i18n=\\\"ladder.simple_ai\\\"></span><!--span.code-language(style=\\\"background-image: url(/images/common/code_languages/javascript_small.png)\\\")--></div><div class=\\\"difficulty\\\"><span data-i18n=\\\"ladder.warmup\\\">Warmup</span></div></div></a>\");\nif ( view.challengers && view.challengers.easy)\n{\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.levelID) + \"?team=\" + (view.team) + \"&opponent=\" + (view.challengers.easy.sessionID) + \"\" + (view.options.league ? \"&league=\" + view.options.league.id : \"\")) }, {\"href\":true})) + \"><div class=\\\"play-option easy-option\\\"><img\" + (jade.attrs({ 'src':(view.myPortrait), \"class\": [('my-icon'),('only-one')] }, {\"src\":true})) + \"/><img\" + (jade.attrs({ 'src':(\"/images/pages/play/ladder/\" + (view.team) + \"_ladder_easy.png\"), 'style':(\"border: 1px solid \" + (view.teamColor) + \"; background: \" + (view.teamBackgroundColor) + \"\"), \"class\": [('my-team-icon'),('img-circle'),('only-one')] }, {\"src\":true,\"style\":true})) + \"/><img\" + (jade.attrs({ 'src':(view.challengers.easy.opponentImageSource||view.genericPortrait), \"class\": [('opponent-icon')] }, {\"src\":true})) + \"/><img\" + (jade.attrs({ 'src':(\"/images/pages/play/ladder/\" + (view.otherTeam) + \"_ladder_easy.png\"), 'style':(\"border: 1px solid \" + (view.opponentTeamColor) + \"; background: \" + (view.opponentTeamBackgroundColor) + \"\"), \"class\": [('opponent-team-icon'),('img-circle')] }, {\"src\":true,\"style\":true})) + \"/><div class=\\\"my-name name-label only-one\\\"><span>\" + (jade.escape(null == (jade.interp = view.myName) ? \"\" : jade.interp)) + \"</span></div><div class=\\\"opponent-name name-label\\\"><span>\" + (jade.escape(null == (jade.interp = view.challengers.easy.opponentName) ? \"\" : jade.interp)) + \"</span>\");\nif ( view.challengers.easy.codeLanguage)\n{\nbuf.push(\"<span\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + (view.challengers.easy.codeLanguage) + \"_small.png)\"), \"class\": [('code-language')] }, {\"style\":true})) + \"></span>\");\n}\nbuf.push(\"</div><div class=\\\"difficulty\\\"><span data-i18n=\\\"general.easy\\\">Easy</span></div></div></a>\");\n}\nif ( view.challengers && view.challengers.medium)\n{\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.levelID) + \"?team=\" + (view.team) + \"&opponent=\" + (view.challengers.medium.sessionID) + \"\" + (view.options.league ? \"&league=\" + view.options.league.id : \"\")) }, {\"href\":true})) + \"><div class=\\\"play-option medium-option\\\"><img\" + (jade.attrs({ 'src':(view.myPortrait), \"class\": [('my-icon'),('only-one')] }, {\"src\":true})) + \"/><img\" + (jade.attrs({ 'src':(\"/images/pages/play/ladder/\" + (view.team) + \"_ladder_medium.png\"), 'style':(\"border: 1px solid \" + (view.teamColor) + \"; background: \" + (view.teamBackgroundColor) + \"\"), \"class\": [('my-team-icon'),('img-circle'),('only-one')] }, {\"src\":true,\"style\":true})) + \"/><img\" + (jade.attrs({ 'src':(view.challengers.medium.opponentImageSource||view.genericPortrait), \"class\": [('opponent-icon')] }, {\"src\":true})) + \"/><img\" + (jade.attrs({ 'src':(\"/images/pages/play/ladder/\" + (view.otherTeam) + \"_ladder_medium.png\"), 'style':(\"border: 1px solid \" + (view.opponentTeamColor) + \"; background: \" + (view.opponentTeamBackgroundColor) + \"\"), \"class\": [('opponent-team-icon'),('img-circle')] }, {\"src\":true,\"style\":true})) + \"/><div class=\\\"my-name name-label only-one\\\"><span>\" + (jade.escape(null == (jade.interp = view.myName) ? \"\" : jade.interp)) + \"</span></div><div class=\\\"opponent-name name-label\\\"><span>\" + (jade.escape(null == (jade.interp = view.challengers.medium.opponentName) ? \"\" : jade.interp)) + \"</span>\");\nif ( view.challengers.medium.codeLanguage)\n{\nbuf.push(\"<span\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + (view.challengers.medium.codeLanguage) + \"_small.png)\"), \"class\": [('code-language')] }, {\"style\":true})) + \"></span>\");\n}\nbuf.push(\"</div><div class=\\\"difficulty\\\"><span data-i18n=\\\"general.medium\\\">Medium</span></div></div></a>\");\n}\nif ( view.challengers && view.challengers.hard)\n{\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.levelID) + \"?team=\" + (view.team) + \"&opponent=\" + (view.challengers.hard.sessionID) + \"\" + (view.options.league ? \"&league=\" + view.options.league.id : \"\")) }, {\"href\":true})) + \"><div class=\\\"play-option hard-option\\\"><img\" + (jade.attrs({ 'src':(view.myPortrait), \"class\": [('my-icon'),('only-one')] }, {\"src\":true})) + \"/><img\" + (jade.attrs({ 'src':(\"/images/pages/play/ladder/\" + (view.team) + \"_ladder_hard.png\"), 'style':(\"border: 1px solid \" + (view.teamColor) + \"; background: \" + (view.teamBackgroundColor) + \"\"), \"class\": [('my-team-icon'),('img-circle'),('only-one')] }, {\"src\":true,\"style\":true})) + \"/><img\" + (jade.attrs({ 'src':(view.challengers.hard.opponentImageSource||view.genericPortrait), \"class\": [('opponent-icon')] }, {\"src\":true})) + \"/><img\" + (jade.attrs({ 'src':(\"/images/pages/play/ladder/\" + (view.otherTeam) + \"_ladder_hard.png\"), 'style':(\"border: 1px solid \" + (view.opponentTeamColor) + \"; background: \" + (view.opponentTeamBackgroundColor) + \"\"), \"class\": [('opponent-team-icon'),('img-circle')] }, {\"src\":true,\"style\":true})) + \"/><div class=\\\"my-name name-label only-one\\\"><span>\" + (jade.escape(null == (jade.interp = view.myName) ? \"\" : jade.interp)) + \"</span></div><div class=\\\"opponent-name name-label\\\"><span>\" + (jade.escape(null == (jade.interp = view.challengers.hard.opponentName) ? \"\" : jade.interp)) + \"</span>\");\nif ( view.challengers.hard.codeLanguage)\n{\nbuf.push(\"<span\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + (view.challengers.hard.codeLanguage) + \"_small.png)\"), \"class\": [('code-language')] }, {\"style\":true})) + \"></span>\");\n}\nbuf.push(\"</div><div class=\\\"difficulty\\\"><span data-i18n=\\\"general.hard\\\">Hard</span></div></div></a>\");\n}\nbuf.push(\"</div></div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,me = locals_.me;buf.push(\"<p id=\\\"simulation-status-text\\\">\");\nif ( view.simulationStatus)\n{\nbuf.push(\"\" + (jade.escape((jade.interp = view.simulationStatus) == null ? '' : jade.interp)) + \"\");\n}\nelse\n{\nbuf.push(\"<span data-i18n=\\\"ladder.simulation_explanation\\\">By simulating games you can get your game ranked faster!</span><span data-i18n=\\\"ladder.simulation_explanation_leagues\\\" class=\\\"spl\\\">You will mainly help simulate games for allied players in your clans and courses.</span>\");\n}\nbuf.push(\"</p><p><button data-i18n=\\\"ladder.simulate_games\\\" id=\\\"simulate-button\\\" class=\\\"btn btn-warning btn-lg highlight\\\">Simulate Games!</button></p><p class=\\\"simulation-count\\\"><span data-i18n=\\\"ladder.games_simulated_by\\\" class=\\\"spr\\\">Games simulated by you:</span><span id=\\\"simulated-by-you\\\">\" + (jade.escape(null == (jade.interp = me.get('simulatedBy') || 0) ? \"\" : jade.interp)) + \"</span></p><!--p.simulation-count--><!--  span.spr(data-i18n=\\\"ladder.games_simulated_for\\\") Games simulated for you:--><!--  span#simulated-for-you= me.get('simulatedFor') || 0--><!--p.simulation-count--><!--  span.spr(data-i18n=\\\"ladder.games_in_queue\\\") Games currently in the queue:--><!--  span#games-in-queue= view.simulatorsLeaderboardData.numberOfGamesInQueue || 0-->\");\nif ( view.simulatorsLeaderboardData)\n{\nvar topSimulators = view.simulatorsLeaderboardData.topSimulators.models;\nvar showJustTop = view.simulatorsLeaderboardData.inTopSimulators() || me.get('anonymous');\nif(!showJustTop) topSimulators = topSimulators.slice(0, 10);\nbuf.push(\"<table class=\\\"table table-bordered table-condensed table-hover\\\"><thead><tr><th></th><th data-i18n=\\\"general.player\\\" class=\\\"name-col-cell\\\">Player</th><th data-i18n=\\\"ladder.games_simulated\\\">Games simulated</th><!--th(data-i18n=\\\"ladder.games_played\\\") Games played--><!--th(data-i18n=\\\"ladder.ratio\\\") Ratio--></tr></thead><tbody>\");\n// iterate topSimulators\n;(function(){\n  var $$obj = topSimulators;\n  if ('number' == typeof $$obj.length) {\n\n    for (var rank = 0, $$l = $$obj.length; rank < $$l; rank++) {\n      var user = $$obj[rank];\n\nvar myRow = user.id == me.id\nbuf.push(\"<tr\" + (jade.attrs({ \"class\": [(myRow ? \"success\" : \"\")] }, {\"class\":true})) + \"><td class=\\\"simulator-leaderboard-cell\\\">\" + (jade.escape(null == (jade.interp = rank + 1) ? \"\" : jade.interp)) + \"</td><td class=\\\"name-col-cell\\\">\" + (jade.escape(null == (jade.interp = user.get('name') || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"simulator-leaderboard-cell\\\">\" + (jade.escape(null == (jade.interp = user.get('simulatedBy')) ? \"\" : jade.interp)) + \"</td><!--td.simulator-leaderboard-cell= user.get('simulatedFor')--><!--td.simulator-leaderboard-cell= Math.round((user.get('simulatedBy') / user.get('simulatedFor')) * 10) / 10--></tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var rank in $$obj) {\n      $$l++;      var user = $$obj[rank];\n\nvar myRow = user.id == me.id\nbuf.push(\"<tr\" + (jade.attrs({ \"class\": [(myRow ? \"success\" : \"\")] }, {\"class\":true})) + \"><td class=\\\"simulator-leaderboard-cell\\\">\" + (jade.escape(null == (jade.interp = rank + 1) ? \"\" : jade.interp)) + \"</td><td class=\\\"name-col-cell\\\">\" + (jade.escape(null == (jade.interp = user.get('name') || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"simulator-leaderboard-cell\\\">\" + (jade.escape(null == (jade.interp = user.get('simulatedBy')) ? \"\" : jade.interp)) + \"</td><!--td.simulator-leaderboard-cell= user.get('simulatedFor')--><!--td.simulator-leaderboard-cell= Math.round((user.get('simulatedBy') / user.get('simulatedFor')) * 10) / 10--></tr>\");\n    }\n\n  }\n}).call(this);\n\nvar nearbySimulators = view.simulatorsLeaderboardData.nearbySimulators()\nif ( !showJustTop && nearbySimulators)\n{\nbuf.push(\"<tr class=\\\"active\\\"><td colspan=\\\"5\\\" class=\\\"ellipsis-row\\\">...</td></tr>\");\n// iterate nearbySimulators\n;(function(){\n  var $$obj = nearbySimulators;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var user = $$obj[$index];\n\nvar myRow = user.id == me.id\nvar ratio = user.get('simulatedBy') / user.get('simulatedFor');\nbuf.push(\"<tr\" + (jade.attrs({ \"class\": [(myRow ? \"success\" : \"\")] }, {\"class\":true})) + \"><td class=\\\"simulator-leaderboard-cell\\\">\" + (jade.escape(null == (jade.interp = user.rank) ? \"\" : jade.interp)) + \"</td><td class=\\\"name-col-cell\\\">\" + (jade.escape(null == (jade.interp = user.get('name') || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"simulator-leaderboard-cell\\\">\" + (jade.escape(null == (jade.interp = user.get('simulatedBy')) ? \"\" : jade.interp)) + \"</td><!--td.simulator-leaderboard-cell= user.get('simulatedFor')--><!--td.simulator-leaderboard-cell= _.isNaN(ratio) || ratio == Infinity ? '' : ratio.toFixed(1)--></tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var user = $$obj[$index];\n\nvar myRow = user.id == me.id\nvar ratio = user.get('simulatedBy') / user.get('simulatedFor');\nbuf.push(\"<tr\" + (jade.attrs({ \"class\": [(myRow ? \"success\" : \"\")] }, {\"class\":true})) + \"><td class=\\\"simulator-leaderboard-cell\\\">\" + (jade.escape(null == (jade.interp = user.rank) ? \"\" : jade.interp)) + \"</td><td class=\\\"name-col-cell\\\">\" + (jade.escape(null == (jade.interp = user.get('name') || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"simulator-leaderboard-cell\\\">\" + (jade.escape(null == (jade.interp = user.get('simulatedBy')) ? \"\" : jade.interp)) + \"</td><!--td.simulator-leaderboard-cell= user.get('simulatedFor')--><!--td.simulator-leaderboard-cell= _.isNaN(ratio) || ratio == Infinity ? '' : ratio.toFixed(1)--></tr>\");\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push(\"</tbody></table>\");\n};return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),features = locals_.features,me = locals_.me,view = locals_.view,usesSocialMedia = locals_.usesSocialMedia,isIE = locals_.isIE,fbRef = locals_.fbRef;buf.push(\"<div id=\\\"site-nav\\\"><a href=\\\"/\\\"><img id=\\\"nav-logo\\\" src=\\\"/images/pages/base/logo.png\\\" title=\\\"CodeCombat - Learn how to code by playing a game\\\" alt=\\\"CodeCombat\\\"/></a><div id=\\\"site-nav-links\\\"><a href=\\\"/\\\"><img id=\\\"small-nav-logo\\\" src=\\\"/images/pages/base/logo.png\\\" title=\\\"CodeCombat - Learn how to code by playing a game\\\" alt=\\\"CodeCombat\\\"/></a><a href=\\\"/\\\"><span class=\\\"glyphicon glyphicon-home\\\"></span></a>\");\nif ( !features.playViewsOnly)\n{\nbuf.push(\"<a href=\\\"/play\\\" data-i18n=\\\"common.play\\\"></a><a href=\\\"/play/ladder\\\" data-i18n=\\\"game_menu.multiplayer_tab\\\"></a>\");\nif ( me.isStudent())\n{\nbuf.push(\"<a href=\\\"/students\\\" data-i18n=\\\"nav.my_courses\\\"></a>\");\n}\nif ( me.isTeacher())\n{\nbuf.push(\"<a href=\\\"/teachers/classes\\\" data-i18n=\\\"nav.my_classrooms\\\"></a>\");\n}\nbuf.push(\"<a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a><a\" + (jade.attrs({ 'href':(view.forumLink()), 'data-i18n':(\"nav.forum\") }, {\"href\":true,\"data-i18n\":true})) + \"></a><a href=\\\"/community\\\" data-i18n=\\\"nav.community\\\"></a>\");\nif ( me.get('anonymous') === false)\n{\nbuf.push(\"<span class=\\\"dropdown\\\"><button href=\\\"#\\\" data-toggle=\\\"dropdown\\\" class=\\\"btn btn-sm header-font dropdown-toggle\\\">\");\nif ( me.get('photoURL'))\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(me.getPhotoURL(18)), 'alt':(\"\"), \"class\": [('account-settings-image')] }, {\"src\":true,\"alt\":true})) + \"/>\");\n}\nelse\n{\nbuf.push(\"<i class=\\\"glyphicon glyphicon-user\\\"></i>\");\n}\nbuf.push(\"<span data-i18n=\\\"nav.account\\\" href=\\\"/account\\\" class=\\\"spl spr\\\"></span><span class=\\\"caret\\\"></span></button><ul role=\\\"menu\\\" class=\\\"dropdown-menu\\\"><li class=\\\"user-dropdown-header\\\"><span class=\\\"user-level\\\">\" + (jade.escape(null == (jade.interp = me.level()) ? \"\" : jade.interp)) + \"</span><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\") }, {\"href\":true})) + \"><div\" + (jade.attrs({ 'style':(\"background-image: url(\" + (me.getPhotoURL()) + \")\"), \"class\": [('img-circle')] }, {\"style\":true})) + \"></div></a><h3>\" + (jade.escape(null == (jade.interp = me.broadName()) ? \"\" : jade.interp)) + \"</h3></li><li><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\"), 'data-i18n':(\"nav.profile\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li><li><a href=\\\"/account/settings\\\" data-i18n=\\\"play.settings\\\"></a></li>\");\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()))\n{\nbuf.push(\"<li><a href=\\\"/account/payments\\\" data-i18n=\\\"account.payments\\\"></a></li>\");\n}\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()) || me.hasSubscription())\n{\nbuf.push(\"<li><a href=\\\"/account/subscription\\\" data-i18n=\\\"account.subscription\\\"></a></li>\");\n}\nif ( me.isAdmin() || !(me.isTeacher() || me.isStudent()))\n{\nbuf.push(\"<li><a href=\\\"/account/prepaid\\\" data-i18n=\\\"account.prepaid_codes\\\"></a></li>\");\n}\nbuf.push(\"<li><a id=\\\"logout-button\\\" data-i18n=\\\"login.log_out\\\"></a></li></ul></span>\");\n}\nelse\n{\nbuf.push(\"<button data-i18n=\\\"login.sign_up\\\" class=\\\"btn btn-sm btn-primary header-font signup-button\\\"></button><button data-i18n=\\\"login.log_in\\\" class=\\\"btn btn-sm btn-default header-font login-button\\\"></button>\");\n}\n}\nbuf.push(\"<select class=\\\"language-dropdown form-control\\\"></select></div></div><div id=\\\"site-content-area\\\">\");\n// iterate view.campaigns\n;(function(){\n  var $$obj = view.campaigns;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var campaign = $$obj[$index];\n\nbuf.push(\"<div class=\\\"campaign-container\\\"><h1><a\" + (jade.attrs({ 'href':(\"/play/\" + (campaign.levels[0].levelPath || 'level') + \"/\" + (campaign.levels[0].id) + \"\"), 'data-i18n':(\"play.campaign_\" + (campaign.id) + \"\") }, {\"href\":true,\"data-i18n\":true})) + \">\" + (jade.escape(null == (jade.interp = campaign.name) ? \"\" : jade.interp)) + \"</a></h1><p\" + (jade.attrs({ 'data-i18n':(\"[html]play.campaign_\" + (campaign.id) + \"_description\"), \"class\": [('campaign-description')] }, {\"data-i18n\":true})) + \">\" + (null == (jade.interp = campaign.description) ? \"\" : jade.interp) + \"</p>\");\n// iterate campaign.levels\n;(function(){\n  var $$obj = campaign.levels;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var level = $$obj[$index];\n\nif ( level.id === 'ace-of-coders' || level.id === 'zero-sum' || level.id === 'cavern-survival')\n{\nbuf.push(\"<a\" + (jade.attrs({ 'href':(level.disabled ? \"/play/ladder\" : \"/play/ladder/\" + (level.id) + \"\"), 'disabled':(level.disabled), 'title':(level.description), \"class\": [(view.levelStatusMap[level.id] || '')] }, {\"href\":true,\"disabled\":true,\"class\":true,\"title\":true})) + \"><div class=\\\"level\\\">\");\nif ( level.image)\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(\"\" + (level.image) + \"\"), 'alt':(\"\" + (level.name) + \"\"), \"class\": [('level-image'),('img-rounded')] }, {\"src\":true,\"alt\":true})) + \"/>\");\n}\nelse\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(\"/images/pages/play/ladder/multiplayer_notext.jpg\"), 'alt':(\"\" + (level.name) + \"\"), \"class\": [('level-image'),('img-rounded')] }, {\"src\":true,\"alt\":true})) + \"/><h3 class=\\\"dynamic-level-name\\\">\" + (jade.escape(null == (jade.interp = level.name + (level.disabled ? \" (Coming soon!)\" : \"\")) ? \"\" : jade.interp)) + \"</h3>\");\n}\nbuf.push(\"<div class=\\\"overlay-text level-difficulty\\\"><span data-i18n=\\\"play.level_difficulty\\\">Difficulty: </span>\");\n// iterate Array(level.difficulty)\n;(function(){\n  var $$obj = Array(level.difficulty);\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var i = $$obj[$index];\n\nbuf.push(\"★\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var i = $$obj[$index];\n\nbuf.push(\"★\");\n    }\n\n  }\n}).call(this);\n\nvar playCount = view.levelPlayCountMap[level.id]\nif ( playCount)\n{\nbuf.push(\"<span class=\\\"spl spr\\\">- \" + (jade.escape((jade.interp = playCount.sessions) == null ? '' : jade.interp)) + \"</span><span data-i18n=\\\"play.players\\\">players</span>\");\nif ( (view.levelStatusMap[level.id]=='complete'))\n{\nbuf.push(\"<span class=\\\"spl spr\\\">-</span><span\" + (jade.attrs({ 'data-i18n':(\"clans.complete_2\"), \"class\": [(\"level-status-\" + (view.levelStatusMap[level.id]) + \"\")] }, {\"class\":true,\"data-i18n\":true})) + \"></span>\");\n}\nelse if ( (view.levelStatusMap[level.id]=='started'))\n{\nbuf.push(\"<span class=\\\"spl spr\\\">-</span><span\" + (jade.attrs({ 'data-i18n':(\"clans.started_2\"), \"class\": [(\"level-status-\" + (view.levelStatusMap[level.id]) + \"\")] }, {\"class\":true,\"data-i18n\":true})) + \"></span>\");\n}\n}\nbuf.push(\"</div><div class=\\\"play-text-container\\\"><div data-i18n=\\\"common.play\\\" class=\\\"overlay-text play-text\\\">Play</div></div></div></a>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var level = $$obj[$index];\n\nif ( level.id === 'ace-of-coders' || level.id === 'zero-sum' || level.id === 'cavern-survival')\n{\nbuf.push(\"<a\" + (jade.attrs({ 'href':(level.disabled ? \"/play/ladder\" : \"/play/ladder/\" + (level.id) + \"\"), 'disabled':(level.disabled), 'title':(level.description), \"class\": [(view.levelStatusMap[level.id] || '')] }, {\"href\":true,\"disabled\":true,\"class\":true,\"title\":true})) + \"><div class=\\\"level\\\">\");\nif ( level.image)\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(\"\" + (level.image) + \"\"), 'alt':(\"\" + (level.name) + \"\"), \"class\": [('level-image'),('img-rounded')] }, {\"src\":true,\"alt\":true})) + \"/>\");\n}\nelse\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(\"/images/pages/play/ladder/multiplayer_notext.jpg\"), 'alt':(\"\" + (level.name) + \"\"), \"class\": [('level-image'),('img-rounded')] }, {\"src\":true,\"alt\":true})) + \"/><h3 class=\\\"dynamic-level-name\\\">\" + (jade.escape(null == (jade.interp = level.name + (level.disabled ? \" (Coming soon!)\" : \"\")) ? \"\" : jade.interp)) + \"</h3>\");\n}\nbuf.push(\"<div class=\\\"overlay-text level-difficulty\\\"><span data-i18n=\\\"play.level_difficulty\\\">Difficulty: </span>\");\n// iterate Array(level.difficulty)\n;(function(){\n  var $$obj = Array(level.difficulty);\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var i = $$obj[$index];\n\nbuf.push(\"★\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var i = $$obj[$index];\n\nbuf.push(\"★\");\n    }\n\n  }\n}).call(this);\n\nvar playCount = view.levelPlayCountMap[level.id]\nif ( playCount)\n{\nbuf.push(\"<span class=\\\"spl spr\\\">- \" + (jade.escape((jade.interp = playCount.sessions) == null ? '' : jade.interp)) + \"</span><span data-i18n=\\\"play.players\\\">players</span>\");\nif ( (view.levelStatusMap[level.id]=='complete'))\n{\nbuf.push(\"<span class=\\\"spl spr\\\">-</span><span\" + (jade.attrs({ 'data-i18n':(\"clans.complete_2\"), \"class\": [(\"level-status-\" + (view.levelStatusMap[level.id]) + \"\")] }, {\"class\":true,\"data-i18n\":true})) + \"></span>\");\n}\nelse if ( (view.levelStatusMap[level.id]=='started'))\n{\nbuf.push(\"<span class=\\\"spl spr\\\">-</span><span\" + (jade.attrs({ 'data-i18n':(\"clans.started_2\"), \"class\": [(\"level-status-\" + (view.levelStatusMap[level.id]) + \"\")] }, {\"class\":true,\"data-i18n\":true})) + \"></span>\");\n}\n}\nbuf.push(\"</div><div class=\\\"play-text-container\\\"><div data-i18n=\\\"common.play\\\" class=\\\"overlay-text play-text\\\">Play</div></div></div></a>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var campaign = $$obj[$index];\n\nbuf.push(\"<div class=\\\"campaign-container\\\"><h1><a\" + (jade.attrs({ 'href':(\"/play/\" + (campaign.levels[0].levelPath || 'level') + \"/\" + (campaign.levels[0].id) + \"\"), 'data-i18n':(\"play.campaign_\" + (campaign.id) + \"\") }, {\"href\":true,\"data-i18n\":true})) + \">\" + (jade.escape(null == (jade.interp = campaign.name) ? \"\" : jade.interp)) + \"</a></h1><p\" + (jade.attrs({ 'data-i18n':(\"[html]play.campaign_\" + (campaign.id) + \"_description\"), \"class\": [('campaign-description')] }, {\"data-i18n\":true})) + \">\" + (null == (jade.interp = campaign.description) ? \"\" : jade.interp) + \"</p>\");\n// iterate campaign.levels\n;(function(){\n  var $$obj = campaign.levels;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var level = $$obj[$index];\n\nif ( level.id === 'ace-of-coders' || level.id === 'zero-sum' || level.id === 'cavern-survival')\n{\nbuf.push(\"<a\" + (jade.attrs({ 'href':(level.disabled ? \"/play/ladder\" : \"/play/ladder/\" + (level.id) + \"\"), 'disabled':(level.disabled), 'title':(level.description), \"class\": [(view.levelStatusMap[level.id] || '')] }, {\"href\":true,\"disabled\":true,\"class\":true,\"title\":true})) + \"><div class=\\\"level\\\">\");\nif ( level.image)\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(\"\" + (level.image) + \"\"), 'alt':(\"\" + (level.name) + \"\"), \"class\": [('level-image'),('img-rounded')] }, {\"src\":true,\"alt\":true})) + \"/>\");\n}\nelse\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(\"/images/pages/play/ladder/multiplayer_notext.jpg\"), 'alt':(\"\" + (level.name) + \"\"), \"class\": [('level-image'),('img-rounded')] }, {\"src\":true,\"alt\":true})) + \"/><h3 class=\\\"dynamic-level-name\\\">\" + (jade.escape(null == (jade.interp = level.name + (level.disabled ? \" (Coming soon!)\" : \"\")) ? \"\" : jade.interp)) + \"</h3>\");\n}\nbuf.push(\"<div class=\\\"overlay-text level-difficulty\\\"><span data-i18n=\\\"play.level_difficulty\\\">Difficulty: </span>\");\n// iterate Array(level.difficulty)\n;(function(){\n  var $$obj = Array(level.difficulty);\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var i = $$obj[$index];\n\nbuf.push(\"★\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var i = $$obj[$index];\n\nbuf.push(\"★\");\n    }\n\n  }\n}).call(this);\n\nvar playCount = view.levelPlayCountMap[level.id]\nif ( playCount)\n{\nbuf.push(\"<span class=\\\"spl spr\\\">- \" + (jade.escape((jade.interp = playCount.sessions) == null ? '' : jade.interp)) + \"</span><span data-i18n=\\\"play.players\\\">players</span>\");\nif ( (view.levelStatusMap[level.id]=='complete'))\n{\nbuf.push(\"<span class=\\\"spl spr\\\">-</span><span\" + (jade.attrs({ 'data-i18n':(\"clans.complete_2\"), \"class\": [(\"level-status-\" + (view.levelStatusMap[level.id]) + \"\")] }, {\"class\":true,\"data-i18n\":true})) + \"></span>\");\n}\nelse if ( (view.levelStatusMap[level.id]=='started'))\n{\nbuf.push(\"<span class=\\\"spl spr\\\">-</span><span\" + (jade.attrs({ 'data-i18n':(\"clans.started_2\"), \"class\": [(\"level-status-\" + (view.levelStatusMap[level.id]) + \"\")] }, {\"class\":true,\"data-i18n\":true})) + \"></span>\");\n}\n}\nbuf.push(\"</div><div class=\\\"play-text-container\\\"><div data-i18n=\\\"common.play\\\" class=\\\"overlay-text play-text\\\">Play</div></div></div></a>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var level = $$obj[$index];\n\nif ( level.id === 'ace-of-coders' || level.id === 'zero-sum' || level.id === 'cavern-survival')\n{\nbuf.push(\"<a\" + (jade.attrs({ 'href':(level.disabled ? \"/play/ladder\" : \"/play/ladder/\" + (level.id) + \"\"), 'disabled':(level.disabled), 'title':(level.description), \"class\": [(view.levelStatusMap[level.id] || '')] }, {\"href\":true,\"disabled\":true,\"class\":true,\"title\":true})) + \"><div class=\\\"level\\\">\");\nif ( level.image)\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(\"\" + (level.image) + \"\"), 'alt':(\"\" + (level.name) + \"\"), \"class\": [('level-image'),('img-rounded')] }, {\"src\":true,\"alt\":true})) + \"/>\");\n}\nelse\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(\"/images/pages/play/ladder/multiplayer_notext.jpg\"), 'alt':(\"\" + (level.name) + \"\"), \"class\": [('level-image'),('img-rounded')] }, {\"src\":true,\"alt\":true})) + \"/><h3 class=\\\"dynamic-level-name\\\">\" + (jade.escape(null == (jade.interp = level.name + (level.disabled ? \" (Coming soon!)\" : \"\")) ? \"\" : jade.interp)) + \"</h3>\");\n}\nbuf.push(\"<div class=\\\"overlay-text level-difficulty\\\"><span data-i18n=\\\"play.level_difficulty\\\">Difficulty: </span>\");\n// iterate Array(level.difficulty)\n;(function(){\n  var $$obj = Array(level.difficulty);\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var i = $$obj[$index];\n\nbuf.push(\"★\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var i = $$obj[$index];\n\nbuf.push(\"★\");\n    }\n\n  }\n}).call(this);\n\nvar playCount = view.levelPlayCountMap[level.id]\nif ( playCount)\n{\nbuf.push(\"<span class=\\\"spl spr\\\">- \" + (jade.escape((jade.interp = playCount.sessions) == null ? '' : jade.interp)) + \"</span><span data-i18n=\\\"play.players\\\">players</span>\");\nif ( (view.levelStatusMap[level.id]=='complete'))\n{\nbuf.push(\"<span class=\\\"spl spr\\\">-</span><span\" + (jade.attrs({ 'data-i18n':(\"clans.complete_2\"), \"class\": [(\"level-status-\" + (view.levelStatusMap[level.id]) + \"\")] }, {\"class\":true,\"data-i18n\":true})) + \"></span>\");\n}\nelse if ( (view.levelStatusMap[level.id]=='started'))\n{\nbuf.push(\"<span class=\\\"spl spr\\\">-</span><span\" + (jade.attrs({ 'data-i18n':(\"clans.started_2\"), \"class\": [(\"level-status-\" + (view.levelStatusMap[level.id]) + \"\")] }, {\"class\":true,\"data-i18n\":true})) + \"></span>\");\n}\n}\nbuf.push(\"</div><div class=\\\"play-text-container\\\"><div data-i18n=\\\"common.play\\\" class=\\\"overlay-text play-text\\\">Play</div></div></div></a>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><div class=\\\"achievement-corner\\\"></div><div id=\\\"site-footer\\\"><img id=\\\"footer-background\\\" src=\\\"/images/pages/base/nav_background.png\\\"/><div\" + (jade.attrs({ 'id':('footer-links'), \"class\": [(features.playViewsOnly ? 'hide' : '')] }, {\"class\":true})) + \"><a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<a tabindex=\\\"-1\\\" data-i18n=\\\"nav.contact\\\" class=\\\"contact-modal\\\"></a>\");\n}\nbuf.push(\"<a href=\\\"http://blog.codecombat.com/\\\" data-i18n=\\\"nav.blog\\\"></a><a href=\\\"https://jobs.lever.co/codecombat\\\" tabindex=\\\"-1\\\" data-i18n=\\\"nav.careers\\\"></a><a href=\\\"/legal\\\" tabindex=\\\"-1\\\" data-i18n=\\\"nav.legal\\\"></a><a href=\\\"/privacy\\\" tabindex=\\\"-1\\\" data-i18n=\\\"legal.privacy_title\\\"></a><a href=\\\"/contribute\\\" tabindex=\\\"-1\\\" data-i18n=\\\"nav.contribute\\\"></a>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<a href=\\\"/play/ladder\\\" tabindex=\\\"-1\\\" data-i18n=\\\"game_menu.multiplayer_tab\\\"></a>\");\n}\nif ( me.isAdmin())\n{\nbuf.push(\"<a href=\\\"/admin\\\">Admin</a>\");\n}\nif ( usesSocialMedia)\n{\nbuf.push(\"<div class=\\\"share-buttons\\\">\");\nif ( !isIE)\n{\nbuf.push(\"<div data-href=\\\"http://codecombat.com\\\" data-size=\\\"medium\\\" class=\\\"g-plusone\\\"></div>\");\n}\nbuf.push(\"<div\" + (jade.attrs({ 'data-href':(\"https://www.facebook.com/codecombat\"), 'data-send':(\"false\"), 'data-layout':(\"button_count\"), 'data-width':(\"350\"), 'data-show-faces':(\"true\"), 'data-ref':(\"coco_footer_\" + (fbRef) + \"\"), \"class\": [('fb-like')] }, {\"data-href\":true,\"data-send\":true,\"data-layout\":true,\"data-width\":true,\"data-show-faces\":true,\"data-ref\":true})) + \"></div>\");\nif ( !isIE)\n{\nbuf.push(\"<a href=\\\"https://twitter.com/CodeCombat\\\" data-show-count=\\\"true\\\" data-show-screen-name=\\\"false\\\" data-dnt=\\\"true\\\" data-align=\\\"right\\\" data-i18n=\\\"nav.twitter_follow\\\" class=\\\"twitter-follow-button\\\"></a><iframe src=\\\"https://ghbtns.com/github-btn.html?user=codecombat&amp;repo=codecombat&amp;type=watch&amp;count=true\\\" allowtransparency=\\\"true\\\" frameborder=\\\"0\\\" scrolling=\\\"0\\\" width=\\\"110\\\" height=\\\"20\\\" class=\\\"github-star-button\\\"></iframe>\");\n}\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div><div id=\\\"footer-credits\\\"><span><span>© All Rights Reserved</span><br/><span>CodeCombat 2015</span></span><img id=\\\"footer-logo\\\" src=\\\"/images/pages/base/logo.png\\\" alt=\\\"CodeCombat\\\"/><span><span>Site Design by</span><br/><a href=\\\"http://www.fullyillustrated.com/\\\">Fully Illustrated</a></span><!--a.firebase-bade(href=\\\"https://www.firebase.com/\\\")  // Not using right now--><!--  img(src=\\\"/images/pages/base/firebase.png\\\", alt=\\\"Powered by Firebase\\\")--></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<div class=\\\"closed-chat-area\\\"><table><tbody></tbody></table></div><div class=\\\"open-chat-area secret\\\"><table><tbody></tbody></table></div><textarea></textarea><i class=\\\"icon-comment icon-white\\\"></i>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),homeLink = locals_.homeLink,me = locals_.me,ladderGame = locals_.ladderGame,view = locals_.view,i18n = locals_.i18n,difficultyTitle = locals_.difficultyTitle,worldName = locals_.worldName,levelDifficulty = locals_.levelDifficulty,observing = locals_.observing,spectateGame = locals_.spectateGame;buf.push(\"<div class=\\\"left-cap\\\"></div><div class=\\\"right-cap\\\"></div><div class=\\\"center-chain\\\"></div><div class=\\\"right-chain\\\"></div><div class=\\\"wood-background\\\"></div><div class=\\\"levels-link-area\\\"><a\" + (jade.attrs({ 'href':(homeLink || \"/\"), \"class\": [('levels-link')] }, {\"href\":true})) + \"><div class=\\\"glyphicon glyphicon-play\\\"></div><span\" + (jade.attrs({ 'data-i18n':(me.isSessionless() ? \"nav.courses\" : (ladderGame ? \"general.ladder\" : \"nav.play\")), \"class\": [('home-text')] }, {\"data-i18n\":true})) + \"></span></a></div><div class=\\\"level-name-area-container\\\"><div class=\\\"level-name-area\\\">\");\nif ( view.course)\n{\nbuf.push(\"<div class=\\\"level-label\\\">\" + (jade.escape(null == (jade.interp = i18n(view.course.attributes, 'name')) ? \"\" : jade.interp)) + \"</div>\");\n}\nbuf.push(\"<div\" + (jade.attrs({ 'title':(difficultyTitle || \"\"), \"class\": [('level-name')] }, {\"title\":true})) + \"><span>\" + (jade.escape((jade.interp = view.levelNumber ? view.levelNumber + '. ' : '') == null ? '' : jade.interp)) + \"\" + (jade.escape((jade.interp = worldName.replace('Course: ', '')) == null ? '' : jade.interp)) + \"</span>\");\nif ( levelDifficulty)\n{\nbuf.push(\"<sup class=\\\"level-difficulty\\\">\" + (jade.escape(null == (jade.interp = levelDifficulty) ? \"\" : jade.interp)) + \"</sup>\");\n}\nbuf.push(\"</div></div></div><div class=\\\"buttons-area\\\">\");\nif ( !observing)\n{\nbuf.push(\"<button id=\\\"game-menu-button\\\" data-i18n=\\\"[title]play_level.show_menu\\\" title=\\\"Show game menu\\\" class=\\\"btn btn-inverse\\\"><div class=\\\"hamburger\\\"><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span></div><span data-i18n=\\\"play_level.game_menu\\\" class=\\\"game-menu-text\\\">Game Menu</span></button>\");\n}\nif ( spectateGame)\n{\nbuf.push(\"<button id=\\\"next-game-button\\\" data-i18n=\\\"play_level.next_game\\\" class=\\\"btn btn-xs btn-inverse banner\\\">Next game</button>\");\n}\nif ( !observing)\n{\nbuf.push(\"<button id=\\\"level-done-button\\\" data-i18n=\\\"play_level.done\\\" class=\\\"btn btn-xs btn-primary banner\\\">Done</button>\");\n}\nif ( me.get('anonymous'))\n{\nbuf.push(\"<button id=\\\"control-bar-sign-up-button\\\" data-toggle=\\\"coco-modal\\\" data-target=\\\"core/CreateAccountModal\\\" data-i18n=\\\"signup.sign_up\\\" class=\\\"btn btn-xs btn-primary banner\\\"></button>\");\n}\nif ( me.isAdmin())\n{\nvar otherVersion = view.course ? 'Home' : 'Classroom'\nbuf.push(\"<button id=\\\"version-switch-button\\\" class=\\\"btn btn-xs btn-inverse banner\\\"><span>\" + (jade.escape(null == (jade.interp = otherVersion) ? \"\" : jade.interp)) + \"</span><span>\" + (jade.escape(null == (jade.interp = ' ') ? \"\" : jade.interp)) + \"</span><span data-code-language=\\\"javascript\\\" class=\\\"code-language-selector\\\">JS</span><span>\" + (jade.escape(null == (jade.interp = ' | ') ? \"\" : jade.interp)) + \"</span><span data-code-language=\\\"python\\\" class=\\\"code-language-selector\\\">PY</span></button>\");\n}\nbuf.push(\"</div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;// iterate view.players\n;(function(){\n  var $$obj = view.players;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var player = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ \"class\": [(\"player-container team-\" + player.team)] }, {\"class\":true})) + \"><div class=\\\"player-portrait\\\"><div class=\\\"thang-avatar-placeholder\\\"></div></div><div class=\\\"player-info\\\"><div class=\\\"name-and-power\\\">\");\nif ( view.showsPower)\n{\nbuf.push(\"<div class=\\\"player-power\\\"><div class=\\\"power-icon\\\"></div><div class=\\\"power-value\\\"></div></div>\");\n}\nif ( view.showsGold)\n{\nbuf.push(\"<div class=\\\"player-gold\\\"><div class=\\\"gold-icon\\\"></div><div class=\\\"gold-value\\\"></div></div>\");\n}\nbuf.push(\"<div class=\\\"player-name\\\">\" + (jade.escape(null == (jade.interp = player.name || 'Anonymous') ? \"\" : jade.interp)) + \"</div></div><div class=\\\"player-health\\\"><div class=\\\"health-icon\\\"></div><div class=\\\"health-bar-container\\\"><div class=\\\"health-bar\\\"></div></div><div class=\\\"health-value\\\"></div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var player = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ \"class\": [(\"player-container team-\" + player.team)] }, {\"class\":true})) + \"><div class=\\\"player-portrait\\\"><div class=\\\"thang-avatar-placeholder\\\"></div></div><div class=\\\"player-info\\\"><div class=\\\"name-and-power\\\">\");\nif ( view.showsPower)\n{\nbuf.push(\"<div class=\\\"player-power\\\"><div class=\\\"power-icon\\\"></div><div class=\\\"power-value\\\"></div></div>\");\n}\nif ( view.showsGold)\n{\nbuf.push(\"<div class=\\\"player-gold\\\"><div class=\\\"gold-icon\\\"></div><div class=\\\"gold-value\\\"></div></div>\");\n}\nbuf.push(\"<div class=\\\"player-name\\\">\" + (jade.escape(null == (jade.interp = player.name || 'Anonymous') ? \"\" : jade.interp)) + \"</div></div><div class=\\\"player-health\\\"><div class=\\\"health-icon\\\"></div><div class=\\\"health-bar-container\\\"><div class=\\\"health-bar\\\"></div></div><div class=\\\"health-value\\\"></div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<ul id=\\\"primary-goals-list\\\"></ul><div class=\\\"goals-status\\\"><span data-i18n=\\\"play_level.goals\\\">Goals</span><span class=\\\"spr\\\">:</span><span data-i18n=\\\"play_level.running\\\" class=\\\"secret goal-status running\\\">Running...</span><span data-i18n=\\\"play_level.success\\\" class=\\\"secret goal-status success\\\">Success!</span><span data-i18n=\\\"play_level.incomplete\\\" class=\\\"secret goal-status incomplete\\\">Incomplete</span><span data-i18n=\\\"play_level.timed_out\\\" class=\\\"secret goal-status timed-out\\\">Ran out of time</span><span data-i18n=\\\"play_level.failing\\\" class=\\\"secret goal-status failure\\\">Failing</span></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\n;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<button class=\\\"close-hint-btn btn btn-illustrated btn-danger\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></button><h1 class=\\\"text-center hint-title\\\"><span>\" + (jade.escape(null == (jade.interp = view.state.get('hintsTitle')) ? \"\" : jade.interp)) + \"</span></h1><div class=\\\"hint-body\\\">\" + (null == (jade.interp = view.getProcessedHint()) ? \"\" : jade.interp) + \"</div><div class=\\\"row btn-area\\\"><div class=\\\"col-md-4\\\">\");\nif ( view.state.get('hintIndex') > 0)\n{\nbuf.push(\"<button data-i18n=\\\"about.previous\\\" class=\\\"previous-btn btn btn-illustrated pull-left\\\"></button>\");\n}\nbuf.push(\"</div><div class=\\\"col-md-4\\\"><h2 class=\\\"text-center hint-pagination\\\">\" + (jade.escape((jade.interp = view.state.get('hintIndex')+1) == null ? '' : jade.interp)) + \" / \" + (jade.escape((jade.interp = view.hintsState.get('total')) == null ? '' : jade.interp)) + \"</h2></div><div class=\\\"col-md-4\\\">\");\nif ( view.state.get('hintIndex') < view.hintsState.get('total') - 1)\n{\nbuf.push(\"<button data-i18n=\\\"play.next\\\" class=\\\"next-btn btn btn-illustrated pull-right\\\"></button>\");\n}\nbuf.push(\"</div></div><div class=\\\"clearfix\\\"></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<div class=\\\"wood-background\\\"></div><div class=\\\"hinge hinge-0\\\"></div><div class=\\\"hinge hinge-1\\\"></div><div class=\\\"hinge hinge-2\\\"></div><div class=\\\"hinge hinge-3\\\"></div><div class=\\\"avatar-wrapper-container\\\"><div class=\\\"thang-canvas-wrapper thang-elem\\\"><canvas class=\\\"thang-canvas\\\"></canvas></div></div><div class=\\\"center\\\"><div class=\\\"thang-name\\\"></div><div class=\\\"thang-props thang-elem\\\"></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),prop = locals_.prop,hasIcon = locals_.hasIcon,hasBar = locals_.hasBar;buf.push(\"<div\" + (jade.attrs({ 'name':(\"\" + (prop) + \"\"), \"class\": [('prop')] }, {\"name\":true})) + \">\");\nif ( hasIcon)\n{\nbuf.push(\"<span\" + (jade.attrs({ \"class\": [(\"prop-label prop-label-icon prop-label-icon-\" + (prop) + \"\")] }, {\"class\":true})) + \"></span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"prop-label\\\">\" + (jade.escape((jade.interp = prop) == null ? '' : jade.interp)) + \": </span>\");\n}\nif ( hasBar)\n{\nbuf.push(\"<span class=\\\"prop-value bar-prop\\\"><div class=\\\"bar\\\"></div></span><span class=\\\"prop-value bar-prop-value\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"prop-value\\\"></span>\");\n}\nbuf.push(\"</div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<div class=\\\"dialogue-area\\\"><p class=\\\"bubble dialogue-bubble\\\"></p></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<button title=\\\"G: Place a green flag\\\" class=\\\"flag-button btn btn-lg green-flag\\\"><span class=\\\"glyphicon glyphicon-flag\\\"></span><span class=\\\"flag-caption\\\"><span class=\\\"flag-shortcut\\\">G</span>reen</span></button><button title=\\\"B: Place a black flag\\\" class=\\\"flag-button btn btn-lg black-flag\\\"><span class=\\\"glyphicon glyphicon-flag\\\"></span><span class=\\\"flag-caption\\\"><span class=\\\"flag-shortcut\\\">B</span>lack</span></button><button title=\\\"V: Place a violet flag\\\" class=\\\"flag-button btn btn-lg violet-flag\\\"><span class=\\\"glyphicon glyphicon-flag\\\"></span><span class=\\\"flag-caption\\\"><span class=\\\"flag-shortcut\\\">V</span>iolet</span></button>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<button id=\\\"play-button\\\" title=\\\"Ctrl/Cmd + P: Toggle level play/pause\\\" class=\\\"btn btn-xs btn-inverse paused\\\"><div class=\\\"glyphicon glyphicon-play\\\"></div><div class=\\\"glyphicon glyphicon-pause\\\"></div><div class=\\\"glyphicon glyphicon-repeat\\\"></div></button><button id=\\\"volume-button\\\" title=\\\"Adjust volume\\\" class=\\\"btn btn-xs btn-inverse picoctf-hide\\\"><div class=\\\"glyphicon glyphicon-volume-off\\\"></div><div class=\\\"glyphicon glyphicon-volume-down\\\"></div><div class=\\\"glyphicon glyphicon-volume-up\\\"></div></button><button id=\\\"music-button\\\" title=\\\"Toggle Music\\\" class=\\\"btn btn-xs btn-inverse picoctf-hide\\\"><span>♫</span></button>\");\nif ( !view.options.level.isType('game-dev'))\n{\nbuf.push(\"<div class=\\\"scrubber\\\"><div class=\\\"scrubber-inner\\\"><div id=\\\"timeProgress\\\" class=\\\"progress secret\\\"><div class=\\\"progress-bar\\\"><div class=\\\"scrubber-handle\\\"></div><div id=\\\"timePopover\\\" class=\\\"popover fade top in\\\"><div class=\\\"arrow\\\"></div><h3 class=\\\"popover-title\\\"></h3><div class=\\\"popover-content\\\"></div></div></div></div></div></div>\");\n}\nbuf.push(\"<div id=\\\"playback-settings\\\" class=\\\"btn-group dropup\\\"><button title=\\\"Toggle fullscreen\\\" class=\\\"btn btn-xs btn-inverse toggle-fullscreen\\\"><div class=\\\"glyphicon glyphicon-fullscreen\\\"></div></button><button id=\\\"zoom-in-button\\\" title=\\\"Zoom In (or scroll down)\\\" class=\\\"btn btn-xs btn-inverse\\\"><div class=\\\"glyphicon glyphicon-zoom-in\\\"></div></button><button id=\\\"zoom-out-button\\\" title=\\\"Zoom Out (or scroll up)\\\" class=\\\"btn btn-xs btn-inverse\\\"><div class=\\\"glyphicon glyphicon-zoom-out\\\"></div></button></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),me = locals_.me;buf.push(\"<div class=\\\"left-wing\\\"></div><div class=\\\"right-wing\\\"></div><div id=\\\"loading-details\\\" class=\\\"loading-container\\\"><div class=\\\"level-loading-goals secret\\\"><div data-i18n=\\\"play_level.goals\\\" class=\\\"goals-title\\\">Goals</div><ul class=\\\"list-unstyled\\\"></ul></div><div class=\\\"errors\\\"></div><div class=\\\"intro-doc hidden\\\"><div class=\\\"nano\\\"><div class=\\\"nano-content\\\"><div class=\\\"intro-doc-content\\\"></div></div></div></div><div class=\\\"progress-or-start-container\\\"><button data-i18n=\\\"play_level.loading_start\\\" class=\\\"start-level-button btn btn-lg btn-success btn-illustrated header-font needsclick\\\">Start Level</button><div class=\\\"load-progress\\\"><div class=\\\"progress\\\"><div class=\\\"progress-background\\\"></div><div class=\\\"progress-bar-container\\\"><div class=\\\"progress-bar progress-bar-success\\\"></div></div><div class=\\\"rim\\\"></div></div></div><div class=\\\"could-not-load\\\"><span data-i18n=\\\"loading_error.could_not_load\\\">Error loading from server</span></div><div class=\\\"subscription-required\\\"><span data-i18n=\\\"subscribe.subscription_required_to_play\\\">You'll need a subscription to play this level.</span><button data-i18n=\\\"subscribe.subscribe\\\" class=\\\"start-subscription-button btn btn-lg btn-warning\\\">Subscribe</button></div><div class=\\\"course-membership-required\\\"><span data-i18n=\\\"courses.course_membership_required_to_play\\\">You'll need to join a course to play this level.</span><a data-i18n=\\\"courses.go_to_courses\\\" href=\\\"/students\\\" class=\\\"btn btn-lg btn-warning\\\">Go To Courses</a></div></div><div id=\\\"tip-wrapper\\\" class=\\\"picoctf-hide\\\"><strong data-i18n=\\\"play_level.tip_toggle_play\\\" class=\\\"tip\\\">Toggle play/paused with Ctrl+P.</strong><strong data-i18n=\\\"play_level.tip_scrub_shortcut\\\" class=\\\"tip\\\">Ctrl+[ and Ctrl+] rewind and fast-forward.</strong><strong data-i18n=\\\"play_level.tip_guide_exists\\\" class=\\\"tip\\\">Click the guide, inside game menu (at the top of the page), for useful info.</strong><strong data-i18n=\\\"play_level.tip_open_source\\\" class=\\\"tip\\\">CodeCombat is 100% open source!</strong><strong data-i18n=\\\"play_level.tip_tell_friends\\\" class=\\\"tip\\\">Enjoying CodeCombat? Tell your friends about us!</strong><strong data-i18n=\\\"play_level.tip_beta_launch\\\" class=\\\"tip\\\">CodeCombat launched its beta in October, 2013.</strong><strong data-i18n=\\\"play_level.tip_think_solution\\\" class=\\\"tip\\\">Think of the solution, not the problem.</strong><strong data-i18n=\\\"play_level.tip_theory_practice\\\" class=\\\"tip\\\">In theory there is no difference between theory and practice; in practice there is. - Yogi Berra</strong><strong data-i18n=\\\"play_level.tip_error_free\\\" class=\\\"tip\\\">There are two ways to write error-free programs; only the third one works. - Alan Perlis</strong><strong data-i18n=\\\"play_level.tip_debugging_program\\\" class=\\\"tip\\\">If debugging is the process of removing bugs, then programming must be the process of putting them in. - Edsger W. Dijkstra</strong><strong data-i18n=\\\"play_level.tip_forums\\\" class=\\\"tip\\\">Head over to the forums and tell us what you think!</strong><strong data-i18n=\\\"play_level.tip_impossible\\\" class=\\\"tip\\\">It always seems impossible until it's done. - Nelson Mandela</strong><strong data-i18n=\\\"play_level.tip_move_forward\\\" class=\\\"tip\\\">Whatever you do, keep moving forward. - Martin Luther King Jr.</strong><strong data-i18n=\\\"play_level.tip_google\\\" class=\\\"tip\\\">Have a problem you can't solve? Google it!</strong><strong data-i18n=\\\"play_level.tip_solve_then_write\\\" class=\\\"tip\\\">First, solve the problem. Then, write the code. — John Johnson</strong><strong data-i18n=\\\"play_level.tip_mistakes_proof_of_trying\\\" class=\\\"tip\\\">Mistakes in your code are just proof that you are trying.</strong><strong data-i18n=\\\"play_level.tip_baby_coders\\\" class=\\\"tip rare\\\">In the future, even babies will be Archmages.</strong><strong data-i18n=\\\"play_level.tip_hardware_problem\\\" class=\\\"tip rare\\\">Q: How many programmers does it take to change a light bulb?  A: None, it's a hardware problem.</strong><strong data-i18n=\\\"play_level.tip_morale_improves\\\" class=\\\"tip rare\\\">Loading will continue until morale improves.</strong><strong data-i18n=\\\"play_level.tip_all_species\\\" class=\\\"tip rare\\\">We believe in equal opportunities to learn programming for all species.</strong><strong data-i18n=\\\"play_level.tip_reticulating\\\" class=\\\"tip rare\\\">Reticulating spines.</strong><strong data-i18n=\\\"play_level.tip_great_responsibility\\\" class=\\\"tip rare\\\">With great coding skill comes great debug responsibility.</strong><strong data-i18n=\\\"play_level.tip_munchkin\\\" class=\\\"tip rare\\\">If you don't eat your vegetables, a munchkin will come after you while you're asleep.</strong><strong data-i18n=\\\"play_level.tip_binary\\\" class=\\\"tip rare\\\">There are only 10 types of people in the world: those who understand binary, and those who don't.</strong><strong data-i18n=\\\"play_level.tip_commitment_yoda\\\" class=\\\"tip rare\\\">A programmer must have the deepest commitment, the most serious mind. ~ Yoda</strong><strong data-i18n=\\\"play_level.tip_no_try\\\" class=\\\"tip rare\\\">Do. Or do not. There is no try. - Yoda</strong><strong data-i18n=\\\"play_level.tip_patience\\\" class=\\\"tip rare\\\">Patience you must have, young Padawan. - Yoda</strong><strong data-i18n=\\\"play_level.tip_documented_bug\\\" class=\\\"tip rare\\\">A documented bug is not a bug; it is a feature.</strong><strong data-i18n=\\\"play_level.tip_talk_is_cheap\\\" class=\\\"tip rare\\\">Talk is cheap. Show me the code. - Linus Torvalds</strong><strong data-i18n=\\\"play_level.tip_first_language\\\" class=\\\"tip rare\\\">The most disastrous thing that you can ever learn is your first programming language. - Alan Kay</strong><strong data-i18n=\\\"play_level.tip_hofstadters_law\\\" class=\\\"tip rare\\\">Hofstadter's Law: It always takes longer than you expect, even when you take into account Hofstadter's Law.</strong><strong data-i18n=\\\"play_level.tip_premature_optimization\\\" class=\\\"tip rare\\\">Premature optimization is the root of all evil - Donald Knuth</strong><strong data-i18n=\\\"play_level.tip_brute_force\\\" class=\\\"tip rare\\\">When in doubt, use brute force. - Ken Thompson</strong><strong data-i18n=\\\"play_level.tip_extrapolation\\\" class=\\\"tip rare\\\">There are only two kinds of people: those that can extrapolate from incomplete data...</strong><strong data-i18n=\\\"play_level.tip_superpower\\\" class=\\\"tip rare\\\">Coding is the closest thing we have to a superpower</strong><strong data-i18n=\\\"play_level.tip_source_code\\\" class=\\\"tip rare\\\">I want to change the world but they would not give me the source code.</strong><strong data-i18n=\\\"play_level.tip_javascript_java\\\" class=\\\"tip rare\\\">Java is to JavaScript what Car is to Carpet. - Chris Heilmann</strong><strong class=\\\"tip rare\\\"><span data-i18n=\\\"play_level.tip_harry\\\" class=\\\"spr\\\">Yer a Wizard,</span><span>\" + (jade.escape(null == (jade.interp = me.get('name', true)) ? \"\" : jade.interp)) + \"</span></strong><strong data-i18n=\\\"play_level.tip_control_destiny\\\" class=\\\"tip rare\\\">In real open source, you have the right to control your own destiny. - Linus Torvalds</strong><strong data-i18n=\\\"play_level.tip_no_code\\\" class=\\\"tip rare\\\">No code is faster than no code.</strong><strong data-i18n=\\\"play_level.tip_code_never_lies\\\" class=\\\"tip rare\\\">Code never lies, comments sometimes do. — Ron Jeffries</strong><strong data-i18n=\\\"play_level.tip_reusable_software\\\" class=\\\"tip rare\\\">Before software can be reusable it first has to be usable.</strong><strong data-i18n=\\\"play_level.tip_optimization_operator\\\" class=\\\"tip rare\\\">Every language has an optimization operator. In most languages that operator is ‘//’</strong><strong data-i18n=\\\"play_level.tip_lines_of_code\\\" class=\\\"tip rare\\\">Measuring programming progress by lines of code is like measuring aircraft building progress by weight. — Bill Gates</strong><strong data-i18n=\\\"play_level.tip_adding_evil\\\" class=\\\"tip rare\\\">Adding a pinch of evil.</strong><strong data-i18n=\\\"play_level.tip_adding_orgres\\\" class=\\\"tip rare\\\">Rounding up ogres.</strong><strong data-i18n=\\\"play_level.tip_sharpening_swords\\\" class=\\\"tip rare\\\">Sharpening the swords.</strong><strong data-i18n=\\\"play_level.tip_hate_computers\\\" class=\\\"tip rare\\\">That's the thing about people who think they hate computers. What they really hate is lousy programmers. - Larry Niven</strong><strong class=\\\"tip rare\\\"><a href=\\\"https://github.com/codecombat/codecombat/wiki\\\" data-i18n=\\\"play_level.tip_open_source_contribute\\\">You can help CodeCombat improve!</a></strong><strong data-i18n=\\\"play_level.tip_recurse\\\" class=\\\"tip rare\\\">To iterate is human, to recurse divine. - L. Peter Deutsch</strong><strong data-i18n=\\\"play_level.tip_free_your_mind\\\" class=\\\"tip rare\\\">You have to let it all go, Neo. Fear, doubt, and disbelief. Free your mind. - Morpheus</strong><strong data-i18n=\\\"play_level.tip_strong_opponents\\\" class=\\\"tip rare\\\">Even the strongest of opponents always has a weakness. - Itachi Uchiha</strong><strong data-i18n=\\\"play_level.tip_paper_and_pen\\\" class=\\\"tip rare\\\">Before you start coding, you can always plan with a sheet of paper and a pen.</strong><strong data-i18n=\\\"play_level.tip_compiler_ignores_comments\\\" class=\\\"tip rare\\\">Sometimes I think that the compiler ignores my comments.</strong><strong data-i18n=\\\"play_level.tip_understand_recursion\\\" class=\\\"tip rare\\\">The only way to understand recursion is to understand recursion.</strong><strong data-i18n=\\\"play_level.tip_open_source_and_polymorphism\\\" class=\\\"tip rare\\\">Open Source projects are like totally polymorphic heterogeneous structures: All types are welcome.</strong><strong data-i18n=\\\"play_level.tip_ratatouille\\\" class=\\\"tip rare\\\">You must not let anyone define your limits because of where you come from. Your only limit is your soul. - Gusteau, Ratatouille</strong><strong data-i18n=\\\"play_level.tip_nemo\\\" class=\\\"tip rare\\\">When life gets you down, want to know what you've gotta do? Just keep swimming, just keep swimming. - Dory, Finding Nemo</strong><strong data-i18n=\\\"play_level.tip_internet_weather\\\" class=\\\"tip rare\\\">Just move to the internet, it's great here. We get to live inside where the weather is always awesome. - John Green</strong><strong data-i18n=\\\"play_level.tip_nerds\\\" class=\\\"tip rare\\\">Nerds are allowed to love stuff, like jump-up-and-down-in-the-chair-can't-control-yourself love it. - John Green</strong><strong data-i18n=\\\"play_level.tip_self_taught\\\" class=\\\"tip rare\\\">I taught myself 90% of what I've learned. And that's normal! - Hank Green</strong><strong data-i18n=\\\"play_level.tip_luna_lovegood\\\" class=\\\"tip rare\\\">Don't worry, you're just as sane as I am. - Luna Lovegood</strong><strong data-i18n=\\\"play_level.tip_good_idea\\\" class=\\\"tip rare\\\">The best way to have a good idea is to have a lot of ideas. - Linus Pauling</strong><strong data-i18n=\\\"play_level.tip_programming_not_about_computers\\\" class=\\\"tip rare\\\">Computer Science is no more about computers than astronomy is about telescopes. - Edsger Dijkstra</strong><strong data-i18n=\\\"play_level.tip_mulan\\\" class=\\\"tip rare\\\">Believe you can, then you will. - Mulan</strong></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"background-wrapper\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-body\\\"></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content style-flat\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nbuf.push(\"<h3 class=\\\"text-center\\\">You beat the game!</h3></div><div class=\\\"modal-body\\\"><div class=\\\"text-center\\\">Share this level so your friends and family can play it:</div><div class=\\\"share-row text-center\\\"><input\" + (jade.attrs({ 'id':('copy-url-input'), 'value':(view.shareURL), \"class\": [('text-h4'),('semibold'),('form-control'),('input-lg')] }, {\"value\":true})) + \"/><button id=\\\"copy-url-btn\\\" class=\\\"btn btn-lg btn-navy-alt\\\"><span data-i18n=\\\"sharing.copy_url\\\"></span></button></div></div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-footer\\\"><div class=\\\"text-center\\\"><button id=\\\"replay-game-btn\\\" data-dismiss=\\\"modal\\\" class=\\\"btn btn-navy btn-lg\\\">Replay Game</button><a id=\\\"play-more-codecombat-btn\\\" href=\\\"/\\\" class=\\\"btn btn-navy btn-lg\\\">Play More CodeCombat</a></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,me = locals_.me,victoryText = locals_.victoryText,isCourseLevel = locals_.isCourseLevel,currentCourseName = locals_.currentCourseName,currentLevelName = locals_.currentLevelName,nextLevelName = locals_.nextLevelName,level = locals_.level,achievements = locals_.achievements,thangTypes = locals_.thangTypes,i18n = locals_.i18n,features = locals_.features,readyToRank = locals_.readyToRank,showHourOfCodeDoneButton = locals_.showHourOfCodeDoneButton,showLeaderboard = locals_.showLeaderboard,showReturnToCourse = locals_.showReturnToCourse,document = locals_.document;buf.push(\"<div class=\\\"modal-dialog game\\\"><div class=\\\"background-wrapper\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nbuf.push(\"<div id=\\\"victory-header\\\" class=\\\"out\\\"><div id=\\\"victory-title\\\">\");\nif ( !me.get('preferredLanguage') || me.get('preferredLanguage').split('-')[0] == 'en')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level/modal/victory_word.png\\\" draggable=\\\"false\\\"/>\");\n}\nelse\n{\nbuf.push(\"<h1 data-i18n=\\\"play_level.victory\\\">Victory</h1>\");\n}\nbuf.push(\"</div></div></div><div class=\\\"modal-body\\\">\");\nif ( victoryText)\n{\nbuf.push(\"<div id=\\\"victory-text\\\">\" + (jade.escape(null == (jade.interp = victoryText) ? \"\" : jade.interp)) + \"</div>\");\n}\nif ( isCourseLevel)\n{\nbuf.push(\"<div class=\\\"course-name-container\\\">\");\nif ( currentCourseName)\n{\nbuf.push(\"<p><span data-i18n=\\\"play_level.course\\\" class=\\\"spr level-title\\\"></span><span class=\\\"level-name\\\">\" + (jade.escape(null == (jade.interp = currentCourseName) ? \"\" : jade.interp)) + \"</span></p>\");\n}\nbuf.push(\"</div><div class=\\\"container-fluid\\\"><div class=\\\"row\\\"><div class=\\\"col-md-6\\\">\");\nif ( currentLevelName)\n{\nbuf.push(\"<div data-i18n=\\\"play_level.completed_level\\\" class=\\\"level-title\\\"></div><div class=\\\"level-name\\\">\" + (jade.escape(null == (jade.interp = currentLevelName.replace('Course: ', '')) ? \"\" : jade.interp)) + \"</div>\");\n}\nbuf.push(\"</div><div class=\\\"col-md-6\\\">\");\nif ( nextLevelName)\n{\nbuf.push(\"<div data-i18n=\\\"play_level.next_level\\\" class=\\\"level-title\\\"></div><div class=\\\"level-name\\\">\" + (jade.escape(null == (jade.interp = nextLevelName.replace('Course: ', '')) ? \"\" : jade.interp)) + \"</div>\");\n}\nelse\n{\nbuf.push(\"<div data-i18n=\\\"play_level.course\\\" class=\\\"level-title\\\"></div><div data-i18n=\\\"play_level.victory_title_suffix\\\" class=\\\"level-name\\\"></div>\");\n}\nbuf.push(\"</div></div></div><br/>\");\n}\nbuf.push(\"<div id=\\\"level-feedback\\\"><div class=\\\"rating secret\\\"><div data-i18n=\\\"play_level.victory_rate_the_level\\\" class=\\\"rating-label\\\">Rate the level:</div><i class=\\\"glyphicon glyphicon-star-empty\\\"></i><i class=\\\"glyphicon glyphicon-star-empty\\\"></i><i class=\\\"glyphicon glyphicon-star-empty\\\"></i><i class=\\\"glyphicon glyphicon-star-empty\\\"></i><i class=\\\"glyphicon glyphicon-star-empty\\\"></i></div>\");\nif ( !me.get('anonymous'))\n{\nbuf.push(\"<span data-i18n=\\\"play_level.victory_review\\\" class=\\\"review-label secret\\\">Tell us more!</span><div class=\\\"review secret\\\"><br/><textarea data-i18n=\\\"[placeholder]play_level.victory_review_placeholder\\\"></textarea></div>\");\n}\nbuf.push(\"<div class=\\\"clearfix\\\"></div></div>\");\nif ( level.isType('hero', 'hero-ladder', 'game-dev', 'web-dev'))\n{\n// iterate achievements\n;(function(){\n  var $$obj = achievements;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var achievement = $$obj[$index];\n\nif ( achievement.get('hidden'))\n{\ncontinue;\n}\nvar animate = achievement.completed && !achievement.completedAWhileAgo\nbuf.push(\"<div\" + (jade.attrs({ 'data-achievement-id':(achievement.id), 'data-animate':(animate), \"class\": [('achievement-panel'),(achievement.completedAWhileAgo ? 'earned' : '')] }, {\"class\":true,\"data-achievement-id\":true,\"data-animate\":true})) + \">\");\nvar rewards = achievement.get('rewards') || {};\nbuf.push(\"<div class=\\\"achievement-description\\\">\" + (jade.escape(null == (jade.interp = achievement.description) ? \"\" : jade.interp)) + \"</div><div class=\\\"achievement-rewards\\\">\");\nvar worth = achievement.worth;\nvar previousWorth = achievement.previousWorth;\nvar gems = achievement.gems;\nvar previousGems = achievement.previousGems;\nif ( worth)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-number':(worth), 'data-number-unit':('xp'), 'data-previous-number':(previousWorth || 0), \"class\": [('reward-panel'),('numerical'),('xp')] }, {\"data-number\":true,\"data-number-unit\":true,\"data-previous-number\":true})) + \"><div\" + (jade.attrs({ \"class\": [('reward-image-container'),(animate ? 'pending-reward-image' : 'show')] }, {\"class\":true})) + \"><img src=\\\"/images/pages/play/level/modal/reward_icon_xp.png\\\"/></div><div class=\\\"reward-text\\\">\" + (jade.escape(null == (jade.interp = animate ? '+0' : '+'+worth) ? \"\" : jade.interp)) + \"</div></div>\");\n}\nif ( gems)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-number':(gems), 'data-number-unit':('gem'), 'data-previous-number':(previousGems || 0), \"class\": [('reward-panel'),('numerical'),('gems')] }, {\"data-number\":true,\"data-number-unit\":true,\"data-previous-number\":true})) + \"><div\" + (jade.attrs({ \"class\": [('reward-image-container'),(animate ? 'pending-reward-image' : 'show')] }, {\"class\":true})) + \"><img src=\\\"/images/pages/play/level/modal/reward_icon_gems.png\\\"/></div><div class=\\\"reward-text\\\">\" + (jade.escape(null == (jade.interp = animate ? '+0' : '+'+gems) ? \"\" : jade.interp)) + \"</div></div>\");\n}\nif ( rewards.heroes)\n{\n// iterate rewards.heroes\n;(function(){\n  var $$obj = rewards.heroes;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var hero = $$obj[$index];\n\nvar hero = thangTypes[hero];\nbuf.push(\"<div\" + (jade.attrs({ 'data-hero-thang-type':(hero.get('original')), \"class\": [('reward-panel'),('hero')] }, {\"data-hero-thang-type\":true})) + \"><div\" + (jade.attrs({ \"class\": [('reward-image-container'),(animate ? 'pending-reward-image' : 'show')] }, {\"class\":true})) + \"><img\" + (jade.attrs({ 'src':(hero.getPortraitURL()) }, {\"src\":true})) + \"/></div>\");\nif ( animate)\n{\nbuf.push(\"<div data-i18n=\\\"play_level.victory_new_hero\\\" class=\\\"reward-text\\\">New Hero</div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"reward-text\\\">\" + (jade.escape(null == (jade.interp = i18n(hero.attributes, 'name')) ? \"\" : jade.interp)) + \"</div>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var hero = $$obj[$index];\n\nvar hero = thangTypes[hero];\nbuf.push(\"<div\" + (jade.attrs({ 'data-hero-thang-type':(hero.get('original')), \"class\": [('reward-panel'),('hero')] }, {\"data-hero-thang-type\":true})) + \"><div\" + (jade.attrs({ \"class\": [('reward-image-container'),(animate ? 'pending-reward-image' : 'show')] }, {\"class\":true})) + \"><img\" + (jade.attrs({ 'src':(hero.getPortraitURL()) }, {\"src\":true})) + \"/></div>\");\nif ( animate)\n{\nbuf.push(\"<div data-i18n=\\\"play_level.victory_new_hero\\\" class=\\\"reward-text\\\">New Hero</div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"reward-text\\\">\" + (jade.escape(null == (jade.interp = i18n(hero.attributes, 'name')) ? \"\" : jade.interp)) + \"</div>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\n}\nif ( rewards.items)\n{\n// iterate rewards.items\n;(function(){\n  var $$obj = rewards.items;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nvar item = thangTypes[item];\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-thang-type':(item.get('original')), \"class\": [('reward-panel'),('item')] }, {\"data-item-thang-type\":true})) + \"><div\" + (jade.attrs({ \"class\": [('reward-image-container'),(animate ? 'pending-reward-image' : 'show')] }, {\"class\":true})) + \"><img\" + (jade.attrs({ 'src':(item.getPortraitURL()) }, {\"src\":true})) + \"/></div>\");\nif ( animate)\n{\nbuf.push(\"<div data-i18n=\\\"play_level.victory_new_item\\\" class=\\\"reward-text\\\">New Item</div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"reward-text\\\">\" + (jade.escape(null == (jade.interp = i18n(item.attributes, 'name')) ? \"\" : jade.interp)) + \"</div>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nvar item = thangTypes[item];\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-thang-type':(item.get('original')), \"class\": [('reward-panel'),('item')] }, {\"data-item-thang-type\":true})) + \"><div\" + (jade.attrs({ \"class\": [('reward-image-container'),(animate ? 'pending-reward-image' : 'show')] }, {\"class\":true})) + \"><img\" + (jade.attrs({ 'src':(item.getPortraitURL()) }, {\"src\":true})) + \"/></div>\");\nif ( animate)\n{\nbuf.push(\"<div data-i18n=\\\"play_level.victory_new_item\\\" class=\\\"reward-text\\\">New Item</div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"reward-text\\\">\" + (jade.escape(null == (jade.interp = i18n(item.attributes, 'name')) ? \"\" : jade.interp)) + \"</div>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var achievement = $$obj[$index];\n\nif ( achievement.get('hidden'))\n{\ncontinue;\n}\nvar animate = achievement.completed && !achievement.completedAWhileAgo\nbuf.push(\"<div\" + (jade.attrs({ 'data-achievement-id':(achievement.id), 'data-animate':(animate), \"class\": [('achievement-panel'),(achievement.completedAWhileAgo ? 'earned' : '')] }, {\"class\":true,\"data-achievement-id\":true,\"data-animate\":true})) + \">\");\nvar rewards = achievement.get('rewards') || {};\nbuf.push(\"<div class=\\\"achievement-description\\\">\" + (jade.escape(null == (jade.interp = achievement.description) ? \"\" : jade.interp)) + \"</div><div class=\\\"achievement-rewards\\\">\");\nvar worth = achievement.worth;\nvar previousWorth = achievement.previousWorth;\nvar gems = achievement.gems;\nvar previousGems = achievement.previousGems;\nif ( worth)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-number':(worth), 'data-number-unit':('xp'), 'data-previous-number':(previousWorth || 0), \"class\": [('reward-panel'),('numerical'),('xp')] }, {\"data-number\":true,\"data-number-unit\":true,\"data-previous-number\":true})) + \"><div\" + (jade.attrs({ \"class\": [('reward-image-container'),(animate ? 'pending-reward-image' : 'show')] }, {\"class\":true})) + \"><img src=\\\"/images/pages/play/level/modal/reward_icon_xp.png\\\"/></div><div class=\\\"reward-text\\\">\" + (jade.escape(null == (jade.interp = animate ? '+0' : '+'+worth) ? \"\" : jade.interp)) + \"</div></div>\");\n}\nif ( gems)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-number':(gems), 'data-number-unit':('gem'), 'data-previous-number':(previousGems || 0), \"class\": [('reward-panel'),('numerical'),('gems')] }, {\"data-number\":true,\"data-number-unit\":true,\"data-previous-number\":true})) + \"><div\" + (jade.attrs({ \"class\": [('reward-image-container'),(animate ? 'pending-reward-image' : 'show')] }, {\"class\":true})) + \"><img src=\\\"/images/pages/play/level/modal/reward_icon_gems.png\\\"/></div><div class=\\\"reward-text\\\">\" + (jade.escape(null == (jade.interp = animate ? '+0' : '+'+gems) ? \"\" : jade.interp)) + \"</div></div>\");\n}\nif ( rewards.heroes)\n{\n// iterate rewards.heroes\n;(function(){\n  var $$obj = rewards.heroes;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var hero = $$obj[$index];\n\nvar hero = thangTypes[hero];\nbuf.push(\"<div\" + (jade.attrs({ 'data-hero-thang-type':(hero.get('original')), \"class\": [('reward-panel'),('hero')] }, {\"data-hero-thang-type\":true})) + \"><div\" + (jade.attrs({ \"class\": [('reward-image-container'),(animate ? 'pending-reward-image' : 'show')] }, {\"class\":true})) + \"><img\" + (jade.attrs({ 'src':(hero.getPortraitURL()) }, {\"src\":true})) + \"/></div>\");\nif ( animate)\n{\nbuf.push(\"<div data-i18n=\\\"play_level.victory_new_hero\\\" class=\\\"reward-text\\\">New Hero</div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"reward-text\\\">\" + (jade.escape(null == (jade.interp = i18n(hero.attributes, 'name')) ? \"\" : jade.interp)) + \"</div>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var hero = $$obj[$index];\n\nvar hero = thangTypes[hero];\nbuf.push(\"<div\" + (jade.attrs({ 'data-hero-thang-type':(hero.get('original')), \"class\": [('reward-panel'),('hero')] }, {\"data-hero-thang-type\":true})) + \"><div\" + (jade.attrs({ \"class\": [('reward-image-container'),(animate ? 'pending-reward-image' : 'show')] }, {\"class\":true})) + \"><img\" + (jade.attrs({ 'src':(hero.getPortraitURL()) }, {\"src\":true})) + \"/></div>\");\nif ( animate)\n{\nbuf.push(\"<div data-i18n=\\\"play_level.victory_new_hero\\\" class=\\\"reward-text\\\">New Hero</div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"reward-text\\\">\" + (jade.escape(null == (jade.interp = i18n(hero.attributes, 'name')) ? \"\" : jade.interp)) + \"</div>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\n}\nif ( rewards.items)\n{\n// iterate rewards.items\n;(function(){\n  var $$obj = rewards.items;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nvar item = thangTypes[item];\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-thang-type':(item.get('original')), \"class\": [('reward-panel'),('item')] }, {\"data-item-thang-type\":true})) + \"><div\" + (jade.attrs({ \"class\": [('reward-image-container'),(animate ? 'pending-reward-image' : 'show')] }, {\"class\":true})) + \"><img\" + (jade.attrs({ 'src':(item.getPortraitURL()) }, {\"src\":true})) + \"/></div>\");\nif ( animate)\n{\nbuf.push(\"<div data-i18n=\\\"play_level.victory_new_item\\\" class=\\\"reward-text\\\">New Item</div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"reward-text\\\">\" + (jade.escape(null == (jade.interp = i18n(item.attributes, 'name')) ? \"\" : jade.interp)) + \"</div>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nvar item = thangTypes[item];\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-thang-type':(item.get('original')), \"class\": [('reward-panel'),('item')] }, {\"data-item-thang-type\":true})) + \"><div\" + (jade.attrs({ \"class\": [('reward-image-container'),(animate ? 'pending-reward-image' : 'show')] }, {\"class\":true})) + \"><img\" + (jade.attrs({ 'src':(item.getPortraitURL()) }, {\"src\":true})) + \"/></div>\");\nif ( animate)\n{\nbuf.push(\"<div data-i18n=\\\"play_level.victory_new_item\\\" class=\\\"reward-text\\\">New Item</div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"reward-text\\\">\" + (jade.escape(null == (jade.interp = i18n(item.attributes, 'name')) ? \"\" : jade.interp)) + \"</div>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push(\"</div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-footer\\\"><div id=\\\"totals\\\"><div id=\\\"xp-wrapper\\\" class=\\\"total-wrapper\\\"><div id=\\\"xp-total\\\" class=\\\"total-count\\\">0</div><div class=\\\"total-label\\\"><span data-i18n=\\\"play_level.victory_experience_gained\\\" class=\\\"spr\\\">XP Gained</span>-<span data-i18n=\\\"general.player_level\\\" class=\\\"spl spr\\\">Level</span><span class=\\\"level\\\">\" + (jade.escape(null == (jade.interp = me.level()) ? \"\" : jade.interp)) + \"</span></div><div class=\\\"xp-bar-outer\\\"><div class=\\\"xp-bar-already-achieved\\\"></div><div class=\\\"xp-bar-total\\\"></div></div></div><div id=\\\"gem-wrapper\\\" class=\\\"total-wrapper\\\"><div id=\\\"gem-total\\\" class=\\\"total-count\\\">0</div><div data-i18n=\\\"play_level.victory_gems_gained\\\" class=\\\"total-label\\\">Gems Gained</div></div></div>\");\nif ( view.shareURL)\n{\nbuf.push(\"<div id=\\\"share-level-container\\\"><span class=\\\"share-level-label\\\"><span data-i18n=\\\"sharing.victory_share_prefix\\\">Share this link to invite your friends & family to</span><span>\" + (jade.escape(null == (jade.interp = ' ') ? \"\" : jade.interp)) + \"</span><a\" + (jade.attrs({ 'href':(view.shareURL), 'target':('_blank') }, {\"href\":true,\"target\":true})) + \">\");\nif ( view.level.isType('game-dev'))\n{\nbuf.push(\"<span data-i18n=\\\"sharing.victory_share_game\\\">play your game level</span>\");\n}\nelse\n{\nbuf.push(\"<span data-i18n=\\\"sharing.victory_share_web\\\">view your webpage</span>\");\n}\nbuf.push(\"</a><span data-i18n=\\\"sharing.victory_share_suffix\\\"></span></span><div class=\\\"row\\\"><div class=\\\"col-sm-9\\\"><input\" + (jade.attrs({ 'id':('share-level-input'), 'value':(view.shareURL), \"class\": [('text-h4'),('semibold'),('form-control'),('input-md')] }, {\"value\":true})) + \"/></div><div class=\\\"col-sm-3\\\"><button id=\\\"share-level-btn\\\" class=\\\"btn btn-md btn-success btn-illustrated\\\"><span data-i18n=\\\"sharing.copy_url\\\">Copy URL</span></button></div></div></div>\");\n}\nif ( features.codePlay)\n{\nbuf.push(\"<img id=\\\"sweepstakes-entry\\\" src=\\\"/images/common/codeplay/SweepstakesEntry.png\\\"/>\");\n}\nif ( me.get('anonymous'))\n{\nbuf.push(\"<div class=\\\"sign-up-poke hide\\\"><div data-i18n=\\\"play_level.victory_sign_up_poke\\\" class=\\\"sign-up-blurb\\\">Want to save your code? Create a free account!</div><button data-dismiss=\\\"modal\\\" data-i18n=\\\"play_level.victory_sign_up\\\" class=\\\"btn btn-illustrated btn-warning sign-up-button btn-lg\\\">Sign Up to Save Progress</button></div>\");\n}\nbuf.push(\"<button id=\\\"saving-progress-label\\\" disabled=\\\"disabled\\\" data-i18n=\\\"play_level.victory_saving_progress\\\" class=\\\"btn btn-illustrated btn-lg btn-warning hide\\\">Saving Progress</button><div class=\\\"next-level-buttons\\\">\");\nif ( view.showHoc2016ExploreButton)\n{\nbuf.push(\"<button id=\\\"continue-button\\\" data-i18n=\\\"play_level.explore_codecombat\\\" class=\\\"btn btn-illustrated btn-success btn-lg world-map-button next-level-button hide\\\"></button>\");\n}\nelse if ( readyToRank)\n{\nbuf.push(\"<div class=\\\"ladder-submission-view\\\"></div>\");\n}\nelse if ( level.isType('hero-ladder'))\n{\nbuf.push(\"<button\" + (jade.attrs({ 'data-href':(\"/play/ladder/\" + (level.get('slug')) + \"#my-matches\"), 'data-dismiss':(\"modal\"), 'data-i18n':(\"play_level.victory_return_to_ladder\"), \"class\": [('btn'),('btn-illustrated'),('btn-primary'),('btn-lg'),('return-to-ladder-button')] }, {\"data-href\":true,\"data-dismiss\":true,\"data-i18n\":true})) + \">Return to Ladder</button>\");\n}\nelse\n{\nbuf.push(\"<button id=\\\"continue-button\\\" data-i18n=\\\"common.continue\\\" class=\\\"btn btn-illustrated btn-success btn-lg world-map-button next-level-button hide\\\">Continue</button>\");\n}\nbuf.push(\"</div>\");\nif ( !me.get('anonymous') && !showHourOfCodeDoneButton && !features.codePlay && showLeaderboard)\n{\nbuf.push(\"<button data-dismiss=\\\"modal\\\" data-i18n=\\\"leaderboard.view_other_solutions\\\" class=\\\"btn btn-illustrated btn-success leaderboard-button btn-lg\\\">View Other Solutions</button>\");\n}\nelse if ( showReturnToCourse)\n{\nbuf.push(\"<button data-dismiss=\\\"modal\\\" data-i18n=\\\"play_level.victory_go_home\\\" class=\\\"btn btn-illustrated btn-warning return-to-course-button btn-lg\\\">Go Home</button>\");\n}\nif ( showHourOfCodeDoneButton)\n{\nbuf.push(\"<div class=\\\"hour-of-code-done\\\"><div data-i18n=\\\"play_level.get_certificate\\\" class=\\\"hoc-label\\\"></div><a href=\\\"https://code.org/api/hour/finish\\\" data-i18n=\\\"play_level.finished_hoc\\\" class=\\\"btn btn-md btn-illustrated\\\"></a></div>\");\n}\nif ( view.level.get('slug') == 'lost-viking')\n{\nbuf.push(\"<div class=\\\"offer lost-viking\\\"><p><img src=\\\"/file/db/level/55144b509f0c4854051769c1/viking1.png\\\" class=\\\"pull-left\\\"/><img src=\\\"/file/db/level/55144b509f0c4854051769c1/viking_2.png\\\" class=\\\"pull-right\\\"/><span data-i18n=\\\"play_level.victory_viking_code_school\\\"></span></p><button data-i18n=\\\"play_level.victory_become_a_viking\\\" class=\\\"btn btn-illustrated btn-primary btn-lg world-map-button continue-from-offer-button\\\">Become a Viking</button></div>\");\n}\nif ( features.codePlay)\n{\nbuf.push(\"<a\" + (jade.attrs({ 'href':(document.location.protocol + \"//lenovogamestate.com/pages/products/\") }, {\"href\":true})) + \">\");\nvar url = \"/images/common/codeplay/NA_VictoryPage_Y710_735x100_VictoryPage.png\"\nif ( me.isFromUk())\n{\nurl = \"/images/common/codeplay/UK_VictoryPage_Miix510_735x100_VictoryPage.png\"\n}\nbuf.push(\"<img\" + (jade.attrs({ 'id':('lenovo-link'), 'src':(url) }, {\"src\":true})) + \"/></a>\");\n}\nbuf.push(\"</div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,state = locals_.state,utils = locals_.utils;buf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content style-flat\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nbuf.push(\"</div><div class=\\\"modal-body\\\"><div class=\\\"row modal-body-content\\\"><div class=\\\"image-list-container col-sm-7\\\"><h3>\" + (jade.escape(null == (jade.interp = '1. ') ? \"\" : jade.interp)) + \"<span data-i18n=\\\"web_dev.select_an_image\\\"></span></h3><ul class=\\\"image-list\\\">\");\n// iterate view.images\n;(function(){\n  var $$obj = view.images;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var image = $$obj[$index];\n\nvar selectedState = state.get('selectedUrl') === image.portraitURL ? 'selected' : ''\nbuf.push(\"<li\" + (jade.attrs({ 'data-portrait-url':(image.portraitURL), 'selected':(selectedState), \"class\": [('image-list-item'),('render'),(selectedState)] }, {\"class\":true,\"data-portrait-url\":true,\"selected\":true})) + \"><img\" + (jade.attrs({ 'src':(image.portraitURL) }, {\"src\":true})) + \"/></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var image = $$obj[$index];\n\nvar selectedState = state.get('selectedUrl') === image.portraitURL ? 'selected' : ''\nbuf.push(\"<li\" + (jade.attrs({ 'data-portrait-url':(image.portraitURL), 'selected':(selectedState), \"class\": [('image-list-item'),('render'),(selectedState)] }, {\"class\":true,\"data-portrait-url\":true,\"selected\":true})) + \"><img\" + (jade.attrs({ 'src':(image.portraitURL) }, {\"src\":true})) + \"/></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul><div class=\\\"small text-center\\\"><span data-i18n=\\\"web_dev.scroll_down_for_more_images\\\"></span></div></div><div class=\\\"col-sm-5 flex-col render\\\"><h3>\" + (jade.escape(null == (jade.interp = '2. ') ? \"\" : jade.interp)) + \"<span data-i18n=\\\"web_dev.copy_the_url\\\"></span></h3><div data-i18n=\\\"web_dev.copy_the_url_description\\\" class=\\\"text-h3 subtitle\\\"></div><div class=\\\"copy-row m-t-1\\\"><div class=\\\"copy-textarea-col\\\"><textarea class=\\\"image-url copyable\\\">\");\nif ( view.state.get('selectedUrl'))\n{\nbuf.push(jade.escape(null == (jade.interp = utils.pathToUrl(view.state.get('selectedUrl'))) ? \"\" : jade.interp));\n}\nbuf.push(\"</textarea></div><div class=\\\"copy-button-col\\\"><button class=\\\"btn btn-forest copy-url-button\\\"><span data-i18n=\\\"web_dev.copy_url\\\"></span></button></div></div><div class=\\\"hr-text m-t-1\\\"><hr/><span data-i18n=\\\"general.or\\\"></span></div><h3 data-i18n=\\\"web_dev.copy_the_img_tag\\\"></h3><div data-i18n=\\\"web_dev.copy_the_img_tag_description\\\" class=\\\"text-h3 subtitle\\\"></div><div class=\\\"copy-row m-t-1\\\"><div class=\\\"copy-textarea-col\\\"><textarea class=\\\"image-tag copyable\\\">\");\nif ( view.state.get('selectedUrl'))\n{\nbuf.push(jade.escape(null == (jade.interp = '<img src=\"' + utils.pathToUrl(view.state.get('selectedUrl')) + '\"/>') ? \"\" : jade.interp));\n}\nbuf.push(\"</textarea></div><div class=\\\"copy-button-col\\\"><button class=\\\"btn btn-forest copy-tag-button\\\"><span data-i18n=\\\"web_dev.copy_img\\\"></span></button></div></div><div class=\\\"how-to-copy-paste m-t-3\\\"><div class=\\\"m-b-1 text-center\\\"><span data-i18n=\\\"web_dev.how_to_copy_paste\\\"></span></div><div class=\\\"windows-only\\\"><span data-i18n=\\\"web_dev.copy\\\"></span>: Control–C<br/><span data-i18n=\\\"web_dev.paste\\\"></span>: Control–V</div><div class=\\\"mac-only hidden\\\"><span data-i18n=\\\"web_dev.copy\\\"></span>: Command ⌘–C<br/><span data-i18n=\\\"web_dev.paste\\\"></span>: Command ⌘–V</div></div><div class=\\\"close-button\\\"><a href=\\\"#\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" data-i18n=\\\"web_dev.back_to_editing\\\" class=\\\"btn btn-lg btn-primary\\\"></a></div></div></div></div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-footer\\\"></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<div class=\\\"modal-dialog game\\\"><div class=\\\"background-wrapper\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nif ( view.options.nonUserCodeProblem)\n{\nbuf.push(\"<h3 data-i18n=\\\"play_level.non_user_code_problem_title\\\">Unable to Load Level</h3>\");\n}\nelse\n{\nbuf.push(\"<h3 data-i18n=\\\"play_level.infinite_loop_title\\\">Infinite Loop Detected</h3>\");\n}\nbuf.push(\"</div><div class=\\\"modal-body\\\"><div class=\\\"modal-body\\\"><p data-i18n=\\\"play_level.infinite_loop_description\\\">The initial code to build the world never finished running. It's probably either really slow or has an infinite loop. Or there might be a bug. You can either try running this code again or reset the code to the default state. If that doesn't fix it, please let us know.</p><p><span data-i18n=\\\"play_level.check_dev_console\\\" class=\\\"spr\\\">You can also open the developer console to see what might be going wrong.</span><a href=\\\"http://webmasters.stackexchange.com/questions/8525/how-to-open-the-javascript-console-in-different-browsers/77337#77337\\\" data-i18n=\\\"play_level.check_dev_console_link\\\" target=\\\"_blank\\\">(instructions)</a></p></div></div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-footer\\\"><a href=\\\"#\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" data-i18n=\\\"play_level.infinite_loop_try_again\\\" id=\\\"restart-level-infinite-loop-retry-button\\\" class=\\\"btn\\\">Try Again</a><a href=\\\"#\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" data-i18n=\\\"play_level.infinite_loop_reset_level\\\" id=\\\"restart-level-infinite-loop-confirm-button\\\" class=\\\"btn btn-danger\\\">Reset Level</a><a href=\\\"#\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" data-i18n=\\\"play_level.infinite_loop_comment_out\\\" id=\\\"restart-level-infinite-loop-comment-button\\\" class=\\\"btn btn-primary\\\">Comment Out My Code</a></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,ctrl = locals_.ctrl,ctrlName = locals_.ctrlName,alt = locals_.alt,altName = locals_.altName,shift = locals_.shift,enter = locals_.enter,space = locals_.space,escapeKey = locals_.escapeKey;buf.push(\"<div class=\\\"modal-dialog game\\\"><div class=\\\"background-wrapper\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nbuf.push(\"<h3 data-i18n=\\\"keyboard_shortcuts.keyboard_shortcuts\\\">Keyboard Shortcuts</h3></div><div class=\\\"modal-body\\\"><dl class=\\\"dl-horizontal\\\"><dt><kbd>\" + (jade.escape(null == (jade.interp = ctrl) ? \"\" : jade.interp)) + \"</kbd></dt><dd>\" + (jade.escape(null == (jade.interp = ctrlName) ? \"\" : jade.interp)) + \"</dd></dl><dl class=\\\"dl-horizontal\\\"><dt><kbd>\" + (jade.escape(null == (jade.interp = alt) ? \"\" : jade.interp)) + \"</kbd></dt><dd>\" + (jade.escape(null == (jade.interp = altName) ? \"\" : jade.interp)) + \"</dd></dl><dl class=\\\"dl-horizontal\\\"><dt><kbd>⇧</kbd></dt><dd>\" + (jade.escape(null == (jade.interp = shift) ? \"\" : jade.interp)) + \"</dd></dl><dl class=\\\"dl-horizontal\\\"><dt\" + (jade.attrs({ 'title':(shift + \" \" + enter) }, {\"title\":true})) + \"><kbd>⇧ \" + (jade.escape((jade.interp = enter) == null ? '' : jade.interp)) + \"</kbd></dt><dd data-i18n=\\\"keyboard_shortcuts.run_code\\\">Run current code.</dd></dl><dl class=\\\"dl-horizontal\\\"><dt\" + (jade.attrs({ 'title':(ctrlName + \" \" + shift + \" \" + enter) }, {\"title\":true})) + \"><kbd>\" + (jade.escape((jade.interp = ctrl) == null ? '' : jade.interp)) + \" ⇧ \" + (jade.escape((jade.interp = enter) == null ? '' : jade.interp)) + \"</kbd></dt><dd data-i18n=\\\"keyboard_shortcuts.run_real_time\\\">Run in real time.</dd></dl><dl class=\\\"dl-horizontal\\\"><dt\" + (jade.attrs({ 'title':(shift + \" \" + space) }, {\"title\":true})) + \"><kbd>⇧ \" + (jade.escape((jade.interp = space) == null ? '' : jade.interp)) + \"</kbd></dt><dd data-i18n=\\\"keyboard_shortcuts.continue_script\\\">Continue past current script.</dd></dl><dl class=\\\"dl-horizontal\\\"><dt\" + (jade.attrs({ 'title':(escapeKey) }, {\"title\":true})) + \"><kbd>Esc</kbd></dt><dd data-i18n=\\\"keyboard_shortcuts.skip_scripts\\\">Skip past all skippable scripts.</dd></dl><dl class=\\\"dl-horizontal\\\"><dt\" + (jade.attrs({ 'title':(ctrlName + \" P\") }, {\"title\":true})) + \"><kbd>\" + (jade.escape((jade.interp = ctrl) == null ? '' : jade.interp)) + \" P</kbd></dt><dd data-i18n=\\\"keyboard_shortcuts.toggle_playback\\\">Toggle play/pause.</dd></dl><dl class=\\\"dl-horizontal\\\"><dt\" + (jade.attrs({ 'title':(ctrlName + \" [, \" + ctrlName + \" ]\") }, {\"title\":true})) + \"><kbd>\" + (jade.escape((jade.interp = ctrl) == null ? '' : jade.interp)) + \" [</kbd>, <kbd>\" + (jade.escape((jade.interp = ctrl) == null ? '' : jade.interp)) + \" ]</kbd></dt><dd data-i18n=\\\"keyboard_shortcuts.scrub_playback\\\">Scrub back and forward through time.</dd></dl><dl class=\\\"dl-horizontal\\\"><dt\" + (jade.attrs({ 'title':(ctrlName + \" [, \" + ctrlName + \" ]\") }, {\"title\":true})) + \"><kbd>\" + (jade.escape((jade.interp = ctrl) == null ? '' : jade.interp)) + \" ⇧ [</kbd>, <kbd>\" + (jade.escape((jade.interp = ctrl) == null ? '' : jade.interp)) + \" ⇧ ]</kbd></dt><dd data-i18n=\\\"keyboard_shortcuts.single_scrub_playback\\\">Scrub back and forward through time by a single frame.</dd></dl><dl class=\\\"dl-horizontal\\\"><dt\" + (jade.attrs({ 'title':(ctrlName + \" \" + altName + \" [, \" + ctrlName + \" \" + altName + \" ]\") }, {\"title\":true})) + \"><kbd>\" + (jade.escape((jade.interp = ctrl) == null ? '' : jade.interp)) + \" \" + (jade.escape((jade.interp = alt) == null ? '' : jade.interp)) + \" [</kbd>, <kbd>\" + (jade.escape((jade.interp = ctrl) == null ? '' : jade.interp)) + \" \" + (jade.escape((jade.interp = alt) == null ? '' : jade.interp)) + \" ]</kbd></dt><dd data-i18n=\\\"keyboard_shortcuts.scrub_execution\\\">Scrub through current spell execution.</dd></dl><dl class=\\\"dl-horizontal\\\"><dt\" + (jade.attrs({ 'title':(ctrlName + \" \\\\\") }, {\"title\":true})) + \"><kbd>\" + (jade.escape((jade.interp = ctrl) == null ? '' : jade.interp)) + \" \\\\</kbd></dt><dd data-i18n=\\\"keyboard_shortcuts.toggle_debug\\\">Toggle debug display.</dd></dl><dl class=\\\"dl-horizontal\\\"><dt\" + (jade.attrs({ 'title':(ctrlName + \" G\") }, {\"title\":true})) + \"><kbd>\" + (jade.escape((jade.interp = ctrl) == null ? '' : jade.interp)) + \" G</kbd></dt><dd data-i18n=\\\"keyboard_shortcuts.toggle_grid\\\">Toggle grid overlay.</dd></dl><dl class=\\\"dl-horizontal\\\"><dt\" + (jade.attrs({ 'title':(ctrlName + \" O\") }, {\"title\":true})) + \"><kbd>\" + (jade.escape((jade.interp = ctrl) == null ? '' : jade.interp)) + \" O</kbd></dt><dd data-i18n=\\\"keyboard_shortcuts.toggle_pathfinding\\\">Toggle pathfinding overlay.</dd></dl><dl class=\\\"dl-horizontal\\\"><dt\" + (jade.attrs({ 'title':(ctrlName + \" \" + shift + \" B\") }, {\"title\":true})) + \"><kbd>\" + (jade.escape((jade.interp = ctrl) == null ? '' : jade.interp)) + \" ⇧ B</kbd></dt><dd data-i18n=\\\"keyboard_shortcuts.beautify\\\">Beautify your code by standardizing its formatting.</dd></dl><dl class=\\\"dl-horizontal\\\"><dt\" + (jade.attrs({ 'title':(ctrlName + \" \" + shift + \" M\") }, {\"title\":true})) + \"><kbd>\" + (jade.escape((jade.interp = ctrl) == null ? '' : jade.interp)) + \" ⇧ M</kbd></dt><dd data-i18n=\\\"keyboard_shortcuts.maximize_editor\\\">Maximize/minimize code editor.</dd></dl></div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-footer\\\"><a href=\\\"#\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" data-i18n=\\\"modal.close\\\" class=\\\"btn btn-primary\\\">Close</a></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,i18n = locals_.i18n;buf.push(\"<div class=\\\"modal-header\\\"><div id=\\\"close-modal\\\" data-dismiss=\\\"modal\\\" class=\\\"btn well well-sm well-parchment\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></div><div class=\\\"well well-sm well-parchment\\\"><h1 data-i18n=\\\"play_level.victory_new_item\\\"></h1></div></div><div class=\\\"modal-body\\\"><div class=\\\"container-fluid\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-5 text-center\\\"><img\" + (jade.attrs({ 'src':(view.item.getPortraitURL()), \"class\": [('img-rounded'),('img-prize')] }, {\"src\":true})) + \"/><h3 id=\\\"item-header\\\"><div id=\\\"item-label\\\" class=\\\"label label-banner\\\">\" + (jade.escape(null == (jade.interp = i18n(view.item.attributes, 'name')) ? \"\" : jade.interp)) + \"</div></h3></div><div class=\\\"col-sm-7\\\"><div class=\\\"well well-parchment\\\">\" + (jade.escape(null == (jade.interp = i18n(view.item.attributes, 'description')) ? \"\" : jade.interp)) + \"</div></div></div><div class=\\\"row\\\"><div class=\\\"col-sm-3 col-sm-offset-9\\\"><button id=\\\"continue-btn\\\" data-i18n=\\\"common.continue\\\" class=\\\"btn btn-illustrated btn-primary btn-block btn-lg text-uppercase\\\"></button></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),me = locals_.me,view = locals_.view;buf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"background-wrapper\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\"><div id=\\\"close-modal\\\" data-dismiss=\\\"modal\\\" class=\\\"well well-sm well-parchment\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></div><div id=\\\"victory-header\\\"><div id=\\\"victory-title\\\">\");\nif ( !me.get('preferredLanguage') || me.get('preferredLanguage').split('-')[0] == 'en')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/level/modal/victory_word.png\\\" draggable=\\\"false\\\"/>\");\n}\nelse\n{\nbuf.push(\"<h1 data-i18n=\\\"play_level.victory\\\">Victory</h1>\");\n}\nbuf.push(\"</div></div></div><div class=\\\"modal-body\\\"><div class=\\\"container-fluid\\\"><div class=\\\"row\\\">\");\nvar victoryText = view.level.get('victory');\nif ( victoryText && victoryText.body)\n{\nbuf.push(\"<div class=\\\"well well-sm well-parchment\\\"><h3>\" + (jade.escape(null == (jade.interp = victoryText.body) ? \"\" : jade.interp)) + \"</h3></div>\");\n}\nbuf.push(\"</div><div class=\\\"row\\\">\");\nif ( view.nextLevel && view.nextLevel.get('slug'))\n{\nbuf.push(\"<div class=\\\"col-sm-5 col-sm-offset-2\\\"><a href=\\\"/play/picoctf\\\" id=\\\"done-btn\\\" class=\\\"btn btn-illustrated btn-primary btn-block btn-lg text-uppercase\\\">Done</a></div><div class=\\\"col-sm-5\\\"><a\" + (jade.attrs({ 'href':(\"/play/level/\" + (view.nextLevel.get('slug')) + \"\"), 'id':('continue-button'), \"class\": [('btn'),('btn-illustrated'),('btn-success'),('btn-block'),('btn-lg'),('text-uppercase')] }, {\"href\":true})) + \">Continue</a></div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"col-sm-5 col-sm-offset-2\\\"></div><div class=\\\"col-sm-5\\\"><a href=\\\"/play/picoctf\\\" id=\\\"done-btn\\\" class=\\\"btn btn-illustrated btn-primary btn-block btn-lg text-uppercase\\\">Done</a></div>\");\n}\nbuf.push(\"</div></div></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,i18n = locals_.i18n,me = locals_.me;buf.push(\"<div class=\\\"modal-header\\\"><div id=\\\"close-modal\\\" data-dismiss=\\\"modal\\\" class=\\\"btn well well-sm well-parchment\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></div><div class=\\\"well well-sm well-parchment\\\"><h1 data-i18n=\\\"play_level.level_complete\\\"></h1></div></div><div class=\\\"modal-body\\\"><div class=\\\"container-fluid\\\"><div class=\\\"row\\\">\");\nvar colClass = !view.nextLevel.isNew() ? 'col-sm-7' : 'col-sm-12'\nbuf.push(\"<div\" + (jade.attrs({ \"class\": [(colClass)] }, {\"class\":true})) + \"><div class=\\\"well well-sm well-parchment\\\"><h3 data-i18n=\\\"play_level.completed_level\\\" class=\\\"text-uppercase\\\"></h3><h2 class=\\\"text-uppercase text-center\\\">\" + (jade.escape(null == (jade.interp = i18n(view.level.attributes, 'name')) ? \"\" : jade.interp)) + \"</h2></div><div class=\\\"well well-sm well-parchment\\\">\");\nif ( me.isSessionless())\n{\nbuf.push(\"<h3 class=\\\"course-title\\\"><span data-i18n=\\\"play_level.course\\\" class=\\\"text-uppercase spr\\\"></span><span class=\\\"text-uppercase text-center\\\">\" + (jade.escape(null == (jade.interp = i18n(view.course.attributes, 'name')) ? \"\" : jade.interp)) + \"</span></h3><span data-i18n=\\\"play_level.victory_no_progress_for_teachers\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<h3 data-i18n=\\\"play_level.course\\\" class=\\\"text-uppercase\\\"></h3><div class=\\\"row\\\"><div class=\\\"col-sm-8\\\"><h3 class=\\\"text-uppercase text-center\\\">\" + (jade.escape(null == (jade.interp = i18n(view.course.attributes, 'name')) ? \"\" : jade.interp)) + \"</h3></div><div class=\\\"col-sm-4\\\">\");\nvar stats = view.classroom.statsForSessions(view.levelSessions, view.course.id)\nbuf.push(\"<h1><span>\" + (jade.escape((jade.interp = stats.levels.numDone) == null ? '' : jade.interp)) + \"/\" + (jade.escape((jade.interp = stats.levels.size) == null ? '' : jade.interp)) + \"</span></h1></div></div>\");\n}\nbuf.push(\"</div></div>\");\nif ( !view.nextLevel.isNew())\n{\nbuf.push(\"<div class=\\\"col-sm-5\\\"><div class=\\\"well well-sm well-parchment\\\"><h3 class=\\\"text-uppercase\\\"><span data-i18n=\\\"play_level.next_level\\\"></span><span>:</span></h3><h2 class=\\\"text-uppercase\\\">\" + (jade.escape(null == (jade.interp = i18n(view.nextLevel.attributes, 'name').replace('Course: ', '')) ? \"\" : jade.interp)) + \"</h2><div class=\\\"next-level-description\\\">\" + (null == (jade.interp = view.nextLevelDescription) ? \"\" : jade.interp) + \"</div></div></div>\");\n}\nbuf.push(\"</div>\");\nif ( view.shareURL)\n{\nbuf.push(\"<div class=\\\"well well-sm well-parchment\\\"><h3 class=\\\"text-uppercase\\\">\");\nif ( view.level.isType('game-dev'))\n{\nbuf.push(\"<span data-i18n=\\\"sharing.share_game\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<span data-i18n=\\\"sharing.share_web\\\"></span>\");\n}\nbuf.push(\"</h3><p><span data-i18n=\\\"sharing.victory_course_share_prefix\\\"></span><span>\" + (jade.escape(null == (jade.interp = ' ') ? \"\" : jade.interp)) + \"</span><a\" + (jade.attrs({ 'href':(view.shareURL), 'target':('_blank') }, {\"href\":true,\"target\":true})) + \">\");\nif ( view.level.isType('game-dev'))\n{\nbuf.push(\"<span data-i18n=\\\"sharing.victory_course_share_game\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<span data-i18n=\\\"sharing.victory_course_share_web\\\"></span>\");\n}\nbuf.push(\"</a><span>\" + (jade.escape(null == (jade.interp = ' ') ? \"\" : jade.interp)) + \"</span><span data-i18n=\\\"sharing.victory_course_share_suffix\\\"></span></p>\");\nif ( view.session.isFake())\n{\nbuf.push(\"<div data-i18n=\\\"sharing.unavailable\\\" class=\\\"alert alert-warning\\\"></div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"row\\\"><div class=\\\"col-sm-9\\\"><input\" + (jade.attrs({ 'id':('share-level-input'), 'value':(view.shareURL), \"class\": [('text-h4'),('semibold'),('form-control'),('input-lg')] }, {\"value\":true})) + \"/></div><div class=\\\"col-sm-3\\\"><button id=\\\"share-level-btn\\\" class=\\\"btn btn-lg btn-success btn-illustrated\\\"><span data-i18n=\\\"sharing.copy_url\\\"></span></button></div></div>\");\n}\nbuf.push(\"</div>\");\n}\nbuf.push(\"<div class=\\\"row\\\"><div class=\\\"col-sm-5 col-sm-offset-2\\\"><!-- TODO: Add rest of campaign functionality-->\");\nif ( view.level.get('type') === 'course-ladder')\n{\nbuf.push(\"<button id=\\\"ladder-btn\\\" class=\\\"btn btn-illustrated btn-default btn-block btn-lg text-uppercase\\\">Ladder</button>\");\n}\nbuf.push(\"</div><div class=\\\"col-sm-5\\\">\");\nif ( !view.nextLevel.isNew())\n{\nbuf.push(\"<button id=\\\"next-level-btn\\\" data-i18n=\\\"play_level.next_level\\\" class=\\\"btn btn-illustrated btn-primary btn-block btn-lg text-uppercase\\\"></button>\");\n}\nelse\n{\nbuf.push(\"<button id=\\\"done-btn\\\" data-i18n=\\\"play_level.done\\\" class=\\\"btn btn-illustrated btn-primary btn-block btn-lg text-uppercase\\\"></button>\");\n}\nbuf.push(\"</div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<div class=\\\"modal-dialog game\\\"><div class=\\\"background-wrapper\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nbuf.push(\"<h3 data-i18n=\\\"play_level.reload_title\\\">Reload All Code?</h3></div><div class=\\\"modal-body\\\"><p data-i18n=\\\"play_level.reload_really\\\">Are you sure you want to reload this level back to the beginning?</p></div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-footer\\\"><a href=\\\"#\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" data-i18n=\\\"modal.close\\\" class=\\\"btn\\\">Close</a><a href=\\\"#\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" data-i18n=\\\"play_level.reload_confirm\\\" id=\\\"restart-level-confirm-button\\\" class=\\\"btn btn-primary\\\">Reload All</a></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,levelName = locals_.levelName,body = locals_.body,readyToRank = locals_.readyToRank,level = locals_.level,me = locals_.me,fbRef = locals_.fbRef;buf.push(\"<div class=\\\"modal-dialog game\\\"><div class=\\\"background-wrapper\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nbuf.push(\"<h3><span data-i18n=\\\"play_level.victory_title_prefix\\\"></span><span>\" + (jade.escape(null == (jade.interp = levelName) ? \"\" : jade.interp)) + \"</span><span data-i18n=\\\"play_level.victory_title_suffix\\\">Complete</span></h3></div><div class=\\\"modal-body\\\"><img src=\\\"/images/level/victory.png\\\" alt=\\\"\\\" class=\\\"victory-banner\\\"/><div>\" + (null == (jade.interp = body) ? \"\" : jade.interp) + \"</div></div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-footer\\\">\");\nif ( readyToRank)\n{\nbuf.push(\"<div class=\\\"ladder-submission-view\\\"></div>\");\n}\nelse if ( level.isType('ladder'))\n{\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"/play/ladder/\" + (level.get('slug')) + \"#my-matches\"), 'data-dismiss':(\"modal\"), 'data-i18n':(\"play_level.victory_return_to_ladder\"), \"class\": [('btn'),('btn-primary')] }, {\"href\":true,\"data-dismiss\":true,\"data-i18n\":true})) + \">Return to Ladder</a>\");\n}\nelse\n{\nbuf.push(\"<a href=\\\"/\\\" data-dismiss=\\\"modal\\\" data-i18n=\\\"play_level.victory_go_home\\\" class=\\\"btn btn-primary\\\">Go Home</a>\");\n}\nif ( me.get('anonymous'))\n{\nbuf.push(\"<p class=\\\"sign-up-poke\\\"><button data-dismiss=\\\"modal\\\" data-i18n=\\\"play_level.victory_sign_up\\\" class=\\\"btn btn-success sign-up-button btn-large\\\">Sign Up to Save Progress</button><span data-i18n=\\\"play_level.victory_sign_up_poke\\\">Want to save your code? Create a free account!</span></p><p class=\\\"clearfix\\\"></p>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"rating secret\\\"><span data-i18n=\\\"play_level.victory_rate_the_level\\\">Rate the level:</span><i class=\\\"icon-star-empty\\\"></i><i class=\\\"icon-star-empty\\\"></i><i class=\\\"icon-star-empty\\\"></i><i class=\\\"icon-star-empty\\\"></i><i class=\\\"icon-star-empty\\\"></i></div>\");\n}\nif ( !me.get('anonymous'))\n{\nbuf.push(\"<div class=\\\"review secret\\\"><span data-i18n=\\\"play_level.victory_review\\\">Tell us more!</span><br/><textarea></textarea></div>\");\n}\nbuf.push(\"<div class=\\\"share-buttons\\\"><div data-href=\\\"http://codecombat.com\\\" data-size=\\\"medium\\\" class=\\\"g-plusone\\\"></div><div\" + (jade.attrs({ 'data-href':(\"https://www.facebook.com/codecombat\"), 'data-send':(\"false\"), 'data-layout':(\"button_count\"), 'data-width':(\"350\"), 'data-show-faces':(\"true\"), 'data-ref':(\"coco_victory_\" + (fbRef) + \"\"), \"class\": [('fb-like')] }, {\"data-href\":true,\"data-send\":true,\"data-layout\":true,\"data-width\":true,\"data-show-faces\":true,\"data-ref\":true})) + \"></div><a href=\\\"https://twitter.com/CodeCombat\\\" data-show-count=\\\"true\\\" data-show-screen-name=\\\"false\\\" data-dnt=\\\"true\\\" data-align=\\\"right\\\" data-i18n=\\\"nav.twitter_follow\\\" class=\\\"twitter-follow-button\\\">Follow</a><iframe src=\\\"https://ghbtns.com/github-btn.html?user=codecombat&amp;repo=codecombat&amp;type=watch&amp;count=true\\\" allowtransparency=\\\"true\\\" frameborder=\\\"0\\\" scrolling=\\\"0\\\" width=\\\"110\\\" height=\\\"20\\\" class=\\\"github-star-button\\\"></iframe></div></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;var ready = !(view.state.get('errorMessage') || view.state.get('loading'))\nbuf.push(\"<div class=\\\"container-fluid style-flat\\\"><div id=\\\"game-row\\\" class=\\\"row\\\"><div class=\\\"col-xs-9\\\"><div id=\\\"canvas-wrapper\\\"><canvas width=\\\"924\\\" height=\\\"589\\\" id=\\\"webgl-surface\\\"></canvas><canvas width=\\\"924\\\" height=\\\"589\\\" id=\\\"normal-surface\\\"></canvas></div></div><div id=\\\"info-col\\\" class=\\\"col-xs-3\\\"><div class=\\\"panel panel-default\\\"><div class=\\\"panel-body text-center\\\">\");\nif ( view.state.get('errorMessage'))\n{\nbuf.push(\"<div class=\\\"alert alert-danger\\\">\" + (jade.escape(null == (jade.interp = view.state.get('errorMessage')) ? \"\" : jade.interp)) + \"</div>\");\n}\nif ( view.level.id && view.session.id)\n{\nbuf.push(\"<h3 class=\\\"m-y-1\\\">\" + (jade.escape(null == (jade.interp = view.level.get('name')) ? \"\" : jade.interp)) + \"</h3><h4>\" + (jade.escape(null == (jade.interp = view.state.get('creatorString')) ? \"\" : jade.interp)) + \"</h4><hr/>\");\n}\nif ( view.state.get('loading'))\n{\nbuf.push(\"<h1 data-i18n=\\\"common.loading\\\" class=\\\"m-y-1\\\"></h1><div class=\\\"progress\\\"><div\" + (jade.attrs({ 'style':(\"width: \" + (view.state.get('progress')) + \"\"), \"class\": [('progress-bar')] }, {\"style\":true})) + \"></div></div>\");\n}\nif ( ready)\n{\nbuf.push(\"<h3><span data-i18n=\\\"play_level.directions\\\"></span>:</h3><p>\" + (null == (jade.interp = view.howToPlayText) ? \"\" : jade.interp) + \"</p><hr/>\");\n}\nbuf.push(\"</div>\");\nif ( ready)\n{\nbuf.push(\"<div class=\\\"panel-footer\\\">\");\nvar playing = view.state.get('playing')\nif ( playing)\n{\nbuf.push(\"<button id=\\\"play-btn\\\" data-i18n=\\\"play_game_dev_level.restart\\\" class=\\\"btn btn-lg btn-burgandy btn-block\\\"></button>\");\n}\nelse\n{\nbuf.push(\"<button id=\\\"play-btn\\\" data-i18n=\\\"play_game_dev_level.play\\\" class=\\\"btn btn-lg btn-forest btn-block\\\"></button>\");\n}\nif ( view.state.get('isOwner'))\n{\nbuf.push(\"<br/><button id=\\\"edit-level-btn\\\" data-i18n=\\\"play_level.edit_level\\\" class=\\\"btn btn-lg btn-warning btn-block\\\"></button>\");\n}\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div></div></div><div id=\\\"share-row\\\" class=\\\"m-t-3\\\">\");\nif ( ready)\n{\nbuf.push(\"<div class=\\\"panel panel-default\\\"><div id=\\\"share-panel-body\\\" class=\\\"panel-body\\\"><div id=\\\"share-text-div\\\" class=\\\"text-right\\\"><b data-i18n=\\\"sharing.share_game\\\"></b></div><input\" + (jade.attrs({ 'id':('copy-url-input'), 'value':(view.state.get('shareURL')), \"class\": [('text-h4'),('semibold'),('form-control'),('input-lg')] }, {\"value\":true})) + \"/><div id=\\\"copy-url-div\\\"><button id=\\\"copy-url-btn\\\" class=\\\"btn btn-lg btn-navy-alt\\\"><span data-i18n=\\\"sharing.copy_url\\\"></span></button></div></div>\");\nif ( !view.state.get('isOwner'))\n{\nbuf.push(\"<div class=\\\"panel-body\\\"><a id=\\\"play-more-codecombat-btn\\\" href=\\\"/\\\" data-i18n=\\\"play_game_dev_level.play_more_codecombat\\\" class=\\\"btn btn-lg btn-navy-alt pull-right\\\"></a></div>\");\n}\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<div id=\\\"web-surface-view\\\"></div><div id=\\\"info-bar\\\" class=\\\"style-flat\\\">\");\nif ( !view.supermodel.finished())\n{\nbuf.push(\"<h1 data-i18n=\\\"common.loading\\\"></h1>\");\n}\nelse\n{\nbuf.push(\"<h1><span data-i18n=\\\"game_dev.creator\\\"></span><span>\" + (jade.escape(null == (jade.interp = ': ') ? \"\" : jade.interp)) + \"</span>\" + (jade.escape((jade.interp = view.session.get('creatorName')) == null ? '' : jade.interp)) + \"</h1>\");\n}\nbuf.push(\"</div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),team = locals_.team;buf.push(\"<div\" + (jade.attrs({ \"class\": [(\"team-gold team-\" + team)] }, {\"class\":true})) + \"><img src=\\\"/images/level/gold_icon.png\\\" alt=\\\"\\\" draggable=\\\"false\\\"/><div\" + (jade.attrs({ \"class\": [(\"gold-amount team-\" + team)] }, {\"class\":true})) + \"></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),thang = locals_.thang,avatarURL = locals_.avatarURL,includeName = locals_.includeName;buf.push(\"<div\" + (jade.attrs({ \"class\": [('thang-avatar-wrapper'),(\"team-\" + (thang.team || \"neutral\"))] }, {\"class\":true})) + \"><!--canvas(width=100, height=100, title=thang.id + \\\" - \\\" + thang.team)--><img\" + (jade.attrs({ 'src':(avatarURL), 'draggable':(\"false\"), \"class\": [('avatar')] }, {\"src\":true,\"draggable\":true})) + \"/><img src=\\\"/images/level/thang_avatar_frame.png\\\" draggable=\\\"false\\\" class=\\\"avatar-frame\\\"/><div class=\\\"badge problems\\\"></div><div class=\\\"badge shared-thangs\\\"></div></div>\");\nif ( includeName)\n{\nbuf.push(\"<div class=\\\"thang-name\\\">\" + (jade.escape(null == (jade.interp = thang.id) ? \"\" : jade.interp)) + \"</div>\");\n};return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;if ( view.options.level.isType('game-dev'))\n{\nbuf.push(\"<button class=\\\"btn btn-lg btn-illustrated btn-success game-dev-play-btn\\\"><span data-i18n=\\\"play_level.test_level\\\"></span></button><button class=\\\"btn btn-lg btn-illustrated btn-success done-button secret\\\"><span data-i18n=\\\"play_level.done\\\"></span></button>\");\n}\nelse\n{\nbuf.push(\"<button\" + (jade.attrs({ 'title':(view.castVerbose()), \"class\": [('btn'),('btn-lg'),('btn-illustrated'),('cast-button')] }, {\"title\":true})) + \"><span data-i18n=\\\"play_level.tome_cast_button_ran\\\">Ran</span></button>\");\nif ( !view.observing)\n{\nif ( view.mirror)\n{\nbuf.push(\"<div class=\\\"ladder-submission-view\\\"></div>\");\n}\nelse\n{\nbuf.push(\"<button\" + (jade.attrs({ 'title':(view.castRealTimeVerbose()), \"class\": [('btn'),('btn-lg'),('btn-illustrated'),('submit-button')] }, {\"title\":true})) + \"><span data-i18n=\\\"play_level.tome_submit_button\\\">Submit</span><span class=\\\"spl secret submit-again-time\\\"></span></button><button class=\\\"btn btn-lg btn-illustrated btn-success done-button secret\\\"><span data-i18n=\\\"play_level.done\\\">Done</span></button>\");\nif ( view.autoSubmitsToLadder)\n{\nbuf.push(\"<div class=\\\"hidden\\\"><div class=\\\"ladder-submission-view\\\"></div></div>\");\n}\n}\n}\n};return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<button type=\\\"button\\\" class=\\\"close\\\">&times;</button><h3 data-i18n=\\\"play_level.problem_alert_title\\\" class=\\\"problem-alert-title\\\">Fix Your Code</h3>\");\nif ( view.hint)\n{\nbuf.push(\"<span class=\\\"problem-title\\\">\" + (null == (jade.interp = view.hint) ? \"\" : jade.interp) + \"</span><br/><span class=\\\"problem-subtitle\\\">\" + (null == (jade.interp = view.message) ? \"\" : jade.interp) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"problem-title\\\">\" + (null == (jade.interp = view.message) ? \"\" : jade.interp) + \"</span>\");\n};return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<!--span.doc-title(data-property-name=view.doc.name)= view.doc.title--><img\" + (jade.attrs({ 'src':(view.thang.getPortraitURL()) }, {\"src\":true})) + \"/>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),_ = locals_._,view = locals_.view,tabs = locals_.tabs,isIE = locals_.isIE;var header_mixin = function(label, name){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\nbuf.push(\"<a\" + (jade.attrs({ 'role':(\"button\"), 'id':(\"#palette-header-\" + _.string.slugify(label)), 'data-panel':(\"#palette-tab-\" + _.string.slugify(label)), \"class\": [('section-header'),('btn'),('btn-small'),('btn-illustrated'),('btn-warning')] }, {\"role\":true,\"id\":true,\"data-panel\":true})) + \">\" + (jade.escape((jade.interp = name) == null ? '' : jade.interp)) + \"\");\nif ( label == 'api-area')\n{\nbuf.push(\"<div style=\\\"float: right\\\" class=\\\"glyphicon glyphicon-chevron-down\\\"></div>\");\n}\nelse\n{\nbuf.push(\"<div style=\\\"float: right\\\" class=\\\"glyphicon glyphicon-chevron-right\\\"></div>\");\n}\nbuf.push(\"</a>\");\n};\nbuf.push(\"<div class=\\\"container\\\"><div class=\\\"left nano\\\"><div id=\\\"spell-palette-api-bar\\\" class=\\\"nano-content panel-group\\\">\");\nif ( view.level.get('type') == 'web-dev')\n{\nheader_mixin('api-area', 'HTML');\n}\nelse\n{\nheader_mixin('api-area', 'Methods');\n}\nbuf.push(\"<div id=\\\"palette-tab-api-area\\\" class=\\\"apis panel-collapse collapse in\\\"><div class=\\\"properties properties-this\\\"></div></div>\");\nif ( tabs)\n{\n// iterate tabs\n;(function(){\n  var $$obj = tabs;\n  if ('number' == typeof $$obj.length) {\n\n    for (var tab = 0, $$l = $$obj.length; tab < $$l; tab++) {\n      var entries = $$obj[tab];\n\nheader_mixin(tab, tab);\nbuf.push(\"<div\" + (jade.attrs({ 'id':(\"palette-tab-\" + _.string.slugify(tab)), \"class\": [('panel-collapse'),('collapse')] }, {\"id\":true})) + \"><div\" + (jade.attrs({ \"class\": [(\"properties properties-\" + _.string.slugify(tab))] }, {\"class\":true})) + \"></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var tab in $$obj) {\n      $$l++;      var entries = $$obj[tab];\n\nheader_mixin(tab, tab);\nbuf.push(\"<div\" + (jade.attrs({ 'id':(\"palette-tab-\" + _.string.slugify(tab)), \"class\": [('panel-collapse'),('collapse')] }, {\"id\":true})) + \"><div\" + (jade.attrs({ \"class\": [(\"properties properties-\" + _.string.slugify(tab))] }, {\"class\":true})) + \"></div></div>\");\n    }\n\n  }\n}).call(this);\n\n}\nheader_mixin('events', 'Events');\nbuf.push(\"<div id=\\\"palette-tab-events\\\" class=\\\"apis panel-collapse collapse\\\"></div>\");\nheader_mixin('stuff-area', 'Spawnable');\nbuf.push(\"<div id=\\\"palette-tab-stuff-area\\\" class=\\\"apis panel-collapse collapse\\\"></div></div></div><div class=\\\"right\\\"><div class=\\\"closeBtn btn btn-illustrated btn-danger\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></div>\");\nif ( isIE)\n{\nbuf.push(\"<div class=\\\"scrollArea always-scroll-y\\\"><div class=\\\"scrollableArea\\\"><div class=\\\"rightContentTarget content\\\"></div></div></div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"scrollArea\\\"><div class=\\\"scrollableArea\\\"><div class=\\\"rightContentTarget content\\\"></div></div></div>\");\n}\nbuf.push(\"</div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),features = locals_.features,me = locals_.me,maximizeShortcutVerbose = locals_.maximizeShortcutVerbose,codeLanguage = locals_.codeLanguage,beautifyShortcutVerbose = locals_.beautifyShortcutVerbose,view = locals_.view,i18nName = locals_.i18nName,translate = locals_.translate;if ( features.codePlay)\n{\nbuf.push(\"<img id=\\\"codeplay-powered-by-banner\\\" src=\\\"/images/common/codeplay/CodePlay.png\\\"/>\");\n}\nbuf.push(\"<div class=\\\"hinge hinge-0\\\"></div><div class=\\\"hinge hinge-1\\\"></div><div class=\\\"hinge hinge-2\\\"></div><div class=\\\"hinge hinge-3\\\"></div><div class=\\\"spell-tool-buttons\\\"><div data-i18n=\\\"[title]play_level.tome_reload_method\\\" class=\\\"btn btn-small btn-illustrated btn-warning reload-code\\\"><div class=\\\"glyphicon glyphicon-repeat\\\"></div>\");\nif ( !features.codePlay)\n{\nbuf.push(\"<span data-i18n=\\\"play_level.restart\\\" class=\\\"spl\\\"></span>\");\n}\nbuf.push(\"</div>\");\nif ( me.level() >= 15)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'title':(maximizeShortcutVerbose), \"class\": [('btn'),('btn-small'),('btn-illustrated'),('fullscreen-code')] }, {\"title\":true})) + \"><div class=\\\"glyphicon glyphicon-fullscreen\\\"></div><div class=\\\"glyphicon glyphicon-resize-small\\\"></div></div>\");\n}\nif ( codeLanguage === 'javascript' && me.level() >= 15)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'title':(beautifyShortcutVerbose), \"class\": [('btn'),('btn-small'),('btn-illustrated'),('beautify-code')] }, {\"title\":true})) + \"><div class=\\\"glyphicon glyphicon-magnet\\\"></div></div>\");\n}\nif ( view.hintsState && view.hintsState.get('total') > 0)\n{\nbuf.push(\"<div class=\\\"btn btn-small btn-illustrated hints-button\\\"><span data-i18n=\\\"play_level.hints\\\"></span></div>\");\n}\nif ( view.options.level.isType('web-dev'))\n{\nbuf.push(\"<div class=\\\"btn btn-small btn-illustrated image-gallery-button\\\"><span data-i18n=\\\"web_dev.image_gallery_title\\\"></span></div>\");\n}\nif ( view.options.level.get('shareable'))\n{\ni18nName = view.options.level.isType('game-dev') ? 'sharing.game' : 'sharing.webpage'\nif ( view.options.session.isFake())\n{\nbuf.push(\"<button\" + (jade.attrs({ 'data-i18n':(i18nName), 'data-toggle':(\"popover\"), 'data-placement':(\"bottom\"), 'data-content':(translate('sharing.your_students_preview')), 'data-trigger':(\"hover\"), \"class\": [('btn'),('btn-small'),('btn-illustrated')] }, {\"data-i18n\":true,\"data-toggle\":true,\"data-placement\":true,\"data-content\":true,\"data-trigger\":true})) + \"></button>\");\n}\nelse\n{\nvar url = '/play/' + view.options.level.get('type') + '-level/' + view.options.level.get('slug') + '/' + view.options.session.id;\nif (view.options.courseID) url += '?course=' + view.options.courseID;\nbuf.push(\"<a\" + (jade.attrs({ 'href':(url), 'data-i18n':(i18nName), \"class\": [('btn'),('btn-small'),('btn-illustrated')] }, {\"href\":true,\"data-i18n\":true})) + \"></a>\");\n}\n}\nbuf.push(\"<div class=\\\"clearfix\\\"></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<img src=\\\"/images/level/code_editor_background.png\\\" class=\\\"code-background\\\"/><span class=\\\"code-background\\\"></span><div class=\\\"ace\\\"></div><div data-i18n=\\\"play_level.code_saved\\\" class=\\\"save-status\\\"></div><div class=\\\"programming-language-container\\\">\");\nif ( view.spell.level.isType('web-dev'))\n{\nvar campaign = view.spell.level.get('campaign') || '';\nif ( campaign.indexOf('web-dev-1') >= 0)\n{\nbuf.push(\"<span data-i18n=\\\"teacher.language\\\" class=\\\"programming-language-label\\\"></span><span class=\\\"programming-language-label spr\\\">:</span><span class=\\\"programming-language\\\">HTML</span>\");\n}\nelse\n{\nbuf.push(\"<span data-i18n=\\\"play_level.languages\\\" class=\\\"programming-language-label\\\"></span><span class=\\\"programming-language-label spr\\\">:</span><span class=\\\"programming-language spr\\\">HTML</span><span class=\\\"programming-language-label spr\\\">/</span><span class=\\\"programming-language\\\">JavaScript</span>\");\n}\n}\nelse\n{\nbuf.push(\"<span data-i18n=\\\"play_level.programming_language\\\" class=\\\"programming-language-label\\\"></span><span class=\\\"programming-language-label spr\\\">:</span><span class=\\\"programming-language\\\">\" + (jade.escape(null == (jade.interp = view.spell.displayCodeLanguage) ? \"\" : jade.interp)) + \"</span>\");\n}\nbuf.push(\"</div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<div class=\\\"progress\\\"><div role=\\\"progressbar\\\" aria-valuenow=\\\"50\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\" class=\\\"progress-bar\\\"><span>Inspecting variable...</span></div></div><pre><code></code></pre>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<span\" + (jade.attrs({ 'data-property-name':(view.doc.name), \"class\": [('doc-title')] }, {\"data-property-name\":true})) + \">\" + (jade.escape(null == (jade.interp = view.doc.title) ? \"\" : jade.interp)) + \"</span>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),doc = locals_.doc,_ = locals_._,writable = locals_.writable,marked = locals_.marked,cooldowns = locals_.cooldowns,selectedMethod = locals_.selectedMethod,argumentExamples = locals_.argumentExamples,language = locals_.language,docName = locals_.docName,value = locals_.value,item = locals_.item;buf.push(\"<h4><span class=\\\"prop-name\\\">\" + (jade.escape(null == (jade.interp = doc.shortName) ? \"\" : jade.interp)) + \"</span> - \");\nvar skillType = (doc.type == 'function' && doc.owner == 'this' ? 'method' : doc.type)\nbuf.push(\"<code\" + (jade.attrs({ 'data-i18n':('skill_docs.' + skillType), \"class\": [('prop-type')] }, {\"data-i18n\":true})) + \"><!-- In case there's no translation in en.coffee because we missed one-->\" + (jade.escape(null == (jade.interp = skillType) ? \"\" : jade.interp)) + \"</code><!-- Redundant in case some tag docs are missing an owner-->\");\nif ( !_.contains(['function', 'basic tag', 'spawnable', 'event'], doc.type) && doc.owner != 'HTML')\n{\nbuf.push(\" (\");\nif ( writable)\n{\nbuf.push(\"<span data-i18n=\\\"skill_docs.writable\\\">writable</span>\");\n}\nelse\n{\nbuf.push(\"<span data-i18n=\\\"skill_docs.read_only\\\">read-only</span>\");\n}\nbuf.push(\")\");\n}\nbuf.push(\"</h4>\");\nif ( doc.translatedShortName)\n{\nbuf.push(\"<h5><span class=\\\"translated-name\\\">\" + (jade.escape(null == (jade.interp = doc.translatedShortName) ? \"\" : jade.interp)) + \"</span></h5>\");\n}\nbuf.push(\"<div class=\\\"description\\\"><p>\" + (null == (jade.interp = marked(doc.description || 'Still undocumented, sorry.')) ? \"\" : jade.interp) + \"</p><div style=\\\"clear: both\\\" class=\\\"clear\\\"></div>\");\nif ( cooldowns && (cooldowns.cooldown || cooldowns.specificCooldown))\n{\nbuf.push(\"<p><span>\");\nif ( cooldowns.type == 'spell')\n{\nbuf.push(\"<span data-i18n=\\\"skill_docs.spell\\\">Spell</span>\");\n}\nelse\n{\nbuf.push(\"<span data-i18n=\\\"skill_docs.action\\\">Action</span>\");\n}\nbuf.push(\"<span data-i18n=\\\"skill_docs.action_name\\\" class=\\\"spl\\\">name</span><span class=\\\"spr\\\">:</span><code>\\\"\" + (jade.escape((jade.interp = cooldowns.name) == null ? '' : jade.interp)) + \"\\\"</code>.</span><span class=\\\"spl\\\"><span data-i18n=\\\"skill_docs.action_cooldown\\\">Takes</span><span class=\\\"spr\\\">:</span><code>\" + (jade.escape(null == (jade.interp = cooldowns.cooldown) ? \"\" : jade.interp)) + \"</code>s.</span>\");\nif ( cooldowns.specificCooldown)\n{\nbuf.push(\"<span class=\\\"spl\\\"><span data-i18n=\\\"skill_docs.action_specific_cooldown\\\">Cooldown</span><span class=\\\"spr\\\">:</span><code>\" + (jade.escape(null == (jade.interp = cooldowns.specificCooldown) ? \"\" : jade.interp)) + \"</code>s.</span>\");\n}\nif ( cooldowns.damage)\n{\nbuf.push(\"<span class=\\\"spl\\\"><span data-i18n=\\\"skill_docs.action_damage\\\">Damage</span><span class=\\\"spr\\\">:</span><code>\" + (jade.escape(null == (jade.interp = cooldowns.damage) ? \"\" : jade.interp)) + \"</code>.</span>\");\n}\nif ( cooldowns.range)\n{\nbuf.push(\"<span class=\\\"spl\\\"><span data-i18n=\\\"skill_docs.action_range\\\">Range</span><span class=\\\"spr\\\">:</span><code>\" + (jade.escape(null == (jade.interp = cooldowns.range) ? \"\" : jade.interp)) + \"</code>m.</span>\");\n}\nif ( cooldowns.radius)\n{\nbuf.push(\"<span class=\\\"spl\\\"><span data-i18n=\\\"skill_docs.action_radius\\\">Radius</span><span class=\\\"spr\\\">:</span><code>\" + (jade.escape(null == (jade.interp = cooldowns.radius) ? \"\" : jade.interp)) + \"</code>m.</span>\");\n}\nif ( cooldowns.duration)\n{\nbuf.push(\"<span class=\\\"spl\\\"><span data-i18n=\\\"skill_docs.action_duration\\\">Duration</span><span class=\\\"spr\\\">:</span><code>\" + (jade.escape(null == (jade.interp = cooldowns.duration) ? \"\" : jade.interp)) + \"</code>s.</span>\");\n}\nbuf.push(\"</p>\");\n}\nbuf.push(\"</div>\");\nif ( !selectedMethod)\n{\nif ( doc.example)\n{\nbuf.push(\"<p class=\\\"example\\\"><strong><span data-i18n=\\\"skill_docs.example\\\">Example</span>:</strong><div class=\\\"docs-ace-container\\\"><div class=\\\"docs-ace\\\">\" + (jade.escape(null == (jade.interp = doc.example) ? \"\" : jade.interp)) + \"</div></div></p>\");\n}\nelse if ( doc.type == 'function' && argumentExamples.length)\n{\nbuf.push(\"<p class=\\\"example\\\"><strong><span data-i18n=\\\"skill_docs.example\\\">Example</span>:</strong><div><div class=\\\"docs-ace-container\\\"><div class=\\\"docs-ace\\\">\");\nif ( language == 'javascript')\n{\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = doc.owner + '.' + docName + '(' + argumentExamples.join(', ') + ');') ? \"\" : jade.interp)) + \"</span>\");\n}\nelse if ( language == 'coffeescript')\n{\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = doc.ownerName + (doc.ownerName == '@' ? '' : '.') + docName + ' ' + argumentExamples.join(', ')) ? \"\" : jade.interp)) + \"</span>\");\n}\nelse if ( language == 'python')\n{\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = doc.ownerName + '.' + docName + '(' + argumentExamples.join(', ') + ')') ? \"\" : jade.interp)) + \"</span>\");\n}\nelse if ( language == 'clojure')\n{\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = '(.' + docName + ' ' + doc.ownerName + ' ' + argumentExamples.join(', ') + ')') ? \"\" : jade.interp)) + \"</span>\");\n}\nelse if ( language == 'lua')\n{\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = doc.ownerName + ':' + docName + '(' + argumentExamples.join(', ') + ')') ? \"\" : jade.interp)) + \"</span>\");\n}\nelse if ( language == 'io')\n{\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = (doc.ownerName == 'this' ? '' : doc.ownerName + ' ') + docName + '(' + argumentExamples.join(', ') + ')') ? \"\" : jade.interp)) + \"</span>\");\n}\nbuf.push(\"</div></div></div></p>\");\n}\n}\nif ( (doc.type != 'function' && doc.type != 'snippet' && doc.type != 'spawnable' && doc.type != 'event' && !_.contains(['HTML', 'CSS', 'WebJavaScript', 'jQuery'], doc.owner)) || doc.name == 'now')\n{\nbuf.push(\"<p class=\\\"value\\\"><strong><span data-i18n=\\\"skill_docs.current_value\\\">Current Value</span><span class=\\\"spr\\\">:</span></strong><pre><code\" + (jade.attrs({ 'data-prop':(doc.name), \"class\": [('current-value')] }, {\"data-prop\":true})) + \">\" + (jade.escape(null == (jade.interp = value) ? \"\" : jade.interp)) + \"</code></pre></p>\");\n}\nvar argumentEntry_mixin = function(arg){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\nbuf.push(\"<div><code>\" + (jade.escape(null == (jade.interp = arg.name) ? \"\" : jade.interp)) + \"</code><span class=\\\"spr\\\">:</span><code>\" + (jade.escape(null == (jade.interp = arg.type) ? \"\" : jade.interp)) + \"</code>\");\nif ( arg.example)\n{\nbuf.push(\" (<span data-i18n=\\\"skill_docs.ex\\\">ex</span><span class=\\\"spr\\\">:</span><code>\" + (jade.escape(null == (jade.interp = arg.example) ? \"\" : jade.interp)) + \"</code>)\");\n}\nif ( arg.description)\n{\nbuf.push(\"<div>\" + (null == (jade.interp = marked(arg.description)) ? \"\" : jade.interp) + \"</div>\");\n}\nif ( arg.default)\n{\nbuf.push(\"<div><em><span data-i18n=\\\"skill_docs.default_value\\\">Default value</span><span class=\\\"spr\\\">:</span></em><code>\" + (jade.escape(null == (jade.interp = arg.default) ? \"\" : jade.interp)) + \"</code></div>\");\n}\nbuf.push(\"</div>\");\n};\nif ( doc.args && doc.args.length)\n{\nvar hasOptionalArguments = _.any(doc.args, function(arg){ return arg.optional })\nbuf.push(\"<p class=\\\"args\\\"><strong>\");\nif ( hasOptionalArguments)\n{\nbuf.push(\"<span data-i18n=\\\"skill_docs.required_parameters\\\">Required Parameters</span>\");\n}\nelse\n{\nbuf.push(\"<span data-i18n=\\\"skill_docs.parameters\\\">Parameters</span>\");\n}\nbuf.push(\"<span class=\\\"spr\\\">:</span></strong>\");\n// iterate doc.args\n;(function(){\n  var $$obj = doc.args;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var arg = $$obj[$index];\n\nif (!( arg.optional))\n{\nargumentEntry_mixin(arg);\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var arg = $$obj[$index];\n\nif (!( arg.optional))\n{\nargumentEntry_mixin(arg);\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</p>\");\nif ( hasOptionalArguments)\n{\nbuf.push(\"<p class=\\\"args\\\"><strong><span data-i18n=\\\"skill_docs.optional_parameters\\\">Optional Parameters</span><span class=\\\"spr\\\">:</span></strong>\");\n// iterate doc.args\n;(function(){\n  var $$obj = doc.args;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var arg = $$obj[$index];\n\nif ( arg.optional)\n{\nargumentEntry_mixin(arg);\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var arg = $$obj[$index];\n\nif ( arg.optional)\n{\nargumentEntry_mixin(arg);\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</p>\");\n}\n}\nif ( doc.returns)\n{\nbuf.push(\"<p class=\\\"returns\\\"><strong><span data-i18n=\\\"skill_docs.returns\\\">Returns</span><span class=\\\"spr\\\">:</span></strong><div><code>\" + (jade.escape(null == (jade.interp = doc.returns.type) ? \"\" : jade.interp)) + \"</code>\");\nif ( doc.returns.example)\n{\nbuf.push(\" (<span data-i18n=\\\"skill_docs.ex\\\">ex</span><span class=\\\"spr\\\">:</span><code>\" + (jade.escape(null == (jade.interp = doc.returns.example) ? \"\" : jade.interp)) + \"</code>)\");\n}\nif ( doc.returns.description)\n{\nbuf.push(\"<div>\" + (null == (jade.interp = marked(doc.returns.description)) ? \"\" : jade.interp) + \"</div>\");\n}\nbuf.push(\"</div></p>\");\n}\nif ( item)\n{\nbuf.push(\"<p><em><span data-i18n=\\\"skill_docs.granted_by\\\" class=\\\"spr\\\">Granted by</span>\" + (jade.escape((jade.interp = item.get('name')) == null ? '' : jade.interp)) + \".</em></p>\");\n}\nif ( selectedMethod)\n{\nbuf.push(\"<p><em>Write the body of this method below.</em></p>\");\n};return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<div class=\\\"flow\\\"><div class=\\\"spell-progress\\\"><div class=\\\"progress\\\"><div class=\\\"progress-bar\\\"><div class=\\\"scrubber-handle\\\"></div></div></div></div><div class=\\\"btn-group steppers\\\"><button title=\\\"Ctrl/Cmd + Alt + [: Step Backward\\\" class=\\\"btn btn-mini btn-inverse banner step-backward\\\"><i class=\\\"icon-arrow-left icon-white\\\"></i></button><button title=\\\"Ctrl/Cmd + Alt + ]: Step Forward\\\" class=\\\"btn btn-mini btn-inverse banner step-forward\\\"><i class=\\\"icon-arrow-right icon-white\\\"></i></button></div><div class=\\\"metrics\\\"><div class=\\\"statements-metric\\\">Statement <span class=\\\"metric statement-index\\\"></span> / <span class=\\\"metric statements-executed\\\"></span><span class=\\\"metric statements-executed-total\\\"></span></div><div class=\\\"calls-metric\\\">Call <span class=\\\"metric call-index\\\"></span> / <span class=\\\"metric calls-executed\\\"></span></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<pre><code></code></pre>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<div id=\\\"spell-top-bar-view\\\"></div><div id=\\\"cast-button-view\\\"></div><div id=\\\"spell-view\\\"></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),fullUnsafeContentHostname = locals_.fullUnsafeContentHostname;buf.push(\"<iframe\" + (jade.attrs({ 'src':(\"//\" + fullUnsafeContentHostname + \"/web-dev-iframe.html\") }, {\"src\":true})) + \"></iframe>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,submenus = locals_.submenus,showTab = locals_.showTab,iconMap = locals_.iconMap,me = locals_.me;buf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"><img src=\\\"/images/pages/play/modal/game-menu-background.png\\\" draggable=\\\"false\\\" id=\\\"game-menu-background\\\"/><div id=\\\"close-modal\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></div><ul id=\\\"game-menu-nav\\\" class=\\\"nav nav-pills nav-stacked\\\">\");\nif ( view.showsChooseHero())\n{\nbuf.push(\"<li><a id=\\\"change-hero-tab\\\"><span class=\\\"glyphicon glyphicon-user\\\"></span><span data-i18n=\\\"[title]game_menu.choose_hero_caption;play.change_hero\\\"></span></a></li>\");\n}\n// iterate submenus\n;(function(){\n  var $$obj = submenus;\n  if ('number' == typeof $$obj.length) {\n\n    for (var index = 0, $$l = $$obj.length; index < $$l; index++) {\n      var submenu = $$obj[index];\n\nbuf.push(\"<li\" + (jade.attrs({ \"class\": [(submenu === showTab ? \"active\" : \"\")] }, {\"class\":true})) + \"><a\" + (jade.attrs({ 'href':('#' + submenu + '-view'), 'data-toggle':('tab') }, {\"href\":true,\"data-toggle\":true})) + \"><span\" + (jade.attrs({ \"class\": [('glyphicon'),(\"glyphicon-\"+iconMap[submenu])] }, {\"class\":true})) + \"></span>\");\nvar i18nKey = 'game_menu.' + submenu.replace('-', '_');\nbuf.push(\"<span\" + (jade.attrs({ 'data-i18n':('[title]' + i18nKey + '_caption;' + i18nKey + '_tab') }, {\"data-i18n\":true})) + \"></span></a></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var index in $$obj) {\n      $$l++;      var submenu = $$obj[index];\n\nbuf.push(\"<li\" + (jade.attrs({ \"class\": [(submenu === showTab ? \"active\" : \"\")] }, {\"class\":true})) + \"><a\" + (jade.attrs({ 'href':('#' + submenu + '-view'), 'data-toggle':('tab') }, {\"href\":true,\"data-toggle\":true})) + \"><span\" + (jade.attrs({ \"class\": [('glyphicon'),(\"glyphicon-\"+iconMap[submenu])] }, {\"class\":true})) + \"></span>\");\nvar i18nKey = 'game_menu.' + submenu.replace('-', '_');\nbuf.push(\"<span\" + (jade.attrs({ 'data-i18n':('[title]' + i18nKey + '_caption;' + i18nKey + '_tab') }, {\"data-i18n\":true})) + \"></span></a></li>\");\n    }\n\n  }\n}).call(this);\n\nif ( me.get('anonymous'))\n{\nbuf.push(\"<li data-toggle=\\\"coco-modal\\\" data-target=\\\"core/CreateAccountModal\\\" class=\\\"auth-tab\\\"><a data-toggle=\\\"coco-modal\\\" data-target=\\\"core/CreateAccountModal\\\"><span class=\\\"glyphicon glyphicon-pencil\\\"></span><span data-i18n=\\\"[title]game_menu.auth_caption;game_menu.auth_tab\\\"></span></a></li>\");\n}\nbuf.push(\"</ul><div class=\\\"tab-content game-menu-tab-content\\\">\");\n// iterate submenus\n;(function(){\n  var $$obj = submenus;\n  if ('number' == typeof $$obj.length) {\n\n    for (var index = 0, $$l = $$obj.length; index < $$l; index++) {\n      var submenu = $$obj[index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'id':(submenu + '-view'), \"class\": [('tab-pane')] }, {\"id\":true})) + \"></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var index in $$obj) {\n      $$l++;      var submenu = $$obj[index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'id':(submenu + '-view'), \"class\": [('tab-pane')] }, {\"id\":true})) + \"></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),docs = locals_.docs,showVideo = locals_.showVideo,videoLocked = locals_.videoLocked;if ( docs.length === 1)\n{\nif ( showVideo)\n{\nbuf.push(\"<h3 id=\\\"help-video-heading\\\" data-i18n=\\\"game_menu.guide_video_tutorial\\\"></h3>\");\nif ( videoLocked)\n{\nbuf.push(\"<p data-i18n=\\\"subscribe.unlock_help_videos\\\">Subscribe to unlock all video tutorials.</p><button data-i18n=\\\"subscribe.subscribe_title\\\" class=\\\"start-subscription-button btn btn-lg btn-success\\\">Subscribe</button>\");\n}\nelse\n{\nbuf.push(\"<div id=\\\"help-video-player\\\"></div>\");\n}\n}\nbuf.push(\"<h3 data-i18n=\\\"game_menu.guide_tips\\\"></h3><div>\" + (null == (jade.interp = docs[0].html) ? \"\" : jade.interp) + \"</div>\");\n}\nelse\n{\nbuf.push(\"<ul class=\\\"nav nav-tabs\\\">\");\nif ( showVideo)\n{\nbuf.push(\"<li><a data-target=\\\"#docs_tab_help_video\\\" data-toggle=\\\"tab\\\" data-i18n=\\\"game_menu.guide_video_tutorial\\\"></a></li>\");\n}\n// iterate docs\n;(function(){\n  var $$obj = docs;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var doc = $$obj[$index];\n\nbuf.push(\"<li><a\" + (jade.attrs({ 'data-target':(\"#docs_tab_\" + (doc.slug) + \"\"), 'data-toggle':(\"tab\") }, {\"data-target\":true,\"data-toggle\":true})) + \">\" + (jade.escape((jade.interp = doc.name) == null ? '' : jade.interp)) + \"</a></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var doc = $$obj[$index];\n\nbuf.push(\"<li><a\" + (jade.attrs({ 'data-target':(\"#docs_tab_\" + (doc.slug) + \"\"), 'data-toggle':(\"tab\") }, {\"data-target\":true,\"data-toggle\":true})) + \">\" + (jade.escape((jade.interp = doc.name) == null ? '' : jade.interp)) + \"</a></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul><div class=\\\"tab-content\\\">\");\nif ( showVideo)\n{\nbuf.push(\"<div id=\\\"docs_tab_help_video\\\" class=\\\"tab-pane\\\">\");\nif ( videoLocked)\n{\nbuf.push(\"<p data-i18n=\\\"subscribe.unlock_help_videos\\\">Subscribe to unlock all video tutorials.</p><button data-i18n=\\\"subscribe.subscribe_title\\\" class=\\\"start-subscription-button btn btn-lg btn-success\\\">Subscribe</button>\");\n}\nelse\n{\nbuf.push(\"<div id=\\\"help-video-player\\\"></div>\");\n}\nbuf.push(\"</div>\");\n}\n// iterate docs\n;(function(){\n  var $$obj = docs;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var doc = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'id':(\"docs_tab_\" + (doc.slug) + \"\"), \"class\": [('tab-pane')] }, {\"id\":true})) + \">\" + (null == (jade.interp = doc.html) ? \"\" : jade.interp) + \"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var doc = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'id':(\"docs_tab_\" + (doc.slug) + \"\"), \"class\": [('tab-pane')] }, {\"id\":true})) + \">\" + (null == (jade.interp = doc.html) ? \"\" : jade.interp) + \"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n};return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),gems = locals_.gems,selectedHero = locals_.selectedHero,equipment = locals_.equipment,itemGroups = locals_.itemGroups,selectedHeroClass = locals_.selectedHeroClass;buf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"><img src=\\\"/images/pages/play/modal/inventory-background.png\\\" draggable=\\\"false\\\" id=\\\"play-items-modal-narrow-bg\\\"/><h1 data-i18n=\\\"game_menu.inventory_tab\\\"></h1><div id=\\\"gems-count-container\\\"><span id=\\\"gems-count\\\" class=\\\"big-font\\\">\" + (jade.escape(null == (jade.interp = gems) ? \"\" : jade.interp)) + \"</span></div><div id=\\\"close-modal\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></div><div id=\\\"equipped\\\">\");\nif ( selectedHero && selectedHero.get('featureImages'))\n{\nvar featureImages = selectedHero.get('featureImages');\nbuf.push(\"<img\" + (jade.attrs({ 'src':(\"/file/\"+featureImages.body), 'draggable':(\"false\"), 'id':('hero-image') }, {\"src\":true,\"draggable\":true})) + \"/><img\" + (jade.attrs({ 'src':(\"/file/\"+featureImages.head), 'draggable':(\"false\"), 'id':('hero-image-head') }, {\"src\":true,\"draggable\":true})) + \"/><img\" + (jade.attrs({ 'src':(\"/file/\"+featureImages.hair), 'draggable':(\"false\"), 'id':('hero-image-hair') }, {\"src\":true,\"draggable\":true})) + \"/><img\" + (jade.attrs({ 'src':(\"/file/\"+featureImages.thumb), 'draggable':(\"false\"), 'id':('hero-image-thumb') }, {\"src\":true,\"draggable\":true})) + \"/>\");\n}\n// iterate ['head', 'eyes', 'neck', 'torso', 'gloves', 'wrists', 'left-hand', 'right-hand', 'waist', 'feet', 'left-ring', 'right-ring', 'minion', 'flag', 'pet', 'programming-book', 'misc-0', 'misc-1']\n;(function(){\n  var $$obj = ['head', 'eyes', 'neck', 'torso', 'gloves', 'wrists', 'left-hand', 'right-hand', 'waist', 'feet', 'left-ring', 'right-ring', 'minion', 'flag', 'pet', 'programming-book', 'misc-0', 'misc-1'];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var slot = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'data-slot':(slot), \"class\": [('item-slot')] }, {\"data-slot\":true})) + \"><div class=\\\"placeholder\\\"></div>\");\nif ( equipment[slot])\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(equipment[slot].getPortraitURL()), 'data-item-id':(equipment[slot].id), \"class\": [('item')] }, {\"src\":true,\"data-item-id\":true})) + \"/>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var slot = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'data-slot':(slot), \"class\": [('item-slot')] }, {\"data-slot\":true})) + \"><div class=\\\"placeholder\\\"></div>\");\nif ( equipment[slot])\n{\nbuf.push(\"<img\" + (jade.attrs({ 'src':(equipment[slot].getPortraitURL()), 'data-item-id':(equipment[slot].id), \"class\": [('item')] }, {\"src\":true,\"data-item-id\":true})) + \"/>\");\n}\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><div id=\\\"unequipped\\\"><div class=\\\"nano\\\"><div class=\\\"nano-content\\\">\");\nif ( itemGroups)\n{\nif ( itemGroups.requiredPurchaseItems.models.length)\n{\nbuf.push(\"<h4 id=\\\"required-purchase-description\\\" data-i18n=\\\"inventory.required_purchase_title\\\"></h4>\");\n// iterate itemGroups.requiredPurchaseItems.models\n;(function(){\n  var $$obj = itemGroups.requiredPurchaseItems.models;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nif ( selectedHeroClass && item.classes.indexOf(selectedHeroClass) > -1)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-id':(item.id), \"class\": [('item'),(item.classes)] }, {\"class\":true,\"data-item-id\":true})) + \"><img draggable=\\\"false\\\"/></div>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nif ( selectedHeroClass && item.classes.indexOf(selectedHeroClass) > -1)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-id':(item.id), \"class\": [('item'),(item.classes)] }, {\"class\":true,\"data-item-id\":true})) + \"><img draggable=\\\"false\\\"/></div>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"<div class=\\\"clearfix\\\"></div>\");\n}\nif ( itemGroups.availableItems.models.length)\n{\nbuf.push(\"<h4 id=\\\"available-description\\\" data-i18n=\\\"inventory.available_item\\\"></h4>\");\n// iterate itemGroups.availableItems.models\n;(function(){\n  var $$obj = itemGroups.availableItems.models;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nif ( selectedHeroClass && item.classes.indexOf(selectedHeroClass) > -1)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-id':(item.id), \"class\": [('item'),('available'),(item.classes)] }, {\"class\":true,\"data-item-id\":true})) + \"><img/><button data-i18n=\\\"inventory.equip\\\" class=\\\"btn equip-item\\\"></button></div>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nif ( selectedHeroClass && item.classes.indexOf(selectedHeroClass) > -1)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-id':(item.id), \"class\": [('item'),('available'),(item.classes)] }, {\"class\":true,\"data-item-id\":true})) + \"><img/><button data-i18n=\\\"inventory.equip\\\" class=\\\"btn equip-item\\\"></button></div>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"<div class=\\\"clearfix\\\"></div>\");\n}\nbuf.push(\"<div id=\\\"double-click-hint\\\" class=\\\"alert alert-info\\\"><span class=\\\"glyphicon glyphicon-info-sign spr\\\"></span><span data-i18n=\\\"inventory.should_equip\\\"></span></div>\");\nif ( itemGroups.restrictedItems.models.length)\n{\nbuf.push(\"<h4 id=\\\"restricted-description\\\" data-i18n=\\\"inventory.restricted_title\\\"></h4>\");\n// iterate itemGroups.restrictedItems.models\n;(function(){\n  var $$obj = itemGroups.restrictedItems.models;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nif ( selectedHeroClass && item.classes.indexOf(selectedHeroClass) > -1)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-id':(item.id), \"class\": [('item'),(item.classes)] }, {\"class\":true,\"data-item-id\":true})) + \"><img draggable=\\\"false\\\"/></div>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nif ( selectedHeroClass && item.classes.indexOf(selectedHeroClass) > -1)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-id':(item.id), \"class\": [('item'),(item.classes)] }, {\"class\":true,\"data-item-id\":true})) + \"><img draggable=\\\"false\\\"/></div>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"<div class=\\\"clearfix\\\"></div>\");\n}\nif ( itemGroups.lockedItems.models.length)\n{\nbuf.push(\"<h4 id=\\\"locked-description\\\" data-i18n=\\\"play.locked\\\"></h4>\");\n// iterate itemGroups.lockedItems.models\n;(function(){\n  var $$obj = itemGroups.lockedItems.models;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nif ( selectedHeroClass && item.classes.indexOf(selectedHeroClass) > -1)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-id':(item.id), \"class\": [('item'),(item.classes)] }, {\"class\":true,\"data-item-id\":true})) + \"><img draggable=\\\"false\\\"/></div>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nif ( selectedHeroClass && item.classes.indexOf(selectedHeroClass) > -1)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-id':(item.id), \"class\": [('item'),(item.classes)] }, {\"class\":true,\"data-item-id\":true})) + \"><img draggable=\\\"false\\\"/></div>\");\n}\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"<div class=\\\"clearfix\\\"></div>\");\n}\n}\nbuf.push(\"</div></div></div><div id=\\\"item-details-view\\\"></div><div id=\\\"item-details-extra\\\"><button id=\\\"equip-item-viewed\\\" data-i18n=\\\"inventory.equip\\\" class=\\\"btn secret\\\"></button><button id=\\\"unequip-item-viewed\\\" data-i18n=\\\"inventory.unequip\\\" class=\\\"btn secret\\\"></button><div id=\\\"restricted-item-viewed\\\" data-i18n=\\\"inventory.restricted\\\" class=\\\"alert alert-danger secret\\\"></div></div><button id=\\\"choose-hero-button\\\" data-i18n=\\\"play.change_hero\\\" class=\\\"btn btn-lg btn-primary choose-inventory-active\\\">Change Hero</button><button id=\\\"play-level-button\\\" data-i18n=\\\"common.play\\\" class=\\\"btn btn-lg btn-success choose-inventory-active\\\">Play</button></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),item = locals_.item,includes = locals_.includes,props = locals_.props,stats = locals_.stats;buf.push(\"<img\" + (jade.attrs({ 'src':(item.getPortraitURL()) }, {\"src\":true})) + \"/><div class=\\\"item-info\\\">\");\nif ( includes.name)\n{\nbuf.push(\"<h4>\" + (jade.escape(null == (jade.interp = item.get('name')) ? \"\" : jade.interp)) + \"</h4>\");\n}\nif ( includes.stats || (includes.props && props.length))\n{\nbuf.push(\"<ul class=\\\"list-unstyled\\\">\");\nif ( includes.stats)\n{\n// iterate stats\n;(function(){\n  var $$obj = stats;\n  if ('number' == typeof $$obj.length) {\n\n    for (var prop = 0, $$l = $$obj.length; prop < $$l; prop++) {\n      var stat = $$obj[prop];\n\nif ( stat.display == 'true')\n{\nbuf.push(\"<li>\" + (jade.escape(null == (jade.interp = stat.name) ? \"\" : jade.interp)) + \"</li>\");\n}\nelse\n{\nbuf.push(\"<li>\" + (jade.escape((jade.interp = stat.name) == null ? '' : jade.interp)) + \": \" + (jade.escape((jade.interp = stat.display) == null ? '' : jade.interp)) + \"</li>\");\n}\n    }\n\n  } else {\n    var $$l = 0;\n    for (var prop in $$obj) {\n      $$l++;      var stat = $$obj[prop];\n\nif ( stat.display == 'true')\n{\nbuf.push(\"<li>\" + (jade.escape(null == (jade.interp = stat.name) ? \"\" : jade.interp)) + \"</li>\");\n}\nelse\n{\nbuf.push(\"<li>\" + (jade.escape((jade.interp = stat.name) == null ? '' : jade.interp)) + \": \" + (jade.escape((jade.interp = stat.display) == null ? '' : jade.interp)) + \"</li>\");\n}\n    }\n\n  }\n}).call(this);\n\n}\nif ( includes.props && props.length)\n{\nbuf.push(\"<li>Grants:\");\n// iterate props\n;(function(){\n  var $$obj = props;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var prop = $$obj[$index];\n\nbuf.push(\" <code>\" + (jade.escape(null == (jade.interp = prop) ? \"\" : jade.interp)) + \"</code>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var prop = $$obj[$index];\n\nbuf.push(\" <code>\" + (jade.escape(null == (jade.interp = prop) ? \"\" : jade.interp)) + \"</code>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</li>\");\n}\nbuf.push(\"</ul>\");\n}\nbuf.push(\"<span class=\\\"status-message\\\"><span data-i18n=\\\"inventory.should_equip\\\" class=\\\"spl should-equip-message\\\"></span><span data-i18n=\\\"inventory.equipped\\\" class=\\\"spl equipped-message\\\"></span><span data-i18n=\\\"inventory.locked\\\" class=\\\"spl locked-message\\\"></span><span data-i18n=\\\"inventory.restricted\\\" class=\\\"spl restricted-message\\\"></span></span></div><div class=\\\"clearfix\\\"></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),me = locals_.me,music = locals_.music,aceConfig = locals_.aceConfig;buf.push(\"<div id=\\\"player-avatar-container\\\" title=\\\"Click to change your avatar\\\">\");\nif ( !me.get('photoURL'))\n{\nbuf.push(\"<div class=\\\"editable-icon glyphicon glyphicon-pencil\\\"></div>\");\n}\nbuf.push(\"<img\" + (jade.attrs({ 'src':(me.getPhotoURL(230)), 'draggable':(\"false\"), \"class\": [('profile-photo')] }, {\"src\":true,\"draggable\":true})) + \"/><div class=\\\"form-group\\\"><input\" + (jade.attrs({ 'id':('player-name'), 'name':(\"playerName\"), 'type':(\"text\"), 'value':(me.get('name', true)), \"class\": [('profile-caption')] }, {\"name\":true,\"type\":true,\"value\":true})) + \"/></div></div><div class=\\\"form\\\"><h3 data-i18n=\\\"options.general_options\\\">General Options</h3><div id=\\\"volume-group\\\" class=\\\"form-group slider-group\\\"><span class=\\\"glyphicon glyphicon-volume-down\\\"></span><div id=\\\"option-volume\\\" class=\\\"slider spr spl\\\"></div><span class=\\\"glyphicon glyphicon-volume-up\\\"></span></div><div class=\\\"form-group checkbox\\\"><label for=\\\"option-music\\\" class=\\\"control-label\\\"><input\" + (jade.attrs({ 'id':('option-music'), 'name':(\"option-music\"), 'type':(\"checkbox\"), 'checked':(music) }, {\"name\":true,\"type\":true,\"checked\":true})) + \"/><span class=\\\"custom-checkbox\\\"><div class=\\\"glyphicon glyphicon-ok\\\"></div></span><span data-i18n=\\\"options.music_label\\\">Music</span></label><span data-i18n=\\\"options.music_description\\\" class=\\\"help-block\\\">Turn background music on/off.</span></div><img src=\\\"/images/pages/play/modal/hr.png\\\" draggable=\\\"false\\\" class=\\\"hr\\\"/><h3 data-i18n=\\\"options.editor_config_title\\\">Editor Configuration</h3><div class=\\\"form-group checkbox\\\"><label for=\\\"option-live-completion\\\"><input\" + (jade.attrs({ 'id':('option-live-completion'), 'name':(\"liveCompletion\"), 'type':(\"checkbox\"), 'checked':(aceConfig.liveCompletion) }, {\"name\":true,\"type\":true,\"checked\":true})) + \"/><span class=\\\"custom-checkbox\\\"><div class=\\\"glyphicon glyphicon-ok\\\"></div></span><span data-i18n=\\\"options.editor_config_livecompletion_label\\\">Live Autocompletion</span></label><span data-i18n=\\\"options.editor_config_livecompletion_description\\\" class=\\\"help-block\\\">Displays autocomplete suggestions while typing.</span></div><div class=\\\"form-group checkbox\\\"><label for=\\\"option-invisibles\\\"><input\" + (jade.attrs({ 'id':('option-invisibles'), 'name':(\"invisibles\"), 'type':(\"checkbox\"), 'checked':(aceConfig.invisibles) }, {\"name\":true,\"type\":true,\"checked\":true})) + \"/><span class=\\\"custom-checkbox\\\"><div class=\\\"glyphicon glyphicon-ok\\\"></div></span><span data-i18n=\\\"options.editor_config_invisibles_label\\\">Show Invisibles</span></label><span data-i18n=\\\"options.editor_config_invisibles_description\\\" class=\\\"help-block\\\">Displays invisibles such as spaces or tabs.</span></div><div class=\\\"form-group checkbox\\\"><label for=\\\"option-indent-guides\\\"><input\" + (jade.attrs({ 'id':('option-indent-guides'), 'name':(\"indentGuides\"), 'type':(\"checkbox\"), 'checked':(aceConfig.indentGuides) }, {\"name\":true,\"type\":true,\"checked\":true})) + \"/><span class=\\\"custom-checkbox\\\"><div class=\\\"glyphicon glyphicon-ok\\\"></div></span><span data-i18n=\\\"options.editor_config_indentguides_label\\\">Show Indent Guides</span></label><span data-i18n=\\\"options.editor_config_indentguides_description\\\" class=\\\"help-block\\\">Displays vertical lines to see indentation better.</span></div><div class=\\\"form-group checkbox\\\"><label for=\\\"option-behaviors\\\"><input\" + (jade.attrs({ 'id':('option-behaviors'), 'name':(\"behaviors\"), 'type':(\"checkbox\"), 'checked':(aceConfig.behaviors) }, {\"name\":true,\"type\":true,\"checked\":true})) + \"/><span class=\\\"custom-checkbox\\\"><div class=\\\"glyphicon glyphicon-ok\\\"></div></span><span data-i18n=\\\"options.editor_config_behaviors_label\\\">Smart Behaviors</span></label><span data-i18n=\\\"options.editor_config_behaviors_description\\\" class=\\\"help-block\\\">Autocompletes brackets, braces, and quotes.</span></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<div class=\\\"row\\\"><div class=\\\"col-sm-4\\\"><div data-toggle=\\\"buttons\\\" id=\\\"save-granularity-toggle\\\" class=\\\"btn-group\\\"><label class=\\\"btn btn-primary active\\\"><input type=\\\"radio\\\" checked=\\\"checked\\\" value=\\\"level-sessions\\\"/><span data-i18n=\\\"save_load.granularity_saved_games\\\" title=\\\"Manage your saved games\\\"></span></label><label class=\\\"btn btn-primary\\\"><input type=\\\"radio\\\" value=\\\"change-history\\\"/><span data-i18n=\\\"save_load.granularity_change_history\\\" title=\\\"See your autosaved code edit history\\\"></span></label></div><div class=\\\"save-list level-sessions\\\"><ul class=\\\"list-group\\\"><li class=\\\"list-group-item\\\">Save 001</li><li class=\\\"list-group-item\\\">Greedy Algorithm</li><li class=\\\"list-group-item\\\">Defensive Strategy</li></ul></div><div class=\\\"save-list change-history secret\\\"><ul class=\\\"list-group\\\"><li class=\\\"list-group-item\\\">--item switches yeah--</li><li class=\\\"list-group-item\\\">Autosaved 17:05</li><li class=\\\"list-group-item\\\">Autosaved 14:45</li><li class=\\\"list-group-item\\\">Autosaved 16:40</li><li class=\\\"list-group-item\\\">Autosaved 5:05</li><li class=\\\"list-group-item\\\">Autosaved 5:00</li><li class=\\\"list-group-item\\\">--item switches yeah--</li><li class=\\\"list-group-item\\\">Autosaved 4:50</li><li class=\\\"list-group-item\\\">Autosaved 7/7/14</li><li class=\\\"list-group-item\\\">Autosaved 7/7/14</li></ul></div></div><div class=\\\"col-sm-8\\\"><div class=\\\"save-pane level-sessions\\\"><img src=\\\"/images/pages/game-menu/save-load-stub.png\\\"/><h3>Interactions:</h3><ul><li>On the left is a flat list of saves for this level. Click one and the stuff on the right appears.</li><li>There are name and description input boxes. Editing them auto updates the save on the left.</li><li>There are also items showing what the current equipment is, and below the current code. Neither are editable.</li><li>If you click the red box on any save, or click the delete button for the selected save, it asks for confirmation, then deletes.</li><li>Click the new save button: current code, items and empty name/description appear on the right, and a new save slot appears at the top of the list on the left, which is selected. Works like editing otherwise.</li></ul></div><div class=\\\"save-pane change-history secret\\\"><img src=\\\"/images/pages/game-menu/save-load-history-stub.png\\\"/><h3>Interactions</h3><ul><li>Similar to WebStorm. Click ‘history’ tab in the upper left of the save/load screen to switch to this view.</li><li>Click the left row of VCS versions, and the hero, language, items and code for it shows on the right.</li><li>Click revert to set the code back to the version of the code on the left. Modal closes with the new code.</li><li>Might experiment with showing diffs with difflib. More of an interface issue than a showing-diff issue.</li></ul></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,me = locals_.me;buf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"> \");\nif ( view.state === 'purchasing')\n{\nbuf.push(\"<div data-i18n=\\\"buy_gems.purchasing\\\" class=\\\"alert alert-info\\\"></div>\");\n}\nelse if ( view.state === 'retrying')\n{\nbuf.push(\"<div id=\\\"retrying-alert\\\" data-i18n=\\\"buy_gems.retrying\\\" class=\\\"alert alert-danger\\\"></div>\");\n}\nelse\n{\nif ( (me.get('preferredLanguage',true) || 'en-US').split('-')[0] == 'nl')\n{\nbuf.push(\"<img src=\\\"/images/pages/play/modal/lang-nl/buy-gems-background-NL.png\\\" id=\\\"buy-gems-background\\\"/>\");\n}\nelse\n{\nbuf.push(\"<img src=\\\"/images/pages/play/modal/buy-gems-background.png\\\" id=\\\"buy-gems-background\\\"/>\");\n}\nbuf.push(\"<h1 data-i18n=\\\"play.buy_gems\\\"> </h1><div id=\\\"products\\\">\");\nif ( view.supermodel.finished())\n{\n// iterate view.products.models\n;(function(){\n  var $$obj = view.products.models;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var product = $$obj[$index];\n\nbuf.push(\"<div class=\\\"product\\\"><h4>x\" + (jade.escape((jade.interp = product.get('gems')) == null ? '' : jade.interp)) + \"</h4><h3\" + (jade.attrs({ 'data-i18n':(product.get('i18n')) }, {\"data-i18n\":true})) + \"></h3><button\" + (jade.attrs({ 'value':(product.get('name')), \"class\": [('btn'),('btn-illustrated'),('btn-lg')] }, {\"value\":true})) + \"><span>\" + (jade.escape(null == (jade.interp = product.get('priceString')) ? \"\" : jade.interp)) + \"</span></button></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var product = $$obj[$index];\n\nbuf.push(\"<div class=\\\"product\\\"><h4>x\" + (jade.escape((jade.interp = product.get('gems')) == null ? '' : jade.interp)) + \"</h4><h3\" + (jade.attrs({ 'data-i18n':(product.get('i18n')) }, {\"data-i18n\":true})) + \"></h3><button\" + (jade.attrs({ 'value':(product.get('name')), \"class\": [('btn'),('btn-illustrated'),('btn-lg')] }, {\"value\":true})) + \"><span>\" + (jade.escape(null == (jade.interp = product.get('priceString')) ? \"\" : jade.interp)) + \"</span></button></div>\");\n    }\n\n  }\n}).call(this);\n\nif ( (me.get('preferredLanguage',true) || 'en-US').split('-')[0] == 'nl')\n{\nbuf.push(\"<div class=\\\"product\\\"><h4 class=\\\"subscription-gem-amount\\\">x{{gems}} / mo</h4><h3> \\n1, 3, 6 OF 12 <br/>MAANDEN</h3><a href=\\\"http://www.codecombat.nl/kopen\\\" target=\\\"_blank\\\"><button class=\\\"btn btn-ideal btn-illustrated btn-lg btn-succes\\\">PREPAID CODES</button></a></div>\");\n}\nbuf.push(\"<div class=\\\"product\\\"><h4 class=\\\"subscription-gem-amount\\\">x{{gems}} / mo</h4><h3 data-i18n=\\\"account.subscription\\\"></h3>\");\nif ( me.hasSubscription())\n{\nbuf.push(\"<button class=\\\"disabled start-subscription-button btn btn-lg btn-illustrated btn-success\\\">✓ <span data-i18n=\\\"account.subscribed\\\"></span></button>\");\n}\nelse\n{\nbuf.push(\"<button data-i18n=\\\"subscribe.subscribe_title\\\" class=\\\"start-subscription-button btn btn-lg btn-illustrated btn-success\\\">Subscribe</button>\");\n}\nbuf.push(\"</div>\");\n}\nbuf.push(\"</div>\");\nif ( view.state === 'declined')\n{\nbuf.push(\"<div id=\\\"declined-alert\\\" class=\\\"alert alert-danger alert-dismissible\\\"><span data-i18n=\\\"buy_gems.declined\\\"></span><button type=\\\"button\\\" data-dismiss=\\\"alert\\\" class=\\\"close\\\"><span aria-hidden=\\\"true\\\">&times;      </span></button></div>\");\n}\nif ( view.state === 'unknown_error')\n{\nbuf.push(\"<div id=\\\"error-alert\\\" class=\\\"alert alert-danger alert-dismissible\\\"><button type=\\\"button\\\" data-dismiss=\\\"alert\\\" class=\\\"close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button><p data-i18n=\\\"loading_error.unknown\\\"></p><p>\" + (jade.escape(null == (jade.interp = view.stateMessage) ? \"\" : jade.interp)) + \"</p></div>\");\n}\nif ( view.state === 'recovered_charge')\n{\nbuf.push(\"<div id=\\\"recovered-alert\\\" class=\\\"alert alert-danger alert-dismissible\\\"><span data-i18n=\\\"buy_gems.recovered\\\"></span><button type=\\\"button\\\" data-dismiss=\\\"alert\\\" class=\\\"close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button></div>\");\n}\nbuf.push(\"<div id=\\\"close-modal\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></div>\");\n}\nbuf.push(\"</div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<div role=\\\"tooltip\\\" class=\\\"popover buy-gems-prompt\\\"><div class=\\\"arrow\\\"></div><h2 data-i18n=\\\"buy_gems.prompt_title\\\">Not Enough Gems</h2><p data-i18n=\\\"buy_gems.prompt_body\\\">Do you want to get more?</p><button data-i18n=\\\"buy_gems.prompt_button\\\" class=\\\"btn btn-success btn-illustrated btn-lg buy-gems-prompt-button\\\">Enter Shop</button></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),item = locals_.item,stats = locals_.stats,me = locals_.me,props = locals_.props;buf.push(\"<div id=\\\"item-title\\\"><h2 class=\\\"one-line big-font\\\">\" + (jade.escape(null == (jade.interp = item ? item.name : '') ? \"\" : jade.interp)) + \"</h2></div><div id=\\\"item-details-body\\\">\");\nif ( item)\n{\nbuf.push(\"<div class=\\\"nano\\\"><div class=\\\"nano-content\\\"><div id=\\\"item-container\\\"><img\" + (jade.attrs({ 'src':(item.getPortraitURL()), 'draggable':(\"false\"), \"class\": [('item-img')] }, {\"src\":true,\"draggable\":true})) + \"/><img\" + (jade.attrs({ 'src':(item.getPortraitURL()), 'draggable':(\"false\"), \"class\": [('item-shadow')] }, {\"src\":true,\"draggable\":true})) + \"/></div><img src=\\\"/images/pages/play/modal/hr.png\\\" draggable=\\\"false\\\" class=\\\"hr\\\"/>\");\n// iterate stats\n;(function(){\n  var $$obj = stats;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var stat = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ \"class\": [(\"stat-row big-font\" + (/^en/.test(me.get('preferredLanguage')) && stat.matchedShortName ? \" short-name\" : \"\"))] }, {\"class\":true})) + \"><div class=\\\"stat-label\\\">\" + (jade.escape(null == (jade.interp = stat.name) ? \"\" : jade.interp)) + \"</div><div class=\\\"stat\\\">\" + (jade.escape(null == (jade.interp = stat.display) ? \"\" : jade.interp)) + \"</div></div><img\" + (jade.attrs({ 'src':(\"/images/pages/play/modal/hr.png\"), 'draggable':(\"false\"), \"class\": [('hr'),(stat.isLast ? \"\" : \"faded\")] }, {\"class\":true,\"src\":true,\"draggable\":true})) + \"/>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var stat = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ \"class\": [(\"stat-row big-font\" + (/^en/.test(me.get('preferredLanguage')) && stat.matchedShortName ? \" short-name\" : \"\"))] }, {\"class\":true})) + \"><div class=\\\"stat-label\\\">\" + (jade.escape(null == (jade.interp = stat.name) ? \"\" : jade.interp)) + \"</div><div class=\\\"stat\\\">\" + (jade.escape(null == (jade.interp = stat.display) ? \"\" : jade.interp)) + \"</div></div><img\" + (jade.attrs({ 'src':(\"/images/pages/play/modal/hr.png\"), 'draggable':(\"false\"), \"class\": [('hr'),(stat.isLast ? \"\" : \"faded\")] }, {\"class\":true,\"src\":true,\"draggable\":true})) + \"/>\");\n    }\n\n  }\n}).call(this);\n\nif ( item.description)\n{\nbuf.push(\"<div class=\\\"item-description\\\">\" + (jade.escape(null == (jade.interp = item.description) ? \"\" : jade.interp)) + \"</div>\");\n}\nif ( props.length)\n{\nbuf.push(\"<div id=\\\"skills\\\"><h3 data-i18n=\\\"play.skills_granted\\\" class=\\\"big-font\\\"></h3>\");\n// iterate props\n;(function(){\n  var $$obj = props;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var prop = $$obj[$index];\n\nbuf.push(\"<p><strong>\" + (jade.escape(null == (jade.interp = prop.name) ? \"\" : jade.interp)) + \"</strong><span class=\\\"spr\\\">:</span><span>\" + (null == (jade.interp = prop.description) ? \"\" : jade.interp) + \"</span></p>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var prop = $$obj[$index];\n\nbuf.push(\"<p><strong>\" + (jade.escape(null == (jade.interp = prop.name) ? \"\" : jade.interp)) + \"</strong><span class=\\\"spr\\\">:</span><span>\" + (null == (jade.interp = prop.description) ? \"\" : jade.interp) + \"</span></p>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nif ( item.comingSoon)\n{\nbuf.push(\"<div class=\\\"text-center\\\"><h3>This item has no stats.</h3><p>Only admins will see it for now.</p></div>\");\n}\nbuf.push(\"</div></div>\");\n}\nbuf.push(\"</div>\");\nif ( item && !item.owned)\n{\nif ( item.unequippable)\n{\nbuf.push(\"<button class=\\\"btn big-font disabled unequippable\\\">\" + (jade.escape((jade.interp = item.get('heroClass')) == null ? '' : jade.interp)) + \" Only</button>\");\n}\nelse\n{\nbuf.push(\"<button\" + (jade.attrs({ 'id':('selected-item-unlock-button'), 'data-item-id':(item.id), \"class\": [('btn'),('big-font'),('unlock-button')] }, {\"data-item-id\":true})) + \"><span data-i18n=\\\"play.unlock\\\">Unlock</span><span class=\\\"spl\\\">\" + (jade.escape(null == (jade.interp = '('+item.get('gems')) ? \"\" : jade.interp)) + \"</span><img src=\\\"/images/common/gem.png\\\" draggable=\\\"false\\\"/><span>)</span></button>\");\n}\n};return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),levelName = locals_.levelName,submenus = locals_.submenus;buf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"><img src=\\\"/images/pages/play/modal/leaderboard-background.png\\\" draggable=\\\"false\\\" id=\\\"leaderboard-background\\\"/><h1 class=\\\"level-title\\\">\" + (jade.escape(null == (jade.interp = levelName) ? \"\" : jade.interp)) + \"</h1><div id=\\\"close-modal\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></div><ul id=\\\"leaderboard-nav\\\" class=\\\"nav nav-pills nav-stacked\\\">\");\nvar lastScoreType = null;\n// iterate submenus\n;(function(){\n  var $$obj = submenus;\n  if ('number' == typeof $$obj.length) {\n\n    for (var index = 0, $$l = $$obj.length; index < $$l; index++) {\n      var submenu = $$obj[index];\n\nif ( lastScoreType && submenu.scoreType != lastScoreType)\n{\nbuf.push(\"<br/>\");\n}\nbuf.push(\"<li\" + (jade.attrs({ \"class\": [(index ? \"\" : \"active\")] }, {\"class\":true})) + \"><a\" + (jade.attrs({ 'href':('#' + submenu.scoreType + '-' + submenu.timespan + '-view'), 'data-toggle':('tab') }, {\"href\":true,\"data-toggle\":true})) + \">\");\nif ( submenu.scoreType != lastScoreType)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-i18n':('leaderboard.' + submenu.scoreType.replace('-', '_')), \"class\": [('scoreType')] }, {\"data-i18n\":true})) + \">\" + (jade.escape(null == (jade.interp = submenu.scoreType) ? \"\" : jade.interp)) + \"</div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"scoreType\\\">&nbsp;</div>\");\n}\nbuf.push(\"<div\" + (jade.attrs({ 'data-i18n':('leaderboard.' + submenu.timespan), \"class\": [('timespan')] }, {\"data-i18n\":true})) + \"></div>\");\nlastScoreType = submenu.scoreType;\nbuf.push(\"</a></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var index in $$obj) {\n      $$l++;      var submenu = $$obj[index];\n\nif ( lastScoreType && submenu.scoreType != lastScoreType)\n{\nbuf.push(\"<br/>\");\n}\nbuf.push(\"<li\" + (jade.attrs({ \"class\": [(index ? \"\" : \"active\")] }, {\"class\":true})) + \"><a\" + (jade.attrs({ 'href':('#' + submenu.scoreType + '-' + submenu.timespan + '-view'), 'data-toggle':('tab') }, {\"href\":true,\"data-toggle\":true})) + \">\");\nif ( submenu.scoreType != lastScoreType)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'data-i18n':('leaderboard.' + submenu.scoreType.replace('-', '_')), \"class\": [('scoreType')] }, {\"data-i18n\":true})) + \">\" + (jade.escape(null == (jade.interp = submenu.scoreType) ? \"\" : jade.interp)) + \"</div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"scoreType\\\">&nbsp;</div>\");\n}\nbuf.push(\"<div\" + (jade.attrs({ 'data-i18n':('leaderboard.' + submenu.timespan), \"class\": [('timespan')] }, {\"data-i18n\":true})) + \"></div>\");\nlastScoreType = submenu.scoreType;\nbuf.push(\"</a></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul><div class=\\\"tab-content leaderboard-tab-content\\\">\");\n// iterate submenus\n;(function(){\n  var $$obj = submenus;\n  if ('number' == typeof $$obj.length) {\n\n    for (var index = 0, $$l = $$obj.length; index < $$l; index++) {\n      var submenu = $$obj[index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'id':(submenu.scoreType + '-' + submenu.timespan + '-view'), \"class\": [('tab-pane')] }, {\"id\":true})) + \"><div class=\\\"leaderboard-tab-view\\\"></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var index in $$obj) {\n      $$l++;      var submenu = $$obj[index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'id':(submenu.scoreType + '-' + submenu.timespan + '-view'), \"class\": [('tab-pane')] }, {\"id\":true})) + \"><div class=\\\"leaderboard-tab-view\\\"></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),scoreType = locals_.scoreType,timespan = locals_.timespan,topScores = locals_.topScores,me = locals_.me,_ = locals_._,loading = locals_.loading;buf.push(\"<h1><span data-i18n=\\\"leaderboard.top_players\\\" class=\\\"spr\\\">Top Players by</span><span\" + (jade.attrs({ 'data-i18n':(\"leaderboard.\" + (scoreType.replace('-', '_')) + \"\") }, {\"data-i18n\":true})) + \"></span><span class=\\\"spr\\\">,</span><span\" + (jade.attrs({ 'data-i18n':(\"leaderboard.\" + (timespan) + \"\") }, {\"data-i18n\":true})) + \"></span></h1>\");\nif ( topScores)\n{\nbuf.push(\"<table class=\\\"table table-bordered table-condensed table-hover\\\"><thead><tr><th colspan=\\\"4\\\" data-i18n=\\\"general.player\\\"></th><th data-i18n=\\\"general.score\\\"></th><th data-i18n=\\\"general.when\\\"></th><th></th></tr></thead><tbody>\");\n// iterate topScores\n;(function(){\n  var $$obj = topScores;\n  if ('number' == typeof $$obj.length) {\n\n    for (var rank = 0, $$l = $$obj.length; rank < $$l; rank++) {\n      var row = $$obj[rank];\n\nvar isMyRow = row.creator == me.id\nvar viewable = rank >= 5 || me.isAdmin();\nbuf.push(\"<tr\" + (jade.attrs({ 'data-player-id':(row.creator), 'data-session-id':(row.session), 'title':(viewable ? \"View solution\" : \"Can't view top 5 solutions\"), \"class\": [(isMyRow ? \"success\" : \"\" + (viewable ? \" viewable\" : \"\"))] }, {\"class\":true,\"data-player-id\":true,\"data-session-id\":true,\"title\":true})) + \"><td class=\\\"rank-cell\\\">\" + (jade.escape(null == (jade.interp = rank + 1) ? \"\" : jade.interp)) + \"</td><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + (row.codeLanguage) + \"_small.png)\"), 'title':(_.string.capitalize(row.codeLanguage)), \"class\": [('code-language-cell')] }, {\"style\":true,\"title\":true})) + \"></td><td\" + (jade.attrs({ 'style':(\"background-image: url(/file/db/thang.type/\" + (row.hero) + \"/portrait.png)\"), \"class\": [('hero-portrait-cell')] }, {\"style\":true})) + \"></td><td class=\\\"name-col-cell\\\">\" + (jade.escape(null == (jade.interp = row.creatorName || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"score-cell\\\">\" + (jade.escape(null == (jade.interp = row.score) ? \"\" : jade.interp)) + \"</td><td class=\\\"ago-cell\\\">\" + (jade.escape(null == (jade.interp = row.ago) ? \"\" : jade.interp)) + \"</td><td class=\\\"viewable-cell\\\">\");\nif ( viewable)\n{\nif ( (me.get('preferredLanguage', true) || 'en-US').substr(0, 2) == 'en')\n{\nbuf.push(\"<div class=\\\"btn btn-xs btn-info\\\">Watch</div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"glyphicon glyphicon-eye-open\\\"></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"glyphicon glyphicon-eye-close\\\"></div>\");\n}\nbuf.push(\"</td></tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var rank in $$obj) {\n      $$l++;      var row = $$obj[rank];\n\nvar isMyRow = row.creator == me.id\nvar viewable = rank >= 5 || me.isAdmin();\nbuf.push(\"<tr\" + (jade.attrs({ 'data-player-id':(row.creator), 'data-session-id':(row.session), 'title':(viewable ? \"View solution\" : \"Can't view top 5 solutions\"), \"class\": [(isMyRow ? \"success\" : \"\" + (viewable ? \" viewable\" : \"\"))] }, {\"class\":true,\"data-player-id\":true,\"data-session-id\":true,\"title\":true})) + \"><td class=\\\"rank-cell\\\">\" + (jade.escape(null == (jade.interp = rank + 1) ? \"\" : jade.interp)) + \"</td><td\" + (jade.attrs({ 'style':(\"background-image: url(/images/common/code_languages/\" + (row.codeLanguage) + \"_small.png)\"), 'title':(_.string.capitalize(row.codeLanguage)), \"class\": [('code-language-cell')] }, {\"style\":true,\"title\":true})) + \"></td><td\" + (jade.attrs({ 'style':(\"background-image: url(/file/db/thang.type/\" + (row.hero) + \"/portrait.png)\"), \"class\": [('hero-portrait-cell')] }, {\"style\":true})) + \"></td><td class=\\\"name-col-cell\\\">\" + (jade.escape(null == (jade.interp = row.creatorName || \"Anonymous\") ? \"\" : jade.interp)) + \"</td><td class=\\\"score-cell\\\">\" + (jade.escape(null == (jade.interp = row.score) ? \"\" : jade.interp)) + \"</td><td class=\\\"ago-cell\\\">\" + (jade.escape(null == (jade.interp = row.ago) ? \"\" : jade.interp)) + \"</td><td class=\\\"viewable-cell\\\">\");\nif ( viewable)\n{\nif ( (me.get('preferredLanguage', true) || 'en-US').substr(0, 2) == 'en')\n{\nbuf.push(\"<div class=\\\"btn btn-xs btn-info\\\">Watch</div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"glyphicon glyphicon-eye-open\\\"></div>\");\n}\n}\nelse\n{\nbuf.push(\"<div class=\\\"glyphicon glyphicon-eye-close\\\"></div>\");\n}\nbuf.push(\"</td></tr>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tbody></table>\");\n}\nelse if ( loading)\n{\nbuf.push(\"<h3 data-i18n=\\\"common.loading\\\"></h3>\");\n}\nelse\n{\nbuf.push(\"<h3>No scores yet.</h3>\");\n};return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<div class=\\\"modal-dialog game\\\"><div class=\\\"background-wrapper\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nbuf.push(\"<h3 data-i18n=\\\"nav.account\\\">Account</h3></div><div class=\\\"modal-body\\\"><div id=\\\"account-settings-view\\\"></div></div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-footer\\\"><div id=\\\"save-button\\\" data-i18n=\\\"delta.no_changes\\\" disabled=\\\"true\\\" class=\\\"btn-lg btn disabled\\\">No Changes</div></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,moment = locals_.moment,rewards = locals_.rewards,worth = locals_.worth;buf.push(\"<div class=\\\"modal-dialog game\\\"><div class=\\\"background-wrapper\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nbuf.push(\"<h3 data-i18n=\\\"play.achievements\\\">Achievements</h3></div><div class=\\\"modal-body\\\">\");\n// iterate view.achievements.models\n;(function(){\n  var $$obj = view.achievements.models;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var achievement = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ \"class\": [('panel'),(achievement.earned ? 'earned' : '')] }, {\"class\":true})) + \"><div class=\\\"panel-body\\\"><img\" + (jade.attrs({ 'src':(achievement.getImageURL()), 'draggable':(\"false\"), \"class\": [('icon')] }, {\"src\":true,\"draggable\":true})) + \"/><h3>\" + (jade.escape(null == (jade.interp = achievement.name + (achievement.earned && achievement.earned.get('achievedAmount') ? (' - ' + achievement.earned.get('achievedAmount') + 'x') : '')) ? \"\" : jade.interp)) + \"</h3><p>\" + (jade.escape(null == (jade.interp = achievement.description) ? \"\" : jade.interp)) + \"</p></div>\");\nif ( achievement.earnedDate)\n{\nbuf.push(\"<div class=\\\"created\\\">\" + (jade.escape(null == (jade.interp = moment(achievement.earnedDate).fromNow()) ? \"\" : jade.interp)) + \"</div>\");\n}\nelse\n{\nbuf.push(\"<div data-i18n=\\\"user.status_unfinished\\\" class=\\\"created\\\"></div>\");\n}\nbuf.push(\"<div class=\\\"rewards\\\">\");\nrewards = achievement.get('rewards');\nif ( rewards && rewards.gems)\n{\nbuf.push(\"<span class=\\\"gems label label-default\\\"><span>\" + (jade.escape(null == (jade.interp = achievement.earnedGems || rewards.gems) ? \"\" : jade.interp)) + \"</span><img src=\\\"/images/common/gem.png\\\" draggable=\\\"false\\\" class=\\\"gem\\\"/></span>\");\n}\nworth = achievement.get('worth');\nif ( worth)\n{\nbuf.push(\"<span class=\\\"worth label label-default\\\"><span>\" + (jade.escape((jade.interp = achievement.earnedPoints || worth) == null ? '' : jade.interp)) + \"xp</span></span>\");\n}\nbuf.push(\"<!-- maybe add more icons/numbers for items, heroes, levels, xp?--></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var achievement = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ \"class\": [('panel'),(achievement.earned ? 'earned' : '')] }, {\"class\":true})) + \"><div class=\\\"panel-body\\\"><img\" + (jade.attrs({ 'src':(achievement.getImageURL()), 'draggable':(\"false\"), \"class\": [('icon')] }, {\"src\":true,\"draggable\":true})) + \"/><h3>\" + (jade.escape(null == (jade.interp = achievement.name + (achievement.earned && achievement.earned.get('achievedAmount') ? (' - ' + achievement.earned.get('achievedAmount') + 'x') : '')) ? \"\" : jade.interp)) + \"</h3><p>\" + (jade.escape(null == (jade.interp = achievement.description) ? \"\" : jade.interp)) + \"</p></div>\");\nif ( achievement.earnedDate)\n{\nbuf.push(\"<div class=\\\"created\\\">\" + (jade.escape(null == (jade.interp = moment(achievement.earnedDate).fromNow()) ? \"\" : jade.interp)) + \"</div>\");\n}\nelse\n{\nbuf.push(\"<div data-i18n=\\\"user.status_unfinished\\\" class=\\\"created\\\"></div>\");\n}\nbuf.push(\"<div class=\\\"rewards\\\">\");\nrewards = achievement.get('rewards');\nif ( rewards && rewards.gems)\n{\nbuf.push(\"<span class=\\\"gems label label-default\\\"><span>\" + (jade.escape(null == (jade.interp = achievement.earnedGems || rewards.gems) ? \"\" : jade.interp)) + \"</span><img src=\\\"/images/common/gem.png\\\" draggable=\\\"false\\\" class=\\\"gem\\\"/></span>\");\n}\nworth = achievement.get('worth');\nif ( worth)\n{\nbuf.push(\"<span class=\\\"worth label label-default\\\"><span>\" + (jade.escape((jade.interp = achievement.earnedPoints || worth) == null ? '' : jade.interp)) + \"xp</span></span>\");\n}\nbuf.push(\"<!-- maybe add more icons/numbers for items, heroes, levels, xp?--></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),gems = locals_.gems,heroes = locals_.heroes,isIE = locals_.isIE,visibleHero = locals_.visibleHero,codeLanguages = locals_.codeLanguages,codeLanguage = locals_.codeLanguage,confirmButtonI18N = locals_.confirmButtonI18N,me = locals_.me,serverConfig = locals_.serverConfig;buf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"><img src=\\\"/images/pages/play/modal/heroes-background.png\\\" draggable=\\\"false\\\" id=\\\"play-heroes-background\\\"/><h1 data-i18n=\\\"choose_hero.choose_hero\\\"></h1><div id=\\\"gems-count-container\\\"><span id=\\\"gems-count\\\"><div class=\\\"gem gem-20\\\"></div><span class=\\\"spl\\\">\" + (jade.escape(null == (jade.interp = gems) ? \"\" : jade.interp)) + \"</span></span></div><div id=\\\"close-modal\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></div><div id=\\\"hero-carousel\\\" data-interval='0' class=\\\"carousel slide\\\"><div class=\\\"carousel-indicator-container\\\"><ol class=\\\"carousel-indicators\\\">\");\n// iterate heroes\n;(function(){\n  var $$obj = heroes;\n  if ('number' == typeof $$obj.length) {\n\n    for (var index = 0, $$l = $$obj.length; index < $$l; index++) {\n      var hero = $$obj[index];\n\nbuf.push(\"<li\" + (jade.attrs({ 'data-hero-id':(hero.get('original')), 'title':(hero.name), 'data-slide-to':(index), 'data-target':(\"#hero-carousel\"), \"class\": [(\"hero-indicator hero-index-\" + index + (hero.locked ? \" locked\" : \"\") + (hero.purchasable ? \" purchasable\" : \"\") + (hero.restricted ? \" restricted\" : \"\"))] }, {\"data-hero-id\":true,\"title\":true,\"data-slide-to\":true,\"data-target\":true,\"class\":true})) + \"><div class=\\\"hero-avatar\\\"></div>\");\nif ( hero.locked && !hero.purchasable)\n{\nif ( isIE)\n{\nbuf.push(\"<img src=\\\"/images/pages/game-menu/lock-processed.png\\\" draggable=\\\"false\\\" class=\\\"lock-indicator\\\"/>\");\n}\nelse\n{\nbuf.push(\"<img src=\\\"/images/pages/game-menu/lock.png\\\" draggable=\\\"false\\\" class=\\\"lock-indicator\\\"/>\");\n}\n}\nbuf.push(\"</li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var index in $$obj) {\n      $$l++;      var hero = $$obj[index];\n\nbuf.push(\"<li\" + (jade.attrs({ 'data-hero-id':(hero.get('original')), 'title':(hero.name), 'data-slide-to':(index), 'data-target':(\"#hero-carousel\"), \"class\": [(\"hero-indicator hero-index-\" + index + (hero.locked ? \" locked\" : \"\") + (hero.purchasable ? \" purchasable\" : \"\") + (hero.restricted ? \" restricted\" : \"\"))] }, {\"data-hero-id\":true,\"title\":true,\"data-slide-to\":true,\"data-target\":true,\"class\":true})) + \"><div class=\\\"hero-avatar\\\"></div>\");\nif ( hero.locked && !hero.purchasable)\n{\nif ( isIE)\n{\nbuf.push(\"<img src=\\\"/images/pages/game-menu/lock-processed.png\\\" draggable=\\\"false\\\" class=\\\"lock-indicator\\\"/>\");\n}\nelse\n{\nbuf.push(\"<img src=\\\"/images/pages/game-menu/lock.png\\\" draggable=\\\"false\\\" class=\\\"lock-indicator\\\"/>\");\n}\n}\nbuf.push(\"</li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ol></div><div class=\\\"carousel-inner\\\">\");\n// iterate heroes\n;(function(){\n  var $$obj = heroes;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var hero = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'data-hero-id':(hero.get('original')), \"class\": [(\"item hero-item\" + (hero.locked ? \" locked\" : \"\") + (hero.purchasable ? \" purchasable\" : \"\") + (hero.restricted ? \" restricted\" : \"\"))] }, {\"class\":true,\"data-hero-id\":true})) + \"><canvas class=\\\"hero-canvas\\\"></canvas><div class=\\\"hero-pose-image\\\"><img draggable=\\\"false\\\"/></div><div class=\\\"hero-stats\\\"><h2>\" + (jade.escape(null == (jade.interp = hero.name) ? \"\" : jade.interp)) + \"</h2><div class=\\\"hero-description\\\">\" + (jade.escape(null == (jade.interp = hero.description) ? \"\" : jade.interp)) + \"</div><div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"choose_hero.status\\\" class=\\\"stat-label\\\"></div><div\" + (jade.attrs({ 'data-i18n':(hero.restricted ? 'inventory.restricted_title' : (hero.purchasable ? 'play.purchasable' : (hero.locked ? 'play.locked' : 'play.available'))), \"class\": [('stat-value'),('hero-status-value')] }, {\"data-i18n\":true})) + \"></div></div><div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"editor.level_components_type\\\" class=\\\"stat-label\\\"> </div><div\" + (jade.attrs({ 'data-i18n':('general.' +hero.class), \"class\": [('stat-value')] }, {\"data-i18n\":true})) + \"></div></div><div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"choose_hero.weapons\\\" class=\\\"stat-label\\\"></div><div\" + (jade.attrs({ 'data-i18n':('choose_hero.weapons_'+hero.class), \"class\": [('stat-value')] }, {\"data-i18n\":true})) + \"></div></div>\");\nif ( hero.stats)\n{\nif ( hero.stats.skills.length)\n{\nbuf.push(\"<div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"choose_hero.skills\\\" class=\\\"stat-label\\\"></div><div class=\\\"stat-value\\\">\" + (jade.escape(null == (jade.interp = hero.stats.skills.join(', ')) ? \"\" : jade.interp)) + \"</div></div>\");\n}\n// iterate ['attack', 'health', 'speed']\n;(function(){\n  var $$obj = ['attack', 'health', 'speed'];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var stat = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'title':(hero.stats[stat].description), \"class\": [('hero-stat-row'),(stat)] }, {\"class\":true,\"title\":true})) + \"><div\" + (jade.attrs({ 'data-i18n':('choose_hero.'+stat), \"class\": [('stat-label')] }, {\"data-i18n\":true})) + \"></div><div class=\\\"stat-value\\\"><div class=\\\"stat-progress\\\"><div\" + (jade.attrs({ 'style':(\"width: \" + (parseInt(hero.stats[stat].relative * 100)) + \"%\"), \"class\": [('stat-progress-bar')] }, {\"style\":true})) + \"></div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var stat = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'title':(hero.stats[stat].description), \"class\": [('hero-stat-row'),(stat)] }, {\"class\":true,\"title\":true})) + \"><div\" + (jade.attrs({ 'data-i18n':('choose_hero.'+stat), \"class\": [('stat-label')] }, {\"data-i18n\":true})) + \"></div><div class=\\\"stat-value\\\"><div class=\\\"stat-progress\\\"><div\" + (jade.attrs({ 'style':(\"width: \" + (parseInt(hero.stats[stat].relative * 100)) + \"%\"), \"class\": [('stat-progress-bar')] }, {\"style\":true})) + \"></div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push(\"</div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var hero = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'data-hero-id':(hero.get('original')), \"class\": [(\"item hero-item\" + (hero.locked ? \" locked\" : \"\") + (hero.purchasable ? \" purchasable\" : \"\") + (hero.restricted ? \" restricted\" : \"\"))] }, {\"class\":true,\"data-hero-id\":true})) + \"><canvas class=\\\"hero-canvas\\\"></canvas><div class=\\\"hero-pose-image\\\"><img draggable=\\\"false\\\"/></div><div class=\\\"hero-stats\\\"><h2>\" + (jade.escape(null == (jade.interp = hero.name) ? \"\" : jade.interp)) + \"</h2><div class=\\\"hero-description\\\">\" + (jade.escape(null == (jade.interp = hero.description) ? \"\" : jade.interp)) + \"</div><div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"choose_hero.status\\\" class=\\\"stat-label\\\"></div><div\" + (jade.attrs({ 'data-i18n':(hero.restricted ? 'inventory.restricted_title' : (hero.purchasable ? 'play.purchasable' : (hero.locked ? 'play.locked' : 'play.available'))), \"class\": [('stat-value'),('hero-status-value')] }, {\"data-i18n\":true})) + \"></div></div><div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"editor.level_components_type\\\" class=\\\"stat-label\\\"> </div><div\" + (jade.attrs({ 'data-i18n':('general.' +hero.class), \"class\": [('stat-value')] }, {\"data-i18n\":true})) + \"></div></div><div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"choose_hero.weapons\\\" class=\\\"stat-label\\\"></div><div\" + (jade.attrs({ 'data-i18n':('choose_hero.weapons_'+hero.class), \"class\": [('stat-value')] }, {\"data-i18n\":true})) + \"></div></div>\");\nif ( hero.stats)\n{\nif ( hero.stats.skills.length)\n{\nbuf.push(\"<div class=\\\"hero-stat-row\\\"><div data-i18n=\\\"choose_hero.skills\\\" class=\\\"stat-label\\\"></div><div class=\\\"stat-value\\\">\" + (jade.escape(null == (jade.interp = hero.stats.skills.join(', ')) ? \"\" : jade.interp)) + \"</div></div>\");\n}\n// iterate ['attack', 'health', 'speed']\n;(function(){\n  var $$obj = ['attack', 'health', 'speed'];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var stat = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'title':(hero.stats[stat].description), \"class\": [('hero-stat-row'),(stat)] }, {\"class\":true,\"title\":true})) + \"><div\" + (jade.attrs({ 'data-i18n':('choose_hero.'+stat), \"class\": [('stat-label')] }, {\"data-i18n\":true})) + \"></div><div class=\\\"stat-value\\\"><div class=\\\"stat-progress\\\"><div\" + (jade.attrs({ 'style':(\"width: \" + (parseInt(hero.stats[stat].relative * 100)) + \"%\"), \"class\": [('stat-progress-bar')] }, {\"style\":true})) + \"></div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var stat = $$obj[$index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'title':(hero.stats[stat].description), \"class\": [('hero-stat-row'),(stat)] }, {\"class\":true,\"title\":true})) + \"><div\" + (jade.attrs({ 'data-i18n':('choose_hero.'+stat), \"class\": [('stat-label')] }, {\"data-i18n\":true})) + \"></div><div class=\\\"stat-value\\\"><div class=\\\"stat-progress\\\"><div\" + (jade.attrs({ 'style':(\"width: \" + (parseInt(hero.stats[stat].relative * 100)) + \"%\"), \"class\": [('stat-progress-bar')] }, {\"style\":true})) + \"></div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\n}\nbuf.push(\"</div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><a role=\\\"button\\\" data-slide=\\\"prev\\\" href=\\\"#hero-carousel\\\" class=\\\"left\\\"><span class=\\\"glyphicon glyphicon-play\\\"></span></a><a role=\\\"button\\\" data-slide=\\\"next\\\" href=\\\"#hero-carousel\\\" class=\\\"right\\\"><span class=\\\"glyphicon glyphicon-play\\\"></span></a></div><div id=\\\"hero-footer\\\">\");\nif ( visibleHero)\n{\nif ( !visibleHero.get('original'))\n{\nbuf.push(\"<div id=\\\"loading-hero-explanation\\\"><h2 data-i18n=\\\"common.loading\\\">Loading...</h2></div>\");\n}\nelse if ( visibleHero.restricted)\n{\nbuf.push(\"<div id=\\\"restricted-hero-explanation\\\"><h2><span>\" + (jade.escape(null == (jade.interp = visibleHero.name) ? \"\" : jade.interp)) + \"</span><span data-i18n=\\\"inventory.restricted_title\\\" class=\\\"spl\\\">Restricted</span></h2><span data-i18n=\\\"choose_hero.restricted_to_certain_heroes\\\" class=\\\"spr\\\">Only certain heroes can play this level.</span></div><button id=\\\"restricted-hero-button\\\" data-i18n=\\\"inventory.restricted_title\\\" class=\\\"btn disabled btn-illustrated\\\">Restricted</button>\");\n}\nelse if ( visibleHero.purchasable)\n{\nbuf.push(\"<div id=\\\"purchasable-hero-explanation\\\"><h2 data-i18n=\\\"choose_hero.available_for_purchase\\\">Available for Purchase</h2></div><button id=\\\"purchase-hero-button\\\" class=\\\"btn unlock-button\\\"><span data-i18n=\\\"play.unlock\\\" class=\\\"spr\\\">Unlock</span>\");\nif(!visibleHero.get('gems')) {\nconsole.error('Huh, we loaded the hero with no gem cost.');\nvisibleHero.set('gems', {ninja: 400, librarian: 630, samurai: 1000, trapper: 1400, \"potion-master\": 1800, \"forest-archer\": 2500, sorcerer: 3400, raiser: 4600, necromancer: 6300, pixie: 8500, goliath: 12000, guardian: 16000, \"dark-wizard\": 21000, assassin: 29000}[visibleHero.get('slug')] || 99999);\n}\nbuf.push(\"<span>\" + (jade.escape(null == (jade.interp = visibleHero.get('gems')) ? \"\" : jade.interp)) + \"</span><span class=\\\"gem gem-20\\\"></span></button>\");\n}\nelse if ( visibleHero.locked)\n{\nbuf.push(\"<div id=\\\"locked-hero-explanation\\\"><h2><span>\" + (jade.escape(null == (jade.interp = visibleHero.name) ? \"\" : jade.interp)) + \"</span><span data-i18n=\\\"play.locked\\\" class=\\\"spl\\\">Locked</span></h2><span data-i18n=\\\"choose_hero.level_to_unlock\\\" class=\\\"spr\\\">Level to unlock:</span><strong>\" + (jade.escape(null == (jade.interp = visibleHero.unlockLevelName || '???') ? \"\" : jade.interp)) + \"</strong></div>\");\n}\nelse if ( visibleHero.loaded)\n{\nbuf.push(\"<div class=\\\"form\\\"><div class=\\\"form-group select-group\\\"><span data-i18n=\\\"choose_hero.programming_language_description\\\" class=\\\"help-block\\\">Which programming language do you want to use?</span><select id=\\\"option-code-language\\\" name=\\\"code-language\\\">\");\n// iterate codeLanguages\n;(function(){\n  var $$obj = codeLanguages;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var option = $$obj[$index];\n\nbuf.push(\"<option\" + (jade.attrs({ 'value':(option.id), 'selected':(codeLanguage === option.id) }, {\"value\":true,\"selected\":true})) + \">\" + (jade.escape(null == (jade.interp = option.name) ? \"\" : jade.interp)) + \"</option>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var option = $$obj[$index];\n\nbuf.push(\"<option\" + (jade.attrs({ 'value':(option.id), 'selected':(codeLanguage === option.id) }, {\"value\":true,\"selected\":true})) + \">\" + (jade.escape(null == (jade.interp = option.name) ? \"\" : jade.interp)) + \"</option>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</select></div></div><a\" + (jade.attrs({ 'id':('confirm-button'), 'data-i18n':(confirmButtonI18N) }, {\"data-i18n\":true})) + \"></a>\");\n}\n}\nbuf.push(\"</div>\");\nif ( !me.finishedAnyLevels() && serverConfig.showCodePlayAds)\n{\nbuf.push(\"<a href=\\\"https://lenovogamestate.com/\\\">\");\nvar url = \"/images/common/codeplay/NA_ChooseHeroPage_Yoga520_800x90.png\"\nif ( me.isFromUk())\n{\nurl = \"/images/common/codeplay/UK_ChooseHeroPage_Yoga510_800x90.png\"\n}\nbuf.push(\"<img\" + (jade.attrs({ 'id':('codeplay-choose-hero-ad'), 'src':(url) }, {\"src\":true})) + \"/></a>\");\n}\nbuf.push(\"</div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),gems = locals_.gems,itemCategories = locals_.itemCategories,itemCategoryNames = locals_.itemCategoryNames,itemCategoryCollections = locals_.itemCategoryCollections,me = locals_.me;buf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"><img src=\\\"/images/pages/play/modal/items-background.png\\\" draggable=\\\"false\\\" id=\\\"play-items-modal-bg\\\"/><img src=\\\"/images/pages/play/modal/items-background-narrow.png\\\" draggable=\\\"false\\\" id=\\\"play-items-modal-narrow-bg\\\"/><h1 data-i18n=\\\"play.items\\\" class=\\\"big-font\\\"></h1><div id=\\\"gems-count-container\\\"><span id=\\\"gems-count\\\" class=\\\"big-font\\\">\" + (jade.escape(null == (jade.interp = gems) ? \"\" : jade.interp)) + \"</span></div><div id=\\\"close-modal\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></div><ul class=\\\"nav nav-pills nav-stacked\\\">\");\n// iterate itemCategories\n;(function(){\n  var $$obj = itemCategories;\n  if ('number' == typeof $$obj.length) {\n\n    for (var index = 0, $$l = $$obj.length; index < $$l; index++) {\n      var category = $$obj[index];\n\nbuf.push(\"<li\" + (jade.attrs({ 'id':(category + '-tab'), \"class\": [(index ? \"\" : \"active\")] }, {\"class\":true,\"id\":true})) + \"><a\" + (jade.attrs({ 'href':(\"#item-category-\" + category), 'data-toggle':(\"tab\"), \"class\": [('one-line')] }, {\"href\":true,\"data-toggle\":true})) + \"><img\" + (jade.attrs({ 'src':(\"/images/pages/play/modal/item-icon-\"+category+\".png\"), 'draggable':(\"false\"), \"class\": [('tab-icon')] }, {\"src\":true,\"draggable\":true})) + \"/><span class=\\\"big-font\\\">\" + (jade.escape(null == (jade.interp = itemCategoryNames[index]) ? \"\" : jade.interp)) + \"</span></a></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var index in $$obj) {\n      $$l++;      var category = $$obj[index];\n\nbuf.push(\"<li\" + (jade.attrs({ 'id':(category + '-tab'), \"class\": [(index ? \"\" : \"active\")] }, {\"class\":true,\"id\":true})) + \"><a\" + (jade.attrs({ 'href':(\"#item-category-\" + category), 'data-toggle':(\"tab\"), \"class\": [('one-line')] }, {\"href\":true,\"data-toggle\":true})) + \"><img\" + (jade.attrs({ 'src':(\"/images/pages/play/modal/item-icon-\"+category+\".png\"), 'draggable':(\"false\"), \"class\": [('tab-icon')] }, {\"src\":true,\"draggable\":true})) + \"/><span class=\\\"big-font\\\">\" + (jade.escape(null == (jade.interp = itemCategoryNames[index]) ? \"\" : jade.interp)) + \"</span></a></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul><div id=\\\"hero-type-select\\\" data-toggle=\\\"buttons\\\" class=\\\"btn-group\\\"><label id=\\\"all\\\" class=\\\"btn active\\\"><input type=\\\"radio\\\" name=\\\"hero-class-select\\\" autocomplete=\\\"off\\\"/><span data-i18n=\\\"editor.level_tab_thangs_all\\\"></span></label><label id=\\\"warrior\\\" class=\\\"btn\\\"><input type=\\\"radio\\\" name=\\\"hero-class-select\\\" autocomplete=\\\"off\\\"/><span data-i18n=\\\"general.warrior\\\"></span></label><label id=\\\"ranger\\\" class=\\\"btn\\\"><input type=\\\"radio\\\" name=\\\"hero-class-select\\\" autocomplete=\\\"off\\\"/><span data-i18n=\\\"general.ranger\\\"></span></label><label id=\\\"wizard\\\" class=\\\"btn\\\"><input type=\\\"radio\\\" name=\\\"hero-class-select\\\" autocomplete=\\\"off\\\"/><span data-i18n=\\\"general.wizard\\\"></span></label></div><div class=\\\"tab-content\\\">\");\n// iterate itemCategories\n;(function(){\n  var $$obj = itemCategories;\n  if ('number' == typeof $$obj.length) {\n\n    for (var index = 0, $$l = $$obj.length; index < $$l; index++) {\n      var category = $$obj[index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'id':(\"item-category-\" + category), \"class\": [('tab-pane'),(index ? \"\" : \"active\")] }, {\"class\":true,\"id\":true})) + \"><div class=\\\"nano\\\"><div class=\\\"nano-content\\\">\");\n// iterate itemCategoryCollections[category].models\n;(function(){\n  var $$obj = itemCategoryCollections[category].models;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nvar hidden = item.comingSoon && !me.isAdmin()\nhidden = hidden || (!item.get('gems') && !item.owned)\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-id':(item.id), \"class\": [(\"item \" + item.get('heroClass') + (hidden ? \" hide\" : \"\") + (item.silhouetted && !item.owned ? \" silhouetted\" : \"\"))] }, {\"class\":true,\"data-item-id\":true})) + \">\");\nif ( item.silhouetted && !item.owned)\n{\nbuf.push(\"<span class=\\\"glyphicon glyphicon-lock bolder\\\"></span><span class=\\\"glyphicon glyphicon-lock\\\"></span><img draggable=\\\"false\\\" class=\\\"item-silhouette\\\"/>\");\nif ( item.level)\n{\nbuf.push(\"<div class=\\\"required-level\\\"><div data-i18n=\\\"general.player_level\\\"></div><div>\" + (jade.escape(null == (jade.interp = item.level) ? \"\" : jade.interp)) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<strong class=\\\"big-font\\\">\" + (jade.escape(null == (jade.interp = item.name) ? \"\" : jade.interp)) + \"</strong><img draggable=\\\"false\\\" class=\\\"item-img\\\"/>\");\n}\nif ( item.owned)\n{\nbuf.push(\"<span data-i18n=\\\"play.owned\\\" class=\\\"big-font owned\\\"></span>\");\n}\nelse if ( item.silhouetted)\n{\nbuf.push(\"<span data-i18n=\\\"play.locked\\\" class=\\\"big-font locked\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"cost\\\"><img src=\\\"/images/common/gem.png\\\" draggable=\\\"false\\\"/><span class=\\\"big-font\\\">\" + (jade.escape(null == (jade.interp = item.get('gems')) ? \"\" : jade.interp)) + \"</span></span>\");\nif ( item.unequippable)\n{\nbuf.push(\"<span class=\\\"big-font unequippable\\\">\" + (jade.escape(null == (jade.interp = item.get('heroClass')) ? \"\" : jade.interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<button\" + (jade.attrs({ 'data-i18n':(\"play.unlock\"), 'data-item-id':(item.id), \"class\": [('btn'),('unlock-button'),('big-font')] }, {\"data-i18n\":true,\"data-item-id\":true})) + \"></button>\");\n}\n}\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nvar hidden = item.comingSoon && !me.isAdmin()\nhidden = hidden || (!item.get('gems') && !item.owned)\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-id':(item.id), \"class\": [(\"item \" + item.get('heroClass') + (hidden ? \" hide\" : \"\") + (item.silhouetted && !item.owned ? \" silhouetted\" : \"\"))] }, {\"class\":true,\"data-item-id\":true})) + \">\");\nif ( item.silhouetted && !item.owned)\n{\nbuf.push(\"<span class=\\\"glyphicon glyphicon-lock bolder\\\"></span><span class=\\\"glyphicon glyphicon-lock\\\"></span><img draggable=\\\"false\\\" class=\\\"item-silhouette\\\"/>\");\nif ( item.level)\n{\nbuf.push(\"<div class=\\\"required-level\\\"><div data-i18n=\\\"general.player_level\\\"></div><div>\" + (jade.escape(null == (jade.interp = item.level) ? \"\" : jade.interp)) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<strong class=\\\"big-font\\\">\" + (jade.escape(null == (jade.interp = item.name) ? \"\" : jade.interp)) + \"</strong><img draggable=\\\"false\\\" class=\\\"item-img\\\"/>\");\n}\nif ( item.owned)\n{\nbuf.push(\"<span data-i18n=\\\"play.owned\\\" class=\\\"big-font owned\\\"></span>\");\n}\nelse if ( item.silhouetted)\n{\nbuf.push(\"<span data-i18n=\\\"play.locked\\\" class=\\\"big-font locked\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"cost\\\"><img src=\\\"/images/common/gem.png\\\" draggable=\\\"false\\\"/><span class=\\\"big-font\\\">\" + (jade.escape(null == (jade.interp = item.get('gems')) ? \"\" : jade.interp)) + \"</span></span>\");\nif ( item.unequippable)\n{\nbuf.push(\"<span class=\\\"big-font unequippable\\\">\" + (jade.escape(null == (jade.interp = item.get('heroClass')) ? \"\" : jade.interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<button\" + (jade.attrs({ 'data-i18n':(\"play.unlock\"), 'data-item-id':(item.id), \"class\": [('btn'),('unlock-button'),('big-font')] }, {\"data-i18n\":true,\"data-item-id\":true})) + \"></button>\");\n}\n}\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"<div class=\\\"clearfix\\\"></div></div></div></div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var index in $$obj) {\n      $$l++;      var category = $$obj[index];\n\nbuf.push(\"<div\" + (jade.attrs({ 'id':(\"item-category-\" + category), \"class\": [('tab-pane'),(index ? \"\" : \"active\")] }, {\"class\":true,\"id\":true})) + \"><div class=\\\"nano\\\"><div class=\\\"nano-content\\\">\");\n// iterate itemCategoryCollections[category].models\n;(function(){\n  var $$obj = itemCategoryCollections[category].models;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nvar hidden = item.comingSoon && !me.isAdmin()\nhidden = hidden || (!item.get('gems') && !item.owned)\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-id':(item.id), \"class\": [(\"item \" + item.get('heroClass') + (hidden ? \" hide\" : \"\") + (item.silhouetted && !item.owned ? \" silhouetted\" : \"\"))] }, {\"class\":true,\"data-item-id\":true})) + \">\");\nif ( item.silhouetted && !item.owned)\n{\nbuf.push(\"<span class=\\\"glyphicon glyphicon-lock bolder\\\"></span><span class=\\\"glyphicon glyphicon-lock\\\"></span><img draggable=\\\"false\\\" class=\\\"item-silhouette\\\"/>\");\nif ( item.level)\n{\nbuf.push(\"<div class=\\\"required-level\\\"><div data-i18n=\\\"general.player_level\\\"></div><div>\" + (jade.escape(null == (jade.interp = item.level) ? \"\" : jade.interp)) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<strong class=\\\"big-font\\\">\" + (jade.escape(null == (jade.interp = item.name) ? \"\" : jade.interp)) + \"</strong><img draggable=\\\"false\\\" class=\\\"item-img\\\"/>\");\n}\nif ( item.owned)\n{\nbuf.push(\"<span data-i18n=\\\"play.owned\\\" class=\\\"big-font owned\\\"></span>\");\n}\nelse if ( item.silhouetted)\n{\nbuf.push(\"<span data-i18n=\\\"play.locked\\\" class=\\\"big-font locked\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"cost\\\"><img src=\\\"/images/common/gem.png\\\" draggable=\\\"false\\\"/><span class=\\\"big-font\\\">\" + (jade.escape(null == (jade.interp = item.get('gems')) ? \"\" : jade.interp)) + \"</span></span>\");\nif ( item.unequippable)\n{\nbuf.push(\"<span class=\\\"big-font unequippable\\\">\" + (jade.escape(null == (jade.interp = item.get('heroClass')) ? \"\" : jade.interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<button\" + (jade.attrs({ 'data-i18n':(\"play.unlock\"), 'data-item-id':(item.id), \"class\": [('btn'),('unlock-button'),('big-font')] }, {\"data-i18n\":true,\"data-item-id\":true})) + \"></button>\");\n}\n}\nbuf.push(\"</div>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nvar hidden = item.comingSoon && !me.isAdmin()\nhidden = hidden || (!item.get('gems') && !item.owned)\nbuf.push(\"<div\" + (jade.attrs({ 'data-item-id':(item.id), \"class\": [(\"item \" + item.get('heroClass') + (hidden ? \" hide\" : \"\") + (item.silhouetted && !item.owned ? \" silhouetted\" : \"\"))] }, {\"class\":true,\"data-item-id\":true})) + \">\");\nif ( item.silhouetted && !item.owned)\n{\nbuf.push(\"<span class=\\\"glyphicon glyphicon-lock bolder\\\"></span><span class=\\\"glyphicon glyphicon-lock\\\"></span><img draggable=\\\"false\\\" class=\\\"item-silhouette\\\"/>\");\nif ( item.level)\n{\nbuf.push(\"<div class=\\\"required-level\\\"><div data-i18n=\\\"general.player_level\\\"></div><div>\" + (jade.escape(null == (jade.interp = item.level) ? \"\" : jade.interp)) + \"</div></div>\");\n}\n}\nelse\n{\nbuf.push(\"<strong class=\\\"big-font\\\">\" + (jade.escape(null == (jade.interp = item.name) ? \"\" : jade.interp)) + \"</strong><img draggable=\\\"false\\\" class=\\\"item-img\\\"/>\");\n}\nif ( item.owned)\n{\nbuf.push(\"<span data-i18n=\\\"play.owned\\\" class=\\\"big-font owned\\\"></span>\");\n}\nelse if ( item.silhouetted)\n{\nbuf.push(\"<span data-i18n=\\\"play.locked\\\" class=\\\"big-font locked\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"cost\\\"><img src=\\\"/images/common/gem.png\\\" draggable=\\\"false\\\"/><span class=\\\"big-font\\\">\" + (jade.escape(null == (jade.interp = item.get('gems')) ? \"\" : jade.interp)) + \"</span></span>\");\nif ( item.unequippable)\n{\nbuf.push(\"<span class=\\\"big-font unequippable\\\">\" + (jade.escape(null == (jade.interp = item.get('heroClass')) ? \"\" : jade.interp)) + \"</span>\");\n}\nelse\n{\nbuf.push(\"<button\" + (jade.attrs({ 'data-i18n':(\"play.unlock\"), 'data-item-id':(item.id), \"class\": [('btn'),('unlock-button'),('big-font')] }, {\"data-i18n\":true,\"data-item-id\":true})) + \"></button>\");\n}\n}\nbuf.push(\"</div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"<div class=\\\"clearfix\\\"></div></div></div></div>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div><div id=\\\"item-details-view\\\"></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view;buf.push(\"<div class=\\\"modal-dialog game\\\"><div class=\\\"background-wrapper\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nbuf.push(\"<h3 data-i18n=\\\"play.settings\\\">Settings</h3></div><div class=\\\"modal-body\\\"><p>TODO: show all dem settings</p></div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-footer\\\"><button type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" data-i18n=\\\"modal.okay\\\" class=\\\"btn btn-primary\\\">Okay</button></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,i18n = locals_.i18n,poll = locals_.poll,marked = locals_.marked,me = locals_.me;buf.push(\"<div class=\\\"modal-dialog game\\\"><div class=\\\"background-wrapper\\\"><div class=\\\"modal-content\\\"><div class=\\\"modal-header\\\">\");\nif ( view.closeButton)\n{\nbuf.push(\"<div type=\\\"button\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" class=\\\"button close\\\">&times;</div>\");\n}\nbuf.push(\"<h1><span>\" + (jade.escape(null == (jade.interp = i18n(poll.attributes, \"name\")) ? \"\" : jade.interp)) + \"</span></h1></div><div class=\\\"modal-body\\\"><div class=\\\"description\\\">\");\nif ( poll.get(\"description\"))\n{\nbuf.push(\"<div>\" + (null == (jade.interp = marked(i18n(poll.attributes, \"description\"))) ? \"\" : jade.interp) + \"</div>\");\n}\nelse\n{\nbuf.push(\"<div>&nbsp;</div>\");\n}\nbuf.push(\"</div><div class=\\\"answers-container-wrapper\\\"><div class=\\\"answers-container\\\"><table class=\\\"table table-hover\\\">\");\n// iterate poll.get(\"answers\") || []\n;(function(){\n  var $$obj = poll.get(\"answers\") || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var answer = $$obj[$index];\n\nbuf.push(\"<tr\" + (jade.attrs({ 'data-answer':(answer.key), \"class\": [(\"answer\")] }, {\"class\":true,\"data-answer\":true})) + \"><td>\" + (null == (jade.interp = marked(i18n(answer, \"text\"))) ? \"\" : jade.interp) + \"</td><td class=\\\"graph-cell\\\"><div class=\\\"progress\\\"><div class=\\\"progress-bar\\\"></div></div></td><td class=\\\"votes-cell\\\"><span class=\\\"badge vote-percentage\\\"></span></td>\");\nif ( me.isAdmin())\n{\nbuf.push(\"<td class=\\\"votes-cell\\\"><span class=\\\"badge vote-count\\\"></span></td>\");\n}\nbuf.push(\"</tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var answer = $$obj[$index];\n\nbuf.push(\"<tr\" + (jade.attrs({ 'data-answer':(answer.key), \"class\": [(\"answer\")] }, {\"class\":true,\"data-answer\":true})) + \"><td>\" + (null == (jade.interp = marked(i18n(answer, \"text\"))) ? \"\" : jade.interp) + \"</td><td class=\\\"graph-cell\\\"><div class=\\\"progress\\\"><div class=\\\"progress-bar\\\"></div></div></td><td class=\\\"votes-cell\\\"><span class=\\\"badge vote-percentage\\\"></span></td>\");\nif ( me.isAdmin())\n{\nbuf.push(\"<td class=\\\"votes-cell\\\"><span class=\\\"badge vote-count\\\"></span></td>\");\n}\nbuf.push(\"</tr>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</table></div></div><div class=\\\"random-gems-container-wrapper\\\"><div class=\\\"random-gems-container\\\"><code class=\\\"random-gems-code\\\"><span>randomNumber = Math.random()                   </span><span id=\\\"random-number-comment\\\" class=\\\"comment\\\"></span></code><code class=\\\"random-gems-code\\\"><span>gems = Math.ceil(2 * randomNumber * me.level)  </span><span id=\\\"random-gems-comment\\\" class=\\\"comment\\\"></span></code><code class=\\\"random-gems-code\\\"><span>me.gems += gems                                </span><span id=\\\"total-gems-comment\\\" class=\\\"comment\\\"></span></code></div></div></div><div class=\\\"modal-body wait secret\\\"><h3>Reticulating Splines...</h3><div class=\\\"progress progress-striped active\\\"><div class=\\\"progress-bar\\\"></div></div></div><div class=\\\"modal-footer\\\"><button data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\" data-i18n=\\\"play_level.done\\\" class=\\\"btn btn-illustrated btn-lg done-button\\\">Done</button></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<div class=\\\"modal-dialog\\\"><div class=\\\"modal-content\\\"><img src=\\\"/images/pages/play/modal/parental_prompt_modal_background.png\\\" class=\\\"background-img\\\"/><img src=\\\"/images/pages/play/modal/parental_nudge_wizard.png\\\" class=\\\"wizard-img\\\"/><div class=\\\"blurb-container\\\"> <h1 data-i18n=\\\"share_progress_modal.title\\\"></h1><p data-i18n=\\\"share_progress_modal.blurb\\\"></p><div class=\\\"container-fluid send-container\\\"><div class=\\\"row\\\"><div class=\\\"col-xs-12 email-form\\\"><p data-i18n=\\\"share_progress_modal.form_blurb\\\"></p><div><label data-i18n=\\\"share_progress_modal.form_label\\\"></label><input type=\\\"email\\\" data-i18n=\\\"[placeholder]share_progress_modal.placeholder\\\" class=\\\"form-control email-input\\\"/></div></div></div><div class=\\\"row\\\"><div class=\\\"col-xs-8\\\"><div data-i18n=\\\"share_progress_modal.email_invalid\\\" class=\\\"email-invalid\\\"></div></div><div class=\\\"col-xs-4 text-right\\\"><button data-i18n=\\\"common.send\\\" class=\\\"btn btn-illustrated send-btn\\\"></button></div></div><div class=\\\"row continue-container\\\"><div class=\\\"col-xs-12 text-left\\\"><a data-i18n=\\\"common.continue\\\" class=\\\"continue-link\\\"></a></div></div></div></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),view = locals_.view,features = locals_.features,document = locals_.document,me = locals_.me;if ( view.showAds())\n{\nbuf.push(\"<!-- TODO: loading this multiple times yields script error:--><!-- Uncaught TagError: adsbygoogle.push() error: All ins elements in the DOM with class=adsbygoogle already have ads in them.--><div class=\\\"ad-container\\\"><script async=\\\"async\\\" src=\\\"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\\\"></script><ins style=\\\"display:inline-block;width:728px;height:90px\\\" data-ad-client=\\\"ca-pub-6640930638193614\\\" data-ad-slot=\\\"5527096883\\\" class=\\\"adsbygoogle\\\"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});\\n</script></div>\");\n}\nbuf.push(\"<div class=\\\"game-container\\\"><div id=\\\"level-loading-view\\\"></div><div class=\\\"level-content\\\"><div id=\\\"control-bar-view\\\"></div><div id=\\\"fullscreen-editor-background-screen\\\" title=\\\"Click to minimize the code editor\\\"></div><div id=\\\"code-area\\\"><div id=\\\"code-area-gradient\\\" class=\\\"gradient\\\"></div><div id=\\\"tome-view\\\"></div></div><div id=\\\"spell-palette-view\\\"></div><div id=\\\"problem-alert-view\\\"></div><div id=\\\"game-area\\\"><div id=\\\"canvas-wrapper\\\"><canvas width=\\\"924\\\" height=\\\"589\\\" id=\\\"webgl-surface\\\"></canvas><canvas width=\\\"924\\\" height=\\\"589\\\" id=\\\"normal-surface\\\"></canvas><div id=\\\"web-surface-view\\\"></div><div id=\\\"ascii-surface\\\"></div><div id=\\\"canvas-left-gradient\\\" class=\\\"gradient\\\"></div><div id=\\\"canvas-top-gradient\\\" class=\\\"gradient\\\"></div><div id=\\\"goals-view\\\"></div></div><div id=\\\"level-flags-view\\\"></div><div id=\\\"gold-view\\\"></div><div id=\\\"level-chat-view\\\"></div><div id=\\\"multiplayer-status-view\\\"></div><div id=\\\"duel-stats-view\\\"></div><div id=\\\"playback-view\\\"></div><div id=\\\"thang-hud\\\"></div><div id=\\\"level-dialogue-view\\\"></div></div>\");\nif ( features.codePlay)\n{\nbuf.push(\"<a\" + (jade.attrs({ 'href':(document.location.protocol+\"//lenovogamestate.com/pages/products/\") }, {\"href\":true})) + \">\");\nvar url = \"/images/common/codeplay/NA_InLevelPage_Y700_1132X283_ingameProduct.png\"\nif ( me.isFromUk())\n{\nurl = \"/images/common/codeplay/UK_InLevelPage_Y700_1132X283_ingameProduct.png\"\n}\nbuf.push(\"<img\" + (jade.attrs({ 'id':('codeplay-product-banner'), 'src':(url) }, {\"src\":true})) + \"/></a>\");\n}\nbuf.push(\"<button id=\\\"stop-real-time-playback-button\\\" title=\\\"Stop real-time playback\\\" class=\\\"btn btn-lg btn-warning banner header-font\\\">\");\nif ( view.level && view.level.isType('game-dev'))\n{\nbuf.push(\"<span data-i18n=\\\"play_level.edit_level\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<span data-i18n=\\\"play_level.skip\\\"></span>\");\n}\nbuf.push(\"</button><div id=\\\"how-to-play-game-dev-panel\\\" class=\\\"panel panel-default hide style-flat\\\"><div class=\\\"panel-heading\\\"><h3 class=\\\"panel-title\\\"><span data-i18n=\\\"play_level.directions\\\"></span>:</h3></div><div class=\\\"panel-body\\\">\" + (null == (jade.interp = view.howToPlayText) ? \"\" : jade.interp) + \"</div></div><div class=\\\"hints-view hide\\\"></div></div><div id=\\\"level-footer-shadow\\\"></div><div id=\\\"level-footer-background\\\"></div>\");\nif ( !me.get('anonymous') && !me.isStudent() && !features.codePlay)\n{\nbuf.push(\"<div\" + (jade.attrs({ 'id':('play-footer'), \"class\": [(me.isPremium() ? \"premium\" : \"\")] }, {\"class\":true})) + \"><p class=\\\"footer-link-text picoctf-hide\\\"><a title=\\\"Send CodeCombat a message\\\" tabindex=\\\"-1\\\" data-i18n=\\\"nav.contact\\\" class=\\\"contact-link\\\"></a></p></div>\");\n}\nbuf.push(\"</div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nbuf.push(\"<div id=\\\"level-loading-view\\\"></div><div class=\\\"level-content\\\"><div id=\\\"control-bar-view\\\"></div><div id=\\\"canvas-wrapper\\\"><canvas width=\\\"924\\\" height=\\\"589\\\" id=\\\"webgl-surface\\\"></canvas><canvas width=\\\"924\\\" height=\\\"589\\\" id=\\\"normal-surface\\\"></canvas><div id=\\\"canvas-left-gradient\\\" class=\\\"gradient\\\"></div><div id=\\\"canvas-top-gradient\\\" class=\\\"gradient\\\"></div></div><div id=\\\"gold-view\\\" class=\\\"secret expanded\\\"></div><div id=\\\"level-chat-view\\\"></div><div id=\\\"duel-stats-view\\\"></div><div id=\\\"playback-view\\\"></div><div id=\\\"thang-hud\\\"></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","RootView = require 'views/core/RootView'\r\ntemplate = require 'templates/play/campaign-view'\r\nLevelSession = require 'models/LevelSession'\r\nEarnedAchievement = require 'models/EarnedAchievement'\r\nCocoCollection = require 'collections/CocoCollection'\r\nCampaign = require 'models/Campaign'\r\nAudioPlayer = require 'lib/AudioPlayer'\r\nLevelSetupManager = require 'lib/LevelSetupManager'\r\nThangType = require 'models/ThangType'\r\nMusicPlayer = require 'lib/surface/MusicPlayer'\r\nstorage = require 'core/storage'\r\nCreateAccountModal = require 'views/core/CreateAccountModal'\r\nSubscribeModal = require 'views/core/SubscribeModal'\r\nLeaderboardModal = require 'views/play/modal/LeaderboardModal'\r\nLevel = require 'models/Level'\r\nutils = require 'core/utils'\r\nrequire 'vendor/three'\r\nParticleMan = require 'core/ParticleMan'\r\nShareProgressModal = require 'views/play/modal/ShareProgressModal'\r\nUserPollsRecord = require 'models/UserPollsRecord'\r\nPoll = require 'models/Poll'\r\nPollModal = require 'views/play/modal/PollModal'\r\nCourseInstance = require 'models/CourseInstance'\r\n\r\nrequire 'game-libraries'\r\n\r\nclass LevelSessionsCollection extends CocoCollection\r\n  url: ''\r\n  model: LevelSession\r\n\r\n  constructor: (model) ->\r\n    super()\r\n    @url = \"/db/user/#{me.id}/level.sessions?project=state.complete,levelID,state.difficulty,playtime\"\r\n\r\nclass CampaignsCollection extends CocoCollection\r\n  # We don't send all of levels, just the parts needed in countLevels\r\n  url: '/db/campaign/-/overworld?project=slug,adjacentCampaigns,name,fullName,description,i18n,color,levels'\r\n  model: Campaign\r\n\r\nmodule.exports = class CampaignView extends RootView\r\n  id: 'campaign-view'\r\n  template: template\r\n\r\n  subscriptions:\r\n    'subscribe-modal:subscribed': 'onSubscribed'\r\n\r\n  events:\r\n    'click .map-background': 'onClickMap'\r\n    'click .level a': 'onClickLevel'\r\n    'dblclick .level a': 'onDoubleClickLevel'\r\n    'click .level-info-container .start-level': 'onClickStartLevel'\r\n    'click .level-info-container .view-solutions': 'onClickViewSolutions'\r\n    'click .level-info-container .course-version button': 'onClickCourseVersion'\r\n    'click #volume-button': 'onToggleVolume'\r\n    'click #back-button': 'onClickBack'\r\n    'click #clear-storage-button': 'onClickClearStorage'\r\n    'click .portal .campaign': 'onClickPortalCampaign'\r\n    'click .portal .beta-campaign': 'onClickPortalCampaign'\r\n    'click a .campaign-switch': 'onClickCampaignSwitch'\r\n    'mouseenter .portals': 'onMouseEnterPortals'\r\n    'mouseleave .portals': 'onMouseLeavePortals'\r\n    'mousemove .portals': 'onMouseMovePortals'\r\n    'click .poll': 'showPoll'\r\n  shortcuts:\r\n    'shift+s': 'onShiftS'\r\n\r\n  constructor: (options, @terrain) ->\r\n    super options\r\n    @terrain = 'picoctf' if window.serverConfig.picoCTF\r\n    @editorMode = options?.editorMode\r\n    @requiresSubscription = not me.isPremium()\r\n    if @editorMode\r\n      @terrain ?= 'dungeon'\r\n    @levelStatusMap = {}\r\n    @levelPlayCountMap = {}\r\n    @levelDifficultyMap = {}\r\n\r\n    if utils.getQueryVariable('hour_of_code')\r\n      me.set('hourOfCode', true)\r\n      me.patch()\r\n      pixelCode = if @terrain is 'game-dev-hoc' then 'code_combat_gamedev' else 'code_combat'\r\n      $('body').append($(\"<img src='https://code.org/api/hour/begin_#{pixelCode}.png' style='visibility: hidden;'>\"))\r\n\r\n    # HoC: Fake us up a \"mode\" for HeroVictoryModal to return hero without levels realizing they're in a copycat campaign, or clear it if we started playing.\r\n    shouldReturnToGameDevHoc = @terrain is 'game-dev-hoc'\r\n    storage.save 'should-return-to-game-dev-hoc', shouldReturnToGameDevHoc\r\n\r\n    if window.serverConfig.picoCTF\r\n      @supermodel.addRequestResource(url: '/picoctf/problems', success: (@picoCTFProblems) =>).load()\r\n    else\r\n      unless @editorMode\r\n        @sessions = @supermodel.loadCollection(new LevelSessionsCollection(), 'your_sessions', {cache: false}, 0).model\r\n        @listenToOnce @sessions, 'sync', @onSessionsLoaded\r\n      unless @terrain\r\n        @campaigns = @supermodel.loadCollection(new CampaignsCollection(), 'campaigns', null, 1).model\r\n        @listenToOnce @campaigns, 'sync', @onCampaignsLoaded\r\n        return\r\n\r\n    @campaign = new Campaign({_id:@terrain})\r\n    @campaign = @supermodel.loadModel(@campaign).model\r\n\r\n    # Temporary attempt to make sure all earned rewards are accounted for. Figure out a better solution...\r\n    @earnedAchievements = new CocoCollection([], {url: '/db/earned_achievement', model:EarnedAchievement, project: ['earnedRewards']})\r\n    @listenToOnce @earnedAchievements, 'sync', ->\r\n      earned = me.get('earned')\r\n      for m in @earnedAchievements.models\r\n        continue unless loadedEarned = m.get('earnedRewards')\r\n        for group in ['heroes', 'levels', 'items']\r\n          continue unless loadedEarned[group]\r\n          for reward in loadedEarned[group]\r\n            if reward not in earned[group]\r\n              console.warn 'Filling in a gap for reward', group, reward\r\n              earned[group].push(reward)\r\n\r\n    @supermodel.loadCollection(@earnedAchievements, 'achievements', {cache: false})\r\n\r\n    @listenToOnce @campaign, 'sync', @getLevelPlayCounts\r\n    $(window).on 'resize', @onWindowResize\r\n    @probablyCachedMusic = storage.load(\"loaded-menu-music\")\r\n    musicDelay = if @probablyCachedMusic then 1000 else 10000\r\n    @playMusicTimeout = _.delay (=> @playMusic() unless @destroyed), musicDelay\r\n    @hadEverChosenHero = me.get('heroConfig')?.thangType\r\n    @listenTo me, 'change:purchased', -> @renderSelectors('#gems-count')\r\n    @listenTo me, 'change:spent', -> @renderSelectors('#gems-count')\r\n    @listenTo me, 'change:earned', -> @renderSelectors('#gems-count')\r\n    @listenTo me, 'change:heroConfig', -> @updateHero()\r\n    window.tracker?.trackEvent 'Loaded World Map', category: 'World Map', label: @terrain\r\n\r\n  destroy: ->\r\n    @setupManager?.destroy()\r\n    @$el.find('.ui-draggable').off().draggable 'destroy'\r\n    $(window).off 'resize', @onWindowResize\r\n    if ambientSound = @ambientSound\r\n      # Doesn't seem to work; stops immediately.\r\n      createjs.Tween.get(ambientSound).to({volume: 0.0}, 1500).call -> ambientSound.stop()\r\n    @musicPlayer?.destroy()\r\n    clearTimeout @playMusicTimeout\r\n    @particleMan?.destroy()\r\n    clearInterval @portalScrollInterval\r\n    super()\r\n\r\n  showLoading: ($el) ->\r\n    unless @campaign\r\n      @$el.find('.game-controls, .user-status').addClass 'hidden'\r\n      @$el.find('.portal .campaign-name span').text $.i18n.t 'common.loading'\r\n\r\n  hideLoading: ->\r\n    unless @campaign\r\n      @$el.find('.game-controls, .user-status').removeClass 'hidden'\r\n\r\n  getLevelPlayCounts: ->\r\n    return unless me.isAdmin()\r\n    return  # TODO: get rid of all this? It's redundant with new campaign editor analytics, unless we want to show player counts on leaderboards buttons.\r\n    success = (levelPlayCounts) =>\r\n      return if @destroyed\r\n      for level in levelPlayCounts\r\n        @levelPlayCountMap[level._id] = playtime: level.playtime, sessions: level.sessions\r\n      @render() if @fullyRendered\r\n\r\n    levelSlugs = (level.slug for levelID, level of @campaign.get 'levels')\r\n    levelPlayCountsRequest = @supermodel.addRequestResource 'play_counts', {\r\n      url: '/db/level/-/play_counts'\r\n      data: {ids: levelSlugs}\r\n      method: 'POST'\r\n      success: success\r\n    }, 0\r\n    levelPlayCountsRequest.load()\r\n\r\n  onLoaded: ->\r\n    return if @fullyRendered\r\n    @fullyRendered = true\r\n    @render()\r\n    @preloadTopHeroes() unless me.get('heroConfig')?.thangType\r\n    @$el.find('#campaign-status').delay(4000).animate({top: \"-=58\"}, 1000) unless @terrain is 'dungeon'\r\n    if not me.get('hourOfCode') and @terrain\r\n      if me.get('anonymous') and me.get('lastLevel') is 'shadow-guard' and me.level() < 4\r\n        @openModalView new CreateAccountModal supermodel: @supermodel, showSignupRationale: true\r\n      else if me.get('name') and me.get('lastLevel') in ['forgetful-gemsmith', 'signs-and-portents'] and\r\n      me.level() < 5 and not (me.get('ageRange') in ['18-24', '25-34', '35-44', '45-100']) and\r\n      not storage.load('sent-parent-email') and not me.isPremium()\r\n        @openModalView new ShareProgressModal()\r\n\r\n  setCampaign: (@campaign) ->\r\n    @render()\r\n\r\n  onSubscribed: ->\r\n    @requiresSubscription = false\r\n    @render()\r\n\r\n  getRenderData: (context={}) ->\r\n    context = super(context)\r\n    context.campaign = @campaign\r\n    context.levels = _.values($.extend true, {}, @campaign?.get('levels') ? {})\r\n    if me.level() < 12 and @terrain is 'dungeon' and not @editorMode\r\n      reject = if me.getFourthLevelGroup() is 'signs-and-portents' then 'forgetful-gemsmith' else 'signs-and-portents'\r\n      context.levels = _.reject context.levels, slug: reject\r\n    if features.freeOnly\r\n      context.levels = _.reject context.levels, 'requiresSubscription'\r\n    @annotateLevels(context.levels)\r\n    count = @countLevels context.levels\r\n    context.levelsCompleted = count.completed\r\n    context.levelsTotal = count.total\r\n\r\n    @determineNextLevel context.levels if @sessions?.loaded or @editorMode\r\n    # put lower levels in last, so in the world map they layer over one another properly.\r\n    context.levels = (_.sortBy context.levels, (l) -> l.position.y).reverse()\r\n    @campaign.renderedLevels = context.levels if @campaign\r\n\r\n    context.levelStatusMap = @levelStatusMap\r\n    context.levelDifficultyMap = @levelDifficultyMap\r\n    context.levelPlayCountMap = @levelPlayCountMap\r\n    context.isIPadApp = application.isIPadApp\r\n    context.picoCTF = window.serverConfig.picoCTF\r\n    context.requiresSubscription = @requiresSubscription\r\n    context.editorMode = @editorMode\r\n    context.adjacentCampaigns = _.filter _.values(_.cloneDeep(@campaign?.get('adjacentCampaigns') or {})), (ac) =>\r\n      if ac.showIfUnlocked and not @editorMode\r\n        return false if _.isString(ac.showIfUnlocked) and ac.showIfUnlocked not in me.levels()\r\n        return false if _.isArray(ac.showIfUnlocked) and _.intersection(ac.showIfUnlocked, me.levels()).length <= 0\r\n      ac.name = utils.i18n ac, 'name'\r\n      styles = []\r\n      styles.push \"color: #{ac.color}\" if ac.color\r\n      styles.push \"transform: rotate(#{ac.rotation}deg)\" if ac.rotation\r\n      ac.position ?= { x: 10, y: 10 }\r\n      styles.push \"left: #{ac.position.x}%\"\r\n      styles.push \"top: #{ac.position.y}%\"\r\n      ac.style = styles.join('; ')\r\n      return true\r\n    context.marked = marked\r\n    context.i18n = utils.i18n\r\n\r\n    if @campaigns\r\n      context.campaigns = {}\r\n      for campaign in @campaigns.models when campaign.get('slug') isnt 'auditions'\r\n        context.campaigns[campaign.get('slug')] = campaign\r\n        if @sessions?.loaded\r\n          levels = _.values($.extend true, {}, campaign.get('levels') ? {})\r\n          count = @countLevels levels\r\n          campaign.levelsTotal = count.total\r\n          campaign.levelsCompleted = count.completed\r\n          if campaign.get('slug') is 'dungeon'\r\n            campaign.locked = false\r\n          else unless campaign.levelsTotal\r\n            campaign.locked = true\r\n          else\r\n            campaign.locked = true\r\n      for campaign in @campaigns.models\r\n        for acID, ac of campaign.get('adjacentCampaigns') ? {}\r\n          if _.isString(ac.showIfUnlocked)\r\n            _.find(@campaigns.models, id: acID)?.locked = false if ac.showIfUnlocked in me.levels()\r\n          else if _.isArray(ac.showIfUnlocked)\r\n            _.find(@campaigns.models, id: acID)?.locked = false if _.intersection(ac.showIfUnlocked, me.levels()).length > 0\r\n\r\n    context\r\n\r\n  afterRender: ->\r\n    super()\r\n    @onWindowResize()\r\n    unless application.isIPadApp\r\n      _.defer => @$el?.find('.game-controls .btn:not(.poll)').addClass('has-tooltip').tooltip()  # Have to defer or i18n doesn't take effect.\r\n      view = @\r\n      @$el.find('.level, .campaign-switch').addClass('has-tooltip').tooltip().each ->\r\n        return unless me.isAdmin() and view.editorMode\r\n        $(@).draggable().on 'dragstop', ->\r\n          bg = $('.map-background')\r\n          x = ($(@).offset().left - bg.offset().left + $(@).outerWidth() / 2) / bg.width()\r\n          y = 1 - ($(@).offset().top - bg.offset().top + $(@).outerHeight() / 2) / bg.height()\r\n          e = { position: { x: (100 * x), y: (100 * y) }, levelOriginal: $(@).data('level-original'), campaignID: $(@).data('campaign-id') }\r\n          view.trigger 'level-moved', e if e.levelOriginal\r\n          view.trigger 'adjacent-campaign-moved', e if e.campaignID\r\n    @updateVolume()\r\n    @updateHero()\r\n    unless window.currentModal or not @fullyRendered\r\n      @highlightElement '.level.next', delay: 500, duration: 60000, rotation: 0, sides: ['top']\r\n      @createLines() if @editorMode\r\n      @showLeaderboard @options.justBeatLevel?.get('slug') if @options.showLeaderboard# or true  # Testing\r\n    @applyCampaignStyles()\r\n    @testParticles()\r\n\r\n  onShiftS: (e) ->\r\n    @generateCompletionRates() if @editorMode\r\n\r\n  generateCompletionRates: ->\r\n    return unless me.isAdmin()\r\n    startDay = utils.getUTCDay -14\r\n    endDay = utils.getUTCDay -1\r\n    $(\".map-background\").css('background-image','none')\r\n    $(\".gradient\").remove()\r\n    $(\"#campaign-view\").css(\"background-color\", \"black\")\r\n    for level in @campaign?.renderedLevels ? []\r\n      $(\"div[data-level-slug=#{level.slug}] .level-kind\").text(\"Loading...\")\r\n      request = @supermodel.addRequestResource 'level_completions', {\r\n        url: '/db/analytics_perday/-/level_completions'\r\n        data: {startDay: startDay, endDay: endDay, slug: level.slug}\r\n        method: 'POST'\r\n        success: @onLevelCompletionsLoaded.bind(@, level)\r\n      }, 0\r\n      request.load()\r\n    \r\n  onLevelCompletionsLoaded: (level, data) ->\r\n    return if @destroyed\r\n    started = 0\r\n    finished = 0\r\n    for day in data\r\n      started += day.started ? 0\r\n      finished += day.finished ? 0\r\n    if started is 0\r\n      ratio = 0\r\n    else\r\n      ratio = finished / started\r\n    rateDisplay = (ratio * 100).toFixed(1) + '%'\r\n    $(\"div[data-level-slug=#{level.slug}] .level-kind\").html((if started < 1000 then started else (started / 1000).toFixed(1) + \"k\") + \"<br>\" + rateDisplay)\r\n    if ratio <= 0.5\r\n      color = \"rgb(255, 0, 0)\"\r\n    else if ratio > 0.5 and ratio <= 0.85\r\n      offset = (ratio - 0.5) / 0.35\r\n      color = \"rgb(255, #{Math.round(256 * offset)}, 0)\"\r\n    else if ratio > 0.85 and ratio <= 0.95\r\n      offset = (ratio - 0.85) / 0.1\r\n      color = \"rgb(#{Math.round(256 * (1-offset))}, 256, 0)\"\r\n    else\r\n      color = \"rgb(0, 256, 0)\"\r\n    $(\"div[data-level-slug=#{level.slug}] .level-kind\").css({\"color\":color, \"width\":256+\"px\", \"transform\":\"translateX(-50%) translateX(15px)\"})\r\n    $(\"div[data-level-slug=#{level.slug}]\").css(\"background-color\", color)\r\n\r\n  afterInsert: ->\r\n    super()\r\n    if @getQueryVariable('signup') and not me.get('email')\r\n      return @promptForSignup()\r\n    if not me.isPremium() and (@isPremiumCampaign() or (@options.worldComplete and not features.freeOnly))\r\n      if not me.get('email')\r\n        return @promptForSignup()\r\n      campaignSlug = window.location.pathname.split('/')[2]\r\n      return @promptForSubscription campaignSlug, 'premium campaign visited'\r\n\r\n  promptForSignup: ->\r\n    @endHighlight()\r\n    authModal = new CreateAccountModal supermodel: @supermodel\r\n    authModal.mode = 'signup'\r\n    @openModalView authModal\r\n\r\n  promptForSubscription: (slug, label) ->\r\n    @endHighlight()\r\n    @openModalView new SubscribeModal()\r\n    # TODO: Added levelID on 2/9/16. Remove level property and associated AnalyticsLogEvent 'properties.level' index later.\r\n    window.tracker?.trackEvent 'Show subscription modal', category: 'Subscription', label: label, level: slug, levelID: slug\r\n\r\n  isPremiumCampaign: (slug) ->\r\n    slug ||= window.location.pathname.split('/')[2]\r\n    /campaign-(game|web)-dev-\\d/.test slug\r\n\r\n  showAds: ->\r\n    return false # No ads for now.\r\n    if application.isProduction() && !me.isPremium() && !me.isTeacher() && !window.serverConfig.picoCTF\r\n      return me.getCampaignAdsGroup() is 'leaderboard-ads'\r\n    false\r\n\r\n  annotateLevels: (orderedLevels) ->\r\n    previousIncompletePracticeLevel = false # Lock owned levels if there's a earlier incomplete practice level to play\r\n    for level, levelIndex in orderedLevels\r\n      level.position ?= { x: 10, y: 10 }\r\n      level.locked = not me.ownsLevel(level.original) or previousIncompletePracticeLevel\r\n      level.locked = true if level.slug is 'kithgard-mastery' and @calculateExperienceScore() is 0\r\n      level.locked = true if level.requiresSubscription and @requiresSubscription and me.get('hourOfCode')\r\n      level.locked = true if level.slug in me.getDungeonLevelsHidden()\r\n      level.locked = false if @levelStatusMap[level.slug] in ['started', 'complete']\r\n      level.locked = false if @editorMode\r\n      level.locked = false if @campaign?.get('name') in ['Auditions', 'Intro']\r\n      level.locked = false if me.isInGodMode()\r\n      level.disabled = true if level.adminOnly and @levelStatusMap[level.slug] not in ['started', 'complete']\r\n      level.disabled = false if me.isInGodMode()\r\n      level.color = 'rgb(255, 80, 60)'\r\n      level.color = 'rgb(80, 130, 200)' if level.requiresSubscription\r\n      level.color = 'rgb(200, 80, 200)' if level.adventurer\r\n      level.color = 'rgb(193, 193, 193)' if level.locked\r\n      level.unlocksHero = _.find(level.rewards, 'hero')?.hero\r\n      if level.unlocksHero\r\n        level.purchasedHero = level.unlocksHero in (me.get('purchased')?.heroes or [])\r\n      level.unlocksItem = _.find(level.rewards, 'item')?.item\r\n\r\n      if window.serverConfig.picoCTF\r\n        if problem = _.find(@picoCTFProblems or [], pid: level.picoCTFProblem)\r\n          level.locked = false if problem.unlocked or level.slug is 'digital-graffiti'\r\n          #level.locked = false  # Testing to see all levels\r\n          level.description = \"\"\"\r\n            ### #{problem.name}\r\n            #{level.description or problem.description}\r\n\r\n            #{problem.category} - #{problem.score} points\r\n          \"\"\"\r\n          level.color = 'rgb(80, 130, 200)' if problem.solved\r\n\r\n      if @campaign?.levelIsPractice(level) and not level.locked and @levelStatusMap[level.slug] isnt 'complete' and\r\n      (not level.requiresSubscription or level.adventurer or not @requiresSubscription)\r\n        previousIncompletePracticeLevel = true\r\n\r\n      level.hidden = level.locked\r\n      if level.concepts?.length\r\n        level.displayConcepts = level.concepts\r\n        maxConcepts = 6\r\n        if level.displayConcepts.length > maxConcepts\r\n          level.displayConcepts = level.displayConcepts.slice -maxConcepts\r\n\r\n      level.unlockedInSameCampaign = levelIndex < 5  # First few are always counted (probably unlocked in previous campaign)\r\n      for otherLevel in orderedLevels when not level.unlockedInSameCampaign and otherLevel isnt level\r\n        for reward in (otherLevel.rewards ? []) when reward.level\r\n          level.unlockedInSameCampaign ||= reward.level is level.original\r\n      level.unlockedInSameCampaign = false if level.slug in me.getDungeonLevelsHidden()\r\n\r\n  countLevels: (orderedLevels) ->\r\n    count = total: 0, completed: 0\r\n\r\n    if @campaign?.get('slug') is 'game-dev-hoc'\r\n      # HoC: Just order left-to-right instead of looking at unlocks, which we don't use for this copycat campaign\r\n      orderedLevels = _.sortBy orderedLevels, (level) -> level.position.x\r\n      count.completed++ for level in orderedLevels when @levelStatusMap[level.slug] is 'complete'\r\n      count.total = orderedLevels.length\r\n      return count\r\n\r\n    for level, levelIndex in orderedLevels\r\n      @annotateLevels(orderedLevels) unless level.locked?  # Annotate if we haven't already.\r\n      continue if level.disabled\r\n      completed = @levelStatusMap[level.slug] is 'complete'\r\n      started = @levelStatusMap[level.slug] is 'started'\r\n      ++count.total if (level.unlockedInSameCampaign or not level.locked) and (started or completed or not @campaign?.levelIsPractice(level))\r\n      ++count.completed if completed\r\n    count\r\n\r\n  showLeaderboard: (levelSlug) ->\r\n    leaderboardModal = new LeaderboardModal supermodel: @supermodel, levelSlug: levelSlug\r\n    @openModalView leaderboardModal\r\n\r\n  determineNextLevel: (orderedLevels) ->\r\n    dontPointTo = ['lost-viking', 'kithgard-mastery']  # Challenge levels we don't want most players bashing heads against\r\n    subscriptionPrompts = [{slug: 'boom-and-bust', unless: 'defense-of-plainswood'}]\r\n\r\n    if @campaign?.get('slug') is 'game-dev-hoc'\r\n      # HoC: Just order left-to-right instead of looking at unlocks, which we don't use for this copycat campaign\r\n      orderedLevels = _.sortBy orderedLevels, (level) -> level.position.x\r\n      for level in orderedLevels\r\n        if @levelStatusMap[level.slug] isnt 'complete'\r\n          level.next = true\r\n          # Unlock and re-annotate this level\r\n          # May not be unlocked/awarded due to different game-dev-hoc progression using mostly shared levels\r\n          level.locked = false\r\n          level.hidden = level.locked\r\n          level.disabled = false\r\n          level.color = 'rgb(255, 80, 60)'\r\n          return\r\n\r\n    findNextLevel = (nextLevels, practiceOnly) =>\r\n      for nextLevelOriginal in nextLevels\r\n        nextLevel = _.find orderedLevels, original: nextLevelOriginal\r\n        continue if not nextLevel or nextLevel.locked\r\n        continue if practiceOnly and not @campaign.levelIsPractice(nextLevel)\r\n\r\n        # If it's a challenge level, we efficiently determine whether we actually do want to point it out.\r\n        if nextLevel.slug is 'kithgard-mastery' and not @levelStatusMap[nextLevel.slug] and @calculateExperienceScore() >= 3\r\n          unless (timesPointedOut = storage.load(\"pointed-out-#{nextLevel.slug}\") or 0) > 3\r\n            # We may determineNextLevel more than once per render, so we can't just do this once. But we do give up after a couple highlights.\r\n            dontPointTo = _.without dontPointTo, nextLevel.slug\r\n            storage.save \"pointed-out-#{nextLevel.slug}\", timesPointedOut + 1\r\n\r\n        # Should we point this level out?\r\n        if not nextLevel.disabled and @levelStatusMap[nextLevel.slug] isnt 'complete' and nextLevel.slug not in dontPointTo and\r\n        not nextLevel.replayable and (\r\n          me.isPremium() or not nextLevel.requiresSubscription or nextLevel.adventurer or\r\n          _.any(subscriptionPrompts, (prompt) => nextLevel.slug is prompt.slug and not @levelStatusMap[prompt.unless])\r\n        )\r\n          nextLevel.next = true\r\n          return true\r\n      false\r\n\r\n    foundNext = false\r\n    for level, levelIndex in orderedLevels\r\n      # Iterate through all levels in order and look to find the first unlocked one that meets all our criteria for being pointed out as the next level.\r\n      if @campaign.get('type') is 'course'\r\n        level.nextLevels = []\r\n        for nextLevel, nextLevelIndex in orderedLevels when nextLevelIndex > levelIndex\r\n          continue if nextLevel.practice and level.nextLevels.length\r\n          break if level.practice and not nextLevel.practice\r\n          level.nextLevels.push nextLevel.original\r\n          break unless nextLevel.practice\r\n      else\r\n        level.nextLevels = (reward.level for reward in level.rewards ? [] when reward.level)\r\n      foundNext = findNextLevel(level.nextLevels, true) unless foundNext # Check practice levels first\r\n      foundNext = findNextLevel(level.nextLevels, false) unless foundNext\r\n\r\n    if not foundNext and orderedLevels[0] and not orderedLevels[0].locked and @levelStatusMap[orderedLevels[0].slug] isnt 'complete'\r\n      orderedLevels[0].next = true\r\n\r\n  calculateExperienceScore: ->\r\n    adultPoint = me.get('ageRange') in ['18-24', '25-34', '35-44', '45-100']  # They have to have answered the poll for this, likely after Shadow Guard.\r\n    speedPoints = 0\r\n    for [levelSlug, speedThreshold] in [['dungeons-of-kithgard', 50], ['gems-in-the-deep', 55], ['shadow-guard', 55], ['forgetful-gemsmith', 40], ['true-names', 40]]\r\n      if _.find(@sessions?.models, (session) -> session.get('levelID') is levelSlug)?.attributes.playtime <= speedThreshold\r\n        ++speedPoints\r\n    experienceScore = adultPoint + speedPoints  # 0-6 score of how likely we think they are to be experienced and ready for Kithgard Mastery\r\n    return experienceScore\r\n\r\n  createLines: ->\r\n    for level in @campaign?.renderedLevels ? []\r\n      for nextLevelOriginal in level.nextLevels ? []\r\n        if nextLevel = _.find(@campaign.renderedLevels, original: nextLevelOriginal)\r\n          @createLine level.position, nextLevel.position\r\n\r\n  createLine: (o1, o2) ->\r\n    mapHeight = parseFloat($(\".map\").css(\"height\"))\r\n    mapWidth = parseFloat($(\".map\").css(\"width\"))\r\n    return unless mapHeight > 0\r\n    ratio =  mapWidth / mapHeight\r\n    p1 = x: o1.x, y: o1.y / ratio\r\n    p2 = x: o2.x, y: o2.y / ratio\r\n    length = Math.sqrt(Math.pow(p1.x - p2.x , 2) + Math.pow(p1.y - p2.y, 2))\r\n    angle = Math.atan2(p1.y - p2.y, p2.x - p1.x) * 180 / Math.PI\r\n    transform = \"translateY(-50%) translateX(-50%) rotate(#{angle}deg) translateX(50%)\"\r\n    line = $('<div>').appendTo('.map').addClass('next-level-line').css(transform: transform, width: length + '%', left: o1.x + '%', bottom: (o1.y - 0.5) + '%')\r\n    line.append($('<div class=\"line\">')).append($('<div class=\"point\">'))\r\n\r\n  applyCampaignStyles: ->\r\n    return unless @campaign?.loaded\r\n    if (backgrounds = @campaign.get 'backgroundImage') and backgrounds.length\r\n      backgrounds = _.sortBy backgrounds, 'width'\r\n      backgrounds.reverse()\r\n      rules = []\r\n      for background, i in backgrounds\r\n        rule = \"#campaign-view .map-background { background-image: url(/file/#{background.image}); }\"\r\n        rule = \"@media screen and (max-width: #{background.width}px) { #{rule} }\" if i\r\n        rules.push rule\r\n      utils.injectCSS rules.join('\\n')\r\n    if backgroundColor = @campaign.get 'backgroundColor'\r\n      backgroundColorTransparent = @campaign.get 'backgroundColorTransparent'\r\n      @$el.css 'background-color', backgroundColor\r\n      for pos in ['top', 'right', 'bottom', 'left']\r\n        @$el.find(\".#{pos}-gradient\").css 'background-image', \"linear-gradient(to #{pos}, #{backgroundColorTransparent} 0%, #{backgroundColor} 100%)\"\r\n    @playAmbientSound()\r\n\r\n  testParticles: ->\r\n    return unless @campaign?.loaded and $.browser.chrome  # Sometimes this breaks in non-Chrome browsers, according to A/B tests.\r\n    @particleMan ?= new ParticleMan()\r\n    @particleMan.removeEmitters()\r\n    @particleMan.attach @$el.find('.map')\r\n    for level in @campaign.renderedLevels ? {}\r\n      continue if level.hidden and (@campaign.levelIsPractice(level) or not level.unlockedInSameCampaign)\r\n      terrain = @terrain.replace('-branching-test', '').replace(/(campaign-)?(game|web)-dev-\\d/, 'forest').replace(/(intro|game-dev-hoc)/, 'dungeon')\r\n      particleKey = ['level', terrain]\r\n      particleKey.push level.type if level.type and not (level.type in ['hero', 'course'])  # Would use isType, but it's not a Level model\r\n      particleKey.push 'replayable' if level.replayable\r\n      particleKey.push 'premium' if level.requiresSubscription\r\n      particleKey.push 'gate' if level.slug in ['kithgard-gates', 'siege-of-stonehold', 'clash-of-clones', 'summits-gate']\r\n      particleKey.push 'hero' if level.unlocksHero and not level.unlockedHero\r\n      #particleKey.push 'item' if level.slug is 'robot-ragnarok'  # TODO: generalize\r\n      continue if particleKey.length is 2  # Don't show basic levels\r\n      continue unless level.hidden or _.intersection(particleKey, ['item', 'hero-ladder', 'replayable', 'game-dev']).length\r\n      @particleMan.addEmitter level.position.x / 100, level.position.y / 100, particleKey.join('-')\r\n\r\n  onMouseEnterPortals: (e) ->\r\n    return unless @campaigns?.loaded and @sessions?.loaded\r\n    @portalScrollInterval = setInterval @onMouseMovePortals, 100\r\n    @onMouseMovePortals e\r\n\r\n  onMouseLeavePortals: (e) ->\r\n    return unless @portalScrollInterval\r\n    clearInterval @portalScrollInterval\r\n    @portalScrollInterval = null\r\n\r\n  onMouseMovePortals: (e) =>\r\n    return unless @portalScrollInterval\r\n    $portal = @$el.find('.portal')\r\n    $portals = @$el.find('.portals')\r\n    if e\r\n      @portalOffsetX = Math.round Math.max 0, e.clientX - $portal.offset().left\r\n    bodyWidth = $('body').innerWidth()\r\n    fraction = @portalOffsetX / bodyWidth\r\n    return if 0.2 < fraction < 0.8\r\n    direction = if fraction < 0.5 then 1 else -1\r\n    magnitude = 0.2 * bodyWidth * (if direction is -1 then fraction - 0.8 else 0.2 - fraction) / 0.2\r\n    portalsWidth = 2536  # TODO: if we add campaigns or change margins, this will get out of date...\r\n    scrollTo = $portals.offset().left + direction * magnitude\r\n    scrollTo = Math.max bodyWidth - portalsWidth, scrollTo\r\n    scrollTo = Math.min 0, scrollTo\r\n    $portals.stop().animate {marginLeft: scrollTo}, 100, 'linear'\r\n\r\n  onSessionsLoaded: (e) ->\r\n    return if @editorMode\r\n    for session in @sessions.models\r\n      unless @levelStatusMap[session.get('levelID')] is 'complete'  # Don't overwrite a complete session with an incomplete one\r\n        @levelStatusMap[session.get('levelID')] = if session.get('state')?.complete then 'complete' else 'started'\r\n      @levelDifficultyMap[session.get('levelID')] = session.get('state').difficulty if session.get('state')?.difficulty\r\n    @render()\r\n    @loadUserPollsRecord() unless me.get('anonymous') or window.serverConfig.picoCTF\r\n\r\n  onCampaignsLoaded: (e) ->\r\n    @render()\r\n\r\n  preloadLevel: (levelSlug) ->\r\n    levelURL = \"/db/level/#{levelSlug}\"\r\n    level = new Level().setURL levelURL\r\n    level = @supermodel.loadModel(level, null, 0).model\r\n    sessionURL = \"/db/level/#{levelSlug}/session\"\r\n    @preloadedSession = new LevelSession().setURL sessionURL\r\n    @listenToOnce @preloadedSession, 'sync', @onSessionPreloaded\r\n    @preloadedSession = @supermodel.loadModel(@preloadedSession, {cache: false}).model\r\n    @preloadedSession.levelSlug = levelSlug\r\n\r\n  onSessionPreloaded: (session) ->\r\n    session.url = -> '/db/level.session/' + @id\r\n    levelElement = @$el.find('.level-info-container:visible')\r\n    return unless session.levelSlug is levelElement.data 'level-slug'\r\n    return unless difficulty = session.get('state')?.difficulty\r\n    badge = $(\"<span class='badge'>#{difficulty}</span>\")\r\n    levelElement.find('.start-level .badge').remove()\r\n    levelElement.find('.start-level').append badge\r\n\r\n  onClickMap: (e) ->\r\n    @$levelInfo?.hide()\r\n    if @sessions?.models.length < 3\r\n      # Restore the next level higlight for very new players who might otherwise get lost.\r\n      @highlightElement '.level.next', delay: 500, duration: 60000, rotation: 0, sides: ['top']\r\n\r\n  onClickLevel: (e) ->\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    @$levelInfo?.hide()\r\n    levelElement = $(e.target).parents('.level')\r\n    levelSlug = levelElement.data('level-slug')\r\n    levelOriginal = levelElement.data('level-original')\r\n    if @editorMode\r\n      return @trigger 'level-clicked', levelOriginal\r\n    @$levelInfo = @$el.find(\".level-info-container[data-level-slug=#{levelSlug}]\").show()\r\n    @checkForCourseOption levelOriginal\r\n    @adjustLevelInfoPosition e\r\n    @endHighlight()\r\n    @preloadLevel levelSlug\r\n\r\n  onDoubleClickLevel: (e) ->\r\n    return unless @editorMode\r\n    levelElement = $(e.target).parents('.level')\r\n    levelOriginal = levelElement.data('level-original')\r\n    @trigger 'level-double-clicked', levelOriginal\r\n\r\n  onClickStartLevel: (e) ->\r\n    levelElement = $(e.target).parents('.level-info-container')\r\n    levelSlug = levelElement.data('level-slug')\r\n    levelOriginal = levelElement.data('level-original')\r\n    level = _.find _.values(@campaign.get('levels')), slug: levelSlug\r\n\r\n    requiresSubscription = level.requiresSubscription or (me.isOnPremiumServer() and not (level.slug in ['dungeons-of-kithgard', 'gems-in-the-deep', 'shadow-guard', 'forgetful-gemsmith', 'signs-and-portents', 'true-names']))\r\n    canPlayAnyway = not @requiresSubscription or level.adventurer or @levelStatusMap[level.slug]\r\n    if requiresSubscription and not canPlayAnyway\r\n      @promptForSubscription levelSlug, 'map level clicked'\r\n    else\r\n      @startLevel levelElement\r\n      window.tracker?.trackEvent 'Clicked Start Level', category: 'World Map', levelID: levelSlug\r\n\r\n  onClickCourseVersion: (e) ->\r\n    levelSlug = $(e.target).parents('.level-info-container').data 'level-slug'\r\n    courseID = $(e.target).parents('.course-version').data 'course-id'\r\n    courseInstanceID = $(e.target).parents('.course-version').data 'course-instance-id'\r\n    url = \"/play/level/#{levelSlug}?course=#{courseID}&course-instance=#{courseInstanceID}\"\r\n    Backbone.Mediator.publish 'router:navigate', route: url\r\n\r\n  startLevel: (levelElement) ->\r\n    @setupManager?.destroy()\r\n    levelSlug = levelElement.data 'level-slug'\r\n    session = @preloadedSession if @preloadedSession?.loaded and @preloadedSession.levelSlug is levelSlug\r\n    @setupManager = new LevelSetupManager supermodel: @supermodel, levelID: levelSlug, levelPath: levelElement.data('level-path'), levelName: levelElement.data('level-name'), hadEverChosenHero: @hadEverChosenHero, parent: @, session: session\r\n    unless @setupManager?.navigatingToPlay\r\n      @$levelInfo.find('.level-info, .progress').toggleClass('hide')\r\n      @listenToOnce @setupManager, 'open', ->\r\n        @$levelInfo?.find('.level-info, .progress').toggleClass('hide')\r\n        @$levelInfo?.hide()\r\n      @setupManager.open()\r\n\r\n  onClickViewSolutions: (e) ->\r\n    levelElement = $(e.target).parents('.level-info-container')\r\n    levelSlug = levelElement.data('level-slug')\r\n    level = _.find _.values(@campaign.get('levels')), slug: levelSlug\r\n    if level.type in ['hero-ladder', 'course-ladder']  # Would use isType, but it's not a Level model\r\n      Backbone.Mediator.publish 'router:navigate', route: \"/play/ladder/#{levelSlug}\", viewClass: 'views/ladder/LadderView', viewArgs: [{supermodel: @supermodel}, levelSlug]\r\n    else\r\n      @showLeaderboard levelSlug\r\n\r\n  adjustLevelInfoPosition: (e) ->\r\n    return unless @$levelInfo\r\n    @$map ?= @$el.find('.map')\r\n    mapOffset = @$map.offset()\r\n    mapX = e.pageX - mapOffset.left\r\n    mapY = e.pageY - mapOffset.top\r\n    margin = 20\r\n    width = @$levelInfo.outerWidth()\r\n    @$levelInfo.css('left', Math.min(Math.max(margin, mapX - width / 2), @$map.width() - width - margin))\r\n    height = @$levelInfo.outerHeight()\r\n    top = mapY - @$levelInfo.outerHeight() - 60\r\n    if top < 100\r\n      top = mapY + 60\r\n    @$levelInfo.css('top', top)\r\n\r\n  onWindowResize: (e) =>\r\n    mapHeight = iPadHeight = 1536\r\n    mapWidth = {dungeon: 2350, forest: 2500, auditions: 2500, desert: 2350, mountain: 2422, glacier: 2421}[@terrain] or 2350\r\n    aspectRatio = mapWidth / mapHeight\r\n    pageWidth = @$el.width()\r\n    pageHeight = @$el.height()\r\n    pageHeight -= adContainerHeight if adContainerHeight = $('.ad-container').outerHeight()\r\n    widthRatio = pageWidth / mapWidth\r\n    heightRatio = pageHeight / mapHeight\r\n    # Make sure we can see the whole map, fading to background in one dimension.\r\n    if heightRatio <= widthRatio\r\n      # Left and right margin\r\n      resultingHeight = pageHeight\r\n      resultingWidth = resultingHeight * aspectRatio\r\n    else\r\n      # Top and bottom margin\r\n      resultingWidth = pageWidth\r\n      resultingHeight = resultingWidth / aspectRatio\r\n    resultingMarginX = (pageWidth - resultingWidth) / 2\r\n    resultingMarginY = (pageHeight - resultingHeight) / 2\r\n    @$el.find('.map').css(width: resultingWidth, height: resultingHeight, 'margin-left': resultingMarginX, 'margin-top': resultingMarginY)\r\n    @testParticles() if @particleMan\r\n\r\n  playAmbientSound: ->\r\n    return unless me.get 'volume'\r\n    return if @ambientSound\r\n    return unless file = @campaign?.get('ambientSound')?[AudioPlayer.ext.substr 1]\r\n    src = \"/file/#{file}\"\r\n    unless AudioPlayer.getStatus(src)?.loaded\r\n      AudioPlayer.preloadSound src\r\n      Backbone.Mediator.subscribeOnce 'audio-player:loaded', @playAmbientSound, @\r\n      return\r\n    @ambientSound = createjs.Sound.play src, loop: -1, volume: 0.1\r\n    createjs.Tween.get(@ambientSound).to({volume: 0.5}, 1000)\r\n\r\n  playMusic: ->\r\n    @musicPlayer = new MusicPlayer()\r\n    musicFile = '/music/music-menu'\r\n    Backbone.Mediator.publish 'music-player:play-music', play: true, file: musicFile\r\n    storage.save(\"loaded-menu-music\", true) unless @probablyCachedMusic\r\n\r\n  checkForCourseOption: (levelOriginal) ->\r\n    return unless me.get('courseInstances')?.length\r\n    @courseOptionsChecked ?= {}\r\n    return if @courseOptionsChecked[levelOriginal]\r\n    @courseOptionsChecked[levelOriginal] = true\r\n    courseInstances = new CocoCollection [], url: \"/db/course_instance/-/find_by_level/#{levelOriginal}\", model: CourseInstance\r\n    courseInstances.comparator = (ci) -> return -(ci.get('members') ? []).length\r\n    @supermodel.loadCollection courseInstances, 'course_instances'\r\n    @listenToOnce courseInstances, 'sync', =>\r\n      return if @destroyed\r\n      return unless courseInstance = courseInstances.models[0]\r\n      @$el.find(\".course-version[data-level-original='#{levelOriginal}']\").removeClass('hidden').data('course-id': courseInstance.get('courseID'), 'course-instance-id': courseInstance.id)\r\n\r\n  preloadTopHeroes: ->\r\n    return if window.serverConfig.picoCTF\r\n    for heroID in ['captain', 'knight']\r\n      url = \"/db/thang.type/#{ThangType.heroes[heroID]}/version\"\r\n      continue if @supermodel.getModel url\r\n      fullHero = new ThangType()\r\n      fullHero.setURL url\r\n      @supermodel.loadModel fullHero\r\n\r\n  updateVolume: (volume) ->\r\n    volume ?= me.get('volume') ? 1.0\r\n    classes = ['vol-off', 'vol-down', 'vol-up']\r\n    button = $('#volume-button', @$el)\r\n    button.toggleClass 'vol-off', volume <= 0.0\r\n    button.toggleClass 'vol-down', 0.0 < volume < 1.0\r\n    button.toggleClass 'vol-up', volume >= 1.0\r\n    createjs.Sound.setVolume(if volume is 1 then 0.6 else volume)  # Quieter for now until individual sound FX controls work again.\r\n    if volume isnt me.get 'volume'\r\n      me.set 'volume', volume\r\n      me.patch()\r\n      @playAmbientSound() if volume\r\n\r\n  onToggleVolume: (e) ->\r\n    button = $(e.target).closest('#volume-button')\r\n    classes = ['vol-off', 'vol-down', 'vol-up']\r\n    volumes = [0, 0.4, 1.0]\r\n    for oldClass, i in classes\r\n      if button.hasClass oldClass\r\n        newI = (i + 1) % classes.length\r\n        break\r\n      else if i is classes.length - 1  # no oldClass\r\n        newI = 2\r\n    @updateVolume volumes[newI]\r\n\r\n  onClickBack: (e) ->\r\n    Backbone.Mediator.publish 'router:navigate',\r\n      route: \"/play\"\r\n      viewClass: CampaignView\r\n      viewArgs: [{supermodel: @supermodel}]\r\n\r\n  onClickClearStorage: (e) ->\r\n    localStorage.clear()\r\n    noty {\r\n      text: 'Local storage cleared. Reload to view the original campaign.'\r\n      layout: 'topCenter'\r\n      timeout: 5000\r\n      type: 'information'\r\n    }\r\n\r\n  updateHero: ->\r\n    return unless hero = me.get('heroConfig')?.thangType\r\n    for slug, original of ThangType.heroes when original is hero\r\n      @$el.find('.player-hero-icon').removeClass().addClass('player-hero-icon ' + slug)\r\n      return\r\n    console.error \"CampaignView hero update couldn't find hero slug for original:\", hero\r\n\r\n  onClickPortalCampaign: (e) ->\r\n    campaign = $(e.target).closest('.campaign, .beta-campaign')\r\n    return if campaign.is('.locked') or campaign.is('.silhouette')\r\n    campaignSlug = campaign.data('campaign-slug')\r\n    if @isPremiumCampaign(campaignSlug) and not me.isPremium()\r\n      return @promptForSubscription campaignSlug, 'premium campaign clicked'\r\n    Backbone.Mediator.publish 'router:navigate',\r\n      route: \"/play/#{campaignSlug}\"\r\n      viewClass: CampaignView\r\n      viewArgs: [{supermodel: @supermodel}, campaignSlug]\r\n\r\n  onClickCampaignSwitch: (e) ->\r\n    campaignSlug = $(e.target).data('campaign-slug')\r\n    console.log campaignSlug, @isPremiumCampaign campaignSlug\r\n    if @isPremiumCampaign(campaignSlug) and not me.isPremium()\r\n      e.preventDefault()\r\n      e.stopImmediatePropagation()\r\n      return @promptForSubscription campaignSlug, 'premium campaign switch clicked'\r\n\r\n  loadUserPollsRecord: ->\r\n    url = \"/db/user.polls.record/-/user/#{me.id}\"\r\n    @userPollsRecord = new UserPollsRecord().setURL url\r\n    onRecordSync = ->\r\n      return if @destroyed\r\n      @userPollsRecord.url = -> '/db/user.polls.record/' + @id\r\n      lastVoted = new Date(@userPollsRecord.get('changed') or 0)\r\n      interval = new Date() - lastVoted\r\n      if interval > 22 * 60 * 60 * 1000  # Wait almost a day before showing the next poll\r\n        @loadPoll()\r\n      else\r\n        console.log 'Poll will be ready in', (22 * 60 * 60 * 1000 - interval) / (60 * 60 * 1000), 'hours.'\r\n    @listenToOnce @userPollsRecord, 'sync', onRecordSync\r\n    @userPollsRecord = @supermodel.loadModel(@userPollsRecord, null, 0).model\r\n    onRecordSync.call @ if @userPollsRecord.loaded\r\n\r\n  loadPoll: ->\r\n    url = \"/db/poll/#{@userPollsRecord.id}/next\"\r\n    @poll = new Poll().setURL url\r\n    onPollSync = ->\r\n      return if @destroyed\r\n      @poll.url = -> '/db/poll/' + @id\r\n      _.delay (=> @activatePoll?()), 1000\r\n    onPollError = (poll, response, request) ->\r\n      if response.status is 404\r\n        console.log 'There are no more polls left.'\r\n      else\r\n        console.error \"Couldn't load poll:\", response.status, response.statusText\r\n      delete @poll\r\n    @listenToOnce @poll, 'sync', onPollSync\r\n    @listenToOnce @poll, 'error', onPollError\r\n    @poll = @supermodel.loadModel(@poll, null, 0).model\r\n    onPollSync.call @ if @poll.loaded\r\n\r\n  activatePoll: ->\r\n    pollTitle = utils.i18n @poll.attributes, 'name'\r\n    $pollButton = @$el.find('button.poll').removeClass('hidden').addClass('highlighted').attr(title: pollTitle).addClass('has-tooltip').tooltip title: pollTitle\r\n    if me.get('lastLevel') is 'shadow-guard'\r\n      @showPoll()\r\n    else\r\n      $pollButton.tooltip 'show'\r\n\r\n  showPoll: ->\r\n    pollModal = new PollModal supermodel: @supermodel, poll: @poll, userPollsRecord: @userPollsRecord\r\n    @openModalView pollModal\r\n    $pollButton = @$el.find 'button.poll'\r\n    pollModal.on 'vote-updated', ->\r\n      $pollButton.removeClass('highlighted').tooltip 'hide'\r\n","RootView = require 'views/core/RootView'\r\ntemplate = require 'templates/play/spectate'\r\n{me} = require 'core/auth'\r\nThangType = require 'models/ThangType'\r\nutils = require 'core/utils'\r\n\r\nWorld = require 'lib/world/world'\r\n\r\n# tools\r\nSurface = require 'lib/surface/Surface'\r\nGod = require 'lib/God' # 'lib/Buddha'\r\nGoalManager = require 'lib/world/GoalManager'\r\nScriptManager = require 'lib/scripts/ScriptManager'\r\nLevelLoader = require 'lib/LevelLoader'\r\nLevelSession = require 'models/LevelSession'\r\nLevel = require 'models/Level'\r\nLevelComponent = require 'models/LevelComponent'\r\nArticle = require 'models/Article'\r\nCamera = require 'lib/surface/Camera'\r\nAudioPlayer = require 'lib/AudioPlayer'\r\n\r\n# subviews\r\nLoadingView = require './level/LevelLoadingView'\r\nTomeView = require './level/tome/TomeView'\r\nChatView = require './level/LevelChatView'\r\nHUDView = require './level/LevelHUDView'\r\nControlBarView = require './level/ControlBarView'\r\nPlaybackView = require './level/LevelPlaybackView'\r\nGoalsView = require './level/LevelGoalsView'\r\nGoldView = require './level/LevelGoldView'\r\nDuelStatsView = require './level/DuelStatsView'\r\nVictoryModal = require './level/modal/VictoryModal'\r\nInfiniteLoopModal = require './level/modal/InfiniteLoopModal'\r\n\r\nrequire 'game-libraries'\r\n\r\nPROFILE_ME = false\r\n\r\nmodule.exports = class SpectateLevelView extends RootView\r\n  id: 'spectate-level-view'\r\n  template: template\r\n  cache: false\r\n  isEditorPreview: false\r\n\r\n  subscriptions:\r\n    'level:set-volume': (e) -> createjs.Sound.setVolume(if e.volume is 1 then 0.6 else e.volume)  # Quieter for now until individual sound FX controls work again.\r\n    'god:new-world-created': 'onNewWorld'\r\n    'god:streaming-world-updated': 'onNewWorld'\r\n    'god:infinite-loop': 'onInfiniteLoop'\r\n    'level:next-game-pressed': 'onNextGamePressed'\r\n    'level:started': 'onLevelStarted'\r\n    'level:loading-view-unveiled': 'onLoadingViewUnveiled'\r\n\r\n  constructor: (options, @levelID) ->\r\n    console.profile?() if PROFILE_ME\r\n    super options\r\n\r\n    @sessionOne = @getQueryVariable 'session-one'\r\n    @sessionTwo = @getQueryVariable 'session-two'\r\n    if options.spectateSessions\r\n      @sessionOne = options.spectateSessions.sessionOne\r\n      @sessionTwo = options.spectateSessions.sessionTwo\r\n\r\n    if not @sessionOne or not @sessionTwo\r\n      @fetchRandomSessionPair (err, data) =>\r\n        if err? then return console.log \"There was an error fetching the random session pair: #{data}\"\r\n        @sessionOne = data[0]._id\r\n        @sessionTwo = data[1]._id\r\n        @load()\r\n    else\r\n      @load()\r\n\r\n  setLevel: (@level, @supermodel) ->\r\n    serializedLevel = @level.serialize {@supermodel, @session, @otherSession, headless: false, sessionless: false}\r\n    @god?.setLevel serializedLevel\r\n    if @world\r\n      @world.loadFromLevel serializedLevel, false\r\n    else\r\n      @load()\r\n\r\n  load: ->\r\n    @levelLoader = new LevelLoader\r\n      supermodel: @supermodel\r\n      levelID: @levelID\r\n      sessionID: @sessionOne\r\n      opponentSessionID: @sessionTwo\r\n      spectateMode: true\r\n      team: @getQueryVariable('team')\r\n    @god = new God maxAngels: 1, spectate: true\r\n\r\n  getRenderData: ->\r\n    c = super()\r\n    c.world = @world\r\n    c\r\n\r\n  afterRender: ->\r\n    window.onPlayLevelViewLoaded? @  # still a hack\r\n    @insertSubView @loadingView = new LoadingView autoUnveil: true, level: @levelLoader?.level ? @level\r\n    @$el.find('#level-done-button').hide()\r\n    super()\r\n    $('body').addClass('is-playing')\r\n\r\n  onLoaded: ->\r\n    _.defer => @onLevelLoaderLoaded()\r\n\r\n  onLevelLoaderLoaded: ->\r\n    @grabLevelLoaderData()\r\n    #at this point, all requisite data is loaded, and sessions are not denormalized\r\n    team = @world.teamForPlayer(0)\r\n    @loadOpponentTeam(team)\r\n    @god.setLevel @level.serialize {@supermodel, @session, @otherSession, headless: false, sessionless: false}\r\n    @god.setLevelSessionIDs if @otherSession then [@session.id, @otherSession.id] else [@session.id]\r\n    @god.setWorldClassMap @world.classMap\r\n    @setTeam team\r\n    @initSurface()\r\n    @initGoalManager()\r\n    @initScriptManager()\r\n    @insertSubviews()\r\n    @initVolume()\r\n\r\n    @originalSessionState = $.extend(true, {}, @session.get('state'))\r\n    @register()\r\n    @controlBar.setBus(@bus)\r\n    @surface.showLevel()\r\n\r\n  grabLevelLoaderData: ->\r\n    @session = @levelLoader.session\r\n    @world = @levelLoader.world\r\n    @level = @levelLoader.level\r\n    @otherSession = @levelLoader.opponentSession\r\n    @levelLoader.destroy()\r\n    @levelLoader = null\r\n\r\n  loadOpponentTeam: (myTeam) ->\r\n    opponentSpells = []\r\n    for spellTeam, spells of @session.get('teamSpells') ? @otherSession?.get('teamSpells') ? {}\r\n      continue if spellTeam is myTeam or not myTeam\r\n      opponentSpells = opponentSpells.concat spells\r\n\r\n    opponentCode = @otherSession?.get('code') or {}\r\n    myCode = @session.get('code') or {}\r\n    for spell in opponentSpells\r\n      [thang, spell] = spell.split '/'\r\n      c = opponentCode[thang]?[spell]\r\n      myCode[thang] ?= {}\r\n      if c then myCode[thang][spell] = c else delete myCode[thang][spell]\r\n\r\n    @session.set('code', myCode)\r\n\r\n  onLevelStarted: (e) ->\r\n    go = =>\r\n      @loadingView?.startUnveiling()\r\n      @loadingView?.unveil true\r\n    _.delay go, 1000\r\n\r\n  onLoadingViewUnveiled: (e) ->\r\n    # Don't remove it; we want its decoration around on large screens.\r\n    #@removeSubView @loadingView\r\n    #@loadingView = null\r\n    Backbone.Mediator.publish 'level:set-playing', playing: false\r\n    Backbone.Mediator.publish 'level:set-time', time: 1  # Helps to have perhaps built a few Thangs and gotten a good list of spritesheets we need to render for our initial paused frame\r\n\r\n  onSupermodelLoadedOne: =>\r\n    @modelsLoaded ?= 0\r\n    @modelsLoaded += 1\r\n    @updateInitString()\r\n\r\n  updateInitString: ->\r\n    return if @surface\r\n    @modelsLoaded ?= 0\r\n    canvas = @$el.find('#surface')[0]\r\n    ctx = canvas.getContext('2d')\r\n    ctx.font='20px Georgia'\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n    ctx.fillText(\"Loaded #{@modelsLoaded} thingies\",50,50)\r\n\r\n  insertSubviews: ->\r\n    @insertSubView @tome = new TomeView levelID: @levelID, session: @session, otherSession: @otherSession, thangs: @world.thangs, supermodel: @supermodel, spectateView: true, spectateOpponentCodeLanguage: @otherSession?.get('submittedCodeLanguage'), level: @level, god: @god\r\n    @insertSubView new PlaybackView session: @session, level: @level\r\n\r\n    @insertSubView new GoldView {}\r\n    @insertSubView new HUDView {level: @level}\r\n    @insertSubView new DuelStatsView level: @level, session: @session, otherSession: @otherSession, supermodel: @supermodel, thangs: @world.thangs if @level.isType('hero-ladder', 'course-ladder')\r\n    @insertSubView @controlBar = new ControlBarView {worldName: utils.i18n(@level.attributes, 'name'), session: @session, level: @level, supermodel: @supermodel, spectateGame: true}\r\n\r\n  # callbacks\r\n\r\n  onInfiniteLoop: (e) ->\r\n    return unless e.firstWorld and e.god is @god\r\n    @openModalView new InfiniteLoopModal()\r\n    window.tracker?.trackEvent 'Saw Initial Infinite Loop', level: @world.name, label: @world.name\r\n\r\n  # initialization\r\n\r\n  initSurface: ->\r\n    webGLSurface = $('canvas#webgl-surface', @$el)\r\n    normalSurface = $('canvas#normal-surface', @$el)\r\n    @surface = new Surface @world, normalSurface, webGLSurface, thangTypes: @supermodel.getModels(ThangType), spectateGame: true, playerNames: @findPlayerNames(), levelType: @level.get('type', true)\r\n    worldBounds = @world.getBounds()\r\n    bounds = [{x:worldBounds.left, y:worldBounds.top}, {x:worldBounds.right, y:worldBounds.bottom}]\r\n    @surface.camera.setBounds(bounds)\r\n    zoom = =>\r\n      @surface.camera.zoomTo({x: (worldBounds.right - worldBounds.left) / 2, y: (worldBounds.top - worldBounds.bottom) / 2}, 0.1, 0)\r\n    _.delay zoom, 4000  # call it later for some reason (TODO: figure this out)\r\n\r\n  findPlayerNames: ->\r\n    playerNames = {}\r\n    for session in [@session, @otherSession] when session?.get('team')\r\n      playerNames[session.get('team')] = session.get('creatorName') or 'Anonymous'\r\n    playerNames\r\n\r\n  initGoalManager: ->\r\n    @goalManager = new GoalManager(@world, @level.get('goals'))\r\n    @god.setGoalManager @goalManager\r\n\r\n  initScriptManager: ->\r\n    if @world.scripts\r\n      nonVictoryPlaybackScripts = _.reject @world.scripts, (script) ->\r\n        script.id.indexOf('Set Camera Boundaries') is -1\r\n    else\r\n      console.log 'World scripts don\\'t exist!'\r\n      nonVictoryPlaybackScripts = []\r\n    @scriptManager = new ScriptManager({scripts: nonVictoryPlaybackScripts, view:@, session: @session})\r\n    @scriptManager.loadFromSession()\r\n\r\n  initVolume: ->\r\n    volume = me.get('volume')\r\n    volume = 1.0 unless volume?\r\n    Backbone.Mediator.publish 'level:set-volume', volume: volume\r\n\r\n  register: -> return\r\n\r\n  onSessionWillSave: (e) ->\r\n    # Something interesting has happened, so (at a lower frequency), we'll save a screenshot.\r\n    console.log 'Session is saving but shouldn\\'t save!!!!!!!'\r\n\r\n  # Throttled\r\n  saveScreenshot: (session) =>\r\n    return unless screenshot = @surface?.screenshot()\r\n    session.save {screenshot: screenshot}, {patch: true, type: 'PUT'}\r\n\r\n  setTeam: (team) ->\r\n    team = team?.team unless _.isString team\r\n    team ?= 'humans'\r\n    me.team = team\r\n    Backbone.Mediator.publish 'level:team-set', team: team\r\n\r\n  # Dynamic sound loading\r\n\r\n  onNewWorld: (e) ->\r\n    return if @headless\r\n    scripts = @world.scripts  # Since these worlds don't have scripts, preserve them.\r\n    @world = e.world\r\n    @world.scripts = scripts\r\n    thangTypes = @supermodel.getModels(ThangType)\r\n    startFrame = @lastWorldFramesLoaded ? 0\r\n    if @world.frames.length is @world.totalFrames  # Finished loading\r\n      @lastWorldFramesLoaded = 0\r\n      unless @getQueryVariable('autoplay') is false\r\n        Backbone.Mediator.publish 'level:set-playing', playing: true  # Since we paused at first, now we autostart playback.\r\n    else\r\n      @lastWorldFramesLoaded = @world.frames.length\r\n    for [spriteName, message] in @world.thangDialogueSounds startFrame\r\n      continue unless thangType = _.find thangTypes, (m) -> m.get('name') is spriteName\r\n      continue unless sound = AudioPlayer.soundForDialogue message, thangType.get('soundTriggers')\r\n      AudioPlayer.preloadSoundReference sound\r\n\r\n  onNextGamePressed: (e) ->\r\n    @fetchRandomSessionPair (err, data) =>\r\n      return if @destroyed\r\n      if err? then return console.log \"There was an error fetching the random session pair: #{data}\"\r\n      @sessionOne = data[0]._id\r\n      @sessionTwo = data[1]._id\r\n      url = \"/play/spectate/#{@levelID}?session-one=#{@sessionOne}&session-two=#{@sessionTwo}\"\r\n      if leagueID = @getQueryVariable 'league'\r\n        url += \"&league=\" + leagueID\r\n      Backbone.Mediator.publish 'router:navigate', {\r\n        route: url,\r\n        viewClass: SpectateLevelView,\r\n        viewArgs: [\r\n          {\r\n            spectateSessions: {sessionOne: @sessionOne, sessionTwo: @sessionTwo}\r\n            supermodel: @supermodel\r\n          }\r\n          @levelID\r\n        ]\r\n      }\r\n      history?.pushState? {}, '', url  # Backbone won't update the URL if just query parameters change\r\n\r\n  fetchRandomSessionPair: (cb) ->\r\n    console.log 'Fetching random session pair!'\r\n    randomSessionPairURL = \"/db/level/#{@levelID}/random_session_pair\"\r\n    $.ajax\r\n      url: randomSessionPairURL\r\n      type: 'GET'\r\n      cache: false\r\n      complete: (jqxhr, textStatus) ->\r\n        if textStatus isnt 'success'\r\n          cb('error', jqxhr.statusText)\r\n        else\r\n          cb(null, $.parseJSON(jqxhr.responseText))\r\n\r\n  destroy: ()->\r\n    @levelLoader?.destroy()\r\n    @surface?.destroy()\r\n    @god?.destroy()\r\n    @goalManager?.destroy()\r\n    @scriptManager?.destroy()\r\n    delete window.world # not sure where this is set, but this is one way to clean it up\r\n    console.profileEnd?() if PROFILE_ME\r\n    super()\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/common/ladder_submission'\r\n{createAetherOptions} = require 'lib/aether_utils'\r\nLevelSession = require 'models/LevelSession'\r\n\r\nmodule.exports = class LadderSubmissionView extends CocoView\r\n  className: 'ladder-submission-view'\r\n  template: template\r\n\r\n  events:\r\n    'click .rank-button': 'rankSession'\r\n    'click .help-simulate': 'onHelpSimulate'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @session = options.session\r\n    @mirrorSession = options.mirrorSession\r\n    @level = options.level\r\n\r\n  getRenderData: ->\r\n    ctx = super()\r\n    ctx.readyToRank = @session?.readyToRank()\r\n    ctx.isRanking = @session?.get('isRanking')\r\n    ctx.simulateURL = \"/play/ladder/#{@level.get('slug')}#simulate\"\r\n    ctx.lastSubmitted = moment(submitDate).fromNow() if submitDate = @session?.get('submitDate')\r\n    ctx\r\n\r\n  afterRender: ->\r\n    super()\r\n    return unless @supermodel.finished()\r\n    @rankButton = @$el.find('.rank-button')\r\n    @updateButton()\r\n\r\n  updateButton: ->\r\n    rankingState = 'unavailable'\r\n    if @session?.readyToRank()\r\n      rankingState = 'rank'\r\n    else if @session?.get 'isRanking'\r\n      rankingState = 'ranking'\r\n    @setRankingButtonText rankingState\r\n\r\n  setRankingButtonText: (spanClass) ->\r\n    @rankButton.find('span').hide()\r\n    @rankButton.find(\".#{spanClass}\").show()\r\n    @rankButton.toggleClass 'disabled', spanClass isnt 'rank'\r\n    helpSimulate = spanClass in ['submitted', 'ranking']\r\n    @$el.find('.help-simulate').toggle(helpSimulate, 'slow')\r\n    showLastSubmitted = not (spanClass in ['submitting'])\r\n    @$el.find('.last-submitted').toggle(showLastSubmitted)\r\n\r\n  showApologeticSignupModal: ->\r\n    CreateAccountModal = require 'views/core/CreateAccountModal'\r\n    @openModalView(new CreateAccountModal({showRequiredError: true}))\r\n\r\n  rankSession: (e) ->\r\n    return unless @session.readyToRank()\r\n    return @showApologeticSignupModal() if me.get('anonymous')\r\n    @playSound 'menu-button-click'\r\n    @setRankingButtonText 'submitting'\r\n    success = =>\r\n      @setRankingButtonText 'submitted' unless @destroyed\r\n      Backbone.Mediator.publish 'ladder:game-submitted', session: @session, level: @level\r\n    failure = (jqxhr, textStatus, errorThrown) =>\r\n      console.log jqxhr.responseText\r\n      @setRankingButtonText 'failed' unless @destroyed\r\n    @session.save null, success: =>\r\n      ajaxData =\r\n        session: @session.id\r\n        levelID: @level.id\r\n        originalLevelID: @level.get('original')\r\n        levelMajorVersion: @level.get('version').major\r\n      ajaxOptions =\r\n        type: 'POST'\r\n        data: ajaxData\r\n        success: success\r\n        error: failure\r\n      if @mirrorSession and @mirrorSession.get('submittedCode')\r\n        # Also submit the mirrorSession after the main session submits successfully.\r\n        mirrorAjaxData = _.clone ajaxData\r\n        mirrorAjaxData.session = @mirrorSession.id\r\n        mirrorCode = @mirrorSession.get('code')\r\n        if @session.get('team') is 'humans'\r\n          mirrorCode['hero-placeholder-1'] = @session.get('code')['hero-placeholder']\r\n        else\r\n          mirrorCode['hero-placeholder'] = @session.get('code')['hero-placeholder-1']\r\n        mirrorAjaxOptions = _.clone ajaxOptions\r\n        mirrorAjaxOptions.data = mirrorAjaxData\r\n        ajaxOptions.success = =>\r\n          patch = code: mirrorCode, codeLanguage: @session.get('codeLanguage')\r\n          tempSession = new LevelSession _id: @mirrorSession.id\r\n          tempSession.save patch, patch: true, type: 'PUT', success: ->\r\n            $.ajax '/queue/scoring', mirrorAjaxOptions\r\n\r\n      $.ajax '/queue/scoring', ajaxOptions\r\n\r\n  onHelpSimulate: ->\r\n    @playSound 'menu-button-click'\r\n    $('a[href=\"#simulate\"]').tab('show')\r\n","storage = require 'core/storage'\r\n\r\nCocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/control-bar-view'\r\n{me} = require 'core/auth'\r\n\r\nCampaign = require 'models/Campaign'\r\nClassroom = require 'models/Classroom'\r\nCourse = require 'models/Course'\r\nCourseInstance = require 'models/CourseInstance'\r\nGameMenuModal = require 'views/play/menu/GameMenuModal'\r\nLevelSetupManager = require 'lib/LevelSetupManager'\r\n\r\nmodule.exports = class ControlBarView extends CocoView\r\n  id: 'control-bar-view'\r\n  template: template\r\n\r\n  subscriptions:\r\n    'level:disable-controls': 'onDisableControls'\r\n    'level:enable-controls': 'onEnableControls'\r\n    'ipad:memory-warning': 'onIPadMemoryWarning'\r\n\r\n  events:\r\n    'click #next-game-button': -> Backbone.Mediator.publish 'level:next-game-pressed', {}\r\n    'click #game-menu-button': 'showGameMenuModal'\r\n    'click': -> Backbone.Mediator.publish 'tome:focus-editor', {}\r\n    'click .levels-link-area': 'onClickHome'\r\n    'click .home a': 'onClickHome'\r\n    'click #control-bar-sign-up-button': 'onClickSignupButton'\r\n    'click #version-switch-button': 'onClickVersionSwitchButton'\r\n    'click #version-switch-button .code-language-selector': 'onClickVersionSwitchButton'\r\n\r\n  constructor: (options) ->\r\n    @supermodel = options.supermodel\r\n    @courseID = options.courseID\r\n    @courseInstanceID = options.courseInstanceID\r\n\r\n    @worldName = options.worldName\r\n    @session = options.session\r\n    @level = options.level\r\n    @levelSlug = @level.get('slug')\r\n    @levelID = @levelSlug or @level.id\r\n    @spectateGame = options.spectateGame ? false\r\n    @observing = options.session.get('creator') isnt me.id\r\n\r\n    @levelNumber = ''\r\n    if @level.isType('course', 'game-dev', 'web-dev') and @level.get('campaignIndex')?\r\n      @levelNumber = @level.get('campaignIndex') + 1\r\n    if @courseInstanceID\r\n      @courseInstance = new CourseInstance(_id: @courseInstanceID)\r\n      jqxhr = @courseInstance.fetch()\r\n      @supermodel.trackRequest(jqxhr)\r\n      new Promise(jqxhr.then).then(=>\r\n        @classroom = new Classroom(_id: @courseInstance.get('classroomID'))\r\n        @supermodel.trackRequest @classroom.fetch()\r\n      )\r\n    else if @courseID\r\n      @course = new Course(_id: @courseID)\r\n      jqxhr = @course.fetch()\r\n      @supermodel.trackRequest(jqxhr)\r\n      new Promise(jqxhr.then).then(=>\r\n        @campaign = new Campaign(_id: @course.get('campaignID'))\r\n        @supermodel.trackRequest(@campaign.fetch())\r\n      )\r\n    super options\r\n    if @level.get 'replayable'\r\n      @listenTo @session, 'change-difficulty', @onSessionDifficultyChanged\r\n\r\n  onLoaded: ->\r\n    if @classroom\r\n      @levelNumber = @classroom.getLevelNumber(@level.get('original'), @levelNumber)\r\n    else if @campaign\r\n      @levelNumber = @campaign.getLevelNumber(@level.get('original'), @levelNumber)\r\n    super()\r\n\r\n  setBus: (@bus) ->\r\n\r\n  getRenderData: (c={}) ->\r\n    super c\r\n    c.worldName = @worldName\r\n    c.ladderGame = @level.isType('ladder', 'hero-ladder', 'course-ladder')\r\n    if @level.get 'replayable'\r\n      c.levelDifficulty = @session.get('state')?.difficulty ? 0\r\n      if @observing\r\n        c.levelDifficulty = Math.max 0, c.levelDifficulty - 1  # Show the difficulty they won, not the next one.\r\n      c.difficultyTitle = \"#{$.i18n.t 'play.level_difficulty'}#{c.levelDifficulty}\"\r\n      @lastDifficulty = c.levelDifficulty\r\n    c.spectateGame = @spectateGame\r\n    c.observing = @observing\r\n    @homeViewArgs = [{supermodel: if @hasReceivedMemoryWarning then null else @supermodel}]\r\n    gameDevHoc = storage.load('should-return-to-game-dev-hoc')\r\n    if gameDevHoc\r\n      @homeLink = \"/play/game-dev-hoc\"\r\n      @homeViewClass = 'views/play/CampaignView'\r\n      @homeViewArgs.push 'game-dev-hoc'\r\n    else if me.isSessionless()\r\n      @homeLink = \"/teachers/courses\"\r\n      @homeViewClass = \"views/courses/TeacherCoursesView\"\r\n    else if @level.isType('ladder', 'ladder-tutorial', 'hero-ladder', 'course-ladder')\r\n      levelID = @level.get('slug')?.replace(/\\-tutorial$/, '') or @level.id\r\n      @homeLink = \"/play/ladder/#{levelID}\"\r\n      @homeViewClass = 'views/ladder/LadderView'\r\n      @homeViewArgs.push levelID\r\n      if leagueID = @getQueryVariable('league') or @getQueryVariable('course-instance')\r\n        leagueType = if @level.isType('course-ladder') then 'course' else 'clan'\r\n        @homeViewArgs.push leagueType\r\n        @homeViewArgs.push leagueID\r\n        @homeLink += \"/#{leagueType}/#{leagueID}\"\r\n    else if @level.isType('course') or @courseID\r\n      @homeLink = '/students'\r\n      @homeViewClass = 'views/courses/CoursesView'\r\n      if @courseID\r\n        @homeLink += \"/#{@courseID}\"\r\n        @homeViewArgs.push @courseID\r\n        @homeViewClass = 'views/courses/CourseDetailsView'\r\n        if @courseInstanceID\r\n          @homeLink += \"/#{@courseInstanceID}\"\r\n          @homeViewArgs.push @courseInstanceID\r\n    else if @level.isType('hero', 'hero-coop', 'game-dev', 'web-dev') or window.serverConfig.picoCTF\r\n      @homeLink = '/play'\r\n      @homeViewClass = 'views/play/CampaignView'\r\n      campaign = @level.get 'campaign'\r\n      @homeLink += '/' + campaign\r\n      @homeViewArgs.push campaign\r\n    else\r\n      @homeLink = '/'\r\n      @homeViewClass = 'views/HomeView'\r\n    c.editorLink = \"/editor/level/#{@level.get('slug') or @level.id}\"\r\n    c.homeLink = @homeLink\r\n    c\r\n\r\n  showGameMenuModal: (e, tab=null) ->\r\n    gameMenuModal = new GameMenuModal level: @level, session: @session, supermodel: @supermodel, showTab: tab\r\n    @openModalView gameMenuModal\r\n    @listenToOnce gameMenuModal, 'change-hero', ->\r\n      @setupManager?.destroy()\r\n      @setupManager = new LevelSetupManager({supermodel: @supermodel, level: @level, levelID: @levelID, parent: @, session: @session, courseID: @courseID, courseInstanceID: @courseInstanceID})\r\n      @setupManager.open()\r\n\r\n  onClickHome: (e) ->\r\n    if @level.isType('course')\r\n      category = if me.isTeacher() then 'Teachers' else 'Students'\r\n      window.tracker?.trackEvent 'Play Level Back To Levels', category: category, levelSlug: @levelSlug, ['Mixpanel']\r\n    e.preventDefault()\r\n    e.stopImmediatePropagation()\r\n    Backbone.Mediator.publish 'router:navigate', route: @homeLink, viewClass: @homeViewClass, viewArgs: @homeViewArgs\r\n\r\n  onClickSignupButton: (e) ->\r\n    window.tracker?.trackEvent 'Started Signup', category: 'Play Level', label: 'Control Bar', level: @levelID\r\n\r\n  onClickVersionSwitchButton: (e) ->\r\n    return if @destroyed\r\n    otherVersionLink = \"/play/level/#{@level.get('slug')}?dev=true\"\r\n    otherVersionLink += '&course=560f1a9f22961295f9427742' if not @course\r\n    otherVersionLink += \"&codeLanguage=#{codeLanguage}\" if codeLanguage = $(e.target).data('code-language')\r\n    #Backbone.Mediator.publish 'router:navigate', route: otherVersionLink, viewClass: 'views/play/level/PlayLevelView', viewArgs: [{supermodel: @supermodel}, @level.get('slug')]  # TODO: why doesn't this work?\r\n    document.location.href = otherVersionLink  # Loses all loaded resources :(\r\n\r\n  onDisableControls: (e) -> @toggleControls e, false\r\n  onEnableControls: (e) -> @toggleControls e, true\r\n  toggleControls: (e, enabled) ->\r\n    return if e.controls and not ('level' in e.controls)\r\n    return if enabled is @controlsEnabled\r\n    @controlsEnabled = enabled\r\n    @$el.toggleClass 'controls-disabled', not enabled\r\n\r\n  onIPadMemoryWarning: (e) ->\r\n    @hasReceivedMemoryWarning = true\r\n\r\n  onSessionDifficultyChanged: ->\r\n    return if @session.get('state')?.difficulty is @lastDifficulty\r\n    @render()\r\n\r\n  destroy: ->\r\n    @setupManager?.destroy()\r\n    super()\r\n","module.exports = class DialogueAnimator\r\n  jqueryElement: null\r\n  childrenToAdd: null\r\n  charsToAdd: null\r\n  childAnimator: null\r\n\r\n  constructor: (html, @jqueryElement) ->\r\n    d = $('<div></div>').html(html)\r\n    @childrenToAdd = _.map(d[0].childNodes, (e) -> return e)\r\n    @t0 = new Date()\r\n    @charsAdded = 0\r\n    @charsPerSecond = 25\r\n\r\n  tick: ->\r\n    if not @charsToAdd and not @childAnimator\r\n      @addNextElement()\r\n\r\n    if @charsToAdd\r\n      @addSingleChar()\r\n      return\r\n\r\n    if @childAnimator\r\n      @childAnimator.tick()\r\n      if @childAnimator.done()\r\n        @childAnimator = null\r\n\r\n  addNextElement: ->\r\n    return unless @childrenToAdd.length\r\n    nextElem = @childrenToAdd[0]\r\n    @childrenToAdd = @childrenToAdd[1..]\r\n    if nextElem.nodeName is '#text'\r\n      @charsToAdd = nextElem.nodeValue\r\n    else\r\n      value = nextElem.innerHTML\r\n      newElem = $(nextElem).html('')\r\n      @jqueryElement.append(newElem)\r\n      if value\r\n        @charsAdded += @childAnimator.getCharsAdded() if @childAnimator\r\n        @childAnimator = new DialogueAnimator(value, newElem)\r\n\r\n  addSingleChar: ->\r\n    elapsed = (new Date()) - @t0\r\n    nAdded = @getCharsAdded()\r\n    nToHaveBeenAdded = Math.round @charsPerSecond * elapsed / 1000\r\n    nToAdd = Math.min nToHaveBeenAdded - nAdded, @charsToAdd.length\r\n    @jqueryElement.html(@jqueryElement.html() + @charsToAdd.slice(0, nToAdd))\r\n    @charsToAdd = @charsToAdd.slice(nToAdd)\r\n    if @charsToAdd.length is 0\r\n      @charsToAdd = null\r\n    @charsAdded += nToAdd\r\n\r\n  getCharsAdded: ->\r\n    @charsAdded + (@childAnimator?.charsAdded ? 0)\r\n\r\n  done: ->\r\n    return false if @childrenToAdd.length > 0\r\n    return false if @charsToAdd\r\n    return false if @childAnimator\r\n    return true\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/duel-stats-view'\r\nThangAvatarView = require 'views/play/level/ThangAvatarView'\r\nutils = require 'core/utils'\r\n\r\n# TODO:\r\n# - if a hero is dead, a big indication that they are dead\r\n# - each hero's current action?\r\n# - if one player is you, an indicator that it's you?\r\n# - indication of which team won (not always hero dead--ties and other victory conditions)\r\n# - army composition or power or attack/defense (for certain levels): experiment with something simple, not like the previous unit list thing\r\n\r\nmodule.exports = class DuelStatsView extends CocoView\r\n  id: 'duel-stats-view'\r\n  template: template\r\n\r\n  subscriptions:\r\n    'surface:gold-changed': 'onGoldChanged'\r\n    'god:new-world-created': 'onNewWorld'\r\n    'god:streaming-world-updated': 'onNewWorld'\r\n    'surface:frame-changed': 'onFrameChanged'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    options.thangs = _.filter options.thangs, 'inThangList'\r\n    unless options.otherSession\r\n      options.otherSession = get: (prop) -> {\r\n        creatorName: $.i18n.t 'ladder.simple_ai'\r\n        team: if options.session.get('team') is 'humans' then 'ogres' else 'humans'\r\n        heroConfig: options.session.get('heroConfig')\r\n      }[prop]\r\n    @showsGold = options.level.get('slug') in ['wakka-maul']\r\n    @showsPower = options.level.get('slug') not in ['wakka-maul', 'dueling-grounds', 'cavern-survival', 'multiplayer-treasure-grove']\r\n    @teamGold = {}\r\n    @players = (@formatPlayer team for team in ['humans', 'ogres'])\r\n\r\n  formatPlayer: (team) ->\r\n    p = team: team\r\n    session = _.find [@options.session, @options.otherSession], (s) -> s.get('team') is team\r\n    p.name = session.get 'creatorName'\r\n    p.heroThangType = (session.get('heroConfig') ? {}).thangType or '529ffbf1cf1818f2be000001'\r\n    p.heroID = if team is 'ogres' then 'Hero Placeholder 1' else 'Hero Placeholder'\r\n    p\r\n\r\n  afterRender: ->\r\n    super()\r\n    for player in @players\r\n      @buildAvatar player.heroID, player.team\r\n    @$el.css 'display', 'flex'  # Show it\r\n\r\n  buildAvatar: (heroID, team) ->\r\n    @avatars ?= {}\r\n    return if @avatars[team]\r\n    thang = _.find @options.thangs, id: heroID\r\n    @avatars[team] = avatar = new ThangAvatarView thang: thang, includeName: false, supermodel: @supermodel\r\n    @$find(team, '.thang-avatar-placeholder').replaceWith avatar.$el\r\n    avatar.render()\r\n\r\n  onNewWorld: (e) ->\r\n    @options.thangs = _.filter e.world.thangs, 'inThangList'\r\n\r\n  onFrameChanged: (e) ->\r\n    @update()\r\n\r\n  update: ->\r\n    for player in @players\r\n      thang = _.find @options.thangs, id: @avatars[player.team].thang.id\r\n      @updateHealth thang\r\n    @updatePower() if @showsPower\r\n\r\n  updateHealth: (thang) ->\r\n    $health = @$find thang.team, '.player-health'\r\n    $health.find('.health-bar').css 'width', Math.max(0, Math.min(100, 100 * thang.health / thang.maxHealth)) + '%'\r\n    utils.replaceText $health.find('.health-value'), Math.round thang.health\r\n\r\n  updatePower: ->\r\n    # Right now we just display the army cost of all living units as opposed to doing something more sophisticate to measure power.\r\n    @costTable ?=\r\n      soldier: 20\r\n      archer: 25\r\n      decoy: 25\r\n      'griffin-rider': 50\r\n      paladin: 80\r\n      artillery: 75\r\n      'arrow-tower': 100\r\n      palisade: 10\r\n      peasant: 50\r\n      thrower: 9\r\n      scout: 18\r\n    powers = humans: 0, ogres: 0\r\n    for thang in @options.thangs when thang.health > 0 and thang.exists\r\n      powers[thang.team] += @costTable[thang.type] or 0 if powers[thang.team]?\r\n    for player in @players\r\n      utils.replaceText @$find(player.team, '.power-value'), powers[player.team]\r\n\r\n  $find: (team, selector) ->\r\n    @$el.find(\".player-container.team-#{team} \" + selector)\r\n\r\n  destroy: ->\r\n    avatar.destroy() for team, avatar of @avatars ? {}\r\n    super()\r\n\r\n  onGoldChanged: (e) ->\r\n    return unless @showsGold\r\n    return if @teamGold[e.team] is e.gold\r\n    @teamGold[e.team] = e.gold\r\n    utils.replaceText @$find(e.team, '.gold-value'), '' + e.gold\r\n","Article = require 'models/Article'\r\n\r\nmodule.exports = class HintsState extends Backbone.Model\r\n\r\n  initialize: (attributes, options) ->\r\n    { @level, @session, @supermodel } = options\r\n    @listenTo(@level, 'change:documentation', @update)\r\n    @update()\r\n\r\n  getHint: (index) ->\r\n    @get('hints')?[index]\r\n\r\n  update: ->\r\n    articles = @supermodel.getModels(Article)\r\n    docs = @level.get('documentation') ? {}\r\n    general = _.filter (_.find(articles, (article) -> article.get('original') is doc.original)?.attributes for doc in docs.generalArticles or [])\r\n    specific = docs.specificArticles or []\r\n    hints = (docs.hintsB or docs.hints or []).concat(specific).concat(general)\r\n    hints = _.sortBy hints, (doc) ->\r\n      return -1 if doc.name is 'Intro'\r\n      return 0\r\n\r\n    total = _.size(hints)\r\n    @set({\r\n      hints\r\n      total\r\n    })\r\n","CocoView = require 'views/core/CocoView'\r\nState = require 'models/State'\r\nace = require 'ace'\r\nutils = require 'core/utils'\r\n\r\nmodule.exports = class HintsView extends CocoView\r\n  template: require('templates/play/level/hints-view')\r\n  className: 'hints-view'\r\n  hintUsedThresholdSeconds: 10\r\n\r\n  events:\r\n    'click .next-btn': 'onClickNextButton'\r\n    'click .previous-btn': 'onClickPreviousButton'\r\n    'click .close-hint-btn': 'hideView'\r\n\r\n  subscriptions:\r\n    'level:show-victory': 'hideView'\r\n    'tome:manual-cast': 'hideView'\r\n\r\n  initialize: (options) ->\r\n    {@level, @session, @hintsState} = options\r\n    @state = new State({\r\n      hintIndex: 0\r\n      hintsViewTime: {}\r\n      hintsUsed: {}\r\n    })\r\n    @updateHint()\r\n\r\n    debouncedRender = _.debounce(@render)\r\n    @listenTo(@state, 'change', debouncedRender)\r\n    @listenTo(@hintsState, 'change', debouncedRender)\r\n    @listenTo(@state, 'change:hintIndex', @updateHint)\r\n    @listenTo(@hintsState, 'change:hidden', @visibilityChanged)\r\n\r\n  destroy: ->\r\n    clearInterval(@timerIntervalID)\r\n    super()\r\n\r\n  afterRender: ->\r\n    @$el.toggleClass('hide', @hintsState.get('hidden'))\r\n    super()\r\n    @playSound 'game-menu-open'\r\n    @$('a').attr 'target', '_blank'\r\n    codeLanguage = @options.session.get('codeLanguage') or me.get('aceConfig')?.language or 'python'\r\n\r\n    oldEditor.destroy() for oldEditor in @aceEditors ? []\r\n    @aceEditors = []\r\n    aceEditors = @aceEditors\r\n    @$el.find('pre:has(code[class*=\"lang-\"])').each ->\r\n      aceEditor = utils.initializeACE @, codeLanguage\r\n      aceEditors.push aceEditor\r\n\r\n  getProcessedHint: ->\r\n    language = @session.get('codeLanguage')\r\n    hint = @state.get('hint')\r\n    return unless hint\r\n\r\n    # process\r\n    translated = utils.i18n(hint, 'body')\r\n    filtered = utils.filterMarkdownCodeLanguages(translated, language)\r\n    markedUp = marked(filtered)\r\n\r\n    return markedUp\r\n\r\n  updateHint: ->\r\n    index = @state.get('hintIndex')\r\n    hintsTitle = $.i18n.t('play_level.hints_title').replace('{{number}}', index + 1)\r\n    @state.set({ hintsTitle, hint: @hintsState.getHint(index) })\r\n\r\n  onClickNextButton: ->\r\n    window.tracker?.trackEvent 'Hints Next Clicked', category: 'Students', levelSlug: @level.get('slug'), hintCount: @hintsState.get('hints')?.length ? 0, hintCurrent: @state.get('hintIndex'), []\r\n    max = @hintsState.get('total') - 1\r\n    @state.set('hintIndex', Math.min(@state.get('hintIndex') + 1, max))\r\n    @playSound 'menu-button-click'\r\n    @updateHintTimer()\r\n\r\n  onClickPreviousButton: ->\r\n    window.tracker?.trackEvent 'Hints Previous Clicked', category: 'Students', levelSlug: @level.get('slug'), hintCount: @hintsState.get('hints')?.length ? 0, hintCurrent: @state.get('hintIndex'), []\r\n    @state.set('hintIndex', Math.max(@state.get('hintIndex') - 1, 0))\r\n    @playSound 'menu-button-click'\r\n    @updateHintTimer()\r\n\r\n  hideView: ->\r\n    @hintsState?.set('hidden', true)\r\n    @playSound 'game-menu-close'\r\n\r\n  visibilityChanged: (e) ->\r\n    @updateHintTimer()\r\n\r\n  updateHintTimer: ->\r\n    clearInterval(@timerIntervalID)\r\n    unless @hintsState.get('hidden') or @state.get('hintsUsed')?[@state.get('hintIndex')]\r\n      @timerIntervalID = setInterval(@incrementHintViewTime, 1000)\r\n\r\n  incrementHintViewTime: =>\r\n    hintIndex = @state.get('hintIndex')\r\n    hintsViewTime = @state.get('hintsViewTime')\r\n    hintsViewTime[hintIndex] ?= 0\r\n    hintsViewTime[hintIndex]++\r\n    hintsUsed = @state.get('hintsUsed')\r\n    if hintsViewTime[hintIndex] > @hintUsedThresholdSeconds and not hintsUsed[hintIndex]\r\n      window.tracker?.trackEvent 'Hint Used', category: 'Students', levelSlug: @level.get('slug'), hintCount: @hintsState.get('hints')?.length ? 0, hintCurrent: hintIndex, []\r\n      hintsUsed[hintIndex] = true\r\n      @state.set('hintsUsed', hintsUsed)\r\n      clearInterval(@timerIntervalID)\r\n    @state.set('hintsViewTime', hintsViewTime)\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/chat'\r\n{me} = require 'core/auth'\r\nLevelBus = require 'lib/LevelBus'\r\n\r\nmodule.exports = class LevelChatView extends CocoView\r\n  id: 'level-chat-view'\r\n  template: template\r\n  open: false\r\n\r\n  events:\r\n    'keypress textarea': 'onChatKeydown'\r\n    'click i': 'onIconClick'\r\n\r\n  subscriptions:\r\n    'bus:new-message': 'onNewMessage'\r\n\r\n  constructor: (options) ->\r\n    @levelID = options.levelID\r\n    @session = options.session\r\n    # TODO: we took out session.multiplayer, so this will not fire. If we want to resurrect it, we'll of course need a new way of activating chat.\r\n    @listenTo(@session, 'change:multiplayer', @updateMultiplayerVisibility)\r\n    @sessionID = options.sessionID\r\n    @bus = LevelBus.get(@levelID, @sessionID)\r\n    super()\r\n    @regularlyClearOldMessages()\r\n    @playNoise = _.debounce(@playNoise, 100)\r\n\r\n  updateMultiplayerVisibility: ->\r\n    return unless @$el?\r\n    try\r\n      @$el.toggle Boolean @session.get('multiplayer')\r\n    catch e\r\n      console.error \"Couldn't toggle the style on the LevelChatView to #{Boolean @session.get('multiplayer')} because of an error:\", e\r\n\r\n  afterRender: ->\r\n    @chatTables = $('table', @$el)\r\n    @updateMultiplayerVisibility()\r\n\r\n  regularlyClearOldMessages: ->\r\n    @clearOldMessagesInterval = setInterval(@clearOldMessages, 5000)\r\n\r\n  clearOldMessages: =>\r\n    rows = $('.closed-chat-area tr')\r\n    for row in rows\r\n      row = $(row)\r\n      added = row.data('added')\r\n      if new Date().getTime() - added > 60 * 1000\r\n        row.fadeOut(1000, -> $(this).remove())\r\n\r\n  onNewMessage: (e) ->\r\n    @$el.show() unless e.message.system\r\n    @addOne(e.message)\r\n    @trimClosedPanel()\r\n    @playNoise() if e.message.authorID isnt me.id\r\n\r\n  playNoise: ->\r\n    @playSound 'chat_received'\r\n\r\n  messageObjectToJQuery: (message) ->\r\n    td = $('<td></td>')\r\n    content = message.content\r\n    content = _.string.escapeHTML(content)\r\n    content = content.replace(/\\n/g, '<br/>')\r\n    content = content.replace(RegExp('  ', 'g'), '&nbsp; ') # coffeescript can't compile '/  /g'\r\n    if _.string.startsWith(content, '/me')\r\n      content = message.authorName + content.slice(3)\r\n\r\n    if message.system\r\n      td.append($('<span class=\"system\"></span>').html(content))\r\n\r\n    else if _.string.startsWith(content, '/me')\r\n      td.append($('<span class=\"action\"></span>').html(content))\r\n\r\n    else\r\n      td.append($('<strong></strong>').text(message.authorName+': '))\r\n      td.append($('<span></span>').html(content))\r\n\r\n    tr = $('<tr></tr>')\r\n    tr.addClass('me') if message.authorID is me.id\r\n    tr.append(td)\r\n\r\n  addOne: (message) ->\r\n    return if message.system and message.authorID is me.id\r\n    if @open\r\n      openPanel = $('.open-chat-area', @$el)\r\n      height = openPanel.outerHeight()\r\n      distanceFromBottom = openPanel[0].scrollHeight - height - openPanel[0].scrollTop\r\n      doScroll = distanceFromBottom < 10\r\n    tr = @messageObjectToJQuery(message)\r\n    tr.data('added', new Date().getTime())\r\n    @chatTables.append(tr)\r\n    @scrollDown() if doScroll\r\n\r\n  trimClosedPanel: ->\r\n    closedPanel = $('.closed-chat-area', @$el)\r\n    limit = 5\r\n    rows = $('tr', closedPanel)\r\n    for row, i in rows\r\n      break if rows.length - i <= limit\r\n      row.remove()\r\n\r\n  onChatKeydown: (e) ->\r\n    if key.isPressed('enter')\r\n      message = _.string.strip($(e.target).val())\r\n      return false unless message\r\n      @bus.sendMessage(message)\r\n      $(e.target).val('')\r\n      return false\r\n\r\n  onIconClick: ->\r\n    @open = not @open\r\n    openPanel = $('.open-chat-area', @$el).toggle @open\r\n    closedPanel = $('.closed-chat-area', @$el).toggle not @open\r\n    @scrollDown() if @open\r\n    if window.getSelection?\r\n      sel = window.getSelection()\r\n      sel.empty?()\r\n      sel.removeAllRanges?()\r\n    else\r\n      document.selection.empty()\r\n\r\n  scrollDown: ->\r\n    openPanel = $('.open-chat-area', @$el)[0]\r\n    openPanel.scrollTop = openPanel.scrollHeight or 1000000\r\n\r\n  destroy: ->\r\n    key.deleteScope('level')\r\n    clearInterval @clearOldMessagesInterval if @clearOldMessagesInterval\r\n    super()\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/level-dialogue-view'\r\nDialogueAnimator = require './DialogueAnimator'\r\n\r\nmodule.exports = class LevelDialogueView extends CocoView\r\n  id: 'level-dialogue-view'\r\n  template: template\r\n\r\n  subscriptions:\r\n    'sprite:speech-updated': 'onSpriteDialogue'\r\n    'level:sprite-clear-dialogue': 'onSpriteClearDialogue'\r\n    'level:shift-space-pressed': 'onShiftSpacePressed'\r\n    'level:escape-pressed': 'onEscapePressed'\r\n    'sprite:dialogue-sound-completed': 'onDialogueSoundCompleted'\r\n\r\n  events:\r\n    'click': 'onClick'\r\n    'click a': 'onClickLink'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @level = options.level\r\n    @sessionID = options.sessionID\r\n\r\n  onClick: (e) ->\r\n    Backbone.Mediator.publish 'tome:focus-editor', {}\r\n\r\n  onClickLink: (e) ->\r\n    route = $(e.target).attr('href')\r\n    if route and /item-store/.test route\r\n      PlayItemsModal = require 'views/play/modal/PlayItemsModal'\r\n      @openModalView new PlayItemsModal supermodel: @supermodal\r\n      e.stopPropagation()\r\n\r\n  onSpriteDialogue: (e) ->\r\n    return unless e.message\r\n    @$el.addClass 'active speaking'\r\n    $('body').addClass('dialogue-view-active')\r\n    @setMessage e.message, e.mood, e.responses\r\n\r\n    window.tracker?.trackEvent 'Heard Sprite', {message: e.message, label: e.message, ls: @sessionID}\r\n\r\n  onDialogueSoundCompleted: ->\r\n    @$el.removeClass 'speaking'\r\n\r\n  onSpriteClearDialogue: ->\r\n    @$el.removeClass 'active speaking'\r\n    $('body').removeClass('dialogue-view-active')\r\n\r\n  setMessage: (message, mood, responses) ->\r\n    message = marked message\r\n    # Fix old HTML icons like <i class='icon-play'></i> in the Markdown\r\n    message = message.replace /&lt;i class=&#39;(.+?)&#39;&gt;&lt;\\/i&gt;/, \"<i class='$1'></i>\"\r\n    clearInterval(@messageInterval) if @messageInterval\r\n    @bubble = $('.dialogue-bubble', @$el)\r\n    @bubble.removeClass(@lastMood) if @lastMood\r\n    @lastMood = mood\r\n    @bubble.text('')\r\n    group = $('<div class=\"enter secret\"></div>')\r\n    @bubble.append(group)\r\n    if responses\r\n      @lastResponses = responses\r\n      for response in responses\r\n        button = $('<button class=\"btn btn-small banner\"></button>').text(response.text)\r\n        button.addClass response.buttonClass if response.buttonClass\r\n        group.append(button)\r\n        response.button = $('button:last', group)\r\n    else\r\n      s = $.i18n.t('common.continue', defaultValue: 'Continue')\r\n      sk = $.i18n.t('play_level.skip_tutorial', defaultValue: 'skip: esc')\r\n      if not @escapePressed and not @isFullScreen()\r\n        group.append('<span class=\"hud-hint\">' + sk + '</span>')\r\n      group.append($('<button class=\"btn btn-small banner with-dot\">' + s + ' <div class=\"dot\"></div></button>'))\r\n      @lastResponses = null\r\n    @animator = new DialogueAnimator(message, @bubble)\r\n    @messageInterval = setInterval(@addMoreMessage, 1000 / 30)  # 30 FPS\r\n\r\n  isFullScreen: ->\r\n    document.fullScreen || document.mozFullScreen || document.webkitIsFullScreen\r\n\r\n  addMoreMessage: =>\r\n    if @animator.done()\r\n      clearInterval(@messageInterval)\r\n      @messageInterval = null\r\n      $('.enter', @bubble).removeClass('secret').css('opacity', 0.0).delay(500).animate({opacity: 1.0}, 500, @animateEnterButton)\r\n      if @lastResponses\r\n        buttons = $('.enter button')\r\n        for response, i in @lastResponses\r\n          channel = response.channel.replace 'level-set-playing', 'level:set-playing'  # Easier than migrating all those victory buttons.\r\n          f = (r) => => setTimeout((-> Backbone.Mediator.publish(channel, r.event or {})), 10)\r\n          $(buttons[i]).click(f(response))\r\n      else\r\n        $('.enter', @bubble).click(-> Backbone.Mediator.publish('script:end-current-script', {}))\r\n      return\r\n    @animator.tick()\r\n\r\n  onShiftSpacePressed: (e) ->\r\n    @shiftSpacePressed = (@shiftSpacePressed || 0) + 1\r\n    # We don't need to handle script:end-current-script--that's done--but if we do have\r\n    # custom buttons, then we need to trigger the one that should fire (the last one).\r\n    # If we decide that always having the last one fire is bad, we should make it smarter.\r\n    return unless @lastResponses?.length\r\n    r = @lastResponses[@lastResponses.length - 1]\r\n    channel = r.channel.replace 'level-set-playing', 'level:set-playing'\r\n    _.delay (-> Backbone.Mediator.publish(channel, r.event or {})), 10\r\n\r\n  onEscapePressed: (e) ->\r\n    @escapePressed = true\r\n\r\n  animateEnterButton: =>\r\n    return unless @bubble\r\n    button = $('.enter', @bubble)\r\n    dot = $('.dot', button)\r\n    dot.animate({opacity: 0.2}, 300).animate({opacity: 1.9}, 600, @animateEnterButton)\r\n\r\n  destroy: ->\r\n    clearInterval(@messageInterval) if @messageInterval\r\n    super()\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/level-flags-view'\r\n{me} = require 'core/auth'\r\n\r\nmodule.exports = class LevelFlagsView extends CocoView\r\n  id: 'level-flags-view'\r\n  template: template\r\n  className: 'secret'\r\n\r\n  subscriptions:\r\n    'playback:real-time-playback-started': 'onRealTimePlaybackStarted'\r\n    'playback:real-time-playback-ended': 'onRealTimePlaybackEnded'\r\n    'surface:stage-mouse-down': 'onStageMouseDown'\r\n    'god:new-world-created': 'onNewWorld'\r\n    'god:streaming-world-updated': 'onNewWorld'\r\n    'surface:remove-flag': 'onRemoveFlag'\r\n\r\n  events:\r\n    'click .green-flag': -> @onFlagSelected color: 'green', source: 'button'\r\n    'click .black-flag': -> @onFlagSelected color: 'black', source: 'button'\r\n    'click .violet-flag': -> @onFlagSelected color: 'violet', source: 'button'\r\n\r\n  shortcuts:\r\n    'g': -> @onFlagSelected color: 'green', source: 'shortcut'\r\n    'b': -> @onFlagSelected color: 'black', source: 'shortcut'\r\n    'v': -> @onFlagSelected color: 'violet', source: 'shortcut'\r\n    'esc': -> @onFlagSelected color: null, source: 'shortcut'\r\n    'delete, del, backspace': 'onDeletePressed'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @levelID = options.levelID\r\n    @world = options.world\r\n\r\n  onRealTimePlaybackStarted: (e) ->\r\n    @realTime = true\r\n    @$el.show()\r\n    @flags = {}\r\n    @flagHistory = []\r\n\r\n  onRealTimePlaybackEnded: (e) ->\r\n    @onFlagSelected color: null\r\n    @realTime = false\r\n    @$el.hide()\r\n\r\n  onFlagSelected: (e) ->\r\n    return unless @realTime\r\n    @playSound 'menu-button-click' if e.color\r\n    color = if e.color is @flagColor then null else e.color\r\n    @flagColor = color\r\n    Backbone.Mediator.publish 'level:flag-color-selected', color: color\r\n    @$el.find('.flag-button').removeClass('active')\r\n    @$el.find(\".#{color}-flag\").addClass('active') if color\r\n\r\n  onStageMouseDown: (e) ->\r\n    return unless @flagColor and @realTime\r\n    @playSound 'menu-button-click'  # TODO: different flag placement sound?\r\n    pos = x: e.worldPos.x, y: e.worldPos.y\r\n    now = @world.dt * @world.frames.length\r\n    flag = player: me.id, team: me.team, color: @flagColor, pos: pos, time: now, active: true, source: 'click'\r\n    @flags[@flagColor] = flag\r\n    @flagHistory.push flag\r\n    @realTimeFlags?.create flag\r\n    Backbone.Mediator.publish 'level:flag-updated', flag\r\n    #console.log 'trying to place flag at', @world.age, 'and think it will happen by', flag.time\r\n\r\n  onDeletePressed: (e) ->\r\n    return unless @realTime\r\n    Backbone.Mediator.publish 'surface:remove-selected-flag', {}\r\n\r\n  onRemoveFlag: (e) ->\r\n    delete @flags[e.color]\r\n    now = @world.dt * @world.frames.length\r\n    flag = player: me.id, team: me.team, color: e.color, time: now, active: false, source: 'click'\r\n    @flagHistory.push flag\r\n    Backbone.Mediator.publish 'level:flag-updated', flag\r\n    #console.log e.color, 'deleted at time', flag.time\r\n\r\n  onNewWorld: (event) ->\r\n    return unless event.world.name is @world.name\r\n    @world = @options.world = event.world\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/goals'\r\n{me} = require 'core/auth'\r\nutils = require 'core/utils'\r\n\r\nstateIconMap =\r\n  success: 'glyphicon-ok'\r\n  failure: 'glyphicon-remove'\r\n\r\nmodule.exports = class LevelGoalsView extends CocoView\r\n  id: 'goals-view'\r\n  template: template\r\n  className: 'secret expanded'\r\n  playbackEnded: false\r\n\r\n  subscriptions:\r\n    'goal-manager:new-goal-states': 'onNewGoalStates'\r\n    'tome:cast-spells': 'onTomeCast'\r\n    'level:set-letterbox': 'onSetLetterbox'\r\n    'level:set-playing': 'onSetPlaying'\r\n    'surface:playback-restarted': 'onSurfacePlaybackRestarted'\r\n    'surface:playback-ended': 'onSurfacePlaybackEnded'\r\n\r\n  events:\r\n    'mouseenter': ->\r\n      @mouseEntered = true\r\n      @updatePlacement()\r\n\r\n    'mouseleave': ->\r\n      @mouseEntered = false\r\n      @updatePlacement()\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @level = options.level\r\n\r\n  onNewGoalStates: (e) ->\r\n    firstRun = not @previousGoalStatus?\r\n    @previousGoalStatus ?= {}\r\n    @$el.find('.goal-status').addClass 'secret'\r\n    classToShow = null\r\n    classToShow = 'success' if e.overallStatus is 'success'\r\n    classToShow = 'failure' if e.overallStatus is 'failure'\r\n    classToShow ?= 'timed-out' if e.timedOut\r\n    classToShow ?= 'incomplete'\r\n    @$el.find('.goal-status.'+classToShow).removeClass 'secret'\r\n    list = $('#primary-goals-list', @$el)\r\n    list.empty()\r\n    goals = []\r\n    for goal in e.goals\r\n      state = e.goalStates[goal.id]\r\n      continue if goal.optional and @level.isType('course') and state.status isnt 'success'\r\n      if goal.hiddenGoal\r\n        continue if goal.optional and state.status isnt 'success'\r\n        continue if not goal.optional and state.status isnt 'failure'\r\n      continue if goal.team and me.team isnt goal.team\r\n      text = utils.i18n goal, 'name'\r\n      if state.killed\r\n        dead = _.filter(_.values(state.killed)).length\r\n        targeted = _.values(state.killed).length\r\n        if targeted > 1\r\n          # Does this make sense?\r\n          if goal.isPositive\r\n            completed = dead\r\n          else\r\n            completed = targeted - dead\r\n          text = text + \" (#{completed}/#{targeted})\"\r\n      # This should really get refactored, along with GoalManager, so that goals have a standard\r\n      # representation of how many are done, how many are needed, what that means, etc.\r\n      li = $('<li></li>').addClass(\"status-#{state.status}\").text(text)\r\n      iconClass = stateIconMap[state.status]\r\n      li.prepend($('<i></i>').addClass(\"glyphicon #{iconClass or ''}\"))  # If empty, insert a .glyphicon to take up space\r\n      list.append(li)\r\n      goals.push goal\r\n      if not firstRun and state.status is 'success' and @previousGoalStatus[goal.id] isnt 'success'\r\n        @soundToPlayWhenPlaybackEnded = 'goal-success'\r\n      else if not firstRun and state.status isnt 'success' and @previousGoalStatus[goal.id] is 'success'\r\n        @soundToPlayWhenPlaybackEnded = 'goal-incomplete-again'\r\n      else\r\n        @soundToPlayWhenPlaybackEnded = null\r\n      @previousGoalStatus[goal.id] = state.status\r\n    if goals.length > 0 and @$el.hasClass 'secret'\r\n      @$el.removeClass('secret')\r\n      @lastSizeTweenTime = new Date()\r\n    @updatePlacement()\r\n\r\n  onTomeCast: (e) ->\r\n    return if e.preload\r\n    @$el.find('.goal-status').addClass('secret')\r\n    @$el.find('.goal-status.running').removeClass('secret')\r\n\r\n  onSetPlaying: (e) ->\r\n    return unless e.playing\r\n    # Automatically hide it while we replay\r\n    @mouseEntered = false\r\n    @expanded = true\r\n    @updatePlacement()\r\n\r\n  onSurfacePlaybackRestarted: ->\r\n    @playbackEnded = false\r\n    @$el.removeClass 'brighter'\r\n    @lastSizeTweenTime = new Date()\r\n    @updatePlacement()\r\n\r\n  onSurfacePlaybackEnded: ->\r\n    return if @level.isType('game-dev')\r\n    @playbackEnded = true\r\n    @updateHeight()\r\n    @$el.addClass 'brighter'\r\n    @lastSizeTweenTime = new Date()\r\n    @updatePlacement()\r\n    if @soundToPlayWhenPlaybackEnded\r\n      @playSound @soundToPlayWhenPlaybackEnded\r\n\r\n  updateHeight: ->\r\n    return if @$el.hasClass('brighter') or @$el.hasClass('secret')\r\n    return if (new Date() - @lastSizeTweenTime) < 500  # Don't measure this while still animating, might get the wrong value. Should match sass transition time.\r\n    @normalHeight = @$el.outerHeight()\r\n\r\n  updatePlacement: ->\r\n    # Expand it if it's at the end. Mousing over reverses this.\r\n    expand = @playbackEnded isnt @mouseEntered\r\n    return if expand is @expanded\r\n    @updateHeight()\r\n    sound = if expand then 'goals-expand' else 'goals-collapse'\r\n    if expand\r\n      top = -5\r\n    else\r\n      height = @normalHeight\r\n      height = @$el.outerHeight() if not height or @playbackEnded\r\n      top = 41 - height\r\n    @$el.css 'top', top\r\n    if @soundTimeout\r\n      # Don't play the sound we were going to play after all; the transition has reversed.\r\n      clearTimeout @soundTimeout\r\n      @soundTimeout = null\r\n    else if @expanded?\r\n      # Play it when the transition ends, not when it begins.\r\n      @soundTimeout = _.delay @playToggleSound, 500, sound\r\n    @expanded = expand\r\n\r\n  playToggleSound: (sound) =>\r\n    return if @destroyed\r\n    @playSound sound unless @options.level.isType('game-dev')\r\n    @soundTimeout = null\r\n\r\n  onSetLetterbox: (e) ->\r\n    @$el.toggle not e.on\r\n    @updatePlacement()\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/gold'\r\nteamTemplate = require 'templates/play/level/team_gold'\r\n\r\nmodule.exports = class LevelGoldView extends CocoView\r\n  id: 'gold-view'\r\n  template: template\r\n\r\n  subscriptions:\r\n    'surface:gold-changed': 'onGoldChanged'\r\n    'level:set-letterbox': 'onSetLetterbox'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @teamGold = {}\r\n    @teamGoldEarned = {}\r\n    @shownOnce = false\r\n\r\n  onGoldChanged: (e) ->\r\n    return if @teamGold[e.team] is e.gold and @teamGoldEarned[e.team] is e.goldEarned\r\n    @teamGold[e.team] = e.gold\r\n    @teamGoldEarned[e.team] = e.goldEarned\r\n    goldEl = @$el.find('.gold-amount.team-' + e.team)\r\n    unless goldEl.length\r\n      teamEl = teamTemplate team: e.team\r\n      @$el[if e.team is 'humans' then 'prepend' else 'append'](teamEl)\r\n      goldEl = @$el.find('.gold-amount.team-' + e.team)\r\n    text = '' + e.gold\r\n    if e.goldEarned and e.goldEarned > e.gold\r\n      text += \" (#{e.goldEarned})\"\r\n    goldEl.text text\r\n    @updateTitle()\r\n    @$el.show()\r\n    @shownOnce = true\r\n\r\n  updateTitle: ->\r\n    strings = []\r\n    for team, gold of @teamGold\r\n      if @teamGoldEarned[team]\r\n        strings.push \"Team '#{team}' has #{gold} now of #{@teamGoldEarned[team]} gold earned.\"\r\n      else\r\n        strings.push \"Team '#{team}' has #{gold} gold.\"\r\n    @$el.attr 'title', strings.join ' '\r\n\r\n  onSetLetterbox: (e) ->\r\n    @$el.toggle not e.on if @shownOnce\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/hud'\r\nprop_template = require 'templates/play/level/hud_prop'\r\nutils = require 'core/utils'\r\n\r\nmodule.exports = class LevelHUDView extends CocoView\r\n  id: 'thang-hud'\r\n  template: template\r\n\r\n  subscriptions:\r\n    'surface:frame-changed': 'onFrameChanged'\r\n    'level:disable-controls': 'onDisableControls'\r\n    'level:enable-controls': 'onEnableControls'\r\n    'surface:sprite-selected': 'onSpriteSelected'\r\n    'sprite:thang-began-talking': 'onThangBeganTalking'\r\n    'sprite:thang-finished-talking': 'onThangFinishedTalking'\r\n    'god:new-world-created': 'onNewWorld'\r\n\r\n  events:\r\n    'click': 'onClick'\r\n\r\n  afterRender: ->\r\n    super()\r\n    @$el.addClass 'no-selection'\r\n    if @options.level.get('hidesHUD')\r\n      @hidesHUD = true\r\n      @$el.addClass 'hide-hud-properties'\r\n\r\n  onClick: (e) ->\r\n    Backbone.Mediator.publish 'tome:focus-editor', {} unless $(e.target).parents('.thang-props').length\r\n\r\n  onFrameChanged: (e) ->\r\n    @timeProgress = e.progress\r\n    @update()\r\n\r\n  onDisableControls: (e) ->\r\n    return if e.controls and not ('hud' in e.controls)\r\n    @disabled = true\r\n    @$el.addClass 'controls-disabled'\r\n\r\n  onEnableControls: (e) ->\r\n    return if e.controls and not ('hud' in e.controls)\r\n    @disabled = false\r\n    @$el.removeClass 'controls-disabled'\r\n\r\n  onSpriteSelected: (e) ->\r\n    return if @disabled\r\n    @setThang e.thang, e.sprite?.thangType\r\n\r\n  onNewWorld: (e) ->\r\n    hadThang = @thang\r\n    @thang = e.world.thangMap[@thang.id] if @thang\r\n    if hadThang and not @thang\r\n      @setThang null, null\r\n\r\n  setThang: (thang, thangType) ->\r\n    if not thang? and not @thang? then return\r\n    if thang? and @thang? and thang.id is @thang.id then return\r\n    if thang? and @hidesHUD and thang.id isnt 'Hero Placeholder' then return  # Don't let them find the names of their opponents this way\r\n    return unless thang  # Don't let them deselect anything, ever.\r\n    @thang = thang\r\n    @thangType = thangType\r\n    return unless @thang\r\n    @createAvatar thangType, @thang\r\n    @createProperties()\r\n    @update()\r\n\r\n  createAvatar: (thangType, thang, colorConfig) ->\r\n    unless thangType.isFullyLoaded()\r\n      args = arguments\r\n      unless @listeningToCreateAvatar\r\n        @listenToOnce thangType, 'sync', -> @createAvatar(args...)\r\n        @listeningToCreateAvatar = true\r\n      return\r\n    @listeningToCreateAvatar = false\r\n    options = thang.getLankOptions() or {}\r\n    options.async = false\r\n    options.colorConfig = colorConfig if colorConfig\r\n    wrapper = @$el.find '.thang-canvas-wrapper'\r\n    team = @thang?.team\r\n    wrapper.removeClass (i, css) -> (css.match(/\\bteam-\\S+/g) or []).join ' '\r\n    wrapper.addClass \"team-#{team}\"\r\n    if thangType.get('raster')\r\n      wrapper.empty().append($('<img draggable=\"false\"/>').addClass('avatar').attr('src', '/file/'+thangType.get('raster')))\r\n    else\r\n      return unless stage = thangType.getPortraitStage options, 100\r\n      newCanvas = $(stage.canvas).addClass('thang-canvas avatar')\r\n      wrapper.empty().append(newCanvas)\r\n      stage.update()\r\n      @stage?.stopTalking()\r\n      @stage = stage\r\n    wrapper.append($('<img draggable=\"false\" />').addClass('avatar-frame').attr('src', '/images/level/thang_avatar_frame.png'))\r\n\r\n  onThangBeganTalking: (e) ->\r\n    return unless @stage and @thang is e.thang\r\n    @stage?.startTalking()\r\n\r\n  onThangFinishedTalking: (e) ->\r\n    return unless @stage and @thang is e.thang\r\n    @stage?.stopTalking()\r\n\r\n  createProperties: ->\r\n    if @options.level.isType('game-dev')\r\n      name = 'Game'  # TODO: we don't need the HUD at all\r\n    else if @thang.id in ['Hero Placeholder', 'Hero Placeholder 1']\r\n      name = @thangType?.getHeroShortName() or 'Hero'\r\n    else\r\n      name = @thang.hudName or (if @thang.type then \"#{@thang.id} - #{@thang.type}\" else @thang.id)\r\n    utils.replaceText @$el.find('.thang-name'), name\r\n    props = @$el.find('.thang-props')\r\n    props.find('.prop').remove()\r\n    #propNames = _.without @thang.hudProperties ? [], 'action'\r\n    propNames = @thang.hudProperties\r\n    for prop, i in propNames ? []\r\n      pel = @createPropElement prop\r\n      continue unless pel?\r\n      if pel.find('.bar').is('*') and props.find('.bar').is('*')\r\n        props.find('.bar-prop').last().after pel  # Keep bars together\r\n      else\r\n        props.append pel\r\n    null\r\n\r\n  update: ->\r\n    return unless @thang\r\n    @$el.find('.thang-props-column').toggleClass 'nonexistent', not @thang.exists\r\n    if @thang.exists\r\n      @updatePropElement(prop, @thang[prop]) for prop in @thang.hudProperties ? []\r\n\r\n  createPropElement: (prop) ->\r\n    if prop in ['maxHealth']\r\n      return null  # included in the bar\r\n    context =\r\n      prop: prop\r\n      hasIcon: prop in ['health', 'pos', 'target', 'collectedThangIDs', 'gold', 'bountyGold', 'value', 'visualRange', 'attackDamage', 'attackRange', 'maxSpeed', 'attackNearbyEnemyRange']\r\n      hasBar: prop in ['health']\r\n    $(prop_template(context))\r\n\r\n  updatePropElement: (prop, val) ->\r\n    pel = @$el.find '.thang-props *[name=' + prop + ']'\r\n    if prop in ['maxHealth']\r\n      return  # Don't show maxes--they're built into bar labels.\r\n    if prop in ['health']\r\n      max = @thang['max' + prop.charAt(0).toUpperCase() + prop.slice(1)]\r\n      regen = @thang[prop + 'ReplenishRate']\r\n      percent = Math.round 100 * val / max\r\n      pel.find('.bar').css 'width', percent + '%'\r\n      labelText = prop + ': ' + @formatValue(prop, val) + ' / ' + @formatValue(prop, max)\r\n      if regen\r\n        labelText += ' (+' + @formatValue(prop, regen) + '/s)'\r\n      utils.replaceText pel.find('.bar-prop-value'), Math.round(val)\r\n    else\r\n      s = @formatValue(prop, val)\r\n      labelText = \"#{prop}: #{s}\"\r\n      if prop is 'attackDamage'\r\n        cooldown = @thang.actions.attack.cooldown\r\n        dps = @thang.attackDamage / cooldown\r\n        labelText += \" / #{cooldown.toFixed(2)}s (DPS: #{dps.toFixed(2)})\"\r\n      utils.replaceText pel.find('.prop-value'), s\r\n    pel.attr 'title', labelText\r\n    pel\r\n\r\n  formatValue: (prop, val) ->\r\n    if prop is 'target' and not val\r\n      val = @thang['targetPos']\r\n      val = null if val?.isZero()\r\n    if prop is 'rotation'\r\n      return (val * 180 / Math.PI).toFixed(0) + '˚'\r\n    if prop.search(/Range$/) isnt -1\r\n      return val + 'm'\r\n    if typeof val is 'number'\r\n      if Math.round(val) == val or prop is 'gold' then return val.toFixed(0)  # int\r\n      if -10 < val < 10 then return val.toFixed(2)\r\n      if -100 < val < 100 then return val.toFixed(1)\r\n      return val.toFixed(0)\r\n    if val and typeof val is 'object'\r\n      if val.id\r\n        return val.id\r\n      else if val.x and val.y\r\n        return \"x: #{val.x.toFixed(0)} y: #{val.y.toFixed(0)}\"\r\n        #return \"x: #{val.x.toFixed(0)} y: #{val.y.toFixed(0)}, z: #{val.z.toFixed(0)}\"  # Debugging: include z\r\n    else if not val?\r\n      return 'No ' + prop\r\n    return val\r\n\r\n  destroy: ->\r\n    @stage?.stopTalking()\r\n    super()\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/level_loading'\r\nace = require 'ace'\r\nutils = require 'core/utils'\r\nSubscribeModal = require 'views/core/SubscribeModal'\r\n\r\nmodule.exports = class LevelLoadingView extends CocoView\r\n  id: 'level-loading-view'\r\n  template: template\r\n\r\n  events:\r\n    'mousedown .start-level-button': 'startUnveiling'  # Split into two for animation smoothness.\r\n    'click .start-level-button': 'onClickStartLevel'\r\n    'click .start-subscription-button': 'onClickStartSubscription'\r\n\r\n  subscriptions:\r\n    'level:loaded': 'onLevelLoaded'  # If Level loads after level loading view.\r\n    'level:session-loaded': 'onSessionLoaded'\r\n    'level:subscription-required': 'onSubscriptionRequired'  # If they'd need a subscription to start playing.\r\n    'level:course-membership-required': 'onCourseMembershipRequired'  # If they'd need a subscription to start playing.\r\n    'subscribe-modal:subscribed': 'onSubscribed'\r\n\r\n  shortcuts:\r\n    'enter': 'onEnterPressed'\r\n\r\n  afterRender: ->\r\n    super()\r\n    unless @level?.get('loadingTip')\r\n      @$el.find('.tip.rare').remove() if _.random(1, 10) < 9\r\n      tips = @$el.find('.tip').addClass('to-remove')\r\n      tip = _.sample(tips)\r\n      $(tip).removeClass('to-remove').addClass('secret')\r\n      @$el.find('.to-remove').remove()\r\n    @onLevelLoaded level: @options.level if @options.level?.get('goals')  # If Level was already loaded.\r\n    @configureACEEditors()\r\n\r\n  configureACEEditors: ->\r\n    codeLanguage = @session?.get('codeLanguage') or me.get('aceConfig')?.language or 'python'\r\n    oldEditor.destroy() for oldEditor in @aceEditors ? []\r\n    @aceEditors = []\r\n    aceEditors = @aceEditors\r\n    @$el.find('pre:has(code[class*=\"lang-\"])').each ->\r\n      aceEditor = utils.initializeACE @, codeLanguage\r\n      aceEditors.push aceEditor\r\n\r\n  afterInsert: ->\r\n    super()\r\n\r\n  onLevelLoaded: (e) ->\r\n    return if @level\r\n    @level = e.level\r\n    @prepareGoals e\r\n    @prepareTip()\r\n    @prepareIntro()\r\n\r\n  onSessionLoaded: (e) ->\r\n    return if @session\r\n    @session = e.session if e.session.get('creator') is me.id\r\n\r\n  prepareGoals: (e) ->\r\n    goalContainer = @$el.find('.level-loading-goals')\r\n    goalList = goalContainer.find('ul')\r\n    goalCount = 0\r\n    for goalID, goal of @level.get('goals') when (not goal.team or goal.team is (e.team or 'humans')) and not goal.hiddenGoal\r\n      continue if goal.optional and @level.isType('course')\r\n      name = utils.i18n goal, 'name'\r\n      goalList.append $('<li>').text(name)\r\n      ++goalCount\r\n    if goalCount\r\n      goalContainer.removeClass('secret')\r\n      if goalCount is 1\r\n        goalContainer.find('.panel-heading').text $.i18n.t 'play_level.goal'  # Not plural\r\n\r\n  prepareTip: ->\r\n    tip = @$el.find('.tip')\r\n    if @level.get('loadingTip')\r\n      loadingTip = utils.i18n @level.attributes, 'loadingTip'\r\n      loadingTip = marked(loadingTip)\r\n      tip.html(loadingTip).removeAttr('data-i18n')\r\n    tip.removeClass('secret')\r\n\r\n  prepareIntro: ->\r\n    @docs = @level.get('documentation') ? {}\r\n    specific = @docs.specificArticles or []\r\n    @intro = _.find specific, name: 'Intro'\r\n    if window.serverConfig.picoCTF\r\n      @intro ?= body: ''\r\n\r\n  showReady: ->\r\n    return if @shownReady\r\n    @shownReady = true\r\n    _.delay @finishShowingReady, 100  # Let any blocking JS hog the main thread before we show that we're done.\r\n\r\n  finishShowingReady: =>\r\n    return if @destroyed\r\n    showIntro = @getQueryVariable('intro')\r\n    autoUnveil = not showIntro and (@options.autoUnveil or @session?.get('state').complete)\r\n    if autoUnveil\r\n      @startUnveiling()\r\n      @unveil true\r\n    else\r\n      @playSound 'level_loaded', 0.75  # old: loading_ready\r\n      @$el.find('.progress').hide()\r\n      @$el.find('.start-level-button').show()\r\n      @unveil false\r\n\r\n  startUnveiling: (e) ->\r\n    @playSound 'menu-button-click'\r\n    @unveiling = true\r\n    Backbone.Mediator.publish 'level:loading-view-unveiling', {}\r\n    _.delay @onClickStartLevel, 1000  # If they never mouse-up for the click (or a modal shows up and interrupts the click), do it anyway.\r\n\r\n  onClickStartLevel: (e) =>\r\n    return if @destroyed\r\n    @unveil true\r\n\r\n  onEnterPressed: (e) ->\r\n    return unless @shownReady and not @unveiled\r\n    @startUnveiling()\r\n    @onClickStartLevel()\r\n\r\n  unveil: (full) ->\r\n    return if @destroyed or @unveiled\r\n    @unveiled = full\r\n    @$loadingDetails = @$el.find('#loading-details')\r\n    duration = parseFloat(@$loadingDetails.css 'transition-duration') * 1000\r\n    unless @$el.hasClass 'unveiled'\r\n      @$el.addClass 'unveiled'\r\n      @unveilWings duration\r\n    if full\r\n      @unveilLoadingFull()\r\n      _.delay @onUnveilEnded, duration\r\n    else\r\n      @unveilLoadingPreview duration\r\n\r\n  unveilLoadingFull: ->\r\n    # Get rid of the loading details screen entirely--the level is totally ready.\r\n    unless @unveiling\r\n      Backbone.Mediator.publish 'level:loading-view-unveiling', {}\r\n      @unveiling = true\r\n    if @$el.hasClass 'preview-screen'\r\n      @$loadingDetails.css 'right', -@$loadingDetails.outerWidth(true)\r\n    else\r\n      @$loadingDetails.css 'top', -@$loadingDetails.outerHeight(true)\r\n    @$el.removeClass 'preview-screen'\r\n    $('#canvas-wrapper').removeClass 'preview-overlay'\r\n\r\n  unveilLoadingPreview: (duration) ->\r\n    # Move the loading details screen over the code editor to preview the level.\r\n    return if @$el.hasClass 'preview-screen'\r\n    $('#canvas-wrapper').addClass 'preview-overlay'\r\n    @$el.addClass('preview-screen')\r\n    @$loadingDetails.addClass('preview')\r\n    @resize()\r\n    @onWindowResize = _.debounce @onWindowResize, 700  # Wait a bit for other views to resize before we resize\r\n    $(window).on 'resize', @onWindowResize\r\n    if @intro\r\n      @$el.find('.progress-or-start-container').addClass('intro-footer')\r\n      @$el.find('#tip-wrapper').remove()\r\n      _.delay @unveilIntro, duration\r\n\r\n  resize: ->\r\n    maxHeight = $('#page-container').outerHeight(true)\r\n    minHeight = $('#code-area').outerHeight(true)\r\n    minHeight -= 20\r\n    @$el.css height: maxHeight\r\n    @$loadingDetails.css minHeight: minHeight, maxHeight: maxHeight\r\n    if @intro\r\n      $intro = @$el.find('.intro-doc')\r\n      $intro.css height: minHeight - $intro.offset().top - @$el.find('.progress-or-start-container').outerHeight() - 30 - 20\r\n      _.defer -> $intro.find('.nano').nanoScroller alwaysVisible: true\r\n\r\n  unveilWings: (duration) ->\r\n    @playSound 'loading-view-unveil', 0.5\r\n    @$el.find('.left-wing').css left: '-100%', backgroundPosition: 'right -400px top 0'\r\n    @$el.find('.right-wing').css right: '-100%', backgroundPosition: 'left -400px top 0'\r\n    $('#level-footer-background').detach().appendTo('#page-container').slideDown(duration) unless @level?.isType('web-dev')\r\n\r\n  unveilIntro: =>\r\n    return if @destroyed or not @intro or @unveiled\r\n    if window.serverConfig.picoCTF and problem = @level.picoCTFProblem\r\n      html = marked \"\"\"\r\n        ### #{problem.name}\r\n\r\n        #{@intro.body}\r\n\r\n        #{problem.description}\r\n\r\n        #{problem.category} - #{problem.score} points\r\n      \"\"\", sanitize: false\r\n    else\r\n      language = @session?.get('codeLanguage')\r\n      html = marked utils.filterMarkdownCodeLanguages(utils.i18n(@intro, 'body'), language)\r\n    @$el.find('.intro-doc').removeClass('hidden').find('.intro-doc-content').html html\r\n    @resize()\r\n    @configureACEEditors()\r\n\r\n  onUnveilEnded: =>\r\n    return if @destroyed\r\n    Backbone.Mediator.publish 'level:loading-view-unveiled', view: @\r\n\r\n  onWindowResize: (e) =>\r\n    return if @destroyed\r\n    @$loadingDetails.css transition: 'none'\r\n    @resize()\r\n\r\n  onSubscriptionRequired: (e) ->\r\n    @$el.find('.level-loading-goals, .tip, .load-progress').hide()\r\n    @$el.find('.subscription-required').show()\r\n\r\n  onCourseMembershipRequired: (e) ->\r\n    @$el.find('.level-loading-goals, .tip, .load-progress').hide()\r\n    @$el.find('.course-membership-required').show()\r\n\r\n  onLoadError: (resource) ->\r\n    @$el.find('.level-loading-goals, .tip, .load-progress').hide()\r\n    @$el.find('.could-not-load').show()\r\n\r\n  onClickStartSubscription: (e) ->\r\n    @openModalView new SubscribeModal()\r\n    levelSlug = @level?.get('slug') or @options.level?.get('slug')\r\n    # TODO: Added levelID on 2/9/16. Remove level property and associated AnalyticsLogEvent 'properties.level' index later.\r\n    window.tracker?.trackEvent 'Show subscription modal', category: 'Subscription', label: 'level loading', level: levelSlug, levelID: levelSlug\r\n\r\n  onSubscribed: ->\r\n    document.location.reload()\r\n\r\n  destroy: ->\r\n    $(window).off 'resize', @onWindowResize\r\n    super()\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/level-playback-view'\r\n{me} = require 'core/auth'\r\n\r\nmodule.exports = class LevelPlaybackView extends CocoView\r\n  id: 'playback-view'\r\n  template: template\r\n\r\n  subscriptions:\r\n    'level:disable-controls': 'onDisableControls'\r\n    'level:enable-controls': 'onEnableControls'\r\n    'level:set-playing': 'onSetPlaying'\r\n    'level:toggle-playing': 'onTogglePlay'\r\n    'level:scrub-forward': 'onScrubForward'\r\n    'level:scrub-back': 'onScrubBack'\r\n    'level:set-volume': 'onSetVolume'\r\n    'surface:frame-changed': 'onFrameChanged'\r\n    'god:new-world-created': 'onNewWorld'\r\n    'god:streaming-world-updated': 'onNewWorld'\r\n    'level:set-letterbox': 'onSetLetterbox'\r\n    'tome:cast-spells': 'onTomeCast'\r\n    'playback:real-time-playback-ended': 'onRealTimePlaybackEnded'\r\n    'playback:stop-real-time-playback': 'onStopRealTimePlayback'\r\n\r\n  events:\r\n    'click #music-button': 'onToggleMusic'\r\n    'click #zoom-in-button': -> Backbone.Mediator.publish 'camera:zoom-in', {} unless @shouldIgnore()\r\n    'click #zoom-out-button': -> Backbone.Mediator.publish 'camera:zoom-out', {} unless @shouldIgnore()\r\n    'click #volume-button': 'onToggleVolume'\r\n    'click #play-button': 'onTogglePlay'\r\n    'click': -> Backbone.Mediator.publish 'tome:focus-editor', {} unless @realTime\r\n    'mouseenter #timeProgress': 'onProgressEnter'\r\n    'mouseleave #timeProgress': 'onProgressLeave'\r\n    'mousemove #timeProgress': 'onProgressHover'\r\n    'tapstart #timeProgress': 'onProgressTapStart'\r\n    'tapend #timeProgress': 'onProgressTapEnd'\r\n    'tapmove #timeProgress': 'onProgressTapMove'\r\n\r\n  shortcuts:\r\n    '⌘+p, p, ctrl+p': 'onTogglePlay'\r\n    '⌘+[, ctrl+[': 'onScrubBack'\r\n    '⌘+⇧+[, ctrl+⇧+[': 'onSingleScrubBack'\r\n    '⌘+], ctrl+]': 'onScrubForward'\r\n    '⌘+⇧+], ctrl+⇧+]': 'onSingleScrubForward'\r\n\r\n  constructor: ->\r\n    super(arguments...)\r\n    me.on('change:music', @updateMusicButton, @)\r\n\r\n  afterRender: ->\r\n    super()\r\n    @$progressScrubber = $('.scrubber .progress', @$el)\r\n    @hookUpScrubber() unless @options.level.isType('game-dev')\r\n    @updateMusicButton()\r\n    $(window).on('resize', @onWindowResize)\r\n    ua = navigator.userAgent.toLowerCase()\r\n    if /safari/.test(ua) and not /chrome/.test(ua)\r\n      @$el.find('.toggle-fullscreen').hide()\r\n    @timePopup ?= new HoverPopup\r\n    t = $.i18n.t\r\n    @second = t 'units.second'\r\n    @seconds = t 'units.seconds'\r\n    @minute = t 'units.minute'\r\n    @minutes = t 'units.minutes'\r\n    @goto = t 'play_level.time_goto'\r\n    @current = t 'play_level.time_current'\r\n    @total = t 'play_level.time_total'\r\n    @$el.find('#play-button').css('visibility', 'hidden') if @options.level.get 'hidesPlayButton'  # Don't show for first few levels, confuses new players.\r\n\r\n  updatePopupContent: ->\r\n    @timePopup?.updateContent \"<h2>#{@timeToString @newTime}</h2>#{@formatTime(@current, @currentTime)}<br/>#{@formatTime(@total, @totalTime)}\"\r\n\r\n  # These functions could go to some helper class\r\n\r\n  pad2: (num) ->\r\n    if not num? or num is 0 then '00' else ((if num < 10 then '0' else '') + num)\r\n\r\n  formatTime: (text, time) =>\r\n    \"#{text}\\t#{@timeToString time}\"\r\n\r\n  timeToString: (time=0, withUnits=false) ->\r\n    mins = Math.floor(time / 60)\r\n    secs = (time - mins * 60).toFixed(1)\r\n    if withUnits\r\n      ret = ''\r\n      ret = (mins + ' ' + (if mins is 1 then @minute else @minutes)) if (mins > 0)\r\n      ret = (ret + ' ' + secs + ' ' + (if secs is 1 then @second else @seconds)) if (secs > 0 or mins is 0)\r\n    else\r\n      \"#{mins}:#{@pad2 secs}\"\r\n\r\n  # callbacks\r\n\r\n  updateMusicButton: ->\r\n    @$el.find('#music-button').toggleClass('music-on', me.get('music'))\r\n\r\n  onSetLetterbox: (e) ->\r\n    return if @realTime\r\n    @togglePlaybackControls !e.on\r\n    @disabled = e.on\r\n\r\n  togglePlaybackControls: (to) ->\r\n    buttons = @$el.find '#play-button, .scrubber-handle'\r\n    buttons.css 'visibility', if to then 'visible' else 'hidden'\r\n\r\n  onTomeCast: (e) ->\r\n    return unless e.realTime\r\n    @realTime = true\r\n    @togglePlaybackControls false\r\n    Backbone.Mediator.publish 'playback:real-time-playback-started', {}\r\n    @playSound 'real-time-playback-start'\r\n\r\n  onWindowResize: (s...) =>\r\n    @barWidth = $('.progress', @$el).width()\r\n\r\n  onNewWorld: (e) ->\r\n    @updateBarWidth e.world.frames.length, e.world.maxTotalFrames, e.world.dt\r\n\r\n  updateBarWidth: (loadedFrameCount, maxTotalFrames, dt) ->\r\n    @totalTime = (loadedFrameCount - 1) * dt\r\n    pct = parseInt(100 * loadedFrameCount / (maxTotalFrames - 1)) + '%'\r\n    @barWidth = $('.progress', @$el).css('width', pct).show().width()\r\n    $('.scrubber .progress', @$el).slider('enable', true)\r\n    @newTime = 0\r\n    @currentTime = 0\r\n    @lastLoadedFrameCount = loadedFrameCount\r\n\r\n  onDisableControls: (e) ->\r\n    if not e.controls or ('playback' in e.controls)\r\n      @disabled = true\r\n      $('button', @$el).addClass('disabled')\r\n      try\r\n        @$progressScrubber.slider('disable', true)\r\n      catch error\r\n        console.warn('error disabling scrubber', error)\r\n      @timePopup?.disable()\r\n      $('#volume-button', @$el).removeClass('disabled')\r\n      @$el.addClass 'controls-disabled'\r\n\r\n  onEnableControls: (e) ->\r\n    return if @realTime\r\n    if not e.controls or ('playback' in e.controls)\r\n      @disabled = false\r\n      $('button', @$el).removeClass('disabled')\r\n      try\r\n        @$progressScrubber.slider('enable', true)\r\n      catch error\r\n        console.warn('error enabling scrubber', error)\r\n      @timePopup?.enable()\r\n      @$el.removeClass 'controls-disabled'\r\n\r\n  onSetPlaying: (e) ->\r\n    @playing = (e ? {}).playing ? true\r\n    button = @$el.find '#play-button'\r\n    ended = button.hasClass 'ended'\r\n    changed = button.hasClass('playing') isnt @playing\r\n    button.toggleClass('playing', @playing and not ended).toggleClass('paused', not @playing and not ended)\r\n    @playSound (if @playing then 'playback-play' else 'playback-pause') unless @options.level.isType('game-dev')\r\n    return   # don't stripe the bar\r\n    bar = @$el.find '.scrubber .progress'\r\n    bar.toggleClass('progress-striped', @playing and not ended).toggleClass('active', @playing and not ended)\r\n\r\n  onSetVolume: (e) ->\r\n    classes = ['vol-off', 'vol-down', 'vol-up']\r\n    button = $('#volume-button', @$el)\r\n    button.removeClass(c) for c in classes\r\n    button.addClass(classes[0]) if e.volume <= 0.0\r\n    button.addClass(classes[1]) if e.volume > 0.0 and e.volume < 1.0\r\n    button.addClass(classes[2]) if e.volume >= 1.0\r\n\r\n  onScrub: (e, options) ->\r\n    e?.preventDefault?()\r\n    options.scrubDuration = 500\r\n    Backbone.Mediator.publish('level:set-time', options)\r\n\r\n  onScrubForward: (e) ->\r\n    @onScrub e, ratioOffset: 0.05\r\n\r\n  onSingleScrubForward: (e) ->\r\n    @onScrub e, frameOffset: 1\r\n\r\n  onScrubBack: (e) ->\r\n    @onScrub e, ratioOffset: -0.05\r\n\r\n  onSingleScrubBack: (e) ->\r\n    @onScrub e, frameOffset: -1\r\n\r\n  onFrameChanged: (e) ->\r\n    if e.progress isnt @lastProgress\r\n      @currentTime = e.frame / e.world.frameRate\r\n      @updatePopupContent() if @timePopup?.shown\r\n      @updateProgress(e.progress, e.world)\r\n      @updatePlayButton(e.progress)\r\n    @lastProgress = e.progress\r\n\r\n  onProgressEnter: (e) ->\r\n    # Why it needs itself as parameter you ask? Ask Twitter instead.\r\n    @timePopup?.enter @timePopup\r\n\r\n  onProgressLeave: (e) ->\r\n    @timePopup?.leave @timePopup\r\n\r\n  onProgressHover: (e, offsetX) ->\r\n    timeRatio = @$progressScrubber.width() / @totalTime\r\n    offsetX ?= e.clientX - $(e.target).closest('#timeProgress').offset().left\r\n    offsetX = Math.max 0, offsetX\r\n    @newTime = offsetX / timeRatio\r\n    @updatePopupContent()\r\n    @timePopup?.onHover e\r\n\r\n    # Show it instantaneously if close enough to current time.\r\n    if @timePopup and Math.abs(@currentTime - @newTime) < 1 and not @timePopup.shown\r\n      @timePopup.show()\r\n\r\n  onProgressTapStart: (e, touchData) ->\r\n    return unless application.isIPadApp\r\n    @onProgressEnter e\r\n    screenOffsetX = e.clientX ? touchData?.position.x ? 0\r\n    offsetX = screenOffsetX - $(e.target).closest('#timeProgress').offset().left\r\n    offsetX = Math.max offsetX, 0\r\n    @scrubTo offsetX / @$progressScrubber.width()\r\n    @onTogglePlay() if @$el.find('#play-button').hasClass 'playing'\r\n\r\n  onProgressTapEnd: (e, touchData) ->\r\n    return unless application.isIPadApp\r\n    @onProgressLeave e\r\n\r\n  onProgressTapMove: (e, touchData) ->\r\n    return unless application.isIPadApp  # Not sure why the tap events would fire when it's not one.\r\n    screenOffsetX = e.clientX ? touchData?.position.x ? 0\r\n    offsetX = screenOffsetX - $(e.target).closest('#timeProgress').offset().left\r\n    offsetX = Math.max offsetX, 0\r\n    @onProgressHover e, offsetX\r\n    @scrubTo offsetX / @$progressScrubber.width()\r\n\r\n  updateProgress: (progress, world) ->\r\n    if world.frames.length isnt @lastLoadedFrameCount\r\n      @updateBarWidth world.frames.length, world.maxTotalFrames, world.dt\r\n    wasLoaded = @worldCompletelyLoaded\r\n    @worldCompletelyLoaded = world.frames.length is world.totalFrames\r\n    if @realTime and @worldCompletelyLoaded and not wasLoaded\r\n      Backbone.Mediator.publish 'playback:real-time-playback-ended', {}\r\n      Backbone.Mediator.publish 'level:set-letterbox', on: false\r\n    $('.scrubber .progress-bar', @$el).css('width', \"#{progress * 100}%\")\r\n\r\n  updatePlayButton: (progress) ->\r\n    playButton = @$el.find('#play-button')\r\n    wasEnded = playButton.hasClass('ended')\r\n    if @worldCompletelyLoaded and progress >= 0.99 and @lastProgress < 0.99\r\n      playButton.removeClass('playing').removeClass('paused').addClass('ended')\r\n      Backbone.Mediator.publish 'level:set-letterbox', on: false if @realTime\r\n      Backbone.Mediator.publish 'playback:real-time-playback-ended', {} if @realTime\r\n    if progress < 0.99 and @lastProgress >= 0.99\r\n      playButton.removeClass('ended')\r\n      playButton.addClass(if @playing then 'playing' else 'paused')\r\n    isEnded = playButton.hasClass('ended')\r\n    if wasEnded isnt isEnded\r\n      Backbone.Mediator.publish 'playback:ended-changed', ended: isEnded\r\n\r\n  onRealTimePlaybackEnded: (e) ->\r\n    return unless @realTime\r\n    @realTime = false\r\n    @togglePlaybackControls true\r\n    @playSound 'real-time-playback-end'\r\n\r\n  onStopRealTimePlayback: (e) ->\r\n    Backbone.Mediator.publish 'level:set-letterbox', on: false\r\n    Backbone.Mediator.publish 'playback:real-time-playback-ended', {}\r\n\r\n  # to refactor\r\n\r\n  hookUpScrubber: ->\r\n    @sliderIncrements = 500  # max slider width before we skip pixels\r\n    @$progressScrubber.slider(\r\n      max: @sliderIncrements\r\n      animate: 'slow'\r\n      slide: (event, ui) =>\r\n        return if @shouldIgnore()\r\n        ++@slideCount\r\n        oldRatio = @getScrubRatio()\r\n        @scrubTo ui.value / @sliderIncrements\r\n        if ratioChange = @getScrubRatio() - oldRatio\r\n          sound = \"playback-scrub-slide-#{if ratioChange > 0 then 'forward' else 'back'}-#{@slideCount % 3}\"\r\n          unless /back/.test sound  # We don't have the back sounds in yet: http://discourse.codecombat.com/t/bug-some-mp3-lost/4830\r\n            @playSound sound, (Math.min 1, Math.abs ratioChange * 50)\r\n\r\n      start: (event, ui) =>\r\n        return if @shouldIgnore()\r\n        @slideCount = 0\r\n        @wasPlaying = @playing and not $('#play-button').hasClass('ended')\r\n        Backbone.Mediator.publish 'level:set-playing', {playing: false}\r\n        @playSound 'playback-scrub-start', 0.5\r\n\r\n\r\n      stop: (event, ui) =>\r\n        return if @shouldIgnore()\r\n        @actualProgress = ui.value / @sliderIncrements\r\n        Backbone.Mediator.publish 'playback:manually-scrubbed', ratio: @actualProgress  # For scripts\r\n        Backbone.Mediator.publish 'level:set-playing', {playing: @wasPlaying}\r\n        if @slideCount < 3\r\n          @wasPlaying = false\r\n          Backbone.Mediator.publish 'level:set-playing', {playing: false}\r\n          @$el.find('.scrubber-handle').effect('bounce', {times: 2})\r\n        else\r\n          @playSound 'playback-scrub-end', 0.5\r\n\r\n    )\r\n\r\n  getScrubRatio: ->\r\n    @$progressScrubber.find('.progress-bar').width() / @$progressScrubber.width()\r\n\r\n  scrubTo: (ratio, duration=0) ->\r\n    return if @shouldIgnore()\r\n    Backbone.Mediator.publish 'level:set-time', ratio: ratio, scrubDuration: duration\r\n\r\n  shouldIgnore: -> return @disabled or @realTime\r\n\r\n  onTogglePlay: (e) ->\r\n    e?.preventDefault?()\r\n    return if @shouldIgnore()\r\n    button = $('#play-button')\r\n    willPlay = button.hasClass('paused') or button.hasClass('ended')\r\n    Backbone.Mediator.publish 'level:set-playing', playing: willPlay\r\n    $(document.activeElement).blur()\r\n\r\n  onToggleVolume: (e) ->\r\n    button = $(e.target).closest('#volume-button')\r\n    classes = ['vol-off', 'vol-down', 'vol-up']\r\n    volumes = [0, 0.4, 1.0]\r\n    for oldClass, i in classes\r\n      if button.hasClass oldClass\r\n        newI = (i + 1) % classes.length\r\n        break\r\n      else if i is classes.length - 1  # no oldClass\r\n        newI = 2\r\n    Backbone.Mediator.publish 'level:set-volume', volume: volumes[newI]\r\n    $(document.activeElement).blur()\r\n\r\n  onToggleMusic: (e) ->\r\n    e?.preventDefault()\r\n    me.set('music', not me.get('music', true))\r\n    me.patch()\r\n    $(document.activeElement).blur()\r\n\r\n  destroy: ->\r\n    me.off('change:music', @updateMusicButton, @)\r\n    $(window).off('resize', @onWindowResize)\r\n    @onWindowResize = null\r\n    super()\r\n\r\n# popover that shows at the current mouse position on the progressbar, using the bootstrap popover.\r\n# Could make this into a jQuery plugins itself theoretically.\r\nclass HoverPopup extends $.fn.popover.Constructor\r\n  constructor: () ->\r\n    @enabled = true\r\n    @shown = false\r\n    @type = 'HoverPopup'\r\n    @options =\r\n      placement: 'top'\r\n      container: 'body'\r\n      animation: true\r\n      html: true\r\n      delay:\r\n        show: 400\r\n    @$element = $('#timeProgress')\r\n    @$tip = $('#timePopover')\r\n\r\n    @content = ''\r\n\r\n  getContent: -> @content\r\n\r\n  show: ->\r\n    unless @shown\r\n      super()\r\n      @shown = true\r\n\r\n  updateContent: (@content) ->\r\n    @setContent()\r\n    @$tip.addClass('fade top in')\r\n\r\n  onHover: (@e) ->\r\n    pos = @getPosition()\r\n    actualWidth  = @$tip[0].offsetWidth\r\n    actualHeight = @$tip[0].offsetHeight\r\n    calculatedOffset =\r\n      top: pos.top - actualHeight\r\n      left: pos.left + pos.width / 2 - actualWidth / 2\r\n    @applyPlacement(calculatedOffset, 'top')\r\n\r\n  getPosition: ->\r\n    top: @$element.offset().top\r\n    left: if @e? then @e.pageX else @$element.offset().left\r\n    height: 0\r\n    width: 0\r\n\r\n  hide: ->\r\n    super()\r\n    @shown = false\r\n\r\n  disable: ->\r\n    super()\r\n    @hide()\r\n","RootView = require 'views/core/RootView'\r\n\r\nGameUIState = require 'models/GameUIState'\r\nGod = require 'lib/God'\r\nLevelLoader = require 'lib/LevelLoader'\r\nGoalManager = require 'lib/world/GoalManager'\r\nScriptManager = require 'lib/scripts/ScriptManager'\r\nSurface = require 'lib/surface/Surface'\r\nThangType = require 'models/ThangType'\r\nLevel = require 'models/Level'\r\nLevelSession = require 'models/LevelSession'\r\nState = require 'models/State'\r\nutils = require 'core/utils'\r\nurls = require 'core/urls'\r\nCourse = require 'models/Course'\r\nGameDevVictoryModal = require './modal/GameDevVictoryModal'\r\n\r\nrequire 'game-libraries'\r\n\r\nTEAM = 'humans'\r\n\r\nmodule.exports = class PlayGameDevLevelView extends RootView\r\n  id: 'play-game-dev-level-view'\r\n  template: require 'templates/play/level/play-game-dev-level-view'\r\n  \r\n  subscriptions:\r\n    'god:new-world-created': 'onNewWorld'\r\n\r\n  events:\r\n    'click #edit-level-btn': 'onEditLevelButton'\r\n    'click #play-btn': 'onClickPlayButton'\r\n    'click #copy-url-btn': 'onClickCopyURLButton'\r\n    'click #play-more-codecombat-btn': 'onClickPlayMoreCodeCombatButton'\r\n\r\n  initialize: (@options, @levelID, @sessionID) ->\r\n    @state = new State({\r\n      loading: true\r\n      progress: 0\r\n      creatorString: ''\r\n      isOwner: false\r\n    })\r\n\r\n    @supermodel.on 'update-progress', (progress) =>\r\n      @state.set({progress: (progress*100).toFixed(1)+'%'})\r\n    @level = new Level()\r\n    @session = new LevelSession()\r\n    @gameUIState = new GameUIState()\r\n    @courseID = @getQueryVariable 'course'\r\n    @god = new God({ @gameUIState, indefiniteLength: true })\r\n    @levelLoader = new LevelLoader({ @supermodel, @levelID, @sessionID, observing: true, team: TEAM, @courseID })\r\n    @supermodel.setMaxProgress 1 # Hack, why are we setting this to 0.2 in LevelLoader?\r\n    @listenTo @state, 'change', _.debounce @renderAllButCanvas\r\n\r\n    @levelLoader.loadWorldNecessities()\r\n\r\n    .then (levelLoader) =>\r\n      { @level, @session, @world } = levelLoader\r\n      @god.setLevel(@level.serialize {@supermodel, @session})\r\n      @god.setWorldClassMap(@world.classMap)\r\n      @goalManager = new GoalManager(@world, @level.get('goals'), @team)\r\n      @god.setGoalManager(@goalManager)\r\n      @god.angelsShare.firstWorld = false # HACK\r\n      me.team = TEAM\r\n      @session.set 'team', TEAM\r\n      @scriptManager = new ScriptManager({\r\n        scripts: @world.scripts or [], view: @, @session, levelID: @level.get('slug')})\r\n      @scriptManager.loadFromSession() # Should we? TODO: Figure out how scripts work for game dev levels\r\n      @howToPlayText = utils.i18n(@level.attributes, 'studentPlayInstructions')\r\n      @howToPlayText ?= $.i18n.t('play_game_dev_level.default_student_instructions')\r\n      @howToPlayText = marked(@howToPlayText, { sanitize: true })\r\n      @renderAllButCanvas()\r\n      @supermodel.finishLoading()\r\n\r\n    .then (supermodel) =>\r\n      @levelLoader.destroy()\r\n      @levelLoader = null\r\n      webGLSurface = @$('canvas#webgl-surface')\r\n      normalSurface = @$('canvas#normal-surface')\r\n      @surface = new Surface(@world, normalSurface, webGLSurface, {\r\n        thangTypes: @supermodel.getModels(ThangType)\r\n        levelType: @level.get('type', true)\r\n        @gameUIState\r\n        resizeStrategy: 'wrapper-size'\r\n      })\r\n      @listenTo @surface, 'resize', @onSurfaceResize\r\n      worldBounds = @world.getBounds()\r\n      bounds = [{x: worldBounds.left, y: worldBounds.top}, {x: worldBounds.right, y: worldBounds.bottom}]\r\n      @surface.camera.setBounds(bounds)\r\n      @surface.camera.zoomTo({x: 0, y: 0}, 0.1, 0)\r\n      @surface.setWorld(@world)\r\n      @scriptManager.initializeCamera()\r\n      @renderSelectors '#info-col'\r\n      @spells = @session.generateSpellsObject level: @level\r\n      goalNames = (utils.i18n(goal, 'name') for goal in @goalManager.goals)\r\n      \r\n      course = if @courseID then new Course({_id: @courseID}) else null\r\n      shareURL = urls.playDevLevel({@level, @session, course})\r\n      \r\n      @state.set({\r\n        loading: false\r\n        goalNames\r\n        shareURL\r\n        creatorString: $.i18n.t('play_game_dev_level.created_by').replace('{{name}}', @session.get('creatorName'))\r\n        isOwner: me.id is @session.get('creator')\r\n      })\r\n      @eventProperties = {\r\n        category: 'Play GameDev Level'\r\n        @courseID\r\n        sessionID: @session.id\r\n        levelID: @level.id\r\n        levelSlug: @level.get('slug')\r\n      }\r\n      window.tracker?.trackEvent 'Play GameDev Level - Load', @eventProperties, ['Mixpanel']\r\n      @god.createWorld(@spells, false, false, true)\r\n\r\n    .catch (e) =>\r\n      throw e if e.stack\r\n      @state.set('errorMessage', e.message)\r\n\r\n  onEditLevelButton: ->\r\n    viewClass = 'views/play/level/PlayLevelView'\r\n    route = \"/play/level/#{@level.get('slug')}\"\r\n    Backbone.Mediator.publish 'router:navigate', {\r\n      route, viewClass\r\n      viewArgs: [{}, @levelID]\r\n    }\r\n\r\n  onClickPlayButton: ->\r\n    @god.createWorld(@spells, false, true)\r\n    Backbone.Mediator.publish('playback:real-time-playback-started', {})\r\n    Backbone.Mediator.publish('level:set-playing', {playing: true})\r\n    action = if @state.get('playing') then 'Play GameDev Level - Restart Level' else 'Play GameDev Level - Start Level'\r\n    window.tracker?.trackEvent(action, @eventProperties, ['Mixpanel'])\r\n    @state.set('playing', true)\r\n\r\n  onClickCopyURLButton: ->\r\n    @$('#copy-url-input').val(@state.get('shareURL')).select()\r\n    @tryCopy()\r\n    window.tracker?.trackEvent('Play GameDev Level - Copy URL', @eventProperties, ['Mixpanel'])\r\n\r\n  onClickPlayMoreCodeCombatButton: ->\r\n    window.tracker?.trackEvent('Play GameDev Level - Click Play More CodeCombat', @eventProperties, ['Mixpanel'])\r\n    \r\n  onSurfaceResize: ({height}) ->\r\n    @state.set('surfaceHeight', height)\r\n    \r\n  renderAllButCanvas: ->\r\n    @renderSelectors('#info-col', '#share-row')\r\n    height = @state.get('surfaceHeight')\r\n    if height\r\n      @$el.find('#info-col').css('height', @state.get('surfaceHeight'))\r\n\r\n  onNewWorld: (e) ->\r\n    if @goalManager.checkOverallStatus() is 'success'\r\n      modal = new GameDevVictoryModal({ shareURL: @state.get('shareURL'), @eventProperties })\r\n      @openModalView(modal)\r\n      modal.once 'replay', @onClickPlayButton, @\r\n\r\n  destroy: ->\r\n    @levelLoader?.destroy()\r\n    @surface?.destroy()\r\n    @god?.destroy()\r\n    @goalManager?.destroy()\r\n    @scriptManager?.destroy()\r\n    delete window.world # not sure where this is set, but this is one way to clean it up\r\n    super()\r\n","RootView = require 'views/core/RootView'\r\ntemplate = require 'templates/play/play-level-view'\r\n{me} = require 'core/auth'\r\nThangType = require 'models/ThangType'\r\nutils = require 'core/utils'\r\nstorage = require 'core/storage'\r\n{createAetherOptions} = require 'lib/aether_utils'\r\n\r\n# tools\r\nSurface = require 'lib/surface/Surface'\r\nGod = require 'lib/God'\r\nGoalManager = require 'lib/world/GoalManager'\r\nScriptManager = require 'lib/scripts/ScriptManager'\r\nLevelBus = require 'lib/LevelBus'\r\nLevelLoader = require 'lib/LevelLoader'\r\nLevelSession = require 'models/LevelSession'\r\nLevel = require 'models/Level'\r\nLevelComponent = require 'models/LevelComponent'\r\nArticle = require 'models/Article'\r\nCamera = require 'lib/surface/Camera'\r\nAudioPlayer = require 'lib/AudioPlayer'\r\nSimulator = require 'lib/simulator/Simulator'\r\nGameUIState = require 'models/GameUIState'\r\n\r\n# subviews\r\nLevelLoadingView = require './LevelLoadingView'\r\nProblemAlertView = require './tome/ProblemAlertView'\r\nTomeView = require './tome/TomeView'\r\nChatView = require './LevelChatView'\r\nHUDView = require './LevelHUDView'\r\nLevelDialogueView = require './LevelDialogueView'\r\nControlBarView = require './ControlBarView'\r\nLevelPlaybackView = require './LevelPlaybackView'\r\nGoalsView = require './LevelGoalsView'\r\nLevelFlagsView = require './LevelFlagsView'\r\nGoldView = require './LevelGoldView'\r\nDuelStatsView = require './DuelStatsView'\r\nVictoryModal = require './modal/VictoryModal'\r\nHeroVictoryModal = require './modal/HeroVictoryModal'\r\nCourseVictoryModal = require './modal/CourseVictoryModal'\r\nPicoCTFVictoryModal = require './modal/PicoCTFVictoryModal'\r\nInfiniteLoopModal = require './modal/InfiniteLoopModal'\r\nLevelSetupManager = require 'lib/LevelSetupManager'\r\nContactModal = require 'views/core/ContactModal'\r\nHintsView = require './HintsView'\r\nHintsState = require './HintsState'\r\nWebSurfaceView = require './WebSurfaceView'\r\nSpellPaletteView = require './tome/SpellPaletteView'\r\n\r\nrequire 'game-libraries'\r\n\r\nPROFILE_ME = false\r\n\r\nmodule.exports = class PlayLevelView extends RootView\r\n  id: 'level-view'\r\n  template: template\r\n  cache: false\r\n  shortcutsEnabled: true\r\n  isEditorPreview: false\r\n\r\n  subscriptions:\r\n    'level:set-volume': 'onSetVolume'\r\n    'level:show-victory': 'onShowVictory'\r\n    'level:restart': 'onRestartLevel'\r\n    'level:highlight-dom': 'onHighlightDOM'\r\n    'level:end-highlight-dom': 'onEndHighlight'\r\n    'level:focus-dom': 'onFocusDom'\r\n    'level:disable-controls': 'onDisableControls'\r\n    'level:enable-controls': 'onEnableControls'\r\n    'god:world-load-progress-changed': 'onWorldLoadProgressChanged'\r\n    'god:new-world-created': 'onNewWorld'\r\n    'god:streaming-world-updated': 'onNewWorld'\r\n    'god:infinite-loop': 'onInfiniteLoop'\r\n    'level:reload-from-data': 'onLevelReloadFromData'\r\n    'level:reload-thang-type': 'onLevelReloadThangType'\r\n    'level:started': 'onLevelStarted'\r\n    'level:loading-view-unveiling': 'onLoadingViewUnveiling'\r\n    'level:loading-view-unveiled': 'onLoadingViewUnveiled'\r\n    'level:loaded': 'onLevelLoaded'\r\n    'level:session-loaded': 'onSessionLoaded'\r\n    'playback:real-time-playback-started': 'onRealTimePlaybackStarted'\r\n    'playback:real-time-playback-ended': 'onRealTimePlaybackEnded'\r\n    'ipad:memory-warning': 'onIPadMemoryWarning'\r\n    'store:item-purchased': 'onItemPurchased'\r\n\r\n  events:\r\n    'click #level-done-button': 'onDonePressed'\r\n    'click #stop-real-time-playback-button': -> Backbone.Mediator.publish 'playback:stop-real-time-playback', {}\r\n    'click #fullscreen-editor-background-screen': (e) -> Backbone.Mediator.publish 'tome:toggle-maximize', {}\r\n    'click .contact-link': 'onContactClicked'\r\n\r\n  shortcuts:\r\n    'ctrl+s': 'onCtrlS'\r\n    'esc': 'onEscapePressed'\r\n\r\n  # Initial Setup #############################################################\r\n\r\n  constructor: (options, @levelID) ->\r\n    console.profile?() if PROFILE_ME\r\n    super options\r\n\r\n    @courseID = options.courseID or @getQueryVariable 'course'\r\n    @courseInstanceID = options.courseInstanceID or @getQueryVariable 'course-instance'\r\n\r\n    @isEditorPreview = @getQueryVariable 'dev'\r\n    @sessionID = @getQueryVariable 'session'\r\n    @observing = @getQueryVariable 'observing'\r\n\r\n    @opponentSessionID = @getQueryVariable('opponent')\r\n    @opponentSessionID ?= @options.opponent\r\n    @gameUIState = new GameUIState()\r\n\r\n    $('flying-focus').remove() #Causes problems, so yank it out for play view.\r\n    $(window).on 'resize', @onWindowResize\r\n\r\n    application.tracker?.enableInspectletJS(@levelID)\r\n\r\n    if @isEditorPreview\r\n      @supermodel.shouldSaveBackups = (model) ->  # Make sure to load possibly changed things from localStorage.\r\n        model.constructor.className in ['Level', 'LevelComponent', 'LevelSystem', 'ThangType']\r\n      f = => @load() unless @levelLoader  # Wait to see if it's just given to us through setLevel.\r\n      setTimeout f, 100\r\n    else\r\n      @load()\r\n      application.tracker?.trackEvent 'Started Level Load', category: 'Play Level', level: @levelID, label: @levelID unless @observing\r\n\r\n  setLevel: (@level, givenSupermodel) ->\r\n    @supermodel.models = givenSupermodel.models\r\n    @supermodel.collections = givenSupermodel.collections\r\n    @supermodel.shouldSaveBackups = givenSupermodel.shouldSaveBackups\r\n\r\n    serializedLevel = @level.serialize {@supermodel, @session, @otherSession, headless: false, sessionless: false}\r\n    @god?.setLevel serializedLevel\r\n    if @world\r\n      @world.loadFromLevel serializedLevel, false\r\n    else\r\n      @load()\r\n\r\n  load: ->\r\n    @loadStartTime = new Date()\r\n    levelLoaderOptions = { @supermodel, @levelID, @sessionID, @opponentSessionID, team: @getQueryVariable('team'), @observing, @courseID, @courseInstanceID }\r\n    if me.isSessionless()\r\n      levelLoaderOptions.fakeSessionConfig = {}\r\n    @levelLoader = new LevelLoader levelLoaderOptions\r\n    @listenToOnce @levelLoader, 'world-necessities-loaded', @onWorldNecessitiesLoaded\r\n    @listenTo @levelLoader, 'world-necessity-load-failed', @onWorldNecessityLoadFailed\r\n\r\n  onLevelLoaded: (e) ->\r\n    return if @destroyed\r\n    if (me.isStudent() or me.isTeacher()) and not @courseID and not e.level.isType('course-ladder')\r\n      return _.defer -> application.router.redirectHome()\r\n\r\n    unless e.level.isType('web-dev')\r\n      @god = new God({\r\n        @gameUIState\r\n        indefiniteLength: e.level.isType('game-dev')\r\n      })\r\n    @setupGod() if @waitingToSetUpGod\r\n\r\n  trackLevelLoadEnd: ->\r\n    return if @isEditorPreview\r\n    @loadEndTime = new Date()\r\n    @loadDuration = @loadEndTime - @loadStartTime\r\n    console.debug \"Level unveiled after #{(@loadDuration / 1000).toFixed(2)}s\"\r\n    unless @observing\r\n      application.tracker?.trackEvent 'Finished Level Load', category: 'Play Level', label: @levelID, level: @levelID, loadDuration: @loadDuration\r\n      application.tracker?.trackTiming @loadDuration, 'Level Load Time', @levelID, @levelID\r\n\r\n  isCourseMode: -> @courseID and @courseInstanceID\r\n\r\n  showAds: ->\r\n    return false # No ads for now.\r\n    if application.isProduction() && !me.isPremium() && !me.isTeacher() && !window.serverConfig.picoCTF && !@isCourseMode()\r\n      return me.getCampaignAdsGroup() is 'leaderboard-ads'\r\n    false\r\n\r\n  # CocoView overridden methods ###############################################\r\n\r\n  getRenderData: ->\r\n    c = super()\r\n    c.world = @world\r\n    c\r\n\r\n  toggleSpellPalette: ->\r\n    @$el.toggleClass 'no-api'\r\n    $(window).trigger 'resize'\r\n\r\n  afterRender: ->\r\n    super()\r\n    window.onPlayLevelViewLoaded? @  # still a hack\r\n    @insertSubView @loadingView = new LevelLoadingView autoUnveil: @options.autoUnveil or @observing, level: @levelLoader?.level ? @level, session: @levelLoader?.session ? @session  # May not have @level loaded yet\r\n    @$el.find('#level-done-button').hide()\r\n    $('body').addClass('is-playing')\r\n    $('body').bind('touchmove', false) if @isIPadApp()\r\n\r\n  afterInsert: ->\r\n    super()\r\n\r\n  # Partially Loaded Setup ####################################################\r\n\r\n  onWorldNecessitiesLoaded: ->\r\n    # Called when we have enough to build the world, but not everything is loaded\r\n    @grabLevelLoaderData()\r\n    team = @getQueryVariable('team') ?  @session.get('team') ? @world?.teamForPlayer(0) ? 'humans'\r\n    @loadOpponentTeam(team)\r\n    @setupGod()\r\n    @setTeam team\r\n    @initGoalManager()\r\n    @insertSubviews()\r\n    @initVolume()\r\n    @register()\r\n    @controlBar.setBus(@bus)\r\n    @initScriptManager()\r\n\r\n  onWorldNecessityLoadFailed: (resource) ->\r\n    @loadingView.onLoadError(resource)\r\n\r\n  grabLevelLoaderData: ->\r\n    @session = @levelLoader.session\r\n    @level = @levelLoader.level\r\n    if @level.isType('web-dev')\r\n      @$el.addClass 'web-dev'  # Hide some of the elements we won't be using\r\n      return\r\n    @world = @levelLoader.world\r\n    if @level.isType('game-dev')\r\n      @$el.addClass 'game-dev'\r\n      @howToPlayText = utils.i18n(@level.attributes, 'studentPlayInstructions')\r\n      @howToPlayText ?= $.i18n.t('play_game_dev_level.default_student_instructions')\r\n      @howToPlayText = marked(@howToPlayText, { sanitize: true })\r\n      @renderSelectors('#how-to-play-game-dev-panel')\r\n    @$el.addClass 'hero' if @level.isType('hero', 'hero-ladder', 'hero-coop', 'course', 'course-ladder', 'game-dev')  # TODO: figure out what this does and comment it\r\n    @$el.addClass 'flags' if _.any(@world.thangs, (t) -> (t.programmableProperties and 'findFlags' in t.programmableProperties) or t.inventory?.flag) or @level.get('slug') is 'sky-span'\r\n    # TODO: Update terminology to always be opponentSession or otherSession\r\n    # TODO: E.g. if it's always opponent right now, then variable names should be opponentSession until we have coop play\r\n    @otherSession = @levelLoader.opponentSession\r\n    unless @level.isType('game-dev')\r\n      @worldLoadFakeResources = []  # first element (0) is 1%, last (99) is 100%\r\n      for percent in [1 .. 100]\r\n        @worldLoadFakeResources.push @supermodel.addSomethingResource 1\r\n    @renderSelectors '#stop-real-time-playback-button'\r\n\r\n  onWorldLoadProgressChanged: (e) ->\r\n    return unless e.god is @god\r\n    return unless @worldLoadFakeResources\r\n    @lastWorldLoadPercent ?= 0\r\n    worldLoadPercent = Math.floor 100 * e.progress\r\n    for percent in [@lastWorldLoadPercent + 1 .. worldLoadPercent] by 1\r\n      @worldLoadFakeResources[percent - 1].markLoaded()\r\n    @lastWorldLoadPercent = worldLoadPercent\r\n    @worldFakeLoadResources = null if worldLoadPercent is 100  # Done, don't need to watch progress any more.\r\n\r\n  loadOpponentTeam: (myTeam) ->\r\n    opponentSpells = []\r\n    for spellTeam, spells of @session.get('teamSpells') ? @otherSession?.get('teamSpells') ? {}\r\n      continue if spellTeam is myTeam or not myTeam\r\n      opponentSpells = opponentSpells.concat spells\r\n    if (not @session.get('teamSpells')) and @otherSession?.get('teamSpells')\r\n      @session.set('teamSpells', @otherSession.get('teamSpells'))\r\n    opponentCode = @otherSession?.get('code') or {}\r\n    myCode = @session.get('code') or {}\r\n    for spell in opponentSpells\r\n      [thang, spell] = spell.split '/'\r\n      c = opponentCode[thang]?[spell]\r\n      myCode[thang] ?= {}\r\n      if c then myCode[thang][spell] = c else delete myCode[thang][spell]\r\n    @session.set('code', myCode)\r\n\r\n  setupGod: ->\r\n    return if @level.isType('web-dev')\r\n    return @waitingToSetUpGod = true unless @god\r\n    @waitingToSetUpGod = undefined\r\n    @god.setLevel @level.serialize {@supermodel, @session, @otherSession, headless: false, sessionless: false}\r\n    @god.setLevelSessionIDs if @otherSession then [@session.id, @otherSession.id] else [@session.id]\r\n    @god.setWorldClassMap @world.classMap\r\n\r\n  setTeam: (team) ->\r\n    team = team?.team unless _.isString team\r\n    team ?= 'humans'\r\n    me.team = team\r\n    @session.set 'team', team\r\n    Backbone.Mediator.publish 'level:team-set', team: team  # Needed for scripts\r\n    @team = team\r\n\r\n  initGoalManager: ->\r\n    @goalManager = new GoalManager(@world, @level.get('goals'), @team)\r\n    @god?.setGoalManager @goalManager\r\n\r\n  updateGoals: (goals) ->\r\n    @level.set 'goals', goals\r\n    @goalManager.destroy()\r\n    @initGoalManager()\r\n\r\n  updateSpellPalette: (thang, spell) ->\r\n    return unless thang and @spellPaletteView?.thang isnt thang and (thang.programmableProperties or thang.apiProperties or thang.programmableHTMLProperties)\r\n    useHero = /hero/.test(spell.getSource()) or not /(self[\\.\\:]|this\\.|\\@)/.test(spell.getSource())\r\n    @spellPaletteView = @insertSubView new SpellPaletteView { thang, @supermodel, programmable: spell?.canRead(), language: spell?.language ? @session.get('codeLanguage'), session: @session, level: @level, courseID: @courseID, courseInstanceID: @courseInstanceID, useHero }\r\n    #@spellPaletteView.toggleControls {}, spell.view.controlsEnabled if spell?.view   # TODO: know when palette should have been disabled but didn't exist\r\n\r\n\r\n  insertSubviews: ->\r\n    @hintsState = new HintsState({ hidden: true }, { @session, @level, @supermodel })\r\n    @insertSubView @tome = new TomeView { @levelID, @session, @otherSession, playLevelView: @, thangs: @world?.thangs ? [], @supermodel, @level, @observing, @courseID, @courseInstanceID, @god, @hintsState }\r\n    @insertSubView new LevelPlaybackView session: @session, level: @level unless @level.isType('web-dev')\r\n    @insertSubView new GoalsView {level: @level}\r\n    @insertSubView new LevelFlagsView levelID: @levelID, world: @world if @$el.hasClass 'flags'\r\n    @insertSubView new GoldView {} unless @level.get('slug') in ['wakka-maul'] unless @level.isType('web-dev')\r\n    @insertSubView new HUDView {level: @level} unless @level.isType('web-dev')\r\n    @insertSubView new LevelDialogueView {level: @level, sessionID: @session.id}\r\n    @insertSubView new ChatView levelID: @levelID, sessionID: @session.id, session: @session\r\n    @insertSubView new ProblemAlertView session: @session, level: @level, supermodel: @supermodel\r\n    @insertSubView new DuelStatsView level: @level, session: @session, otherSession: @otherSession, supermodel: @supermodel, thangs: @world.thangs if @level.isType('hero-ladder', 'course-ladder')\r\n    @insertSubView @controlBar = new ControlBarView {worldName: utils.i18n(@level.attributes, 'name'), session: @session, level: @level, supermodel: @supermodel, courseID: @courseID, courseInstanceID: @courseInstanceID}\r\n    @insertSubView @hintsView = new HintsView({ @session, @level, @hintsState }), @$('.hints-view')\r\n    @insertSubView @webSurface = new WebSurfaceView {level: @level, @goalManager} if @level.isType('web-dev')\r\n    #_.delay (=> Backbone.Mediator.publish('level:set-debug', debug: true)), 5000 if @isIPadApp()   # if me.displayName() is 'Nick'\r\n\r\n  initVolume: ->\r\n    volume = me.get('volume')\r\n    volume = 1.0 unless volume?\r\n    Backbone.Mediator.publish 'level:set-volume', volume: volume\r\n\r\n  initScriptManager: ->\r\n    return if @level.isType('web-dev')\r\n    @scriptManager = new ScriptManager({scripts: @world.scripts or [], view: @, session: @session, levelID: @level.get('slug')})\r\n    @scriptManager.loadFromSession()\r\n\r\n  register: ->\r\n    @bus = LevelBus.get(@levelID, @session.id)\r\n    @bus.setSession(@session)\r\n    @bus.setSpells @tome.spells\r\n    #@bus.connect() if @session.get('multiplayer')  # TODO: session's multiplayer flag removed; connect bus another way if we care about it\r\n\r\n  # Load Completed Setup ######################################################\r\n\r\n  onSessionLoaded: (e) ->\r\n    return if @session\r\n    Backbone.Mediator.publish \"ipad:language-chosen\", language: e.session.get('codeLanguage') ? \"python\"\r\n    # Just the level and session have been loaded by the level loader\r\n    if e.level.get('slug') is 'zero-sum'\r\n      sorcerer = '52fd1524c7e6cf99160e7bc9'\r\n      if e.session.get('creator') is '532dbc73a622924444b68ed9'  # Wizard Dude gets his own avatar\r\n        sorcerer = '53e126a4e06b897606d38bef'\r\n      e.session.set 'heroConfig', {\"thangType\":sorcerer,\"inventory\":{\"misc-0\":\"53e2396a53457600003e3f0f\",\"programming-book\":\"546e266e9df4a17d0d449be5\",\"minion\":\"54eb5dbc49fa2d5c905ddf56\",\"feet\":\"53e214f153457600003e3eab\",\"right-hand\":\"54eab7f52b7506e891ca7202\",\"left-hand\":\"5463758f3839c6e02811d30f\",\"wrists\":\"54693797a2b1f53ce79443e9\",\"gloves\":\"5469425ca2b1f53ce7944421\",\"torso\":\"546d4a549df4a17d0d449a97\",\"neck\":\"54693274a2b1f53ce79443c9\",\"eyes\":\"546941fda2b1f53ce794441d\",\"head\":\"546d4ca19df4a17d0d449abf\"}}\r\n    # TODO: Remove post-KR\r\n    else if e.level.get('slug') is 'the-gauntlet-kr'\r\n      lightseeker = '583d2cca6ffa3e65d170f29f'\r\n      e.session.set 'heroConfig', {\"thangType\":lightseeker,\"inventory\":{\r\n        \"feet\":\"53e237bf53457600003e3f05\",\r\n        \"head\":\"546d38269df4a17d0d4499ff\",\r\n        \"eyes\":\"53e238df53457600003e3f0b\",\r\n        \"torso\":\"53e22eac53457600003e3efc\",\r\n        \"right-hand\":\"53e218d853457600003e3ebe\",\r\n        \"programming-book\":\"53e4108204c00d4607a89f78\"\r\n      }}\r\n    else if e.level.get('slug') is 'woodland-cleaver-kr'\r\n      lightseeker = '583d2cca6ffa3e65d170f29f'\r\n      e.session.set 'heroConfig', {\"thangType\":lightseeker,\"inventory\":{\r\n        \"eyes\": \"53e238df53457600003e3f0b\",\r\n        \"head\": \"546d38269df4a17d0d4499ff\",\r\n        \"torso\": \"545d3f0b2d03e700001b5a5d\",\r\n        \"right-hand\": \"544d7d1f8494308424f564a3\",\r\n        \"wrists\": \"53e2396a53457600003e3f0f\",\r\n        \"programming-book\": \"546e25d99df4a17d0d449be1\",\r\n        \"left-hand\": \"544c310ae0017993fce214bf\"\r\n      }}\r\n    else if e.level.get('slug') is 'crossroads-kr'\r\n      lightseeker = '583d2cca6ffa3e65d170f29f'\r\n      e.session.set 'heroConfig', {\"thangType\":lightseeker,\"inventory\":{\r\n        \"wrists\": \"53e2396a53457600003e3f0f\",\r\n        \"eyes\": \"53e2167653457600003e3eb3\",\r\n        \"feet\": \"546d4d589df4a17d0d449ac9\",\r\n        \"left-hand\": \"544d7bb88494308424f56493\",\r\n        \"right-hand\": \"54694ba3a2b1f53ce794444d\",\r\n        \"waist\": \"5437002a7beba4a82024a97d\",\r\n        \"programming-book\": \"546e25d99df4a17d0d449be1\",\r\n        \"gloves\": \"5469425ca2b1f53ce7944421\",\r\n        \"head\": \"546d390b9df4a17d0d449a0b\",\r\n        \"torso\": \"546aaf1b3777d6186329285e\",\r\n        \"neck\": \"54693140a2b1f53ce79443bc\"\r\n      }}\r\n    else if e.level.get('slug') in ['ace-of-coders', 'elemental-wars']\r\n      goliath = '55e1a6e876cb0948c96af9f8'\r\n      e.session.set 'heroConfig', {\"thangType\":goliath,\"inventory\":{\"eyes\":\"53eb99f41a100989a40ce46e\",\"neck\":\"54693274a2b1f53ce79443c9\",\"wrists\":\"54693797a2b1f53ce79443e9\",\"feet\":\"546d4d8e9df4a17d0d449acd\",\"minion\":\"54eb5bf649fa2d5c905ddf4a\",\"programming-book\":\"557871261ff17fef5abee3ee\"}}\r\n    else if e.level.get('slug') is 'the-battle-of-sky-span'\r\n      wizard = '52fc1460b2b91c0d5a7b6af3'\r\n      e.session.set 'heroConfig', {\"thangType\":wizard,\"inventory\":{}}\r\n    else if e.level.get('slug') is 'assembly-speed'\r\n      raider = '55527eb0b8abf4ba1fe9a107'\r\n      e.session.set 'heroConfig', {\"thangType\":raider,\"inventory\":{}}\r\n    else if e.level.isType('hero', 'hero-ladder', 'hero-coop') and not _.size e.session.get('heroConfig')?.inventory ? {}\r\n      @setupManager?.destroy()\r\n      @setupManager = new LevelSetupManager({supermodel: @supermodel, level: e.level, levelID: @levelID, parent: @, session: e.session, courseID: @courseID, courseInstanceID: @courseInstanceID})\r\n      @setupManager.open()\r\n\r\n  onLoaded: ->\r\n    _.defer => @onLevelLoaderLoaded()\r\n\r\n  onLevelLoaderLoaded: ->\r\n    # Everything is now loaded\r\n    return unless @levelLoader.progress() is 1  # double check, since closing the guide may trigger this early\r\n\r\n    # Save latest level played.\r\n    if not @observing and not (@levelLoader.level.isType('ladder', 'ladder-tutorial'))\r\n      me.set('lastLevel', @levelID)\r\n      me.save()\r\n      application.tracker?.identify()\r\n    @saveRecentMatch() if @otherSession\r\n    @levelLoader.destroy()\r\n    @levelLoader = null\r\n    if @level.isType('web-dev')\r\n      Backbone.Mediator.publish 'level:started', {}\r\n    else\r\n      @initSurface()\r\n\r\n  saveRecentMatch: ->\r\n    allRecentlyPlayedMatches = storage.load('recently-played-matches') ? {}\r\n    recentlyPlayedMatches = allRecentlyPlayedMatches[@levelID] ? []\r\n    allRecentlyPlayedMatches[@levelID] = recentlyPlayedMatches\r\n    recentlyPlayedMatches.unshift yourTeam: me.team, otherSessionID: @otherSession.id, opponentName: @otherSession.get('creatorName') unless _.find recentlyPlayedMatches, otherSessionID: @otherSession.id\r\n    recentlyPlayedMatches.splice(8)\r\n    storage.save 'recently-played-matches', allRecentlyPlayedMatches\r\n\r\n  initSurface: ->\r\n    webGLSurface = $('canvas#webgl-surface', @$el)\r\n    normalSurface = $('canvas#normal-surface', @$el)\r\n    surfaceOptions = {\r\n      thangTypes: @supermodel.getModels(ThangType)\r\n      @observing\r\n      playerNames: @findPlayerNames()\r\n      levelType: @level.get('type', true)\r\n      stayVisible: @showAds()\r\n      @gameUIState\r\n      @level # TODO: change from levelType to level\r\n    }\r\n    @surface = new Surface(@world, normalSurface, webGLSurface, surfaceOptions)\r\n    worldBounds = @world.getBounds()\r\n    bounds = [{x: worldBounds.left, y: worldBounds.top}, {x: worldBounds.right, y: worldBounds.bottom}]\r\n    @surface.camera.setBounds(bounds)\r\n    @surface.camera.zoomTo({x: 0, y: 0}, 0.1, 0)\r\n    @listenTo @surface, 'resize', ({ height }) ->\r\n      @$('#stop-real-time-playback-button').css({ top: height - 30 })\r\n      @$('#how-to-play-game-dev-panel').css({ height })\r\n\r\n  findPlayerNames: ->\r\n    return {} unless @level.isType('ladder', 'hero-ladder', 'course-ladder')\r\n    playerNames = {}\r\n    for session in [@session, @otherSession] when session?.get('team')\r\n      playerNames[session.get('team')] = session.get('creatorName') or 'Anonymous'\r\n    playerNames\r\n\r\n  # Once Surface is Loaded ####################################################\r\n\r\n  onLevelStarted: ->\r\n    return unless @surface? or @webSurface?\r\n    @loadingView.showReady()\r\n    @trackLevelLoadEnd()\r\n    if window.currentModal and not window.currentModal.destroyed and window.currentModal.constructor isnt VictoryModal\r\n      return Backbone.Mediator.subscribeOnce 'modal:closed', @onLevelStarted, @\r\n    @surface?.showLevel()\r\n    Backbone.Mediator.publish 'level:set-time', time: 0\r\n    if (@isEditorPreview or @observing) and not @getQueryVariable('intro')\r\n      @loadingView.startUnveiling()\r\n      @loadingView.unveil true\r\n    else\r\n      @scriptManager?.initializeCamera()\r\n\r\n  onLoadingViewUnveiling: (e) ->\r\n    @selectHero()\r\n\r\n  onLoadingViewUnveiled: (e) ->\r\n    if @level.isType('course-ladder', 'hero-ladder') or @observing\r\n      # We used to autoplay by default, but now we only do it if the level says to in the introduction script.\r\n      Backbone.Mediator.publish 'level:set-playing', playing: true\r\n    @loadingView.$el.remove()\r\n    @removeSubView @loadingView\r\n    @loadingView = null\r\n    @playAmbientSound()\r\n    # TODO: Is it possible to create a Mongoose ObjectId for 'ls', instead of the string returned from get()?\r\n    application.tracker?.trackEvent 'Started Level', category:'Play Level', levelID: @levelID, ls: @session?.get('_id') unless @observing\r\n    $(window).trigger 'resize'\r\n    _.delay (=> @perhapsStartSimulating?()), 10 * 1000\r\n\r\n  onSetVolume: (e) ->\r\n    createjs.Sound.setVolume(if e.volume is 1 then 0.6 else e.volume)  # Quieter for now until individual sound FX controls work again.\r\n    if e.volume and not @ambientSound\r\n      @playAmbientSound()\r\n\r\n  playAmbientSound: ->\r\n    return if @destroyed\r\n    return if @ambientSound\r\n    return unless me.get 'volume'\r\n    return unless file = {Dungeon: 'ambient-dungeon', Grass: 'ambient-grass'}[@level.get('terrain')]\r\n    src = \"/file/interface/#{file}#{AudioPlayer.ext}\"\r\n    unless AudioPlayer.getStatus(src)?.loaded\r\n      AudioPlayer.preloadSound src\r\n      Backbone.Mediator.subscribeOnce 'audio-player:loaded', @playAmbientSound, @\r\n      return\r\n    @ambientSound = createjs.Sound.play src, loop: -1, volume: 0.1\r\n    createjs.Tween.get(@ambientSound).to({volume: 1.0}, 10000)\r\n\r\n  selectHero: ->\r\n    Backbone.Mediator.publish 'level:suppress-selection-sounds', suppress: true\r\n    Backbone.Mediator.publish 'tome:select-primary-sprite', {}\r\n    Backbone.Mediator.publish 'level:suppress-selection-sounds', suppress: false\r\n    @surface?.focusOnHero()\r\n\r\n  perhapsStartSimulating: ->\r\n    return unless @shouldSimulate()\r\n    return console.error \"Should not auto-simulate until we fix how these languages are loaded\"\r\n    # TODO: how can we not require these as part of /play bundle?\r\n    ##require \"vendor/aether-#{codeLanguage}\" for codeLanguage in ['javascript', 'python', 'coffeescript', 'lua', 'java']\r\n    #require 'vendor/aether-javascript'\r\n    #require 'vendor/aether-python'\r\n    #require 'vendor/aether-coffeescript'\r\n    #require 'vendor/aether-lua'\r\n    #require 'vendor/aether-java'\r\n    @simulateNextGame()\r\n\r\n  simulateNextGame: ->\r\n    return @simulator.fetchAndSimulateOneGame() if @simulator\r\n    simulatorOptions = background: true, leagueID: @courseInstanceID\r\n    simulatorOptions.levelID = @level.get('slug') if @level.isType('course-ladder', 'hero-ladder')\r\n    @simulator = new Simulator simulatorOptions\r\n    # Crude method of mitigating Simulator memory leak issues\r\n    fetchAndSimulateOneGameOriginal = @simulator.fetchAndSimulateOneGame\r\n    @simulator.fetchAndSimulateOneGame = =>\r\n      if @simulator.simulatedByYou >= 10\r\n        console.log '------------------- Destroying Simulator and making a new one -----------------'\r\n        @simulator.destroy()\r\n        @simulator = null\r\n        @simulateNextGame()\r\n      else\r\n        fetchAndSimulateOneGameOriginal.apply @simulator\r\n    @simulator.fetchAndSimulateOneGame()\r\n\r\n  shouldSimulate: ->\r\n    return true if @getQueryVariable('simulate') is true\r\n    return false if @getQueryVariable('simulate') is false\r\n    stillBuggy = true  # Keep this true while we still haven't fixed the zombie worker problem when simulating the more difficult levels on Chrome\r\n    defaultCores = 2\r\n    cores = window.navigator.hardwareConcurrency or defaultCores  # Available on Chrome/Opera, soon Safari\r\n    defaultHeapLimit = 793000000\r\n    heapLimit = window.performance?.memory?.jsHeapSizeLimit or defaultHeapLimit  # Only available on Chrome, basically just says 32- vs. 64-bit\r\n    gamesSimulated = me.get('simulatedBy')\r\n    console.debug \"Should we start simulating? Cores:\", window.navigator.hardwareConcurrency, \"Heap limit:\", window.performance?.memory?.jsHeapSizeLimit, \"Load duration:\", @loadDuration\r\n    return false unless $.browser?.desktop\r\n    return false if $.browser?.msie or $.browser?.msedge\r\n    return false if $.browser.linux\r\n    return false if me.level() < 8\r\n    if @level.isType('course', 'game-dev', 'web-dev')\r\n      return false\r\n    else if @level.isType('hero') and gamesSimulated\r\n      return false if stillBuggy\r\n      return false if cores < 8\r\n      return false if heapLimit < defaultHeapLimit\r\n      return false if @loadDuration > 10000\r\n    else if @level.isType('hero-ladder') and gamesSimulated\r\n      return false if stillBuggy\r\n      return false if cores < 4\r\n      return false if heapLimit < defaultHeapLimit\r\n      return false if @loadDuration > 15000\r\n    else if @level.isType('hero-ladder') and not gamesSimulated\r\n      return false if stillBuggy\r\n      return false if cores < 8\r\n      return false if heapLimit <= defaultHeapLimit\r\n      return false if @loadDuration > 20000\r\n    else if @level.isType('course-ladder')\r\n      return false if cores <= defaultCores\r\n      return false if heapLimit < defaultHeapLimit\r\n      return false if @loadDuration > 18000\r\n    else\r\n      console.warn \"Unwritten level type simulation heuristics; fill these in for new level type #{@level.get('type')}?\"\r\n      return false if stillBuggy\r\n      return false if cores < 8\r\n      return false if heapLimit < defaultHeapLimit\r\n      return false if @loadDuration > 10000\r\n    console.debug \"We should have the power. Begin background ladder simulation.\"\r\n    true\r\n\r\n  # callbacks\r\n\r\n  onCtrlS: (e) ->\r\n    e.preventDefault()\r\n\r\n  onEscapePressed: (e) ->\r\n    return unless @$el.hasClass 'real-time'\r\n    Backbone.Mediator.publish 'playback:stop-real-time-playback', {}\r\n\r\n  onLevelReloadFromData: (e) ->\r\n    isReload = Boolean @world\r\n    if isReload\r\n      # Make sure to share any models we loaded that the parent didn't, like hero equipment, in case the parent relodaed\r\n      e.supermodel.registerModel model for url, model of @supermodel.models when not e.supermodel.models[url]\r\n    @setLevel e.level, e.supermodel\r\n    if isReload\r\n      @scriptManager.setScripts(e.level.get('scripts'))\r\n      @updateGoals e.level.get('goals')\r\n      Backbone.Mediator.publish 'tome:cast-spell', {}  # a bit hacky\r\n\r\n  onLevelReloadThangType: (e) ->\r\n    tt = e.thangType\r\n    for url, model of @supermodel.models\r\n      if model.id is tt.id\r\n        for key, val of tt.attributes\r\n          model.attributes[key] = val\r\n        break\r\n    Backbone.Mediator.publish 'tome:cast-spell', {}\r\n\r\n  onWindowResize: (e) =>\r\n    @endHighlight()\r\n\r\n  onDisableControls: (e) ->\r\n    return if e.controls and not ('level' in e.controls)\r\n    @shortcutsEnabled = false\r\n    @wasFocusedOn = document.activeElement\r\n    $('body').focus()\r\n\r\n  onEnableControls: (e) ->\r\n    return if e.controls? and not ('level' in e.controls)\r\n    @shortcutsEnabled = true\r\n    $(@wasFocusedOn).focus() if @wasFocusedOn\r\n    @wasFocusedOn = null\r\n\r\n  onDonePressed: -> @showVictory()\r\n\r\n  onShowVictory: (e={}) ->\r\n    $('#level-done-button').show() unless @level.isType('hero', 'hero-ladder', 'hero-coop', 'course', 'course-ladder', 'game-dev', 'web-dev')\r\n    @showVictory(_.pick(e, 'manual')) if e.showModal\r\n    return if @victorySeen\r\n    @victorySeen = true\r\n    victoryTime = (new Date()) - @loadEndTime\r\n    if not @observing and victoryTime > 10 * 1000   # Don't track it if we're reloading an already-beaten level\r\n      application.tracker?.trackEvent 'Saw Victory',\r\n        category: 'Play Level'\r\n        level: @level.get('name')\r\n        label: @level.get('name')\r\n        levelID: @levelID\r\n        ls: @session?.get('_id')\r\n      application.tracker?.trackTiming victoryTime, 'Level Victory Time', @levelID, @levelID\r\n\r\n  showVictory: (options={}) ->\r\n    return if @level.hasLocalChanges()  # Don't award achievements when beating level changed in level editor\r\n    return if @level.isType('game-dev') and @level.get('shareable') and not options.manual\r\n    @endHighlight()\r\n    options = {level: @level, supermodel: @supermodel, session: @session, hasReceivedMemoryWarning: @hasReceivedMemoryWarning, courseID: @courseID, courseInstanceID: @courseInstanceID, world: @world}\r\n    ModalClass = if @level.isType('hero', 'hero-ladder', 'hero-coop', 'course', 'course-ladder', 'game-dev', 'web-dev') then HeroVictoryModal else VictoryModal\r\n    ModalClass = CourseVictoryModal if @isCourseMode() or me.isSessionless()\r\n    if @level.isType('course-ladder')\r\n      ModalClass = CourseVictoryModal\r\n      options.courseInstanceID = @getQueryVariable('course-instance') or @getQueryVariable('league')\r\n    ModalClass = PicoCTFVictoryModal if window.serverConfig.picoCTF\r\n    victoryModal = new ModalClass(options)\r\n    @openModalView(victoryModal)\r\n    if me.get('anonymous')\r\n      window.nextURL = '/play/' + (@level.get('campaign') ? '')  # Signup will go here on completion instead of reloading.\r\n\r\n  onRestartLevel: ->\r\n    @tome.reloadAllCode()\r\n    Backbone.Mediator.publish 'level:restarted', {}\r\n    $('#level-done-button', @$el).hide()\r\n    application.tracker?.trackEvent 'Confirmed Restart', category: 'Play Level', level: @level.get('name'), label: @level.get('name') unless @observing\r\n\r\n  onInfiniteLoop: (e) ->\r\n    return unless e.firstWorld and e.god is @god\r\n    @openModalView new InfiniteLoopModal nonUserCodeProblem: e.nonUserCodeProblem\r\n    application.tracker?.trackEvent 'Saw Initial Infinite Loop', category: 'Play Level', level: @level.get('name'), label: @level.get('name') unless @observing\r\n\r\n  onHighlightDOM: (e) -> @highlightElement e.selector, delay: e.delay, sides: e.sides, offset: e.offset, rotation: e.rotation\r\n\r\n  onEndHighlight: -> @endHighlight()\r\n\r\n  onFocusDom: (e) -> $(e.selector).focus()\r\n\r\n  onContactClicked: (e) ->\r\n    if me.isStudent()\r\n      console.error(\"Student clicked contact modal.\")\r\n      return\r\n    Backbone.Mediator.publish 'level:contact-button-pressed', {}\r\n    @openModalView contactModal = new ContactModal levelID: @level.get('slug') or @level.id, courseID: @courseID, courseInstanceID: @courseInstanceID\r\n    screenshot = @surface.screenshot(1, 'image/png', 1.0, 1)\r\n    body =\r\n      b64png: screenshot.replace 'data:image/png;base64,', ''\r\n      filename: \"screenshot-#{@levelID}-#{_.string.slugify((new Date()).toString())}.png\"\r\n      path: \"db/user/#{me.id}\"\r\n      mimetype: 'image/png'\r\n    contactModal.screenshotURL = \"http://codecombat.com/file/#{body.path}/#{body.filename}\"\r\n    window.screenshot = screenshot\r\n    window.screenshotURL = contactModal.screenshotURL\r\n    $.ajax '/file', type: 'POST', data: body, success: (e) ->\r\n      contactModal.updateScreenshot?()\r\n\r\n  # Dynamic sound loading\r\n\r\n  onNewWorld: (e) ->\r\n    return if @headless\r\n    scripts = @world.scripts  # Since these worlds don't have scripts, preserve them.\r\n    @world = e.world\r\n    @world.scripts = scripts\r\n    thangTypes = @supermodel.getModels(ThangType)\r\n    startFrame = @lastWorldFramesLoaded ? 0\r\n    finishedLoading = @world.frames.length is @world.totalFrames\r\n    if finishedLoading\r\n      @lastWorldFramesLoaded = 0\r\n      if @waitingForSubmissionComplete\r\n        _.defer @onSubmissionComplete  # Give it a frame to make sure we have the latest goals\r\n        @waitingForSubmissionComplete = false\r\n    else\r\n      @lastWorldFramesLoaded = @world.frames.length\r\n    for [spriteName, message] in @world.thangDialogueSounds startFrame\r\n      continue unless thangType = _.find thangTypes, (m) -> m.get('name') is spriteName\r\n      continue unless sound = AudioPlayer.soundForDialogue message, thangType.get('soundTriggers')\r\n      AudioPlayer.preloadSoundReference sound\r\n\r\n  # Real-time playback\r\n  onRealTimePlaybackStarted: (e) ->\r\n    @$el.addClass('real-time').focus()\r\n    @$('#how-to-play-game-dev-panel').removeClass('hide') if @level.isType('game-dev')\r\n    @onWindowResize()\r\n\r\n  onRealTimePlaybackEnded: (e) ->\r\n    return unless @$el.hasClass 'real-time'\r\n    @$('#how-to-play-game-dev-panel').addClass('hide') if @level.isType('game-dev')\r\n    @$el.removeClass 'real-time'\r\n    @onWindowResize()\r\n    if @world.frames.length is @world.totalFrames and not @surface.countdownScreen?.showing\r\n      _.delay @onSubmissionComplete, 750  # Wait for transition to end.\r\n    else\r\n      @waitingForSubmissionComplete = true\r\n\r\n  onSubmissionComplete: =>\r\n    return if @destroyed\r\n    Backbone.Mediator.publish 'level:set-time', ratio: 1\r\n    return if @level.hasLocalChanges()  # Don't award achievements when beating level changed in level editor\r\n    if @goalManager.checkOverallStatus() is 'success'\r\n      showModalFn = -> Backbone.Mediator.publish 'level:show-victory', showModal: true\r\n      @session.recordScores @world.scores, @level\r\n      if @level.get 'replayable'\r\n        @session.increaseDifficulty showModalFn\r\n      else\r\n        showModalFn()\r\n\r\n  destroy: ->\r\n    @levelLoader?.destroy()\r\n    @surface?.destroy()\r\n    @god?.destroy()\r\n    @goalManager?.destroy()\r\n    @scriptManager?.destroy()\r\n    @setupManager?.destroy()\r\n    @simulator?.destroy()\r\n    if ambientSound = @ambientSound\r\n      # Doesn't seem to work; stops immediately.\r\n      createjs.Tween.get(ambientSound).to({volume: 0.0}, 1500).call -> ambientSound.stop()\r\n    $(window).off 'resize', @onWindowResize\r\n    delete window.world # not sure where this is set, but this is one way to clean it up\r\n    @bus?.destroy()\r\n    #@instance.save() unless @instance.loading\r\n    delete window.nextURL\r\n    console.profileEnd?() if PROFILE_ME\r\n    application.tracker?.disableInspectletJS()\r\n    super()\r\n\r\n  onIPadMemoryWarning: (e) ->\r\n    @hasReceivedMemoryWarning = true\r\n\r\n  onItemPurchased: (e) ->\r\n    heroConfig = @session.get('heroConfig') ? {}\r\n    inventory = heroConfig.inventory ? {}\r\n    slot = e.item.getAllowedSlots()[0]\r\n    if slot and not inventory[slot]\r\n      # Open up the inventory modal so they can equip the new item\r\n      @setupManager?.destroy()\r\n      @setupManager = new LevelSetupManager({supermodel: @supermodel, level: @level, levelID: @levelID, parent: @, session: @session, hadEverChosenHero: true})\r\n      @setupManager.open()\r\n","RootView = require 'views/core/RootView'\r\n\r\nLevel = require 'models/Level'\r\nLevelSession = require 'models/LevelSession'\r\nWebSurfaceView = require './WebSurfaceView'\r\n\r\nrequire 'game-libraries'\r\n\r\nmodule.exports = class PlayWebDevLevelView extends RootView\r\n  id: 'play-web-dev-level-view'\r\n  template: require 'templates/play/level/play-web-dev-level-view'\r\n\r\n  initialize: (@options, @levelID, @sessionID) ->\r\n    @courseID = @getQueryVariable 'course'\r\n    @level = @supermodel.loadModel(new Level _id: @levelID).model\r\n    @session = @supermodel.loadModel(new LevelSession _id: @sessionID).model\r\n\r\n  onLoaded: ->\r\n    super()\r\n    @insertSubView @webSurface = new WebSurfaceView {level: @level}\r\n    Backbone.Mediator.publish 'tome:html-updated', html: @getHTML() ? '<h1>Player has no HTML</h1>', create: true\r\n    @$el.find('#info-bar').delay(4000).fadeOut(2000)\r\n    $('body').css('overflow', 'hidden')  # Don't show tiny scroll bar from our minimal additions to the iframe\r\n    @eventProperties = {\r\n      category: 'Play WebDev Level'\r\n      @courseID\r\n      sessionID: @session.id\r\n      levelID: @level.id\r\n      levelSlug: @level.get('slug')\r\n    }\r\n    window.tracker?.trackEvent 'Play WebDev Level - Load', @eventProperties\r\n\r\n\r\n  showError: (jqxhr) ->\r\n    $('h1').text jqxhr.statusText\r\n\r\n  getHTML: ->\r\n    playerHTML = @session.get('code')?['hero-placeholder']?.plan\r\n    return playerHTML unless hero = _.find @level.get('thangs'), id: 'Hero Placeholder'\r\n    return playerHTML unless programmableConfig = _.find(hero.components, (component) -> component.config?.programmableMethods).config\r\n    return programmableConfig.programmableMethods.plan.languages.html.replace /<playercode>[\\s\\S]*<\\/playercode>/, playerHTML\r\n\r\n  destroy: ->\r\n    @webSurface?.destroy()\r\n    $('body').css('overflow', 'initial')  # Recover from our modifications to body overflow before we leave\r\n    super()\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/thang_avatar'\r\nThangType = require 'models/ThangType'\r\n\r\nmodule.exports = class ThangAvatarView extends CocoView\r\n  className: 'thang-avatar-view'\r\n  template: template\r\n\r\n  subscriptions:\r\n    'tome:problems-updated': 'onProblemsUpdated'\r\n    'god:new-world-created': 'onNewWorld'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @thang = options.thang\r\n    @includeName = options.includeName\r\n    @thangType = @getSpriteThangType()\r\n    if not @thangType\r\n      console.error 'Thang avatar view expected a thang type to be provided.'\r\n      return\r\n\r\n    unless @thangType.isFullyLoaded() or @thangType.loading\r\n      @thangType.fetch()\r\n\r\n    # couldn't get the level view to load properly through the supermodel\r\n    # so just doing it manually this time.\r\n    @listenTo @thangType, 'sync', @render\r\n    @listenTo @thangType, 'build-complete', @render\r\n\r\n  getSpriteThangType: ->\r\n    thangs = @supermodel.getModels(ThangType)\r\n    thangs = (t for t in thangs when t.get('name') is @thang.spriteName)\r\n    loadedThangs = (t for t in thangs when t.isFullyLoaded())\r\n    return loadedThangs[0] or thangs[0] # try to return one with all the goods, otherwise a projection\r\n\r\n  getRenderData: (context={}) ->\r\n    context = super context\r\n    context.thang = @thang\r\n    options = @thang?.getLankOptions() or {}\r\n    #options.async = true  # sync builds fail during async builds, and we build HUD version sync\r\n    context.avatarURL = @thangType.getPortraitSource(options) unless @thangType.loading\r\n    context.includeName = @includeName\r\n    context\r\n\r\n  setProblems: (problemCount, level) ->\r\n    badge = @$el.find('.badge.problems').text(if problemCount then 'x' else '')\r\n    badge.removeClass('error warning info')\r\n    badge.addClass level if level\r\n\r\n  setSharedThangs: (sharedThangCount) ->\r\n    badge = @$el.find('.badge.shared-thangs').text(if sharedThangCount > 1 then sharedThangCount else '')\r\n    # TODO: change the alert color based on whether any of those things that aren't us have problems\r\n    #badge.removeClass('error warning info')\r\n    #badge.addClass level if level\r\n\r\n  setSelected: (selected) ->\r\n    @$el.toggleClass 'selected', Boolean(selected)\r\n\r\n  onProblemsUpdated: (e) ->\r\n    return unless @thang?.id is e.spell.thang?.thang.id\r\n    aether = e.spell.thang.castAether\r\n    myProblems = aether?.getAllProblems() ? []\r\n    worstLevel = null\r\n    for level in ['error', 'warning', 'info'] when _.some myProblems, {level: level}\r\n      worstLevel = level\r\n      break\r\n    @setProblems myProblems.length, worstLevel\r\n\r\n  onNewWorld: (e) ->\r\n    @options.thang = @thang = e.world.thangMap[@thang.id] if @thang and e.world.thangMap[@thang.id]\r\n\r\n  destroy: ->\r\n    super()\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/web-surface-view'\r\nHtmlExtractor = require 'lib/HtmlExtractor'\r\n\r\nmodule.exports = class WebSurfaceView extends CocoView\r\n  id: 'web-surface-view'\r\n  template: template\r\n\r\n  subscriptions:\r\n    'tome:html-updated': 'onHTMLUpdated'\r\n    'web-dev:hover-line': 'onHoverLine'\r\n    'web-dev:stop-hovering-line': 'onStopHoveringLine'\r\n\r\n  initialize: (options) ->\r\n    @goals = (goal for goal in options.goalManager?.goals ? [] when goal.html)\r\n    # Consider https://www.npmjs.com/package/css-select to do this on virtualDom instead of in iframe on concreteDOM\r\n    super(options)\r\n\r\n  getRenderData: ->\r\n    _.merge super(), { fullUnsafeContentHostname: serverConfig.fullUnsafeContentHostname }\r\n\r\n  afterRender: ->\r\n    super()\r\n    @iframe = @$('iframe')[0]\r\n    $(@iframe).on 'load', (e) =>\r\n      window.addEventListener 'message', @onIframeMessage\r\n      @iframeLoaded = true\r\n      @onIframeLoaded?()\r\n      @onIframeLoaded = null\r\n\r\n  # TODO: make clicking Run actually trigger a 'create' update here (for resetting scripts)\r\n\r\n  onHTMLUpdated: (e) ->\r\n    unless @iframeLoaded\r\n      return @onIframeLoaded = => @onHTMLUpdated e unless @destroyed\r\n\r\n    # TODO: pull out the actual scripts, styles, and body/elements they are doing so we can merge them with our initial structure on the other side\r\n    { @virtualDom, styles, scripts } = HtmlExtractor.extractStylesAndScripts(e.html)\r\n    @cssSelectors = HtmlExtractor.extractCssSelectors(styles, scripts)\r\n    # TODO: Do something better than this hack for detecting which lines are CSS, which are HTML\r\n    @rawCssLines = HtmlExtractor.extractCssLines(styles)\r\n    @rawJQueryLines = HtmlExtractor.extractJQueryLines(scripts)\r\n\r\n    messageType = if e.create or not @virtualDom then 'create' else 'update'\r\n    @iframe.contentWindow.postMessage {type: messageType, dom: @virtualDom, styles, scripts, goals: @goals}, '*'\r\n\r\n  combineNodes: (type, nodes) ->\r\n    if _.any(nodes, (node) -> node.type isnt type)\r\n      throw new Error(\"Can't combine nodes of different types. (Got #{nodes.map (n) -> n.type})\")\r\n    children = nodes.map((n) -> n.children).reduce(((a,b) -> a.concat(b)), [])\r\n    if _.isEmpty(children)\r\n      deku.element(type, {})\r\n    else\r\n      deku.element(type, {}, children)\r\n\r\n  onStopHoveringLine: ->\r\n    @iframe.contentWindow.postMessage({ type: 'highlight-css-selector', selector: '' }, '*')\r\n\r\n  onHoverLine: ({ row, line }) ->\r\n    if _.contains(@rawCssLines, line)\r\n      # They're hovering over lines of CSS, not HTML\r\n      trimLine = (line.match(/\\s(.*)\\s*{/)?[1] or line).trim().split(/ +/).join(' ')\r\n      hoveredCssSelector = _.find @cssSelectors, (selector) ->\r\n        trimLine is selector\r\n    else if _.contains(@rawJQueryLines, line)\r\n      # It's a jQuery call\r\n      trimLine = (line.match(/\\$\\(\\s*['\"](.*)['\"]\\s*\\)/)?[1] or '').trim()\r\n      hoveredCssSelector = _.find @cssSelectors, (selector) ->\r\n        trimLine is selector\r\n    else\r\n      # They're not hovering over a line with a selector, so don't highlight anything\r\n      hoveredCssSelector = ''\r\n    @iframe.contentWindow.postMessage({ type: 'highlight-css-selector', selector: hoveredCssSelector }, '*')\r\n    null\r\n\r\n  onIframeMessage: (event) =>\r\n    origin = event.origin or event.originalEvent.origin\r\n    unless new RegExp(\"^https?:\\/\\/#{serverConfig.fullUnsafeContentHostname}$\").test origin\r\n      return console.log 'Ignoring message from bad origin:', origin\r\n    unless event.source is @iframe.contentWindow\r\n      return console.log 'Ignoring message from somewhere other than our iframe:', event.source\r\n    switch event.data.type\r\n      when 'goals-updated'\r\n        Backbone.Mediator.publish 'god:new-html-goal-states', goalStates: event.data.goalStates, overallStatus: event.data.overallStatus\r\n      when 'error'\r\n        # NOTE: The line number in this is relative to the script tag, not the user code. The offset is added in SpellView.\r\n        Backbone.Mediator.publish 'web-dev:error', _.pick(event.data, ['message', 'line', 'column', 'url'])\r\n      else\r\n        console.warn 'Unknown message type', event.data.type, 'for message', event, 'from origin', origin\r\n\r\n  destroy: ->\r\n    window.removeEventListener 'message', @onIframeMessage\r\n    super()\r\n","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/level/modal/course-victory-modal'\r\nLevel = require 'models/Level'\r\nCourse = require 'models/Course'\r\nLevelSessions = require 'collections/LevelSessions'\r\nProgressView = require './ProgressView'\r\nClassroom = require 'models/Classroom'\r\nutils = require 'core/utils'\r\n\r\nmodule.exports = class CourseVictoryModal extends ModalView\r\n  id: 'course-victory-modal'\r\n  template: template\r\n  closesOnClickOutside: false\r\n\r\n  initialize: (options) ->\r\n    @courseID = options.courseID\r\n    @courseInstanceID = options.courseInstanceID or @getQueryVariable('course-instance') or @getQueryVariable('league')\r\n    @views = []\r\n\r\n    @session = options.session\r\n    @level = options.level\r\n\r\n    if @courseInstanceID\r\n      @classroom = new Classroom()\r\n      @supermodel.trackRequest(@classroom.fetchForCourseInstance(@courseInstanceID))\r\n\r\n    @playSound 'victory'\r\n    @nextLevel = new Level()\r\n    @nextLevelRequest = @supermodel.trackRequest(@nextLevel.fetchNextForCourse({\r\n      levelOriginalID: @level.get('original')\r\n      @courseInstanceID\r\n      @courseID\r\n      sessionID: @session.id\r\n    }))\r\n\r\n    @course = options.course\r\n    if @courseID and not @course\r\n      @course = new Course().setURL \"/db/course/#{@courseID}\"\r\n      @course = @supermodel.loadModel(@course).model\r\n\r\n    if @courseInstanceID\r\n      @levelSessions = new LevelSessions()\r\n      @levelSessions.fetchForCourseInstance(@courseInstanceID)\r\n      @levelSessions = @supermodel.loadCollection(@levelSessions, 'sessions', {\r\n        data: { project: 'state.complete level.original playtime changed' }\r\n      }).model\r\n\r\n      if not @course\r\n        @course = new Course()\r\n        @supermodel.trackRequest @course.fetchForCourseInstance(@courseInstanceID)\r\n\r\n    window.tracker?.trackEvent 'Play Level Victory Modal Loaded', category: 'Students', levelSlug: @level.get('slug'), []\r\n\r\n  onResourceLoadFailed: (e) ->\r\n    if e.resource.jqxhr is @nextLevelRequest\r\n      return\r\n    super(arguments...)\r\n\r\n  onLoaded: ->\r\n    super()\r\n    @courseID ?= @course.id\r\n    @views = []\r\n\r\n    @levelSessions?.remove(@session)\r\n    @levelSessions?.add(@session)\r\n    progressView = new ProgressView({\r\n      level: @level\r\n      nextLevel: @nextLevel\r\n      course: @course\r\n      classroom: @classroom\r\n      levelSessions: @levelSessions\r\n      session: @session\r\n    })\r\n\r\n    progressView.once 'done', @onDone, @\r\n    progressView.once 'next-level', @onNextLevel, @\r\n    progressView.once 'ladder', @onLadder, @\r\n    for view in @views\r\n      view.on 'continue', @onViewContinue, @\r\n    @views.push(progressView)\r\n\r\n    @showView(_.first(@views))\r\n\r\n  afterRender: ->\r\n    super()\r\n    @showView(@currentView)\r\n\r\n  showView: (view) ->\r\n    return unless view\r\n    view.setElement(@$('.modal-content'))\r\n    view.$el.attr('id', view.id)\r\n    view.$el.addClass(view.className)\r\n    view.render()\r\n    @currentView = view\r\n\r\n  onViewContinue: ->\r\n    index = _.indexOf(@views, @currentView)\r\n    @showView(@views[index+1])\r\n\r\n  onNextLevel: ->\r\n    window.tracker?.trackEvent 'Play Level Victory Modal Next Level', category: 'Students', levelSlug: @level.get('slug'), nextLevelSlug: @nextLevel.get('slug'), []\r\n    if me.isSessionless()\r\n      link = \"/play/level/#{@nextLevel.get('slug')}?course=#{@courseID}&codeLanguage=#{utils.getQueryVariable('codeLanguage', 'python')}\"\r\n    else\r\n      link = \"/play/level/#{@nextLevel.get('slug')}?course=#{@courseID}&course-instance=#{@courseInstanceID}\"\r\n      link += \"&codeLanguage=\" + @level.get('primerLanguage') if @level.get('primerLanguage')\r\n    application.router.navigate(link, {trigger: true})\r\n\r\n  onDone: ->\r\n    window.tracker?.trackEvent 'Play Level Victory Modal Done', category: 'Students', levelSlug: @level.get('slug'), []\r\n    if me.isSessionless()\r\n      link = '/teachers/courses'\r\n    else\r\n      link = '/students'\r\n    application.router.navigate(link, {trigger: true})\r\n\r\n  onLadder: ->\r\n    # Preserve the supermodel as we navigate back to the ladder.\r\n    viewArgs = [{supermodel: if @options.hasReceivedMemoryWarning then null else @supermodel}, @level.get('slug')]\r\n    ladderURL = \"/play/ladder/#{@level.get('slug') || @level.id}\"\r\n    if leagueID = (@courseInstanceID or @getQueryVariable 'league')\r\n      leagueType = if @level.get('type') is 'course-ladder' then 'course' else 'clan'\r\n      viewArgs.push leagueType\r\n      viewArgs.push leagueID\r\n      ladderURL += \"/#{leagueType}/#{leagueID}\"\r\n    ladderURL += '#my-matches'\r\n    Backbone.Mediator.publish 'router:navigate', route: ladderURL, viewClass: 'views/ladder/LadderView', viewArgs: viewArgs\r\n","ModalView = require 'views/core/ModalView'\r\n\r\ncategory = 'Play GameDev Level'\r\n\r\nmodule.exports = class GameDevVictoryModal extends ModalView\r\n  id: 'game-dev-victory-modal'\r\n  template: require 'templates/play/level/modal/game-dev-victory-modal'\r\n  \r\n  events:\r\n    'click #replay-game-btn': 'onClickReplayButton'\r\n    'click #copy-url-btn': 'onClickCopyURLButton'\r\n    'click #play-more-codecombat-btn': 'onClickPlayMoreCodeCombatButton'\r\n  \r\n  initialize: ({@shareURL, @eventProperties}) ->\r\n\r\n  onClickReplayButton: ->\r\n    @trigger 'replay'\r\n\r\n  onClickCopyURLButton: ->\r\n    @$('#copy-url-input').val(@shareURL).select()\r\n    @tryCopy()\r\n    window.tracker?.trackEvent('Play GameDev Victory Modal - Copy URL', @eventProperties, ['Mixpanel'])\r\n\r\n  onClickPlayMoreCodeCombatButton: ->\r\n    window.tracker?.trackEvent('Play GameDev Victory Modal - Click Play More CodeCombat', @eventProperties, ['Mixpanel'])\r\n","ModalView = require 'views/core/ModalView'\r\nCreateAccountModal = require 'views/core/CreateAccountModal'\r\ntemplate = require 'templates/play/level/modal/hero-victory-modal'\r\nAchievement = require 'models/Achievement'\r\nEarnedAchievement = require 'models/EarnedAchievement'\r\nCocoCollection = require 'collections/CocoCollection'\r\nLocalMongo = require 'lib/LocalMongo'\r\nutils = require 'core/utils'\r\nThangType = require 'models/ThangType'\r\nLadderSubmissionView = require 'views/play/common/LadderSubmissionView'\r\nAudioPlayer = require 'lib/AudioPlayer'\r\nUser = require 'models/User'\r\nutils = require 'core/utils'\r\nCourse = require 'models/Course'\r\nLevel = require 'models/Level'\r\nLevelFeedback = require 'models/LevelFeedback'\r\nstorage = require 'core/storage'\r\n\r\nmodule.exports = class HeroVictoryModal extends ModalView\r\n  id: 'hero-victory-modal'\r\n  template: template\r\n  closeButton: false\r\n  closesOnClickOutside: false\r\n\r\n  subscriptions:\r\n    'ladder:game-submitted': 'onGameSubmitted'\r\n\r\n  events:\r\n    'click #continue-button': 'onClickContinue'\r\n    'click .leaderboard-button': 'onClickLeaderboard'\r\n    'click .return-to-course-button': 'onClickReturnToCourse'\r\n    'click .return-to-ladder-button': 'onClickReturnToLadder'\r\n    'click .sign-up-button': 'onClickSignupButton'\r\n    'click .continue-from-offer-button': 'onClickContinueFromOffer'\r\n    'click .skip-offer-button': 'onClickSkipOffer'\r\n    'click #share-level-btn': 'onClickShareLevelButton'\r\n\r\n    # Feedback events\r\n    'mouseover .rating i': (e) -> @showStars(@starNum($(e.target)))\r\n    'mouseout .rating i': -> @showStars()\r\n    'click .rating i': (e) ->\r\n      @setStars(@starNum($(e.target)))\r\n      @$el.find('.review, .review-label').show()\r\n    'keypress .review textarea': -> @saveReviewEventually()\r\n\r\n  constructor: (options) ->\r\n    super(options)\r\n    @courseID = options.courseID\r\n    @courseInstanceID = options.courseInstanceID\r\n\r\n    @session = options.session\r\n    @level = options.level\r\n    @thangTypes = {}\r\n    if @level.isType('hero', 'hero-ladder', 'course', 'course-ladder', 'game-dev', 'web-dev')\r\n      achievements = new CocoCollection([], {\r\n        url: \"/db/achievement?related=#{@session.get('level').original}\"\r\n        model: Achievement\r\n      })\r\n      @achievements = @supermodel.loadCollection(achievements, 'achievements').model\r\n      @listenToOnce @achievements, 'sync', @onAchievementsLoaded\r\n      @readyToContinue = false\r\n      @waitingToContinueSince = new Date()\r\n      @previousXP = me.get 'points', true\r\n      @previousLevel = me.level()\r\n    else\r\n      @readyToContinue = true\r\n    @playSound 'victory'\r\n    if @level.isType('course', 'course-ladder')\r\n      @saveReviewEventually = _.debounce(@saveReviewEventually, 2000)\r\n      @loadExistingFeedback()\r\n\r\n    if @level.get('shareable') is 'project'\r\n      @shareURL = \"#{window.location.origin}/play/#{@level.get('type')}-level/#{@level.get('slug')}/#{@session.id}\"\r\n\r\n  destroy: ->\r\n    clearInterval @sequentialAnimationInterval\r\n    @saveReview() if @$el.find('.review textarea').val()\r\n    @feedback?.off()\r\n    super()\r\n\r\n  onHidden: ->\r\n    Backbone.Mediator.publish 'music-player:exit-menu', {}\r\n    super()\r\n\r\n  loadExistingFeedback: ->\r\n    url = \"/db/level/#{@level.id}/feedback\"\r\n    @feedback = new LevelFeedback()\r\n    @feedback.setURL url\r\n    @feedback.fetch cache: false\r\n    @listenToOnce(@feedback, 'sync', -> @onFeedbackLoaded())\r\n    @listenToOnce(@feedback, 'error', -> @onFeedbackNotFound())\r\n\r\n  onFeedbackLoaded: ->\r\n    @feedback.url = -> '/db/level.feedback/' + @id\r\n    @$el.find('.review textarea').val(@feedback.get('review'))\r\n    @$el.find('.review, .review-label').show()\r\n    @showStars()\r\n\r\n  onFeedbackNotFound: ->\r\n    @feedback = new LevelFeedback()\r\n    @feedback.set('levelID', @level.get('slug') or @level.id)\r\n    @feedback.set('levelName', @level.get('name') or '')\r\n    @feedback.set('level', {majorVersion: @level.get('version').major, original: @level.get('original')})\r\n    @showStars()\r\n\r\n  onAchievementsLoaded: ->\r\n    @achievements.models = _.filter @achievements.models, (m) -> not m.get('query')?.ladderAchievementDifficulty  # Don't show higher AI difficulty achievements\r\n    @$el.toggleClass 'full-achievements', @achievements.models.length is 3\r\n    thangTypeOriginals = []\r\n    achievementIDs = []\r\n    for achievement in @achievements.models\r\n      rewards = achievement.get('rewards') or {}\r\n      thangTypeOriginals.push rewards.heroes or []\r\n      thangTypeOriginals.push rewards.items or []\r\n      achievement.completed = LocalMongo.matchesQuery(@session.attributes, achievement.get('query'))\r\n      achievementIDs.push(achievement.id) if achievement.completed\r\n\r\n    thangTypeOriginals = _.uniq _.flatten thangTypeOriginals\r\n    for thangTypeOriginal in thangTypeOriginals\r\n      thangType = new ThangType()\r\n      thangType.url = \"/db/thang.type/#{thangTypeOriginal}/version\"\r\n      #thangType.project = ['original', 'rasterIcon', 'name', 'soundTriggers', 'i18n']  # This is what we need, but the PlayHeroesModal needs more, and so we load more to fill up the supermodel.\r\n      thangType.project = ['original', 'rasterIcon', 'name', 'slug', 'soundTriggers', 'featureImages', 'gems', 'heroClass', 'description', 'components', 'extendedName', 'unlockLevelName', 'i18n']\r\n      @thangTypes[thangTypeOriginal] = @supermodel.loadModel(thangType).model\r\n\r\n    @newEarnedAchievements = []\r\n    hadOneCompleted = false\r\n    for achievement in @achievements.models\r\n      continue unless achievement.completed\r\n      hadOneCompleted = true\r\n      ea = new EarnedAchievement({\r\n        collection: achievement.get('collection')\r\n        triggeredBy: @session.id\r\n        achievement: achievement.id\r\n      })\r\n      ea.save()\r\n      @newEarnedAchievements.push ea\r\n      @listenToOnce ea, 'sync', ->\r\n        if _.all((ea.id for ea in @newEarnedAchievements))\r\n          @newEarnedAchievementsResource.markLoaded()\r\n          @listenToOnce me, 'sync', ->\r\n            @readyToContinue = true\r\n            @updateSavingProgressStatus()\r\n          me.fetch cache: false unless me.loading\r\n\r\n    @readyToContinue = true unless hadOneCompleted\r\n\r\n    # have to use a something resource because addModelResource doesn't handle models being upserted/fetched via POST like we're doing here\r\n    @newEarnedAchievementsResource = @supermodel.addSomethingResource('earned achievements') if @newEarnedAchievements.length\r\n\r\n  getRenderData: ->\r\n    c = super()\r\n    c.levelName = utils.i18n @level.attributes, 'name'\r\n    if @level.isType('hero', 'game-dev', 'web-dev')\r\n      c.victoryText = utils.i18n @level.get('victory') ? {}, 'body'\r\n    earnedAchievementMap = _.indexBy(@newEarnedAchievements or [], (ea) -> ea.get('achievement'))\r\n    for achievement in (@achievements?.models or [])\r\n      earnedAchievement = earnedAchievementMap[achievement.id]\r\n      if earnedAchievement\r\n        achievement.completedAWhileAgo = new Date().getTime() - Date.parse(earnedAchievement.attributes.changed) > 30 * 1000\r\n      achievement.worth = achievement.get 'worth', true\r\n      achievement.gems = achievement.get('rewards')?.gems\r\n    c.achievements = @achievements?.models.slice() or []\r\n    for achievement in c.achievements\r\n      achievement.description = utils.i18n achievement.attributes, 'description'\r\n      continue unless @supermodel.finished() and proportionalTo = achievement.get 'proportionalTo'\r\n      # For repeatable achievements, we modify their base worth/gems by their repeatable growth functions.\r\n      achievedAmount = utils.getByPath @session.attributes, proportionalTo\r\n      previousAmount = Math.max(0, achievedAmount - 1)\r\n      func = achievement.getExpFunction()\r\n      achievement.previousWorth = (achievement.get('worth') ? 0) * func previousAmount\r\n      achievement.worth = (achievement.get('worth') ? 0) * func achievedAmount\r\n      rewards = achievement.get 'rewards'\r\n      achievement.gems = rewards?.gems * func achievedAmount if rewards?.gems\r\n      achievement.previousGems = rewards?.gems * func previousAmount if rewards?.gems\r\n\r\n    # for testing the three states\r\n    #if c.achievements.length\r\n    #  c.achievements = [c.achievements[0].clone(), c.achievements[0].clone(), c.achievements[0].clone()]\r\n    #for achievement, index in c.achievements\r\n    ##  achievement.completed = index > 0\r\n    ##  achievement.completedAWhileAgo = index > 1\r\n    #  achievement.completed = true\r\n    #  achievement.completedAWhileAgo = false\r\n    #  achievement.attributes.worth = (index + 1) * achievement.get('worth', true)\r\n    #  rewards = achievement.get('rewards') or {}\r\n    #  rewards.gems *= (index + 1)\r\n\r\n    c.thangTypes = @thangTypes\r\n    c.me = me\r\n    c.readyToRank = @level.isType('hero-ladder', 'course-ladder') and @session.readyToRank()\r\n    c.level = @level\r\n    c.i18n = utils.i18n\r\n\r\n    elapsed = (new Date() - new Date(me.get('dateCreated')))\r\n    if me.get 'hourOfCode'\r\n      # Show the Hour of Code \"I'm Done\" tracking pixel after they played for 20 minutes\r\n      gameDevHoc = storage.load('should-return-to-game-dev-hoc')\r\n      lastLevelOriginal = if gameDevHoc then '57ee6f5786cf4e1f00afca2c' else '541c9a30c6362edfb0f34479'\r\n      lastLevel = @level.get('original') is lastLevelOriginal # hoc2016 or kithgard-gates\r\n      enough = elapsed >= 20 * 60 * 1000 or lastLevel\r\n      tooMuch = elapsed > 120 * 60 * 1000\r\n      showDone = (elapsed >= 30 * 60 * 1000 and not tooMuch) or lastLevel\r\n      if enough and not tooMuch and not me.get('hourOfCodeComplete')\r\n        pixelCode = if gameDevHoc then 'code_combat_gamedev' else 'code_combat'\r\n        $('body').append($(\"<img src='https://code.org/api/hour/finish_#{pixelCode}.png' style='visibility: hidden;'>\"))\r\n        me.set 'hourOfCodeComplete', true\r\n        me.patch()\r\n        window.tracker?.trackEvent 'Hour of Code Finish'\r\n      # Show the \"I'm done\" button between 30 - 120 minutes if they definitely came from Hour of Code\r\n      c.showHourOfCodeDoneButton = showDone\r\n      @showHoc2016ExploreButton = gameDevHoc and lastLevel\r\n\r\n    c.showLeaderboard = @level.get('scoreTypes')?.length > 0 and not @level.isType('course')\r\n\r\n    c.showReturnToCourse = not c.showLeaderboard and not me.get('anonymous') and @level.isType('course', 'course-ladder')\r\n    c.isCourseLevel = @level.isType('course')\r\n    c.currentCourseName = @course?.get('name')\r\n    c.currentLevelName = @level?.get('name')\r\n    c.nextLevelName = @nextLevel?.get('name')\r\n\r\n    return c\r\n\r\n  afterRender: ->\r\n    super()\r\n    @$el.toggleClass 'with-achievements', @level.isType('hero', 'hero-ladder', 'game-dev', 'web-dev')\r\n    return unless @supermodel.finished()\r\n    @playSelectionSound hero, true for original, hero of @thangTypes  # Preload them\r\n    @updateSavingProgressStatus()\r\n    @initializeAnimations()\r\n    if @level.isType('hero-ladder', 'course-ladder')\r\n      @ladderSubmissionView = new LadderSubmissionView session: @session, level: @level\r\n      @insertSubView @ladderSubmissionView, @$el.find('.ladder-submission-view')\r\n\r\n  initializeAnimations: ->\r\n    return @endSequentialAnimations() unless @level.isType('hero', 'hero-ladder', 'game-dev', 'web-dev')\r\n    @updateXPBars 0\r\n    #playVictorySound = => @playSound 'victory-title-appear'  # TODO: actually add this\r\n    @$el.find('#victory-header').delay(250).queue(->\r\n      $(@).removeClass('out').dequeue()\r\n      #playVictorySound()\r\n    )\r\n    complete = _.once(_.bind(@beginSequentialAnimations, @))\r\n    @animatedPanels = $()\r\n    panels = @$el.find('.achievement-panel')\r\n    for panel in panels\r\n      panel = $(panel)\r\n      continue unless panel.data('animate')\r\n      @animatedPanels = @animatedPanels.add(panel)\r\n      panel.delay(500)  # Waiting for victory header to show up and fall\r\n      panel.queue(->\r\n        $(@).addClass('earned') # animate out the grayscale\r\n        $(@).dequeue()\r\n      )\r\n      panel.delay(500)\r\n      panel.queue(->\r\n        $(@).find('.reward-image-container').addClass('show')\r\n        $(@).dequeue()\r\n      )\r\n      panel.delay(500)\r\n      panel.queue(-> complete())\r\n    @animationComplete = not @animatedPanels.length\r\n    complete() if @animationComplete\r\n\r\n  beginSequentialAnimations: ->\r\n    return if @destroyed\r\n    return unless @level.isType('hero', 'hero-ladder', 'game-dev', 'web-dev')\r\n    @sequentialAnimatedPanels = _.map(@animatedPanels.find('.reward-panel'), (panel) -> {\r\n      number: $(panel).data('number')\r\n      previousNumber: $(panel).data('previous-number')\r\n      textEl: $(panel).find('.reward-text')\r\n      rootEl: $(panel)\r\n      unit: $(panel).data('number-unit')\r\n      hero: $(panel).data('hero-thang-type')\r\n      item: $(panel).data('item-thang-type')\r\n    })\r\n\r\n    @totalXP = 0\r\n    @totalXP += panel.number for panel in @sequentialAnimatedPanels when panel.unit is 'xp'\r\n    @totalGems = 0\r\n    @totalGems += panel.number for panel in @sequentialAnimatedPanels when panel.unit is 'gem'\r\n    @gemEl = $('#gem-total')\r\n    @XPEl = $('#xp-total')\r\n    @totalXPAnimated = @totalGemsAnimated = @lastTotalXP = @lastTotalGems = 0\r\n    @sequentialAnimationStart = new Date()\r\n    @sequentialAnimationInterval = setInterval(@tickSequentialAnimation, 1000 / 60)\r\n\r\n  tickSequentialAnimation: =>\r\n    # TODO: make sure the animation pulses happen when the numbers go up and sounds play (up to a max speed)\r\n    return @endSequentialAnimations() unless panel = @sequentialAnimatedPanels[0]\r\n    if panel.number\r\n      duration = Math.log(panel.number + 1) / Math.LN10 * 1000  # Math.log10 is ES6\r\n    else\r\n      duration = 1000\r\n    ratio = @getEaseRatio (new Date() - @sequentialAnimationStart), duration\r\n    if panel.unit is 'xp'\r\n      newXP = Math.floor(ratio * (panel.number - panel.previousNumber))\r\n      totalXP = @totalXPAnimated + newXP\r\n      if totalXP isnt @lastTotalXP\r\n        panel.textEl.text('+' + newXP)\r\n        @XPEl.text(totalXP)\r\n        @updateXPBars(totalXP)\r\n        xpTrigger = 'xp-' + (totalXP % 6)  # 6 xp sounds\r\n        @playSound xpTrigger, (0.5 + ratio / 2)\r\n        @XPEl.addClass 'four-digits' if totalXP >= 1000 and @lastTotalXP < 1000\r\n        @XPEl.addClass 'five-digits' if totalXP >= 10000 and @lastTotalXP < 10000\r\n        @lastTotalXP = totalXP\r\n    else if panel.unit is 'gem'\r\n      newGems = Math.floor(ratio * (panel.number - panel.previousNumber))\r\n      totalGems = @totalGemsAnimated + newGems\r\n      if totalGems isnt @lastTotalGems\r\n        panel.textEl.text('+' + newGems)\r\n        @gemEl.text(totalGems)\r\n        gemTrigger = 'gem-' + (parseInt(panel.number * ratio) % 4)  # 4 gem sounds\r\n        @playSound gemTrigger, (0.5 + ratio / 2)\r\n        @gemEl.addClass 'four-digits' if totalGems >= 1000 and @lastTotalGems < 1000\r\n        @gemEl.addClass 'five-digits' if totalGems >= 10000 and @lastTotalGems < 10000\r\n        @lastTotalGems = totalGems\r\n    else if panel.item\r\n      thangType = @thangTypes[panel.item]\r\n      panel.textEl.text utils.i18n(thangType.attributes, 'name')\r\n      @playSound 'item-unlocked' if 0.5 < ratio < 0.6\r\n    else if panel.hero\r\n      thangType = @thangTypes[panel.hero]\r\n      panel.textEl.text utils.i18n(thangType.attributes, 'name')\r\n      @playSelectionSound thangType if 0.5 < ratio < 0.6\r\n    if ratio is 1\r\n      panel.rootEl.removeClass('animating').find('.reward-image-container img').removeClass('pulse')\r\n      @sequentialAnimationStart = new Date()\r\n      if panel.unit is 'xp'\r\n        @totalXPAnimated += panel.number - panel.previousNumber\r\n      else if panel.unit is 'gem'\r\n        @totalGemsAnimated += panel.number - panel.previousNumber\r\n      @sequentialAnimatedPanels.shift()\r\n      return\r\n    panel.rootEl.addClass('animating').find('.reward-image-container').removeClass('pending-reward-image').find('img').addClass('pulse')\r\n\r\n  getEaseRatio: (timeSinceStart, duration) ->\r\n    # Ease in/out quadratic - http://gizma.com/easing/\r\n    timeSinceStart = Math.min timeSinceStart, duration\r\n    t = 2 * timeSinceStart / duration\r\n    if t < 1\r\n      return 0.5 * t * t\r\n    --t\r\n    -0.5 * (t * (t - 2) - 1)\r\n\r\n  updateXPBars: (achievedXP) ->\r\n    previousXP = @previousXP\r\n    previousXP = previousXP + 1000000 if me.isInGodMode()\r\n    previousLevel = @previousLevel\r\n\r\n    currentXP = previousXP + achievedXP\r\n    currentLevel = User.levelFromExp currentXP\r\n    currentLevelXP = User.expForLevel currentLevel\r\n\r\n    nextLevel = currentLevel + 1\r\n    nextLevelXP = User.expForLevel nextLevel\r\n\r\n    leveledUp = currentLevel > previousLevel\r\n    totalXPNeeded = nextLevelXP - currentLevelXP\r\n    alreadyAchievedPercentage = 100 * (previousXP - currentLevelXP) / totalXPNeeded\r\n    alreadyAchievedPercentage = 0 if alreadyAchievedPercentage < 0  # In case of level up\r\n    if leveledUp\r\n      newlyAchievedPercentage = 100 * (currentXP - currentLevelXP) / totalXPNeeded\r\n    else\r\n      newlyAchievedPercentage = 100 * achievedXP / totalXPNeeded\r\n\r\n    xpEl = $('#xp-wrapper')\r\n    xpBarJustEarned = xpEl.find('.xp-bar-already-achieved').css('width', alreadyAchievedPercentage + '%')\r\n    xpBarTotal = xpEl.find('.xp-bar-total').css('width', (alreadyAchievedPercentage + newlyAchievedPercentage) + '%')\r\n    levelLabel = xpEl.find('.level')\r\n    utils.replaceText levelLabel, currentLevel\r\n\r\n    if leveledUp and (not @displayedLevel or currentLevel > @displayedLevel)\r\n      @playSound 'level-up'\r\n    @displayedLevel = currentLevel\r\n\r\n  endSequentialAnimations: ->\r\n    clearInterval @sequentialAnimationInterval\r\n    @animationComplete = true\r\n    @updateSavingProgressStatus()\r\n    Backbone.Mediator.publish 'music-player:enter-menu', terrain: @level.get('terrain', true) or 'forest'\r\n\r\n  updateSavingProgressStatus: ->\r\n    @$el.find('#saving-progress-label').toggleClass('hide', @readyToContinue)\r\n    @$el.find('.next-level-button').toggleClass('hide', not @readyToContinue)\r\n    @$el.find('.sign-up-poke').toggleClass('hide', not @readyToContinue)\r\n\r\n  onGameSubmitted: (e) ->\r\n    @returnToLadder()\r\n\r\n  returnToLadder: ->\r\n    # Preserve the supermodel as we navigate back to the ladder.\r\n    viewArgs = [{supermodel: if @options.hasReceivedMemoryWarning then null else @supermodel}, @level.get('slug')]\r\n    ladderURL = \"/play/ladder/#{@level.get('slug') || @level.id}\"\r\n    if leagueID = (@courseInstanceID or @getQueryVariable 'league')\r\n      leagueType = if @level.isType('course-ladder') then 'course' else 'clan'\r\n      viewArgs.push leagueType\r\n      viewArgs.push leagueID\r\n      ladderURL += \"/#{leagueType}/#{leagueID}\"\r\n    ladderURL += '#my-matches'\r\n    Backbone.Mediator.publish 'router:navigate', route: ladderURL, viewClass: 'views/ladder/LadderView', viewArgs: viewArgs\r\n\r\n  playSelectionSound: (hero, preload=false) ->\r\n    return unless sounds = hero.get('soundTriggers')?.selected\r\n    return unless sound = sounds[Math.floor Math.random() * sounds.length]\r\n    name = AudioPlayer.nameForSoundReference sound\r\n    if preload\r\n      AudioPlayer.preloadSoundReference sound\r\n    else\r\n      AudioPlayer.playSound name, 1\r\n\r\n  getNextLevelCampaign: ->\r\n    campaign = @level.get 'campaign'\r\n    if @level.get('slug') in campaignEndLevels\r\n      campaign = ''  # Return to campaign selector\r\n    if (campaign is 'dungeon' or @level.get('slug') in ['kithgard-gates', 'game-grove']) and storage.load('should-return-to-game-dev-hoc')\r\n      # Return to game-dev-hoc instead if we're in that mode, since the levels don't realize they can be in that copycat campaign\r\n      campaign = 'game-dev-hoc'\r\n    campaign\r\n\r\n  getNextLevelLink: (returnToCourse=false) ->\r\n    if @level.isType('course')\r\n      link = \"/students\"\r\n      if @courseID\r\n        link += \"/#{@courseID}\"\r\n        link += \"/#{@courseInstanceID}\" if @courseInstanceID\r\n    else\r\n      link = '/play'\r\n      nextCampaign = @getNextLevelCampaign()\r\n      link += '/' + nextCampaign\r\n    link\r\n\r\n  onClickContinue: (e, extraOptions=null) ->\r\n    @playSound 'menu-button-click'\r\n    nextLevelLink = @getNextLevelLink extraOptions?.returnToCourse\r\n    # Preserve the supermodel as we navigate back to the world map.\r\n    options =\r\n      justBeatLevel: @level\r\n      supermodel: if @options.hasReceivedMemoryWarning then null else @supermodel\r\n    _.merge options, extraOptions if extraOptions\r\n    if @showHoc2016ExploreButton\r\n      # Send players to /play after completing final game-dev activity project level\r\n      nextLevelLink = '/play'\r\n      viewClass = 'views/play/CampaignView'\r\n      viewArgs = [options]\r\n    else if @level.isType('course') and @nextLevel and not options.returnToCourse\r\n      viewClass = 'views/play/level/PlayLevelView'\r\n      options.courseID = @courseID\r\n      options.courseInstanceID = @courseInstanceID\r\n      viewArgs = [options, @nextLevel.get('slug')]\r\n    else if @level.isType('course')\r\n      # TODO: shouldn't set viewClass and route in different places\r\n      viewClass = 'views/courses/CoursesView'\r\n      viewArgs = [options]\r\n      if @courseID\r\n        viewClass = 'views/courses/CourseDetailsView'\r\n        viewArgs.push @courseID\r\n        viewArgs.push @courseInstanceID if @courseInstanceID\r\n    else if @level.isType('course-ladder')\r\n      leagueID = @courseInstanceID or @getQueryVariable 'league'\r\n      nextLevelLink = \"/play/ladder/#{@level.get('slug')}\"\r\n      nextLevelLink += \"/course/#{leagueID}\" if leagueID\r\n      viewClass = 'views/ladder/LadderView'\r\n      viewArgs = [options, @level.get('slug')]\r\n      viewArgs = viewArgs.concat ['course', leagueID] if leagueID\r\n    else\r\n      if @level.get('slug') in campaignEndLevels\r\n        options.worldComplete = @level.get('campaign') or true\r\n      viewClass = 'views/play/CampaignView'\r\n      viewArgs = [options, @getNextLevelCampaign()]\r\n    navigationEvent = route: nextLevelLink, viewClass: viewClass, viewArgs: viewArgs\r\n    if @level.get('slug') is 'lost-viking' and not (me.get('age') in ['0-13', '14-17'])\r\n      @showOffer navigationEvent\r\n    else\r\n      Backbone.Mediator.publish 'router:navigate', navigationEvent\r\n\r\n  onClickLeaderboard: (e) ->\r\n    @onClickContinue e, showLeaderboard: true\r\n\r\n  onClickReturnToCourse: (e) ->\r\n    @onClickContinue e, returnToCourse: true\r\n\r\n  onClickReturnToLadder: (e) ->\r\n    @playSound 'menu-button-click'\r\n    e.preventDefault()\r\n    @returnToLadder()\r\n\r\n  onClickSignupButton: (e) ->\r\n    e.preventDefault()\r\n    window.tracker?.trackEvent 'Started Signup', category: 'Play Level', label: 'Hero Victory Modal', level: @level.get('slug')\r\n    @openModalView new CreateAccountModal()\r\n\r\n  showOffer: (@navigationEventUponCompletion) ->\r\n    @$el.find('.modal-footer > *').hide()\r\n    @$el.find(\".modal-footer > .offer.#{@level.get('slug')}\").show()\r\n\r\n  onClickContinueFromOffer: (e) ->\r\n    url = {\r\n      'lost-viking': 'http://www.vikingcodeschool.com/codecombat?utm_source=codecombat&utm_medium=viking_level&utm_campaign=affiliate&ref=Code+Combat+Elite'\r\n    }[@level.get('slug')]\r\n    Backbone.Mediator.publish 'router:navigate', @navigationEventUponCompletion\r\n    window.open url, '_blank' if url\r\n\r\n  onClickSkipOffer: (e) ->\r\n    Backbone.Mediator.publish 'router:navigate', @navigationEventUponCompletion\r\n\r\n  onClickShareLevelButton: ->\r\n    @$('#share-level-input').val(@shareURL).select()\r\n    @tryCopy()\r\n\r\n  # Ratings and reviews\r\n\r\n  starNum: (starEl) -> starEl.prevAll('i').length + 1\r\n\r\n  showStars: (num) ->\r\n    @$el.find('.rating').show()\r\n    num ?= @feedback?.get('rating') or 0\r\n    stars = @$el.find('.rating i')\r\n    stars.removeClass('glyphicon-star').addClass('glyphicon-star-empty')\r\n    stars.slice(0, num).removeClass('glyphicon-star-empty').addClass('glyphicon-star')\r\n\r\n  setStars: (num) ->\r\n    @feedback.set('rating', num)\r\n    @feedback.save()\r\n\r\n  saveReviewEventually: ->\r\n    @saveReview()\r\n\r\n  saveReview: ->\r\n    @feedback.set('review', @$el.find('.review textarea').val())\r\n    @feedback.save()\r\n\r\n\r\n# Much easier to just keep this updated than to dynamically figure it out.\r\ncampaignEndLevels = [\r\n  'kithgard-gates'\r\n  'kithgard-mastery'\r\n  'tabula-rasa'\r\n  'wanted-poster'\r\n  'siege-of-stonehold'\r\n  'go-fetch'\r\n  'palimpsest'\r\n  'quizlet'\r\n  'clash-of-clones'\r\n  'summits-gate'\r\n]\r\n","ModalView = require 'views/core/ModalView'\r\nState = require 'models/State'\r\nutils = require 'core/utils'\r\n\r\nmodule.exports = class ImageGalleryModal extends ModalView\r\n  id: 'image-gallery-modal'\r\n  template: require 'templates/play/level/modal/image-gallery-modal'\r\n\r\n  events:\r\n    'click .image-list-item': 'onClickImageListItem'\r\n    'click .copy-url-button': 'onClickCopyUrlButton'\r\n    'click .copy-tag-button': 'onClickCopyTagButton'\r\n\r\n  getRenderData: ->\r\n    _.merge super(arguments...), { utils }\r\n\r\n  initialize: ->\r\n    @state = new State()\r\n    @listenTo @state, 'all', =>\r\n      @renderSelectors('.render')\r\n      @afterRender()\r\n\r\n  afterRender: ->\r\n    if utils.userAgent().indexOf(\"Mac\") > -1\r\n      @$('.windows-only').addClass('hidden')\r\n      @$('.mac-only').removeClass('hidden')\r\n\r\n  onClickImageListItem: (e) ->\r\n    selectedUrl = $(e.currentTarget).data('portrait-url')\r\n    @state.set { selectedUrl }\r\n\r\n  onClickCopyUrlButton: (e) ->\r\n    $('.image-url').select()\r\n    @tryCopy()\r\n\r\n  onClickCopyTagButton: (e) ->\r\n    $('.image-tag').select()\r\n    @tryCopy()\r\n\r\n  # Top most useful Thang portraits\r\n  images: [\r\n     {slug: 'archer-f', name: 'Archer F', original: '529ab1a24b67a988ad000002', portraitURL: '/file/db/thang.type/529ab1a24b67a988ad000002/portrait.png', kind: 'Unit'}\r\n     {slug: 'archer-m', name: 'Archer M', original: '52cee45a76ebd5196b00003a', portraitURL: '/file/db/thang.type/52cee45a76ebd5196b00003a/portrait.png', kind: 'Unit'}\r\n     {slug: 'artist', name: 'Artist', original: '56d0c4f601476e2100de76c0', portraitURL: '/file/db/thang.type/56d0c4f601476e2100de76c0/portrait.png', kind: 'Unit'}\r\n     {slug: 'assassin', name: 'Assassin', original: '566a2202e132c81f00f38c81', portraitURL: '/file/db/thang.type/566a2202e132c81f00f38c81/portrait.png', kind: 'Hero'}\r\n     {slug: 'baby-griffin', name: 'baby griffin', original: '57586f0a22179b2800efda37', portraitURL: '/file/db/thang.type/57586f0a22179b2800efda37/portrait.png', kind: 'Item'}\r\n     {slug: 'basic-flags', name: 'Basic Flags', original: '545bacb41e649a4495f887da', portraitURL: '/file/db/thang.type/545bacb41e649a4495f887da/portrait.png', kind: 'Item'}\r\n     {slug: 'boom-ball', name: 'Boom Ball', original: '54eb540b49fa2d5c905ddf1a', portraitURL: '/file/db/thang.type/54eb540b49fa2d5c905ddf1a/portrait.png', kind: 'Item'}\r\n     {slug: 'breaker', name: 'Breaker', original: '56d0dd5b441ddd2f002ba3d8', portraitURL: '/file/db/thang.type/56d0dd5b441ddd2f002ba3d8/portrait.png', kind: 'Unit'}\r\n     {slug: 'burl', name: 'Burl', original: '530e5926c06854403ba68693', portraitURL: '/file/db/thang.type/530e5926c06854403ba68693/portrait.png', kind: 'Unit'}\r\n     {slug: 'captain', name: 'Captain', original: '529ec584c423d4e83b000014', portraitURL: '/file/db/thang.type/529ec584c423d4e83b000014/portrait.png', kind: 'Hero'}\r\n     {slug: 'champion', name: 'Champion', original: '575848b522179b2800efbfbf', portraitURL: '/file/db/thang.type/575848b522179b2800efbfbf/portrait.png', kind: 'Hero'}\r\n     {slug: 'chest-of-gems', name: 'Chest of Gems', original: '5432f9d18364d30000d1f943', portraitURL: '/file/db/thang.type/5432f9d18364d30000d1f943/portrait.png', kind: 'Misc'}\r\n     {slug: 'confuse', name: 'Confuse', original: '53024b76a6efdd32359c5340', portraitURL: '/file/db/thang.type/53024b76a6efdd32359c5340/portrait.png', kind: 'Mark'}\r\n     {slug: 'control', name: 'Control', original: '53024c7b27471514685d5397', portraitURL: '/file/db/thang.type/53024c7b27471514685d5397/portrait.png', kind: 'Mark'}\r\n     {slug: 'cougar', name: 'Cougar', original: '5744e3683af6bf590cd27371', portraitURL: '/file/db/thang.type/5744e3683af6bf590cd27371/portrait.png', kind: 'Item'}\r\n     {slug: 'cow', name: 'Cow', original: '52e95a5022efc8e709001743', portraitURL: '/file/db/thang.type/52e95a5022efc8e709001743/portrait.png', kind: 'Doodad'}\r\n     {slug: 'dantdm', name: 'DanTDM', original: '578674c3a6c641350091b645', portraitURL: '/file/db/thang.type/578674c3a6c641350091b645/portrait.png', kind: 'Unit'}\r\n     {slug: 'desert-bones-2', name: 'Desert Bones 2', original: '548cf11b0f559d0000be7e2b', portraitURL: '/file/db/thang.type/548cf11b0f559d0000be7e2b/portrait.png', kind: 'Doodad'}\r\n     {slug: 'duelist', name: 'Duelist', original: '57588f09046caf2e0012ed41', portraitURL: '/file/db/thang.type/57588f09046caf2e0012ed41/portrait.png', kind: 'Hero'}\r\n     {slug: 'equestrian', name: 'Equestrian', original: '52e95b4222efc8e70900175d', portraitURL: '/file/db/thang.type/52e95b4222efc8e70900175d/portrait.png', kind: 'Unit'}\r\n     {slug: 'flower-1', name: 'Flower 1', original: '54e951c8f54ef5794f354ed1', portraitURL: '/file/db/thang.type/54e951c8f54ef5794f354ed1/portrait.png', kind: 'Doodad'}\r\n     {slug: 'flower-2', name: 'Flower 2', original: '54e9525ff54ef5794f354ed5', portraitURL: '/file/db/thang.type/54e9525ff54ef5794f354ed5/portrait.png', kind: 'Doodad'}\r\n     {slug: 'flower-3', name: 'Flower 3', original: '54e95293f54ef5794f354ed9', portraitURL: '/file/db/thang.type/54e95293f54ef5794f354ed9/portrait.png', kind: 'Doodad'}\r\n     {slug: 'flower-4', name: 'Flower 4', original: '54e952b7f54ef5794f354edd', portraitURL: '/file/db/thang.type/54e952b7f54ef5794f354edd/portrait.png', kind: 'Doodad'}\r\n     {slug: 'flower-5', name: 'Flower 5', original: '54e952daf54ef5794f354ee1', portraitURL: '/file/db/thang.type/54e952daf54ef5794f354ee1/portrait.png', kind: 'Doodad'}\r\n     {slug: 'flower-6', name: 'Flower 6', original: '54e95308f54ef5794f354ee5', portraitURL: '/file/db/thang.type/54e95308f54ef5794f354ee5/portrait.png', kind: 'Doodad'}\r\n     {slug: 'flower-7', name: 'Flower 7', original: '54e9532ff54ef5794f354ee9', portraitURL: '/file/db/thang.type/54e9532ff54ef5794f354ee9/portrait.png', kind: 'Doodad'}\r\n     {slug: 'flower-8', name: 'Flower 8', original: '54e9534ef54ef5794f354eed', portraitURL: '/file/db/thang.type/54e9534ef54ef5794f354eed/portrait.png', kind: 'Doodad'}\r\n     {slug: 'forest-archer', name: 'Forest Archer', original: '5466d4f2417c8b48a9811e87', portraitURL: '/file/db/thang.type/5466d4f2417c8b48a9811e87/portrait.png', kind: 'Hero'}\r\n     {slug: 'frozen-munchkin', name: 'Frozen Munchkin', original: '5576686e1e82182d9e6889bb', portraitURL: '/file/db/thang.type/5576686e1e82182d9e6889bb/portrait.png', kind: 'Doodad'}\r\n     {slug: 'frozen-soldier-f', name: 'Frozen Soldier F', original: '5576683e1e82182d9e6889b7', portraitURL: '/file/db/thang.type/5576683e1e82182d9e6889b7/portrait.png', kind: 'Doodad'}\r\n     {slug: 'frozen-soldier-m', name: 'Frozen Soldier M', original: '557662bf1e82182d9e6889af', portraitURL: '/file/db/thang.type/557662bf1e82182d9e6889af/portrait.png', kind: 'Doodad'}\r\n     {slug: 'gem', name: 'Gem', original: '52aa3b9eccbd588d4d000003', portraitURL: '/file/db/thang.type/52aa3b9eccbd588d4d000003/portrait.png', kind: 'Misc'}\r\n     {slug: 'gold-coin', name: 'Gold Coin', original: '535ef031c519160709f2f63a', portraitURL: '/file/db/thang.type/535ef031c519160709f2f63a/portrait.png', kind: 'Misc'}\r\n     {slug: 'goliath', name: 'Goliath', original: '55e1a6e876cb0948c96af9f8', portraitURL: '/file/db/thang.type/55e1a6e876cb0948c96af9f8/portrait.png', kind: 'Hero'}\r\n     {slug: 'guardian', name: 'Guardian', original: '566a058620de41290036a745', portraitURL: '/file/db/thang.type/566a058620de41290036a745/portrait.png', kind: 'Hero'}\r\n     {slug: 'horse', name: 'Horse', original: '52e989a4427172ae56001f04', portraitURL: '/file/db/thang.type/52e989a4427172ae56001f04/portrait.png', kind: 'Doodad'}\r\n     {slug: 'knight', name: 'Knight', original: '529ffbf1cf1818f2be000001', portraitURL: '/file/db/thang.type/529ffbf1cf1818f2be000001/portrait.png', kind: 'Hero'}\r\n     {slug: 'librarian', name: 'Librarian', original: '52fbf74b7e01835453bd8d8e', portraitURL: '/file/db/thang.type/52fbf74b7e01835453bd8d8e/portrait.png', kind: 'Hero'}\r\n     {slug: 'necromancer', name: 'Necromancer', original: '55652fb3b9effa46a1f775fd', portraitURL: '/file/db/thang.type/55652fb3b9effa46a1f775fd/portrait.png', kind: 'Hero'}\r\n     {slug: 'ninja', name: 'Ninja', original: '52fc0ed77e01835453bd8f6c', portraitURL: '/file/db/thang.type/52fc0ed77e01835453bd8f6c/portrait.png', kind: 'Hero'}\r\n     {slug: 'ogre-brawler', name: 'Ogre Brawler', original: '529e5ee76febb9ca7e00000b', portraitURL: '/file/db/thang.type/529e5ee76febb9ca7e00000b/portrait.png', kind: 'Unit'}\r\n     {slug: 'ogre-chieftain', name: 'Ogre Chieftain', original: '55370661428ddac5686fd026', portraitURL: '/file/db/thang.type/55370661428ddac5686fd026/portrait.png', kind: 'Unit'}\r\n     {slug: 'ogre-f', name: 'Ogre F', original: '52cedd3e0b0d5c1b4c003ec6', portraitURL: '/file/db/thang.type/52cedd3e0b0d5c1b4c003ec6/portrait.png', kind: 'Unit'}\r\n     {slug: 'ogre-fangrider', name: 'Ogre Fangrider', original: '529e5f0c6febb9ca7e00000c', portraitURL: '/file/db/thang.type/529e5f0c6febb9ca7e00000c/portrait.png', kind: 'Unit'}\r\n     {slug: 'ogre-headhunter', name: 'Ogre Headhunter', original: '54c96c3cdef3ad363ff998a1', portraitURL: '/file/db/thang.type/54c96c3cdef3ad363ff998a1/portrait.png', kind: 'Unit'}\r\n     {slug: 'ogre-m', name: 'Ogre M', original: '529e40856febb9ca7e000004', portraitURL: '/file/db/thang.type/529e40856febb9ca7e000004/portrait.png', kind: 'Unit'}\r\n     {slug: 'ogre-munchkin-f', name: 'Ogre Munchkin F', original: '52cee1d976ebd5196b000038', portraitURL: '/file/db/thang.type/52cee1d976ebd5196b000038/portrait.png', kind: 'Unit'}\r\n     {slug: 'ogre-munchkin-m', name: 'Ogre Munchkin M', original: '529e5d756febb9ca7e00000a', portraitURL: '/file/db/thang.type/529e5d756febb9ca7e00000a/portrait.png', kind: 'Unit'}\r\n     {slug: 'ogre-shaman', name: 'Ogre Shaman', original: '529f92f9dacd325127000008', portraitURL: '/file/db/thang.type/529f92f9dacd325127000008/portrait.png', kind: 'Unit'}\r\n     {slug: 'ogre-thrower', name: 'Ogre Thrower', original: '529fff23cf1818f2be000003', portraitURL: '/file/db/thang.type/529fff23cf1818f2be000003/portrait.png', kind: 'Unit'}\r\n     {slug: 'ogre-warlock', name: 'Ogre Warlock', original: '5536f88c428ddac5686fd00c', portraitURL: '/file/db/thang.type/5536f88c428ddac5686fd00c/portrait.png', kind: 'Unit'}\r\n     {slug: 'ogre-witch', name: 'Ogre Witch', original: '5536ce98428ddac5686fcfd3', portraitURL: '/file/db/thang.type/5536ce98428ddac5686fcfd3/portrait.png', kind: 'Unit'}\r\n     {slug: 'oracle', name: 'Oracle', original: '56d0cfa063103d2a00af5449', portraitURL: '/file/db/thang.type/56d0cfa063103d2a00af5449/portrait.png', kind: 'Unit'}\r\n     {slug: 'paladin', name: 'Paladin', original: '552be965c54551e79b57b766', portraitURL: '/file/db/thang.type/552be965c54551e79b57b766/portrait.png', kind: 'Unit'}\r\n     {slug: 'peasant-f', name: 'Peasant F', original: '52d48f02d0ce9936e2000005', portraitURL: '/file/db/thang.type/52d48f02d0ce9936e2000005/portrait.png', kind: 'Unit'}\r\n     {slug: 'peasant-m', name: 'Peasant M', original: '529f9026dacd325127000005', portraitURL: '/file/db/thang.type/529f9026dacd325127000005/portrait.png', kind: 'Unit'}\r\n     {slug: 'polar-bear-cub', name: 'Polar Bear Cub', original: '578691f9bd31c1440083251d', portraitURL: '/file/db/thang.type/578691f9bd31c1440083251d/portrait.png', kind: 'Item'}\r\n     {slug: 'potion-master', name: 'Potion Master', original: '52e9adf7427172ae56002172', portraitURL: '/file/db/thang.type/52e9adf7427172ae56002172/portrait.png', kind: 'Hero'}\r\n     {slug: 'pugicorn', name: 'Pugicorn', original: '577d5d4dab818b210046b3bf', portraitURL: '/file/db/thang.type/577d5d4dab818b210046b3bf/portrait.png', kind: 'Item'}\r\n     {slug: 'raider', name: 'Raider', original: '55527eb0b8abf4ba1fe9a107', portraitURL: '/file/db/thang.type/55527eb0b8abf4ba1fe9a107/portrait.png', kind: 'Hero'}\r\n     {slug: 'raven', name: 'Raven', original: '5786a472a6c64135009238d3', portraitURL: '/file/db/thang.type/5786a472a6c64135009238d3/portrait.png', kind: 'Item'}\r\n     {slug: 'raven-pet', name: 'Raven Pet', original: '540f389a821af8000097dc5a', portraitURL: '/file/db/thang.type/540f389a821af8000097dc5a/portrait.png', kind: 'Unit'}\r\n     {slug: 'razordisc', name: 'Razordisc', original: '54eb4d5949fa2d5c905ddf06', portraitURL: '/file/db/thang.type/54eb4d5949fa2d5c905ddf06/portrait.png', kind: 'Item'}\r\n     {slug: 'samurai', name: 'Samurai', original: '53e12be0d042f23505c3023b', portraitURL: '/file/db/thang.type/53e12be0d042f23505c3023b/portrait.png', kind: 'Hero'}\r\n     {slug: 'skeleton', name: 'Skeleton', original: '54c83b8ae2829db30d0310e0', portraitURL: '/file/db/thang.type/54c83b8ae2829db30d0310e0/portrait.png', kind: 'Unit'}\r\n     {slug: 'soldier-f', name: 'Soldier F', original: '52d49552d0ce9936e2000007', portraitURL: '/file/db/thang.type/52d49552d0ce9936e2000007/portrait.png', kind: 'Unit'}\r\n     {slug: 'soldier-m', name: 'Soldier M', original: '529e680ac423d4e83b000001', portraitURL: '/file/db/thang.type/529e680ac423d4e83b000001/portrait.png', kind: 'Unit'}\r\n     {slug: 'sorcerer', name: 'Sorcerer', original: '52fd1524c7e6cf99160e7bc9', portraitURL: '/file/db/thang.type/52fd1524c7e6cf99160e7bc9/portrait.png', kind: 'Hero'}\r\n     {slug: 'target', name: 'Target', original: '52b32ad97385ec3d03000001', portraitURL: '/file/db/thang.type/52b32ad97385ec3d03000001/portrait.png', kind: 'Mark'}\r\n     {slug: 'thoktar', name: 'Thoktar', original: '52a00542cf1818f2be000006', portraitURL: '/file/db/thang.type/52a00542cf1818f2be000006/portrait.png', kind: 'Unit'}\r\n     {slug: 'tinker', name: 'Tinker', original: '56cdd89be906e72400f13451', portraitURL: '/file/db/thang.type/56cdd89be906e72400f13451/portrait.png', kind: 'Unit'}\r\n     {slug: 'trapper', name: 'Trapper', original: '5466d449417c8b48a9811e83', portraitURL: '/file/db/thang.type/5466d449417c8b48a9811e83/portrait.png', kind: 'Hero'}\r\n     {slug: 'wizard', name: 'Wizard', original: '52a00d55cf1818f2be00000b', portraitURL: '/file/db/thang.type/52a00d55cf1818f2be00000b/portrait.png', kind: 'Unit'}\r\n     {slug: 'wyrm', name: 'Wyrm', original: '56ba2b34e942de2600c792ed', portraitURL: '/file/db/thang.type/56ba2b34e942de2600c792ed/portrait.png', kind: 'Unit'}\r\n  ]\r\n\r\n  # Ones we didn't decide to use\r\n  otherImages: [\r\n    {slug: 'hero-placeholder', name: 'Hero Placeholder', original: '53ed1d9c2b65b0e32b9c96a9', portraitURL: '/file/db/thang.type/53ed1d9c2b65b0e32b9c96a9/portrait.png', kind: 'Unit'}\r\n    {slug: 'flag', name: 'Flag', original: '53fa25f25bc220000052c2be', portraitURL: '/file/db/thang.type/53fa25f25bc220000052c2be/portrait.png', kind: 'Misc'}\r\n    {slug: 'ace-of-coders-background', name: 'Ace of Coders Background', original: '55ef24a10e11a95a0d0ab103', portraitURL: '/file/db/thang.type/55ef24a10e11a95a0d0ab103/portrait.png', kind: 'Floor'}\r\n    {slug: 'advanced-flags', name: 'Advanced Flags', original: '5478b97e8707a2c3a2493b2f', portraitURL: '/file/db/thang.type/5478b97e8707a2c3a2493b2f/portrait.png', kind: 'Item'}\r\n    {slug: 'aerial-spear', name: 'Aerial Spear', original: '5400da521130f1881ca255e4', portraitURL: '/file/db/thang.type/5400da521130f1881ca255e4/portrait.png', kind: 'Misc'}\r\n    {slug: 'altar', name: 'Altar', original: '54ef8eb683b08b7d054b7f04', portraitURL: '/file/db/thang.type/54ef8eb683b08b7d054b7f04/portrait.png', kind: 'Doodad'}\r\n    {slug: 'amber-sense-stone', name: 'Amber Sense Stone', original: '54693413a2b1f53ce79443dd', portraitURL: '/file/db/thang.type/54693413a2b1f53ce79443dd/portrait.png', kind: 'Item'}\r\n    {slug: 'angel-fountain', name: 'Angel Fountain', original: '54f11438021968810565376b', portraitURL: '/file/db/thang.type/54f11438021968810565376b/portrait.png', kind: 'Doodad'}\r\n    {slug: 'angel-statue', name: 'Angel Statue', original: '54f1152a021968810565378a', portraitURL: '/file/db/thang.type/54f1152a021968810565378a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'archway', name: 'Archway', original: '534dd3531a52ddd804f34efc', portraitURL: '/file/db/thang.type/534dd3531a52ddd804f34efc/portrait.png', kind: 'Misc'}\r\n    {slug: 'arrow', name: 'Arrow', original: '529ce66b0bf0bccdc6000005', portraitURL: '/file/db/thang.type/529ce66b0bf0bccdc6000005/portrait.png', kind: 'Missile'}\r\n    {slug: 'arrow-tower', name: 'Arrow Tower', original: '529f93cfdacd32512700000a', portraitURL: '/file/db/thang.type/529f93cfdacd32512700000a/portrait.png', kind: 'Unit'}\r\n    {slug: 'artillery', name: 'Artillery', original: '529e7a16c423d4e83b000003', portraitURL: '/file/db/thang.type/529e7a16c423d4e83b000003/portrait.png', kind: 'Unit'}\r\n    {slug: 'baby-griffin-pet', name: 'Baby Griffin Pet', original: '5750ef2f9f734c20005f1f57', portraitURL: '/file/db/thang.type/5750ef2f9f734c20005f1f57/portrait.png', kind: 'Unit'}\r\n    {slug: 'ball', name: 'Ball', original: '5580af39b43ce0b15a91b299', portraitURL: '/file/db/thang.type/5580af39b43ce0b15a91b299/portrait.png', kind: 'Doodad'}\r\n    {slug: 'balsa-staff', name: 'Balsa Staff', original: '544d88478494308424f56505', portraitURL: '/file/db/thang.type/544d88478494308424f56505/portrait.png', kind: 'Item'}\r\n    {slug: 'banded-redwood-wand', name: 'Banded Redwood Wand', original: '544d887c8494308424f56509', portraitURL: '/file/db/thang.type/544d887c8494308424f56509/portrait.png', kind: 'Item'}\r\n    {slug: 'barn', name: 'Barn', original: '54f1136f25be5e88058374b3', portraitURL: '/file/db/thang.type/54f1136f25be5e88058374b3/portrait.png', kind: 'Doodad'}\r\n    {slug: 'barrel', name: 'Barrel', original: '52aa5ff120fccb0000000003', portraitURL: '/file/db/thang.type/52aa5ff120fccb0000000003/portrait.png', kind: 'Doodad'}\r\n    {slug: 'barrel-animated', name: 'Barrel Animated', original: '54d2b28e7e1b915605556c37', portraitURL: '/file/db/thang.type/54d2b28e7e1b915605556c37/portrait.png', kind: 'Doodad'}\r\n    {slug: 'barrel-animated-2', name: 'Barrel Animated 2', original: '54d2b4fdae912a520569cff1', portraitURL: '/file/db/thang.type/54d2b4fdae912a520569cff1/portrait.png', kind: 'Doodad'}\r\n    {slug: 'bat', name: 'Bat', original: '55c13175c87e47c60604f987', portraitURL: '/file/db/thang.type/55c13175c87e47c60604f987/portrait.png', kind: 'Doodad'}\r\n    {slug: 'beam', name: 'Beam', original: '529ec2cec423d4e83b000011', portraitURL: '/file/db/thang.type/529ec2cec423d4e83b000011/portrait.png', kind: 'Missile'}\r\n    {slug: 'beam-tower', name: 'Beam Tower', original: '529ec0c1c423d4e83b00000d', portraitURL: '/file/db/thang.type/529ec0c1c423d4e83b00000d/portrait.png', kind: 'Unit'}\r\n    {slug: 'bear', name: 'Bear', original: '54e95b22f54ef5794f354f41', portraitURL: '/file/db/thang.type/54e95b22f54ef5794f354f41/portrait.png', kind: 'Doodad'}\r\n    {slug: 'bear-trap', name: 'Bear Trap', original: '54d2b8ef3e16915505f0bfeb', portraitURL: '/file/db/thang.type/54d2b8ef3e16915505f0bfeb/portrait.png', kind: 'Doodad'}\r\n    {slug: 'big-rocks-1', name: 'Big Rocks 1', original: '557f950db43ce0b15a91b1d9', portraitURL: '/file/db/thang.type/557f950db43ce0b15a91b1d9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'big-rocks-2', name: 'Big Rocks 2', original: '557f959ab43ce0b15a91b1dd', portraitURL: '/file/db/thang.type/557f959ab43ce0b15a91b1dd/portrait.png', kind: 'Doodad'}\r\n    {slug: 'big-rocks-3', name: 'Big Rocks 3', original: '557f95e7b43ce0b15a91b1e1', portraitURL: '/file/db/thang.type/557f95e7b43ce0b15a91b1e1/portrait.png', kind: 'Doodad'}\r\n    {slug: 'big-rocks-4', name: 'Big Rocks 4', original: '557f9627b43ce0b15a91b1e5', portraitURL: '/file/db/thang.type/557f9627b43ce0b15a91b1e5/portrait.png', kind: 'Doodad'}\r\n    {slug: 'big-rocks-5', name: 'Big Rocks 5', original: '557f9661b43ce0b15a91b1e9', portraitURL: '/file/db/thang.type/557f9661b43ce0b15a91b1e9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'bird', name: 'Bird', original: '53e2e31f6f406a3505b3eab0', portraitURL: '/file/db/thang.type/53e2e31f6f406a3505b3eab0/portrait.png', kind: 'Doodad'}\r\n    {slug: 'bloodhenge', name: 'Bloodhenge', original: '54f1168802196881056537df', portraitURL: '/file/db/thang.type/54f1168802196881056537df/portrait.png', kind: 'Doodad'}\r\n    {slug: 'blue-cart', name: 'Blue Cart', original: '5435d3207b554def1f99c49c', portraitURL: '/file/db/thang.type/5435d3207b554def1f99c49c/portrait.png', kind: 'Doodad'}\r\n    {slug: 'bluff-1', name: 'Bluff 1', original: '52afce51c5b1813ec200001a', portraitURL: '/file/db/thang.type/52afce51c5b1813ec200001a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'bluff-2', name: 'Bluff 2', original: '52afcecbc5b1813ec200001c', portraitURL: '/file/db/thang.type/52afcecbc5b1813ec200001c/portrait.png', kind: 'Doodad'}\r\n    {slug: 'bolt', name: 'Bolt', original: '55c658a8a03e2014d693990a', portraitURL: '/file/db/thang.type/55c658a8a03e2014d693990a/portrait.png', kind: 'Missile'}\r\n    {slug: 'bolt-spitter', name: 'Bolt Spitter', original: '544d85d88494308424f564e4', portraitURL: '/file/db/thang.type/544d85d88494308424f564e4/portrait.png', kind: 'Item'}\r\n    {slug: 'boltsaw', name: 'Boltsaw', original: '544d6f5e8494308424f56476', portraitURL: '/file/db/thang.type/544d6f5e8494308424f56476/portrait.png', kind: 'Item'}\r\n    {slug: 'bone-dagger', name: 'Bone Dagger', original: '54eb4b2249fa2d5c905ddefe', portraitURL: '/file/db/thang.type/54eb4b2249fa2d5c905ddefe/portrait.png', kind: 'Item'}\r\n    {slug: 'book-of-life-i', name: 'Book of Life I', original: '546375653839c6e02811d30b', portraitURL: '/file/db/thang.type/546375653839c6e02811d30b/portrait.png', kind: 'Item'}\r\n    {slug: 'book-of-life-ii', name: 'Book of Life II', original: '546375813839c6e02811d30e', portraitURL: '/file/db/thang.type/546375813839c6e02811d30e/portrait.png', kind: 'Item'}\r\n    {slug: 'book-of-life-iii', name: 'Book of Life III', original: '546375a43839c6e02811d311', portraitURL: '/file/db/thang.type/546375a43839c6e02811d311/portrait.png', kind: 'Item'}\r\n    {slug: 'book-of-life-iv', name: 'Book of Life IV', original: '546376ca3839c6e02811d31d', portraitURL: '/file/db/thang.type/546376ca3839c6e02811d31d/portrait.png', kind: 'Item'}\r\n    {slug: 'book-of-life-v', name: 'Book of Life V', original: '546376ea3839c6e02811d320', portraitURL: '/file/db/thang.type/546376ea3839c6e02811d320/portrait.png', kind: 'Item'}\r\n    {slug: 'bookshelf', name: 'Bookshelf', original: '52e994ea427172ae56001fc9', portraitURL: '/file/db/thang.type/52e994ea427172ae56001fc9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'bookshelf-2', name: 'Bookshelf 2', original: '54ef925a64112781056c18b5', portraitURL: '/file/db/thang.type/54ef925a64112781056c18b5/portrait.png', kind: 'Doodad'}\r\n    {slug: 'boom-ball-missile', name: 'Boom Ball Missile', original: '5535b5d4428ddac5686fcf82', portraitURL: '/file/db/thang.type/5535b5d4428ddac5686fcf82/portrait.png', kind: 'Missile'}\r\n    {slug: 'boomrod', name: 'Boomrod', original: '544d85898494308424f564df', portraitURL: '/file/db/thang.type/544d85898494308424f564df/portrait.png', kind: 'Item'}\r\n    {slug: 'boots-of-jumping', name: 'Boots of Jumping', original: '546d4e289df4a17d0d449ad5', portraitURL: '/file/db/thang.type/546d4e289df4a17d0d449ad5/portrait.png', kind: 'Item'}\r\n    {slug: 'boots-of-leaping', name: 'Boots of Leaping', original: '53e214f153457600003e3eab', portraitURL: '/file/db/thang.type/53e214f153457600003e3eab/portrait.png', kind: 'Item'}\r\n    {slug: 'boss-star-i', name: 'Boss Star I', original: '54eb58e449fa2d5c905ddf46', portraitURL: '/file/db/thang.type/54eb58e449fa2d5c905ddf46/portrait.png', kind: 'Item'}\r\n    {slug: 'boss-star-ii', name: 'Boss Star II', original: '54eb5bf649fa2d5c905ddf4a', portraitURL: '/file/db/thang.type/54eb5bf649fa2d5c905ddf4a/portrait.png', kind: 'Item'}\r\n    {slug: 'boss-star-iii', name: 'Boss Star III', original: '54eb5c8f49fa2d5c905ddf4e', portraitURL: '/file/db/thang.type/54eb5c8f49fa2d5c905ddf4e/portrait.png', kind: 'Item'}\r\n    {slug: 'boss-star-iv', name: 'Boss Star IV', original: '54eb5d1649fa2d5c905ddf52', portraitURL: '/file/db/thang.type/54eb5d1649fa2d5c905ddf52/portrait.png', kind: 'Item'}\r\n    {slug: 'boss-star-v', name: 'Boss Star V', original: '54eb5dbc49fa2d5c905ddf56', portraitURL: '/file/db/thang.type/54eb5dbc49fa2d5c905ddf56/portrait.png', kind: 'Item'}\r\n    {slug: 'boulder', name: 'Boulder', original: '544d86828494308424f564ec', portraitURL: '/file/db/thang.type/544d86828494308424f564ec/portrait.png', kind: 'Missile'}\r\n    {slug: 'boulder-trap', name: 'Boulder Trap', original: '55c246b1dfc8d0b576e60a23', portraitURL: '/file/db/thang.type/55c246b1dfc8d0b576e60a23/portrait.png', kind: 'Doodad'}\r\n    {slug: 'box', name: 'Box', original: '54d2b68a3e16915505f0bc8a', portraitURL: '/file/db/thang.type/54d2b68a3e16915505f0bc8a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'box-2', name: 'Box 2', original: '54d2b797051a3a5305424c62', portraitURL: '/file/db/thang.type/54d2b797051a3a5305424c62/portrait.png', kind: 'Doodad'}\r\n    {slug: 'brawlwood', name: 'Brawlwood', original: '533b1f1642aef2202fdcc487', portraitURL: '/file/db/thang.type/533b1f1642aef2202fdcc487/portrait.png', kind: 'Floor'}\r\n    {slug: 'breakout-background', name: 'Breakout Background', original: '56c65f8b79735337006047df', portraitURL: '/file/db/thang.type/56c65f8b79735337006047df/portrait.png', kind: 'Floor'}\r\n    {slug: 'broken-tower', name: 'Broken Tower', original: '5376b2caff7b2d3805a396a9', portraitURL: '/file/db/thang.type/5376b2caff7b2d3805a396a9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'bronze-coin', name: 'Bronze Coin', original: '535ef2d54f10444d08486ba8', portraitURL: '/file/db/thang.type/535ef2d54f10444d08486ba8/portrait.png', kind: 'Misc'}\r\n    {slug: 'bronze-shield', name: 'Bronze Shield', original: '544c310ae0017993fce214bf', portraitURL: '/file/db/thang.type/544c310ae0017993fce214bf/portrait.png', kind: 'Item'}\r\n    {slug: 'bullet', name: 'Bullet', original: '544d82bd8494308424f564d0', portraitURL: '/file/db/thang.type/544d82bd8494308424f564d0/portrait.png', kind: 'Missile'}\r\n    {slug: 'cabin-1', name: 'Cabin 1', original: '54e93b41970f0b0a263c0400', portraitURL: '/file/db/thang.type/54e93b41970f0b0a263c0400/portrait.png', kind: 'Doodad'}\r\n    {slug: 'cabin-2', name: 'Cabin 2', original: '54e93cb4970f0b0a263c0406', portraitURL: '/file/db/thang.type/54e93cb4970f0b0a263c0406/portrait.png', kind: 'Doodad'}\r\n    {slug: 'cabin-3', name: 'Cabin 3', original: '54e93d1cf54ef5794f354e7d', portraitURL: '/file/db/thang.type/54e93d1cf54ef5794f354e7d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'cabin-4', name: 'Cabin 4', original: '54e93db7f54ef5794f354e83', portraitURL: '/file/db/thang.type/54e93db7f54ef5794f354e83/portrait.png', kind: 'Doodad'}\r\n    {slug: 'cabinet', name: 'Cabinet', original: '54ef9101c1f3bd7c0593f232', portraitURL: '/file/db/thang.type/54ef9101c1f3bd7c0593f232/portrait.png', kind: 'Doodad'}\r\n    {slug: 'cactus-1', name: 'Cactus 1', original: '546e24949df4a17d0d449bc5', portraitURL: '/file/db/thang.type/546e24949df4a17d0d449bc5/portrait.png', kind: 'Doodad'}\r\n    {slug: 'cactus-2', name: 'Cactus 2', original: '546e24039df4a17d0d449bb9', portraitURL: '/file/db/thang.type/546e24039df4a17d0d449bb9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'caltrop-belt', name: 'Caltrop Belt', original: '54694af7a2b1f53ce7944441', portraitURL: '/file/db/thang.type/54694af7a2b1f53ce7944441/portrait.png', kind: 'Item'}\r\n    {slug: 'caltrops', name: 'Caltrops', original: '557f9700b43ce0b15a91b1ed', portraitURL: '/file/db/thang.type/557f9700b43ce0b15a91b1ed/portrait.png', kind: 'Doodad'}\r\n    {slug: 'camel', name: 'Camel', original: '548cf4cd0f559d0000be7e57', portraitURL: '/file/db/thang.type/548cf4cd0f559d0000be7e57/portrait.png', kind: 'Doodad'}\r\n    {slug: 'camp-fire', name: 'Camp Fire', original: '52e097c110012a5b250000b2', portraitURL: '/file/db/thang.type/52e097c110012a5b250000b2/portrait.png', kind: 'Doodad'}\r\n    {slug: 'campfire-stone', name: 'Campfire Stone', original: '54f118e125be5e880583759a', portraitURL: '/file/db/thang.type/54f118e125be5e880583759a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'candle', name: 'Candle', original: '52e95fb222efc8e7090017d7', portraitURL: '/file/db/thang.type/52e95fb222efc8e7090017d7/portrait.png', kind: 'Doodad'}\r\n    {slug: 'carved-steel-ring', name: 'Carved Steel Ring', original: '54692dfaa2b1f53ce794439f', portraitURL: '/file/db/thang.type/54692dfaa2b1f53ce794439f/portrait.png', kind: 'Item'}\r\n    {slug: 'catapult', name: 'Catapult', original: '553e7ba29bdea5d00f1fd905', portraitURL: '/file/db/thang.type/553e7ba29bdea5d00f1fd905/portrait.png', kind: 'Unit'}\r\n    {slug: 'cave', name: 'Cave', original: '52e95983427172ae560018ce', portraitURL: '/file/db/thang.type/52e95983427172ae560018ce/portrait.png', kind: 'Doodad'}\r\n    {slug: 'chainmail-tunic', name: 'Chainmail Tunic', original: '5441c4dd4e9aeb727cc9713b', portraitURL: '/file/db/thang.type/5441c4dd4e9aeb727cc9713b/portrait.png', kind: 'Item'}\r\n    {slug: 'chains', name: 'Chains', original: '52aa602020fccb0000000004', portraitURL: '/file/db/thang.type/52aa602020fccb0000000004/portrait.png', kind: 'Doodad'}\r\n    {slug: 'chair', name: 'Chair', original: '52e9960e427172ae56001fdf', portraitURL: '/file/db/thang.type/52e9960e427172ae56001fdf/portrait.png', kind: 'Doodad'}\r\n    {slug: 'charge-belt', name: 'Charge Belt', original: '54694b27a2b1f53ce7944445', portraitURL: '/file/db/thang.type/54694b27a2b1f53ce7944445/portrait.png', kind: 'Item'}\r\n    {slug: 'choppable-tree-1', name: 'Choppable Tree 1', original: '52fbd1d67e01835453bd8a26', portraitURL: '/file/db/thang.type/52fbd1d67e01835453bd8a26/portrait.png', kind: 'Doodad'}\r\n    {slug: 'choppable-tree-2', name: 'Choppable Tree 2', original: '52fbd7e07e01835453bd8afc', portraitURL: '/file/db/thang.type/52fbd7e07e01835453bd8afc/portrait.png', kind: 'Doodad'}\r\n    {slug: 'choppable-tree-3', name: 'Choppable Tree 3', original: '52fbd9beab6e45c813bc79c6', portraitURL: '/file/db/thang.type/52fbd9beab6e45c813bc79c6/portrait.png', kind: 'Doodad'}\r\n    {slug: 'choppable-tree-4', name: 'Choppable Tree 4', original: '52fbdb747e01835453bd8b4a', portraitURL: '/file/db/thang.type/52fbdb747e01835453bd8b4a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'circle-tree-stand-1', name: 'Circle Tree Stand 1', original: '541cb842c6362edfb0f3447d', portraitURL: '/file/db/thang.type/541cb842c6362edfb0f3447d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'circle-tree-stand-2', name: 'Circle Tree Stand 2', original: '541cc5708e78524aad94de69', portraitURL: '/file/db/thang.type/541cc5708e78524aad94de69/portrait.png', kind: 'Doodad'}\r\n    {slug: 'circle-tree-stand-3', name: 'Circle Tree Stand 3', original: '541cc6898e78524aad94de6f', portraitURL: '/file/db/thang.type/541cc6898e78524aad94de6f/portrait.png', kind: 'Doodad'}\r\n    {slug: 'circlet-of-the-magi', name: 'Circlet of the Magi', original: '54ea39342b7506e891ca70f2', portraitURL: '/file/db/thang.type/54ea39342b7506e891ca70f2/portrait.png', kind: 'Item'}\r\n    {slug: 'classroom-bench', name: 'classroom bench', original: '56eb09520c6e9f1f00990e81', portraitURL: '/file/db/thang.type/56eb09520c6e9f1f00990e81/portrait.png', kind: 'Doodad'}\r\n    {slug: 'classroom-floor', name: 'Classroom Floor', original: '56a139f9d987c52900d4de5a', portraitURL: '/file/db/thang.type/56a139f9d987c52900d4de5a/portrait.png', kind: 'Floor'}\r\n    {slug: 'classroom-sculpture', name: 'Classroom Sculpture', original: '56a16510088f002400720564', portraitURL: '/file/db/thang.type/56a16510088f002400720564/portrait.png', kind: 'Doodad'}\r\n    {slug: 'classroom-students-desk', name: 'Classroom Students Desk', original: '56a15d88d987c52900d4ecdb', portraitURL: '/file/db/thang.type/56a15d88d987c52900d4ecdb/portrait.png', kind: 'Doodad'}\r\n    {slug: 'classroom-students-seat', name: 'Classroom Students Seat', original: '56a162348431922e0042fae3', portraitURL: '/file/db/thang.type/56a162348431922e0042fae3/portrait.png', kind: 'Doodad'}\r\n    {slug: 'classroom-viewscreen', name: 'Classroom Viewscreen', original: '569fdf3c6ff9591f000050bf', portraitURL: '/file/db/thang.type/569fdf3c6ff9591f000050bf/portrait.png', kind: 'Doodad'}\r\n    {slug: 'classroom-wall', name: 'Classroom Wall', original: '56a0150cf363ed1f0029e11c', portraitURL: '/file/db/thang.type/56a0150cf363ed1f0029e11c/portrait.png', kind: 'Wall'}\r\n    {slug: 'claymore', name: 'Claymore', original: '544d6d4a8494308424f56471', portraitURL: '/file/db/thang.type/544d6d4a8494308424f56471/portrait.png', kind: 'Item'}\r\n    {slug: 'cloud-1', name: 'Cloud 1', original: '550b42b7343675176d05a919', portraitURL: '/file/db/thang.type/550b42b7343675176d05a919/portrait.png', kind: 'Doodad'}\r\n    {slug: 'cloud-2', name: 'Cloud 2', original: '550b43fc343675176d05a923', portraitURL: '/file/db/thang.type/550b43fc343675176d05a923/portrait.png', kind: 'Doodad'}\r\n    {slug: 'cloud-3', name: 'Cloud 3', original: '550b4506343675176d05a933', portraitURL: '/file/db/thang.type/550b4506343675176d05a933/portrait.png', kind: 'Doodad'}\r\n    {slug: 'coin', name: 'Coin', original: '52aa3a8fccbd588d4d000001', portraitURL: '/file/db/thang.type/52aa3a8fccbd588d4d000001/portrait.png', kind: 'Misc'}\r\n    {slug: 'compound-boots', name: 'Compound Boots', original: '546d4d8e9df4a17d0d449acd', portraitURL: '/file/db/thang.type/546d4d8e9df4a17d0d449acd/portrait.png', kind: 'Item'}\r\n    {slug: 'cougar-pet', name: 'Cougar Pet', original: '540f3a33821af8000097dc62', portraitURL: '/file/db/thang.type/540f3a33821af8000097dc62/portrait.png', kind: 'Unit'}\r\n    {slug: 'crevasse-1', name: 'Crevasse 1', original: '5576080a1e82182d9e6888cd', portraitURL: '/file/db/thang.type/5576080a1e82182d9e6888cd/portrait.png', kind: 'Doodad'}\r\n    {slug: 'crevasse-2', name: 'Crevasse 2', original: '557630c31e82182d9e688921', portraitURL: '/file/db/thang.type/557630c31e82182d9e688921/portrait.png', kind: 'Doodad'}\r\n    {slug: 'crevasse-3', name: 'Crevasse 3', original: '557631321e82182d9e688925', portraitURL: '/file/db/thang.type/557631321e82182d9e688925/portrait.png', kind: 'Doodad'}\r\n    {slug: 'crisscross-back', name: 'Crisscross Back', original: '53b495e37e17883a05754216', portraitURL: '/file/db/thang.type/53b495e37e17883a05754216/portrait.png', kind: 'Floor'}\r\n    {slug: 'crisscross-front', name: 'Crisscross Front', original: '53b495b02082f23505b844e5', portraitURL: '/file/db/thang.type/53b495b02082f23505b844e5/portrait.png', kind: 'Floor'}\r\n    {slug: 'cross-bones-background', name: 'Cross Bones Background', original: '572e51175366918e018060e5', portraitURL: '/file/db/thang.type/572e51175366918e018060e5/portrait.png', kind: 'Floor'}\r\n    {slug: 'crossbeam-support', name: 'crossbeam support', original: '5786828a0d397a2e0026f274', portraitURL: '/file/db/thang.type/5786828a0d397a2e0026f274/portrait.png', kind: 'Doodad'}\r\n    {slug: 'crossbow', name: 'Crossbow', original: '53e21ae653457600003e3ec2', portraitURL: '/file/db/thang.type/53e21ae653457600003e3ec2/portrait.png', kind: 'Item'}\r\n    {slug: 'crude-builders-hammer', name: 'Crude Builder\\'s Hammer', original: '53f4e6e3d822c23505b74f42', portraitURL: '/file/db/thang.type/53f4e6e3d822c23505b74f42/portrait.png', kind: 'Item'}\r\n    {slug: 'crude-crossbow', name: 'Crude Crossbow', original: '544d7ffd8494308424f564c3', portraitURL: '/file/db/thang.type/544d7ffd8494308424f564c3/portrait.png', kind: 'Item'}\r\n    {slug: 'crude-dagger', name: 'Crude Dagger', original: '544d952b8494308424f56517', portraitURL: '/file/db/thang.type/544d952b8494308424f56517/portrait.png', kind: 'Item'}\r\n    {slug: 'crude-dagger-missile', name: 'Crude Dagger Missile', original: '546e292d9df4a17d0d449c0c', portraitURL: '/file/db/thang.type/546e292d9df4a17d0d449c0c/portrait.png', kind: 'Missile'}\r\n    {slug: 'crude-glasses', name: 'Crude Glasses', original: '53e238df53457600003e3f0b', portraitURL: '/file/db/thang.type/53e238df53457600003e3f0b/portrait.png', kind: 'Item'}\r\n    {slug: 'crude-spike', name: 'Crude Spike', original: '544d79e28494308424f56482', portraitURL: '/file/db/thang.type/544d79e28494308424f56482/portrait.png', kind: 'Item'}\r\n    {slug: 'crude-telephoto-glasses', name: 'Crude Telephoto Glasses', original: '5469415aa2b1f53ce7944411', portraitURL: '/file/db/thang.type/5469415aa2b1f53ce7944411/portrait.png', kind: 'Item'}\r\n    {slug: 'crypt-key', name: 'Crypt Key', original: '54eb573549fa2d5c905ddf36', portraitURL: '/file/db/thang.type/54eb573549fa2d5c905ddf36/portrait.png', kind: 'Item'}\r\n    {slug: 'crystal-wand', name: 'Crystal Wand', original: '54eab63b2b7506e891ca71f2', portraitURL: '/file/db/thang.type/54eab63b2b7506e891ca71f2/portrait.png', kind: 'Item'}\r\n    {slug: 'cupboards-of-kgard-background', name: 'Cupboards of Kgard background', original: '56994ec3d32e4c1f0075460d', portraitURL: '/file/db/thang.type/56994ec3d32e4c1f0075460d/portrait.png', kind: 'Floor'}\r\n    {slug: 'curse', name: 'Curse', original: '53024d18a6efdd32359c5365', portraitURL: '/file/db/thang.type/53024d18a6efdd32359c5365/portrait.png', kind: 'Mark'}\r\n    {slug: 'cut-garnet-sense-stone', name: 'Cut Garnet Sense Stone', original: '546933a5a2b1f53ce79443d5', portraitURL: '/file/db/thang.type/546933a5a2b1f53ce79443d5/portrait.png', kind: 'Item'}\r\n    {slug: 'cut-stone-builders-hammer', name: 'Cut Stone Builder\\'s Hammer', original: '54694c0ba2b1f53ce7944456', portraitURL: '/file/db/thang.type/54694c0ba2b1f53ce7944456/portrait.png', kind: 'Item'}\r\n    {slug: 'darksteel-blade', name: 'Darksteel Blade', original: '544d7f558494308424f564bb', portraitURL: '/file/db/thang.type/544d7f558494308424f564bb/portrait.png', kind: 'Item'}\r\n    {slug: 'deadeye-crossbow', name: 'Deadeye Crossbow', original: '54eaad752b7506e891ca71d1', portraitURL: '/file/db/thang.type/54eaad752b7506e891ca71d1/portrait.png', kind: 'Item'}\r\n    {slug: 'decoy', name: 'Decoy', original: '5498bb758e52573b10d3bce6', portraitURL: '/file/db/thang.type/5498bb758e52573b10d3bce6/portrait.png', kind: 'Unit'}\r\n    {slug: 'defensive-boots', name: 'Defensive Boots', original: '546d4e019df4a17d0d449ad1', portraitURL: '/file/db/thang.type/546d4e019df4a17d0d449ad1/portrait.png', kind: 'Item'}\r\n    {slug: 'defensive-infantry-shield', name: 'Defensive Infantry Shield', original: '544d7b408494308424f5648f', portraitURL: '/file/db/thang.type/544d7b408494308424f5648f/portrait.png', kind: 'Item'}\r\n    {slug: 'deflector', name: 'Deflector', original: '54eabff349fa2d5c905ddeee', portraitURL: '/file/db/thang.type/54eabff349fa2d5c905ddeee/portrait.png', kind: 'Item'}\r\n    {slug: 'derrick', name: 'Derrick', original: '546e24339df4a17d0d449bbd', portraitURL: '/file/db/thang.type/546e24339df4a17d0d449bbd/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-bones-1', name: 'Desert Bones 1', original: '548cf0cc0f559d0000be7e27', portraitURL: '/file/db/thang.type/548cf0cc0f559d0000be7e27/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-bones-3', name: 'Desert Bones 3', original: '548cf1630f559d0000be7e2f', portraitURL: '/file/db/thang.type/548cf1630f559d0000be7e2f/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-green-1', name: 'Desert Green 1', original: '548cef670f559d0000be7e17', portraitURL: '/file/db/thang.type/548cef670f559d0000be7e17/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-green-2', name: 'Desert Green 2', original: '548cefc50f559d0000be7e1b', portraitURL: '/file/db/thang.type/548cefc50f559d0000be7e1b/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-house-1', name: 'Desert House 1', original: '548cf35a0f559d0000be7e43', portraitURL: '/file/db/thang.type/548cf35a0f559d0000be7e43/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-house-2', name: 'Desert House 2', original: '548cf3ae0f559d0000be7e47', portraitURL: '/file/db/thang.type/548cf3ae0f559d0000be7e47/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-house-3', name: 'Desert House 3', original: '548cf4000f559d0000be7e4b', portraitURL: '/file/db/thang.type/548cf4000f559d0000be7e4b/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-house-4', name: 'Desert House 4', original: '548cf44c0f559d0000be7e4f', portraitURL: '/file/db/thang.type/548cf44c0f559d0000be7e4f/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-palm-1', name: 'Desert Palm 1', original: '548cf0110f559d0000be7e1f', portraitURL: '/file/db/thang.type/548cf0110f559d0000be7e1f/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-palm-2', name: 'Desert Palm 2', original: '548cf06f0f559d0000be7e23', portraitURL: '/file/db/thang.type/548cf06f0f559d0000be7e23/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-pillar', name: 'Desert Pillar', original: '541c5ff487338f570851ad83', portraitURL: '/file/db/thang.type/541c5ff487338f570851ad83/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-pyramid', name: 'Desert Pyramid', original: '53e239c253457600003e3f11', portraitURL: '/file/db/thang.type/53e239c253457600003e3f11/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-rubble-1', name: 'Desert Rubble 1', original: '53126c48f5a594b00fbfcc42', portraitURL: '/file/db/thang.type/53126c48f5a594b00fbfcc42/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-rubble-2', name: 'Desert Rubble 2', original: '52f01b0b5071878f7650e11a', portraitURL: '/file/db/thang.type/52f01b0b5071878f7650e11a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-rubble-3', name: 'Desert Rubble 3', original: '546e23a89df4a17d0d449bb1', portraitURL: '/file/db/thang.type/546e23a89df4a17d0d449bb1/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-sand-rock', name: 'Desert Sand Rock', original: '55c64774ef141c65665beb84', portraitURL: '/file/db/thang.type/55c64774ef141c65665beb84/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-shrub-big-1', name: 'Desert Shrub Big 1', original: '546e237d9df4a17d0d449bad', portraitURL: '/file/db/thang.type/546e237d9df4a17d0d449bad/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-shrub-big-2', name: 'Desert Shrub Big 2', original: '546e22c59df4a17d0d449ba1', portraitURL: '/file/db/thang.type/546e22c59df4a17d0d449ba1/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-shrub-big-3', name: 'Desert Shrub Big 3', original: '53f4c776d822c23505b7091c', portraitURL: '/file/db/thang.type/53f4c776d822c23505b7091c/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-shrub-small-1', name: 'Desert Shrub Small 1', original: '548ceec80f559d0000be7e0f', portraitURL: '/file/db/thang.type/548ceec80f559d0000be7e0f/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-shrub-small-2', name: 'Desert Shrub Small 2', original: '548cef1f0f559d0000be7e13', portraitURL: '/file/db/thang.type/548cef1f0f559d0000be7e13/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-skullcave', name: 'Desert Skullcave', original: '546e231c9df4a17d0d449ba5', portraitURL: '/file/db/thang.type/546e231c9df4a17d0d449ba5/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-wall-1', name: 'Desert Wall 1', original: '5404fe5f1d10b2f170618ae9', portraitURL: '/file/db/thang.type/5404fe5f1d10b2f170618ae9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-wall-2', name: 'Desert Wall 2', original: '540100ba794c1a8b4d328437', portraitURL: '/file/db/thang.type/540100ba794c1a8b4d328437/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-wall-3', name: 'Desert Wall 3', original: '53f4e7fff7bc7336054dcf64', portraitURL: '/file/db/thang.type/53f4e7fff7bc7336054dcf64/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-wall-4', name: 'Desert Wall 4', original: '53f3ef04e7a7643005c0f4a1', portraitURL: '/file/db/thang.type/53f3ef04e7a7643005c0f4a1/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-wall-5', name: 'Desert Wall 5', original: '53ebafdd1a100989a40ce479', portraitURL: '/file/db/thang.type/53ebafdd1a100989a40ce479/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-wall-6', name: 'Desert Wall 6', original: '53eb989b1a100989a40ce46a', portraitURL: '/file/db/thang.type/53eb989b1a100989a40ce46a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-wall-7', name: 'Desert Wall 7', original: '53eaa7de786ccc3405a9f2a4', portraitURL: '/file/db/thang.type/53eaa7de786ccc3405a9f2a4/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-wall-8', name: 'Desert Wall 8', original: '53eaa6f6ef27b33605514a64', portraitURL: '/file/db/thang.type/53eaa6f6ef27b33605514a64/portrait.png', kind: 'Doodad'}\r\n    {slug: 'desert-well', name: 'Desert Well', original: '548cf4880f559d0000be7e53', portraitURL: '/file/db/thang.type/548cf4880f559d0000be7e53/portrait.png', kind: 'Doodad'}\r\n    {slug: 'destroyed-human-tower', name: 'destroyed human tower', original: '57867e5acca8994b002702a9', portraitURL: '/file/db/thang.type/57867e5acca8994b002702a9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'destroyed-human-tower-with-trees', name: 'destroyed human tower with trees', original: '572d5abed7787fc300d85964', portraitURL: '/file/db/thang.type/572d5abed7787fc300d85964/portrait.png', kind: 'Doodad'}\r\n    {slug: 'destroyed-human-tower-with-trees-2', name: 'destroyed human tower with trees 2', original: '572d5b42d7787fc300d8596f', portraitURL: '/file/db/thang.type/572d5b42d7787fc300d8596f/portrait.png', kind: 'Doodad'}\r\n    {slug: 'destroyed-ogre-tower-footing', name: 'destroyed ogre tower footing', original: '578680980d397a2e0026eff9', portraitURL: '/file/db/thang.type/578680980d397a2e0026eff9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'diamond-sense-stone', name: 'Diamond Sense Stone', original: '546934b7a2b1f53ce79443e1', portraitURL: '/file/db/thang.type/546934b7a2b1f53ce79443e1/portrait.png', kind: 'Item'}\r\n    {slug: 'dirt-path-1', name: 'Dirt Path 1', original: '5302acfd27471514685d5fd4', portraitURL: '/file/db/thang.type/5302acfd27471514685d5fd4/portrait.png', kind: 'Floor'}\r\n    {slug: 'disintegrate', name: 'Disintegrate', original: '54d2bb1abb157252059b1d29', portraitURL: '/file/db/thang.type/54d2bb1abb157252059b1d29/portrait.png', kind: 'Mark'}\r\n    {slug: 'dispel', name: 'Dispel', original: '55c2807d3767fd3435eb4465', portraitURL: '/file/db/thang.type/55c2807d3767fd3435eb4465/portrait.png', kind: 'Mark'}\r\n    {slug: 'dragonscale-chainmail-coif', name: 'Dragonscale Chainmail Coif', original: '546d477d9df4a17d0d449a6b', portraitURL: '/file/db/thang.type/546d477d9df4a17d0d449a6b/portrait.png', kind: 'Item'}\r\n    {slug: 'dragonscale-chainmail-tunic', name: 'Dragonscale Chainmail Tunic', original: '546d3d149df4a17d0d449a43', portraitURL: '/file/db/thang.type/546d3d149df4a17d0d449a43/portrait.png', kind: 'Item'}\r\n    {slug: 'dragontooth', name: 'Dragontooth', original: '54eb51d349fa2d5c905ddf0e', portraitURL: '/file/db/thang.type/54eb51d349fa2d5c905ddf0e/portrait.png', kind: 'Item'}\r\n    {slug: 'drain-life', name: 'Drain Life', original: '54d2bc5b4e4a08550556da55', portraitURL: '/file/db/thang.type/54d2bc5b4e4a08550556da55/portrait.png', kind: 'Mark'}\r\n    {slug: 'dread-door-background', name: 'Dread Door Background', original: '572e46a3f8c4f9b601ede6c0', portraitURL: '/file/db/thang.type/572e46a3f8c4f9b601ede6c0/portrait.png', kind: 'Floor'}\r\n    {slug: 'dueling-grounds-background', name: 'Dueling Grounds Background', original: '572e5163e8db5195014848b3', portraitURL: '/file/db/thang.type/572e5163e8db5195014848b3/portrait.png', kind: 'Floor'}\r\n    {slug: 'dunes', name: 'Dunes', original: '546e251d9df4a17d0d449bd1', portraitURL: '/file/db/thang.type/546e251d9df4a17d0d449bd1/portrait.png', kind: 'Doodad'}\r\n    {slug: 'dungeon-door', name: 'Dungeon Door', original: '52a0e5123abf480000000001', portraitURL: '/file/db/thang.type/52a0e5123abf480000000001/portrait.png', kind: 'Doodad'}\r\n    {slug: 'dungeon-entrance', name: 'Dungeon Entrance', original: '544d850e8494308424f564dd', portraitURL: '/file/db/thang.type/544d850e8494308424f564dd/portrait.png', kind: 'Doodad'}\r\n    {slug: 'dungeon-floor', name: 'Dungeon Floor', original: '52af688f6320a8049d000001', portraitURL: '/file/db/thang.type/52af688f6320a8049d000001/portrait.png', kind: 'Floor'}\r\n    {slug: 'dungeon-pillar', name: 'Dungeon Pillar', original: '543ea0ff9692aa00006208e7', portraitURL: '/file/db/thang.type/543ea0ff9692aa00006208e7/portrait.png', kind: 'Doodad'}\r\n    {slug: 'dungeon-pit', name: 'Dungeon Pit', original: '52b09408ccbc671372000002', portraitURL: '/file/db/thang.type/52b09408ccbc671372000002/portrait.png', kind: 'Floor'}\r\n    {slug: 'dungeon-rock-1', name: 'Dungeon Rock 1', original: '54ef944764112781056c1f96', portraitURL: '/file/db/thang.type/54ef944764112781056c1f96/portrait.png', kind: 'Doodad'}\r\n    {slug: 'dungeon-rock-2', name: 'Dungeon Rock 2', original: '54ef99bf223edd8105b00eaa', portraitURL: '/file/db/thang.type/54ef99bf223edd8105b00eaa/portrait.png', kind: 'Doodad'}\r\n    {slug: 'dungeon-rock-3', name: 'Dungeon Rock 3', original: '54ef9af5b4740779058448c6', portraitURL: '/file/db/thang.type/54ef9af5b4740779058448c6/portrait.png', kind: 'Doodad'}\r\n    {slug: 'dungeon-rock-4', name: 'Dungeon Rock 4', original: '54ef9c26933e1e7b0584663e', portraitURL: '/file/db/thang.type/54ef9c26933e1e7b0584663e/portrait.png', kind: 'Doodad'}\r\n    {slug: 'dungeon-rock-5', name: 'Dungeon Rock 5', original: '54ef9d376aea7d7805535cc8', portraitURL: '/file/db/thang.type/54ef9d376aea7d7805535cc8/portrait.png', kind: 'Doodad'}\r\n    {slug: 'dungeon-rock-group', name: 'Dungeon Rock Group', original: '54ef9e0583b08b7d054ba331', portraitURL: '/file/db/thang.type/54ef9e0583b08b7d054ba331/portrait.png', kind: 'Doodad'}\r\n    {slug: 'dungeon-stairs-horizontal', name: 'Dungeon Stairs Horizontal', original: '5463dc27c295cc4fb9c06257', portraitURL: '/file/db/thang.type/5463dc27c295cc4fb9c06257/portrait.png', kind: 'Doodad'}\r\n    {slug: 'dungeon-stairs-vertical', name: 'Dungeon Stairs Vertical', original: '5463d8a0c295cc4fb9c06255', portraitURL: '/file/db/thang.type/5463d8a0c295cc4fb9c06255/portrait.png', kind: 'Doodad'}\r\n    {slug: 'dungeon-wall', name: 'Dungeon Wall', original: '529e7aecc423d4e83b000004', portraitURL: '/file/db/thang.type/529e7aecc423d4e83b000004/portrait.png', kind: 'Wall'}\r\n    {slug: 'dungeons-of-kgard-background', name: 'Dungeons of Kgard Background', original: '563d3c02f5b71e8405fabff8', portraitURL: '/file/db/thang.type/563d3c02f5b71e8405fabff8/portrait.png', kind: 'Floor'}\r\n    {slug: 'dynamic-flags', name: 'Dynamic Flags', original: '5478b9068707a2c3a2493b2b', portraitURL: '/file/db/thang.type/5478b9068707a2c3a2493b2b/portrait.png', kind: 'Item'}\r\n    {slug: 'earthskin', name: 'Earthskin', original: '54d2bcf66ec7cf53051e7855', portraitURL: '/file/db/thang.type/54d2bcf66ec7cf53051e7855/portrait.png', kind: 'Mark'}\r\n    {slug: 'east-mounted-camera-facing-east-west', name: 'east mounted camera facing east west', original: '56f183091e1daf0a016c670b', portraitURL: '/file/db/thang.type/56f183091e1daf0a016c670b/portrait.png', kind: 'Doodad'}\r\n    {slug: 'east-mounted-camera-facing-north', name: 'east mounted camera facing north', original: '56f1782541c1a0cb00f8d66c', portraitURL: '/file/db/thang.type/56f1782541c1a0cb00f8d66c/portrait.png', kind: 'Doodad'}\r\n    {slug: 'east-mounted-camera-facing-south', name: 'east mounted camera facing south', original: '56f1811841c1a0cb00f8ddb1', portraitURL: '/file/db/thang.type/56f1811841c1a0cb00f8ddb1/portrait.png', kind: 'Doodad'}\r\n    {slug: 'edge-of-darkness', name: 'Edge of Darkness', original: '54eaa8762b7506e891ca71a9', portraitURL: '/file/db/thang.type/54eaa8762b7506e891ca71a9/portrait.png', kind: 'Item'}\r\n    {slug: 'eldritch-icicle', name: 'Eldritch Icicle', original: '54ea311e2b7506e891ca70b0', portraitURL: '/file/db/thang.type/54ea311e2b7506e891ca70b0/portrait.png', kind: 'Item'}\r\n    {slug: 'electrocute', name: 'Electrocute', original: '55c281263767fd3435eb4469', portraitURL: '/file/db/thang.type/55c281263767fd3435eb4469/portrait.png', kind: 'Mark'}\r\n    {slug: 'electrowall', name: 'Electrowall', original: '54177e26571f116c0b1f00c0', portraitURL: '/file/db/thang.type/54177e26571f116c0b1f00c0/portrait.png', kind: 'Doodad'}\r\n    {slug: 'elemental-codex-i', name: 'Elemental Codex I', original: '5463755a3839c6e02811d30a', portraitURL: '/file/db/thang.type/5463755a3839c6e02811d30a/portrait.png', kind: 'Item'}\r\n    {slug: 'elemental-codex-ii', name: 'Elemental Codex II', original: '546375783839c6e02811d30d', portraitURL: '/file/db/thang.type/546375783839c6e02811d30d/portrait.png', kind: 'Item'}\r\n    {slug: 'elemental-codex-iii', name: 'Elemental Codex III', original: '5463759c3839c6e02811d310', portraitURL: '/file/db/thang.type/5463759c3839c6e02811d310/portrait.png', kind: 'Item'}\r\n    {slug: 'elemental-codex-iv', name: 'Elemental Codex IV', original: '546376bf3839c6e02811d31c', portraitURL: '/file/db/thang.type/546376bf3839c6e02811d31c/portrait.png', kind: 'Item'}\r\n    {slug: 'elemental-codex-v', name: 'Elemental Codex V', original: '546376e23839c6e02811d31f', portraitURL: '/file/db/thang.type/546376e23839c6e02811d31f/portrait.png', kind: 'Item'}\r\n    {slug: 'embroidered-griffin-wool-hat', name: 'Embroidered Griffin Wool Hat', original: '546d4ca19df4a17d0d449abf', portraitURL: '/file/db/thang.type/546d4ca19df4a17d0d449abf/portrait.png', kind: 'Item'}\r\n    {slug: 'embroidered-griffin-wool-robe', name: 'Embroidered Griffin Wool Robe', original: '546d4a549df4a17d0d449a97', portraitURL: '/file/db/thang.type/546d4a549df4a17d0d449a97/portrait.png', kind: 'Item'}\r\n    {slug: 'emerald-chainmail-coif', name: 'Emerald Chainmail Coif', original: '546d46cf9df4a17d0d449a63', portraitURL: '/file/db/thang.type/546d46cf9df4a17d0d449a63/portrait.png', kind: 'Item'}\r\n    {slug: 'emerald-chainmail-tunic', name: 'Emerald Chainmail Tunic', original: '546d3c8d9df4a17d0d449a3b', portraitURL: '/file/db/thang.type/546d3c8d9df4a17d0d449a3b/portrait.png', kind: 'Item'}\r\n    {slug: 'emperors-gloves', name: 'Emperor\\'s Gloves', original: '546949aca2b1f53ce7944431', portraitURL: '/file/db/thang.type/546949aca2b1f53ce7944431/portrait.png', kind: 'Item'}\r\n    {slug: 'enameled-dragonplate', name: 'Enameled Dragonplate', original: '546ab1e53777d61863292876', portraitURL: '/file/db/thang.type/546ab1e53777d61863292876/portrait.png', kind: 'Item'}\r\n    {slug: 'enameled-dragonplate-helmet', name: 'Enameled Dragonplate Helmet', original: '546d3a539df4a17d0d449a1f', portraitURL: '/file/db/thang.type/546d3a539df4a17d0d449a1f/portrait.png', kind: 'Item'}\r\n    {slug: 'enameled-dragonshield', name: 'Enameled Dragonshield', original: '54eabf022b7506e891ca7236', portraitURL: '/file/db/thang.type/54eabf022b7506e891ca7236/portrait.png', kind: 'Item'}\r\n    {slug: 'enchanted-lambswool-cloak', name: 'Enchanted Lambswool Cloak', original: '546d49109df4a17d0d449a7f', portraitURL: '/file/db/thang.type/546d49109df4a17d0d449a7f/portrait.png', kind: 'Item'}\r\n    {slug: 'enchanted-lenses', name: 'Enchanted Lenses', original: '546941cba2b1f53ce7944419', portraitURL: '/file/db/thang.type/546941cba2b1f53ce7944419/portrait.png', kind: 'Item'}\r\n    {slug: 'enchanted-stick', name: 'Enchanted Stick', original: '544d87188494308424f564f1', portraitURL: '/file/db/thang.type/544d87188494308424f564f1/portrait.png', kind: 'Item'}\r\n    {slug: 'enemy-mine-background', name: 'Enemy Mine Background', original: '563cdd340b2c7c87054e102b', portraitURL: '/file/db/thang.type/563cdd340b2c7c87054e102b/portrait.png', kind: 'Floor'}\r\n    {slug: 'energy-ball', name: 'Energy Ball', original: '53025d83222f73867774d8ed', portraitURL: '/file/db/thang.type/53025d83222f73867774d8ed/portrait.png', kind: 'Missile'}\r\n    {slug: 'energy-ball-diet', name: 'Energy Ball Diet', original: '531a6ddf1ddc910545d5e96d', portraitURL: '/file/db/thang.type/531a6ddf1ddc910545d5e96d/portrait.png', kind: 'Missile'}\r\n    {slug: 'enforcer', name: 'Enforcer', original: '56d0ca1263103d2a00af5331', portraitURL: '/file/db/thang.type/56d0ca1263103d2a00af5331/portrait.png', kind: 'Unit'}\r\n    {slug: 'engraved-builders-hammer', name: 'Engraved Builder\\'s Hammer', original: '54694ca7a2b1f53ce7944462', portraitURL: '/file/db/thang.type/54694ca7a2b1f53ce7944462/portrait.png', kind: 'Item'}\r\n    {slug: 'engraved-obsidian-breastplate', name: 'Engraved Obsidian Breastplate', original: '546ab15e3777d6186329286e', portraitURL: '/file/db/thang.type/546ab15e3777d6186329286e/portrait.png', kind: 'Item'}\r\n    {slug: 'engraved-obsidian-helmet', name: 'Engraved Obsidian Helmet', original: '546d39d89df4a17d0d449a17', portraitURL: '/file/db/thang.type/546d39d89df4a17d0d449a17/portrait.png', kind: 'Item'}\r\n    {slug: 'engraved-obsidian-shield', name: 'Engraved Obsidian Shield', original: '54eabbd22b7506e891ca721e', portraitURL: '/file/db/thang.type/54eabbd22b7506e891ca721e/portrait.png', kind: 'Item'}\r\n    {slug: 'engraved-wristwatch', name: 'Engraved Wristwatch', original: '546937dea2b1f53ce79443ed', portraitURL: '/file/db/thang.type/546937dea2b1f53ce79443ed/portrait.png', kind: 'Item'}\r\n    {slug: 'explosive-potion', name: 'Explosive Potion', original: '5466d9a5417c8b48a9811e8e', portraitURL: '/file/db/thang.type/5466d9a5417c8b48a9811e8e/portrait.png', kind: 'Missile'}\r\n    {slug: 'ezeroths-timepiece', name: 'Ezeroth\\'s Timepiece', original: '546938cea2b1f53ce79443f5', portraitURL: '/file/db/thang.type/546938cea2b1f53ce79443f5/portrait.png', kind: 'Item'}\r\n    {slug: 'farm', name: 'Farm', original: '52ea853d427172ae56003494', portraitURL: '/file/db/thang.type/52ea853d427172ae56003494/portrait.png', kind: 'Doodad'}\r\n    {slug: 'faux-fur-hat', name: 'Faux Fur Hat', original: '5441c2be4e9aeb727cc97105', portraitURL: '/file/db/thang.type/5441c2be4e9aeb727cc97105/portrait.png', kind: 'Item'}\r\n    {slug: 'fear', name: 'Fear', original: '53024db827471514685d53b2', portraitURL: '/file/db/thang.type/53024db827471514685d53b2/portrait.png', kind: 'Mark'}\r\n    {slug: 'fence', name: 'Fence', original: '5421bc5218adb78d98d265e8', portraitURL: '/file/db/thang.type/5421bc5218adb78d98d265e8/portrait.png', kind: 'Doodad'}\r\n    {slug: 'fence-wall', name: 'Fence Wall', original: '54349179a4cc5c900efa4814', portraitURL: '/file/db/thang.type/54349179a4cc5c900efa4814/portrait.png', kind: 'Doodad'}\r\n    {slug: 'filing-cabinet', name: 'Filing Cabinet', original: '52e9fa73427172ae56002593', portraitURL: '/file/db/thang.type/52e9fa73427172ae56002593/portrait.png', kind: 'Doodad'}\r\n    {slug: 'fine-boots', name: 'Fine Boots', original: '53e2388e53457600003e3f09', portraitURL: '/file/db/thang.type/53e2388e53457600003e3f09/portrait.png', kind: 'Item'}\r\n    {slug: 'fine-leather-chainmail-coif', name: 'Fine Leather Chainmail Coif', original: '546d455f9df4a17d0d449a4f', portraitURL: '/file/db/thang.type/546d455f9df4a17d0d449a4f/portrait.png', kind: 'Item'}\r\n    {slug: 'fine-leather-chainmail-tunic', name: 'Fine Leather Chainmail Tunic', original: '546d3b129df4a17d0d449a27', portraitURL: '/file/db/thang.type/546d3b129df4a17d0d449a27/portrait.png', kind: 'Item'}\r\n    {slug: 'fine-stone-builders-hammer', name: 'Fine Stone Builder\\'s Hammer', original: '54694c44a2b1f53ce794445a', portraitURL: '/file/db/thang.type/54694c44a2b1f53ce794445a/portrait.png', kind: 'Item'}\r\n    {slug: 'fine-telephoto-glasses', name: 'Fine Telephoto Glasses', original: '54694194a2b1f53ce7944415', portraitURL: '/file/db/thang.type/54694194a2b1f53ce7944415/portrait.png', kind: 'Item'}\r\n    {slug: 'fine-wooden-glasses', name: 'Fine Wooden Glasses', original: '5469405ba2b1f53ce7944404', portraitURL: '/file/db/thang.type/5469405ba2b1f53ce7944404/portrait.png', kind: 'Item'}\r\n    {slug: 'fir-tree-1', name: 'Fir Tree 1', original: '54e9503df54ef5794f354ec1', portraitURL: '/file/db/thang.type/54e9503df54ef5794f354ec1/portrait.png', kind: 'Doodad'}\r\n    {slug: 'fir-tree-2', name: 'Fir Tree 2', original: '54e95107f54ef5794f354ec5', portraitURL: '/file/db/thang.type/54e95107f54ef5794f354ec5/portrait.png', kind: 'Doodad'}\r\n    {slug: 'fir-tree-3', name: 'Fir Tree 3', original: '54e9513ff54ef5794f354ec9', portraitURL: '/file/db/thang.type/54e9513ff54ef5794f354ec9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'fir-tree-4', name: 'Fir Tree 4', original: '54e9518df54ef5794f354ecd', portraitURL: '/file/db/thang.type/54e9518df54ef5794f354ecd/portrait.png', kind: 'Doodad'}\r\n    {slug: 'fire', name: 'Fire', original: '54d2bdea4e4a08550556dbfe', portraitURL: '/file/db/thang.type/54d2bdea4e4a08550556dbfe/portrait.png', kind: 'Mark'}\r\n    {slug: 'fire-dancing-background', name: 'Fire Dancing Background', original: '576ad6ab7e64f325002df2e4', portraitURL: '/file/db/thang.type/576ad6ab7e64f325002df2e4/portrait.png', kind: 'Floor'}\r\n    {slug: 'fire-opal-sense-stone', name: 'Fire Opal Sense Stone', original: '546932e4a2b1f53ce79443cd', portraitURL: '/file/db/thang.type/546932e4a2b1f53ce79443cd/portrait.png', kind: 'Item'}\r\n    {slug: 'fire-trap', name: 'Fire Trap', original: '5449536afb56d566e86972ba', portraitURL: '/file/db/thang.type/5449536afb56d566e86972ba/portrait.png', kind: 'Misc'}\r\n    {slug: 'fireball', name: 'Fireball', original: '531a6a2f1ddc910545d5e944', portraitURL: '/file/db/thang.type/531a6a2f1ddc910545d5e944/portrait.png', kind: 'Missile'}\r\n    {slug: 'firewall', name: 'firewall', original: '56f56687db0216900f086ac1', portraitURL: '/file/db/thang.type/56f56687db0216900f086ac1/portrait.png', kind: 'Doodad'}\r\n    {slug: 'firewood-1', name: 'Firewood 1', original: '52e953d0427172ae5600181d', portraitURL: '/file/db/thang.type/52e953d0427172ae5600181d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'firewood-2', name: 'Firewood 2', original: '52e9575d22efc8e7090016ed', portraitURL: '/file/db/thang.type/52e9575d22efc8e7090016ed/portrait.png', kind: 'Doodad'}\r\n    {slug: 'firewood-3', name: 'Firewood 3', original: '52e957ec22efc8e7090016fd', portraitURL: '/file/db/thang.type/52e957ec22efc8e7090016fd/portrait.png', kind: 'Doodad'}\r\n    {slug: 'firn-1', name: 'Firn 1', original: '557639fa1e82182d9e68894d', portraitURL: '/file/db/thang.type/557639fa1e82182d9e68894d/portrait.png', kind: 'Floor'}\r\n    {slug: 'firn-2', name: 'Firn 2', original: '55763a971e82182d9e688951', portraitURL: '/file/db/thang.type/55763a971e82182d9e688951/portrait.png', kind: 'Floor'}\r\n    {slug: 'firn-3', name: 'Firn 3', original: '55763ab51e82182d9e688955', portraitURL: '/file/db/thang.type/55763ab51e82182d9e688955/portrait.png', kind: 'Floor'}\r\n    {slug: 'firn-4', name: 'Firn 4', original: '55763ad11e82182d9e688959', portraitURL: '/file/db/thang.type/55763ad11e82182d9e688959/portrait.png', kind: 'Floor'}\r\n    {slug: 'firn-5', name: 'Firn 5', original: '55763aea1e82182d9e68895d', portraitURL: '/file/db/thang.type/55763aea1e82182d9e68895d/portrait.png', kind: 'Floor'}\r\n    {slug: 'firn-6', name: 'Firn 6', original: '55763b111e82182d9e688961', portraitURL: '/file/db/thang.type/55763b111e82182d9e688961/portrait.png', kind: 'Floor'}\r\n    {slug: 'firn-cliff', name: 'Firn Cliff', original: '55c277983767fd3435eb444e', portraitURL: '/file/db/thang.type/55c277983767fd3435eb444e/portrait.png', kind: 'Floor'}\r\n    {slug: 'flame-armor', name: 'Flame Armor', original: '55c27b5c3767fd3435eb445a', portraitURL: '/file/db/thang.type/55c27b5c3767fd3435eb445a/portrait.png', kind: 'Mark'}\r\n    {slug: 'flaming-shell', name: 'Flaming Shell', original: '553e80669bdea5d00f1fd90e', portraitURL: '/file/db/thang.type/553e80669bdea5d00f1fd90e/portrait.png', kind: 'Missile'}\r\n    {slug: 'flippable-land', name: 'Flippable Land', original: '53a20126610a6b3505568163', portraitURL: '/file/db/thang.type/53a20126610a6b3505568163/portrait.png', kind: 'Floor'}\r\n    {slug: 'floppy-lambswool-hat', name: 'Floppy Lambswool Hat', original: '546d4b069df4a17d0d449aa3', portraitURL: '/file/db/thang.type/546d4b069df4a17d0d449aa3/portrait.png', kind: 'Item'}\r\n    {slug: 'force-bolt', name: 'Force Bolt', original: '5467807c417c8b48a9811efd', portraitURL: '/file/db/thang.type/5467807c417c8b48a9811efd/portrait.png', kind: 'Missile'}\r\n    {slug: 'forest-river-tile-deadend', name: 'Forest River tile deadend', original: '577d5b367e0491260074b95b', portraitURL: '/file/db/thang.type/577d5b367e0491260074b95b/portrait.png', kind: 'undefined'}\r\n    {slug: 'forest-river-tile-full-intersection', name: 'forest river tile full intersection', original: '5786badaa6c6413500926209', portraitURL: '/file/db/thang.type/5786badaa6c6413500926209/portrait.png', kind: 'undefined'}\r\n    {slug: 'forest-river-tile-straight', name: 'forest river tile straight', original: '577d58d5dbf35b24001b91cb', portraitURL: '/file/db/thang.type/577d58d5dbf35b24001b91cb/portrait.png', kind: 'undefined'}\r\n    {slug: 'forest-river-tile-t-intersection', name: 'Forest River tile t intersection', original: '577d5b927e0491260074ba3a', portraitURL: '/file/db/thang.type/577d5b927e0491260074ba3a/portrait.png', kind: 'undefined'}\r\n    {slug: 'forest-river-tile-turn', name: 'Forest River tile turn', original: '577d59e37e0491260074b5bd', portraitURL: '/file/db/thang.type/577d59e37e0491260074b5bd/portrait.png', kind: 'undefined'}\r\n    {slug: 'forgetful-gemsmith-background', name: 'Forgetful Gemsmith Background', original: '562a9b9ea4cdd48805fb98ca', portraitURL: '/file/db/thang.type/562a9b9ea4cdd48805fb98ca/portrait.png', kind: 'Floor'}\r\n    {slug: 'forgotten-bronze-ring', name: 'Forgotten Bronze Ring', original: '54692d8aa2b1f53ce7944397', portraitURL: '/file/db/thang.type/54692d8aa2b1f53ce7944397/portrait.png', kind: 'Item'}\r\n    {slug: 'frog', name: 'Frog', original: '57869cf7bd31c14400834028', portraitURL: '/file/db/thang.type/57869cf7bd31c14400834028/portrait.png', kind: 'Item'}\r\n    {slug: 'frog-pet', name: 'Frog Pet', original: '540f3678821af8000097dc56', portraitURL: '/file/db/thang.type/540f3678821af8000097dc56/portrait.png', kind: 'Unit'}\r\n    {slug: 'gargoyle', name: 'Gargoyle', original: '52afc8f0c5b1813ec2000008', portraitURL: '/file/db/thang.type/52afc8f0c5b1813ec2000008/portrait.png', kind: 'Doodad'}\r\n    {slug: 'gargoyle-side', name: 'Gargoyle Side', original: '54efa07f4bb4788505d2339e', portraitURL: '/file/db/thang.type/54efa07f4bb4788505d2339e/portrait.png', kind: 'Doodad'}\r\n    {slug: 'gauntlets-of-strength', name: 'Gauntlets of Strength', original: '53e2202953457600003e3ed9', portraitURL: '/file/db/thang.type/53e2202953457600003e3ed9/portrait.png', kind: 'Item'}\r\n    {slug: 'gem-pile-medium', name: 'Gem Pile Medium', original: '543306638364d30000d1f951', portraitURL: '/file/db/thang.type/543306638364d30000d1f951/portrait.png', kind: 'Misc'}\r\n    {slug: 'gem-pile-small', name: 'Gem Pile Small', original: '543305f78364d30000d1f94a', portraitURL: '/file/db/thang.type/543305f78364d30000d1f94a/portrait.png', kind: 'Misc'}\r\n    {slug: 'gems-of-the-deep-background', name: 'Gems of the Deep Background', original: '563aa55276289f86054a7c02', portraitURL: '/file/db/thang.type/563aa55276289f86054a7c02/portrait.png', kind: 'Floor'}\r\n    {slug: 'generic-armor-mark-1', name: 'Generic Armor Mark 1', original: '54d2be25bb157252059b2202', portraitURL: '/file/db/thang.type/54d2be25bb157252059b2202/portrait.png', kind: 'Mark'}\r\n    {slug: 'generic-armor-mark-2', name: 'Generic Armor Mark 2', original: '54d2be9e3e16915505f0c7a4', portraitURL: '/file/db/thang.type/54d2be9e3e16915505f0c7a4/portrait.png', kind: 'Mark'}\r\n    {slug: 'generic-item', name: 'Generic Item', original: '545d3eb52d03e700001b5a5b', portraitURL: '/file/db/thang.type/545d3eb52d03e700001b5a5b/portrait.png', kind: 'Item'}\r\n    {slug: 'gift-of-the-trees', name: 'Gift of the Trees', original: '54eab0a32b7506e891ca71dd', portraitURL: '/file/db/thang.type/54eab0a32b7506e891ca71dd/portrait.png', kind: 'Item'}\r\n    {slug: 'gilt-wristwatch', name: 'Gilt Wristwatch', original: '54693830a2b1f53ce79443f1', portraitURL: '/file/db/thang.type/54693830a2b1f53ce79443f1/portrait.png', kind: 'Item'}\r\n    {slug: 'glasses-doodad', name: 'Glasses Doodad', original: '5420c4c5a0feb36ad21d45e2', portraitURL: '/file/db/thang.type/5420c4c5a0feb36ad21d45e2/portrait.png', kind: 'Item'}\r\n    {slug: 'glitterbomb', name: 'Glitterbomb', original: '54eb50f649fa2d5c905ddf0a', portraitURL: '/file/db/thang.type/54eb50f649fa2d5c905ddf0a/portrait.png', kind: 'Item'}\r\n    {slug: 'goal-trigger', name: 'Goal Trigger', original: '52bcbf0dce43b70000000006', portraitURL: '/file/db/thang.type/52bcbf0dce43b70000000006/portrait.png', kind: 'Misc'}\r\n    {slug: 'gold-ball', name: 'Gold Ball', original: '550b742b8a7d3c197a824dad', portraitURL: '/file/db/thang.type/550b742b8a7d3c197a824dad/portrait.png', kind: 'Missile'}\r\n    {slug: 'gold-cloud', name: 'Gold Cloud', original: '550b4b9d8a7d3c197a824d5e', portraitURL: '/file/db/thang.type/550b4b9d8a7d3c197a824d5e/portrait.png', kind: 'Doodad'}\r\n    {slug: 'golden-wand', name: 'Golden Wand', original: '54eab7f52b7506e891ca7202', portraitURL: '/file/db/thang.type/54eab7f52b7506e891ca7202/portrait.png', kind: 'Item'}\r\n    {slug: 'goldspun-silk-cloak', name: 'Goldspun Silk Cloak', original: '546d49da9df4a17d0d449a8f', portraitURL: '/file/db/thang.type/546d49da9df4a17d0d449a8f/portrait.png', kind: 'Item'}\r\n    {slug: 'goldspun-silk-hat', name: 'Goldspun Silk Hat', original: '546d4c249df4a17d0d449ab7', portraitURL: '/file/db/thang.type/546d4c249df4a17d0d449ab7/portrait.png', kind: 'Item'}\r\n    {slug: 'grass-cliffs', name: 'Grass Cliffs', original: '52bcb96ece43b70000000003', portraitURL: '/file/db/thang.type/52bcb96ece43b70000000003/portrait.png', kind: 'Floor'}\r\n    {slug: 'grass01', name: 'Grass01', original: '53016dddd82649ec2c0c9b29', portraitURL: '/file/db/thang.type/53016dddd82649ec2c0c9b29/portrait.png', kind: 'Floor'}\r\n    {slug: 'grass02', name: 'Grass02', original: '53016fc098f2ca1f6e82eebd', portraitURL: '/file/db/thang.type/53016fc098f2ca1f6e82eebd/portrait.png', kind: 'Floor'}\r\n    {slug: 'grass03', name: 'Grass03', original: '5301702d98f2ca1f6e82eec4', portraitURL: '/file/db/thang.type/5301702d98f2ca1f6e82eec4/portrait.png', kind: 'Floor'}\r\n    {slug: 'grass04', name: 'Grass04', original: '530170a198f2ca1f6e82eecf', portraitURL: '/file/db/thang.type/530170a198f2ca1f6e82eecf/portrait.png', kind: 'Floor'}\r\n    {slug: 'grass05', name: 'Grass05', original: '5301716398f2ca1f6e82eedc', portraitURL: '/file/db/thang.type/5301716398f2ca1f6e82eedc/portrait.png', kind: 'Floor'}\r\n    {slug: 'gravestone-cross', name: 'Gravestone Cross', original: '54f1100e8d380d7f05acc975', portraitURL: '/file/db/thang.type/54f1100e8d380d7f05acc975/portrait.png', kind: 'Doodad'}\r\n    {slug: 'gravestone-rounded', name: 'Gravestone Rounded', original: '54f110e3f854c97a05551616', portraitURL: '/file/db/thang.type/54f110e3f854c97a05551616/portrait.png', kind: 'Doodad'}\r\n    {slug: 'gravestone-square', name: 'Gravestone Square', original: '54f10f08d2969f8405ef51fd', portraitURL: '/file/db/thang.type/54f10f08d2969f8405ef51fd/portrait.png', kind: 'Doodad'}\r\n    {slug: 'graveyard-fence', name: 'Graveyard Fence', original: '54f111b379054c8705757747', portraitURL: '/file/db/thang.type/54f111b379054c8705757747/portrait.png', kind: 'Doodad'}\r\n    {slug: 'great-sword', name: 'Great Sword', original: '544d7f8d8494308424f564bf', portraitURL: '/file/db/thang.type/544d7f8d8494308424f564bf/portrait.png', kind: 'Item'}\r\n    {slug: 'greed-background', name: 'Greed Background', original: '53764e4ea7b5ab3805f153a4', portraitURL: '/file/db/thang.type/53764e4ea7b5ab3805f153a4/portrait.png', kind: 'Floor'}\r\n    {slug: 'green-bubble-missile', name: 'Green Bubble Missile', original: '540e35a34f21cd879ba4f140', portraitURL: '/file/db/thang.type/540e35a34f21cd879ba4f140/portrait.png', kind: 'Missile'}\r\n    {slug: 'griffin-rider', name: 'Griffin Rider', original: '52d45d1ab10ae4b024000002', portraitURL: '/file/db/thang.type/52d45d1ab10ae4b024000002/portrait.png', kind: 'Unit'}\r\n    {slug: 'griffin-wool-hat', name: 'Griffin Wool Hat', original: '546d4c699df4a17d0d449abb', portraitURL: '/file/db/thang.type/546d4c699df4a17d0d449abb/portrait.png', kind: 'Item'}\r\n    {slug: 'griffin-wool-robe', name: 'Griffin Wool Robe', original: '546d4a159df4a17d0d449a93', portraitURL: '/file/db/thang.type/546d4a159df4a17d0d449a93/portrait.png', kind: 'Item'}\r\n    {slug: 'hand-sewn-linen-wizards-hat', name: 'Hand-sewn Linen Wizard\\'s Hat', original: '546d4bec9df4a17d0d449ab3', portraitURL: '/file/db/thang.type/546d4bec9df4a17d0d449ab3/portrait.png', kind: 'Item'}\r\n    {slug: 'hardened-emerald-chainmail-coif', name: 'Hardened Emerald Chainmail Coif', original: '546d47159df4a17d0d449a67', portraitURL: '/file/db/thang.type/546d47159df4a17d0d449a67/portrait.png', kind: 'Item'}\r\n    {slug: 'hardened-emerald-chainmail-tunic', name: 'Hardened Emerald Chainmail Tunic', original: '546d3cce9df4a17d0d449a3f', portraitURL: '/file/db/thang.type/546d3cce9df4a17d0d449a3f/portrait.png', kind: 'Item'}\r\n    {slug: 'hardened-steel-glasses', name: 'Hardened Steel Glasses', original: '546940d8a2b1f53ce794440d', portraitURL: '/file/db/thang.type/546940d8a2b1f53ce794440d/portrait.png', kind: 'Item'}\r\n    {slug: 'harrowland-background', name: 'Harrowland Background', original: '572e51e3f8c4f9b601ede885', portraitURL: '/file/db/thang.type/572e51e3f8c4f9b601ede885/portrait.png', kind: 'Floor'}\r\n    {slug: 'haste', name: 'Haste', original: '530251cfa6efdd32359c53d5', portraitURL: '/file/db/thang.type/530251cfa6efdd32359c53d5/portrait.png', kind: 'Mark'}\r\n    {slug: 'haunted-kithmaze-background', name: 'Haunted Kithmaze Background', original: '569dd4f2b55fd82e0011b79b', portraitURL: '/file/db/thang.type/569dd4f2b55fd82e0011b79b/portrait.png', kind: 'Floor'}\r\n    {slug: 'heal', name: 'Heal', original: '55c63ebcef141c65665beb59', portraitURL: '/file/db/thang.type/55c63ebcef141c65665beb59/portrait.png', kind: 'Mark'}\r\n    {slug: 'health-potion-large', name: 'Health Potion Large', original: '52afc634c5b1813ec2000002', portraitURL: '/file/db/thang.type/52afc634c5b1813ec2000002/portrait.png', kind: 'Misc'}\r\n    {slug: 'health-potion-medium', name: 'Health Potion Medium', original: '52afc742c5b1813ec2000004', portraitURL: '/file/db/thang.type/52afc742c5b1813ec2000004/portrait.png', kind: 'Misc'}\r\n    {slug: 'health-potion-small', name: 'Health Potion Small', original: '52afc7b6c5b1813ec2000006', portraitURL: '/file/db/thang.type/52afc7b6c5b1813ec2000006/portrait.png', kind: 'Misc'}\r\n    {slug: 'heavy-iron-breastplate', name: 'Heavy Iron Breastplate', original: '546aaf1b3777d6186329285e', portraitURL: '/file/db/thang.type/546aaf1b3777d6186329285e/portrait.png', kind: 'Item'}\r\n    {slug: 'heavy-iron-helmet', name: 'Heavy Iron Helmet', original: '546d390b9df4a17d0d449a0b', portraitURL: '/file/db/thang.type/546d390b9df4a17d0d449a0b/portrait.png', kind: 'Item'}\r\n    {slug: 'helmet-fall-1', name: 'Helmet Fall 1', original: '53e2e3e66c59f5340504108f', portraitURL: '/file/db/thang.type/53e2e3e66c59f5340504108f/portrait.png', kind: 'Doodad'}\r\n    {slug: 'hide', name: 'Hide', original: '55c281e83767fd3435eb446d', portraitURL: '/file/db/thang.type/55c281e83767fd3435eb446d/portrait.png', kind: 'Mark'}\r\n    {slug: 'highlight', name: 'Highlight', original: '529f8fdbdacd325127000003', portraitURL: '/file/db/thang.type/529f8fdbdacd325127000003/portrait.png', kind: 'Mark'}\r\n    {slug: 'holoball', name: 'Holoball', original: '56d0fa8a087ee32400764bb8', portraitURL: '/file/db/thang.type/56d0fa8a087ee32400764bb8/portrait.png', kind: 'Doodad'}\r\n    {slug: 'holy-sword', name: 'Holy Sword', original: '53e21249b82921000051ce11', portraitURL: '/file/db/thang.type/53e21249b82921000051ce11/portrait.png', kind: 'Item'}\r\n    {slug: 'house-1', name: 'House 1', original: '52b095bbccbc671372000006', portraitURL: '/file/db/thang.type/52b095bbccbc671372000006/portrait.png', kind: 'Doodad'}\r\n    {slug: 'house-2', name: 'House 2', original: '52b09d35ccbc671372000009', portraitURL: '/file/db/thang.type/52b09d35ccbc671372000009/portrait.png', kind: 'Doodad'}\r\n    {slug: 'house-3', name: 'House 3', original: '52b09dd0ccbc67137200000b', portraitURL: '/file/db/thang.type/52b09dd0ccbc67137200000b/portrait.png', kind: 'Doodad'}\r\n    {slug: 'house-4', name: 'House 4', original: '52b09e2fccbc67137200000d', portraitURL: '/file/db/thang.type/52b09e2fccbc67137200000d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'hoverboard-stand', name: 'Hoverboard Stand', original: '56c630aeed946a44004ff139', portraitURL: '/file/db/thang.type/56c630aeed946a44004ff139/portrait.png', kind: 'Doodad'}\r\n    {slug: 'human-barracks', name: 'Human Barracks', original: '530ce329ec5bdaba2a72a99c', portraitURL: '/file/db/thang.type/530ce329ec5bdaba2a72a99c/portrait.png', kind: 'Unit'}\r\n    {slug: 'hunting-rifle', name: 'Hunting Rifle', original: '544d82aa8494308424f564cf', portraitURL: '/file/db/thang.type/544d82aa8494308424f564cf/portrait.png', kind: 'Item'}\r\n    {slug: 'ice-crystals-1', name: 'Ice Crystals 1', original: '557639501e82182d9e688945', portraitURL: '/file/db/thang.type/557639501e82182d9e688945/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ice-crystals-2', name: 'Ice Crystals 2', original: '557639b91e82182d9e688949', portraitURL: '/file/db/thang.type/557639b91e82182d9e688949/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ice-door', name: 'Ice Door', original: '557f32b0b43ce0b15a91b16d', portraitURL: '/file/db/thang.type/557f32b0b43ce0b15a91b16d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ice-gargoyle', name: 'Ice Gargoyle', original: '55760d3f1e82182d9e6888f6', portraitURL: '/file/db/thang.type/55760d3f1e82182d9e6888f6/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ice-gargoyle-fore', name: 'Ice Gargoyle Fore', original: '55760e311e82182d9e688902', portraitURL: '/file/db/thang.type/55760e311e82182d9e688902/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ice-gargoyle-ruin', name: 'Ice Gargoyle Ruin', original: '55760dc31e82182d9e6888fa', portraitURL: '/file/db/thang.type/55760dc31e82182d9e6888fa/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ice-gargoyle-ruin-fore', name: 'Ice Gargoyle Ruin Fore', original: '55760dfa1e82182d9e6888fe', portraitURL: '/file/db/thang.type/55760dfa1e82182d9e6888fe/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ice-rink-1', name: 'Ice Rink 1', original: '557f321bb43ce0b15a91b161', portraitURL: '/file/db/thang.type/557f321bb43ce0b15a91b161/portrait.png', kind: 'Floor'}\r\n    {slug: 'ice-rink-2', name: 'Ice Rink 2', original: '557f325cb43ce0b15a91b165', portraitURL: '/file/db/thang.type/557f325cb43ce0b15a91b165/portrait.png', kind: 'Floor'}\r\n    {slug: 'ice-rink-3', name: 'Ice Rink 3', original: '557f3275b43ce0b15a91b169', portraitURL: '/file/db/thang.type/557f3275b43ce0b15a91b169/portrait.png', kind: 'Floor'}\r\n    {slug: 'ice-tree-1', name: 'Ice Tree 1', original: '557635641e82182d9e688929', portraitURL: '/file/db/thang.type/557635641e82182d9e688929/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ice-tree-2', name: 'Ice Tree 2', original: '557636401e82182d9e68892d', portraitURL: '/file/db/thang.type/557636401e82182d9e68892d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ice-tree-3', name: 'Ice Tree 3', original: '557636e11e82182d9e688931', portraitURL: '/file/db/thang.type/557636e11e82182d9e688931/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ice-wall', name: 'Ice Wall', original: '5575f002f3f8d13b4ee1e7fc', portraitURL: '/file/db/thang.type/5575f002f3f8d13b4ee1e7fc/portrait.png', kind: 'Wall'}\r\n    {slug: 'ice-yak', name: 'Ice Yak', original: '557f3917b43ce0b15a91b175', portraitURL: '/file/db/thang.type/557f3917b43ce0b15a91b175/portrait.png', kind: 'Unit'}\r\n    {slug: 'igloo-1', name: 'Igloo 1', original: '557608f61e82182d9e6888cf', portraitURL: '/file/db/thang.type/557608f61e82182d9e6888cf/portrait.png', kind: 'Doodad'}\r\n    {slug: 'igloo-2', name: 'Igloo 2', original: '557609b01e82182d9e6888d3', portraitURL: '/file/db/thang.type/557609b01e82182d9e6888d3/portrait.png', kind: 'Doodad'}\r\n    {slug: 'igloo-3', name: 'Igloo 3', original: '557609dd1e82182d9e6888d7', portraitURL: '/file/db/thang.type/557609dd1e82182d9e6888d7/portrait.png', kind: 'Doodad'}\r\n    {slug: 'igloo-4', name: 'Igloo 4', original: '55760a2c1e82182d9e6888db', portraitURL: '/file/db/thang.type/55760a2c1e82182d9e6888db/portrait.png', kind: 'Doodad'}\r\n    {slug: 'impaling-firebolt', name: 'Impaling Firebolt', original: '54f767c4b3e4927805021022', portraitURL: '/file/db/thang.type/54f767c4b3e4927805021022/portrait.png', kind: 'Missile'}\r\n    {slug: 'importer-of-great-justice', name: 'Importer of Great Justice', original: '54938575e9850ae3e8fbdd74', portraitURL: '/file/db/thang.type/54938575e9850ae3e8fbdd74/portrait.png', kind: 'undefined'}\r\n    {slug: 'indoor-floor', name: 'Indoor Floor', original: '52ead2b2207133f35c000833', portraitURL: '/file/db/thang.type/52ead2b2207133f35c000833/portrait.png', kind: 'Floor'}\r\n    {slug: 'indoor-wall', name: 'Indoor Wall', original: '52ea9a13d23f140d100000b2', portraitURL: '/file/db/thang.type/52ea9a13d23f140d100000b2/portrait.png', kind: 'Wall'}\r\n    {slug: 'infantry-shield', name: 'Infantry Shield', original: '544d7bb88494308424f56493', portraitURL: '/file/db/thang.type/544d7bb88494308424f56493/portrait.png', kind: 'Item'}\r\n    {slug: 'invisible', name: 'Invisible', original: '52b0f9c75c5c4af6bd000004', portraitURL: '/file/db/thang.type/52b0f9c75c5c4af6bd000004/portrait.png', kind: 'Misc'}\r\n    {slug: 'iron-chainmail-coif', name: 'Iron Chainmail Coif', original: '546d45c59df4a17d0d449a53', portraitURL: '/file/db/thang.type/546d45c59df4a17d0d449a53/portrait.png', kind: 'Item'}\r\n    {slug: 'iron-chainmail-tunic', name: 'Iron Chainmail Tunic', original: '546d3b7c9df4a17d0d449a2b', portraitURL: '/file/db/thang.type/546d3b7c9df4a17d0d449a2b/portrait.png', kind: 'Item'}\r\n    {slug: 'iron-defender', name: 'Iron Defender', original: '54eaabe62b7506e891ca71c9', portraitURL: '/file/db/thang.type/54eaabe62b7506e891ca71c9/portrait.png', kind: 'Item'}\r\n    {slug: 'iron-link', name: 'Iron Link', original: '54692d5ca2b1f53ce7944393', portraitURL: '/file/db/thang.type/54692d5ca2b1f53ce7944393/portrait.png', kind: 'Item'}\r\n    {slug: 'iron-maiden', name: 'Iron Maiden', original: '54ef9f0a83b08b7d054ba50d', portraitURL: '/file/db/thang.type/54ef9f0a83b08b7d054ba50d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'iron-shield', name: 'Iron Shield', original: '5441c3f44e9aeb727cc97129', portraitURL: '/file/db/thang.type/5441c3f44e9aeb727cc97129/portrait.png', kind: 'Item'}\r\n    {slug: 'kings-ring', name: 'King\\'s Ring', original: '54eb56df49fa2d5c905ddf2e', portraitURL: '/file/db/thang.type/54eb56df49fa2d5c905ddf2e/portrait.png', kind: 'Item'}\r\n    {slug: 'kithgard-gates-background', name: 'Kithgard Gates Background', original: '572e52b17a9c3e8101b8be0e', portraitURL: '/file/db/thang.type/572e52b17a9c3e8101b8be0e/portrait.png', kind: 'Floor'}\r\n    {slug: 'kithgard-workers-glasses', name: 'Kithgard Worker\\'s Glasses', original: '53eb99f41a100989a40ce46e', portraitURL: '/file/db/thang.type/53eb99f41a100989a40ce46e/portrait.png', kind: 'Item'}\r\n    {slug: 'kithsteel-blade', name: 'Kithsteel Blade', original: '54eaa78a2b7506e891ca719d', portraitURL: '/file/db/thang.type/54eaa78a2b7506e891ca719d/portrait.png', kind: 'Item'}\r\n    {slug: 'knightfire-charge', name: 'Knightfire Charge', original: '544d96328494308424f56533', portraitURL: '/file/db/thang.type/544d96328494308424f56533/portrait.png', kind: 'Item'}\r\n    {slug: 'knightfire-charge-missile', name: 'Knightfire Charge Missile', original: '546297f1f44055a4b5e735bb', portraitURL: '/file/db/thang.type/546297f1f44055a4b5e735bb/portrait.png', kind: 'Missile'}\r\n    {slug: 'known-enemy-background', name: 'Known Enemy Background', original: '572e4e61b2088976012429eb', portraitURL: '/file/db/thang.type/572e4e61b2088976012429eb/portrait.png', kind: 'Floor'}\r\n    {slug: 'koraths-promise', name: 'Korath\\'s Promise', original: '54eb575749fa2d5c905ddf3a', portraitURL: '/file/db/thang.type/54eb575749fa2d5c905ddf3a/portrait.png', kind: 'Item'}\r\n    {slug: 'krummholz-1', name: 'Krummholz 1', original: '54e953adf54ef5794f354ef1', portraitURL: '/file/db/thang.type/54e953adf54ef5794f354ef1/portrait.png', kind: 'Doodad'}\r\n    {slug: 'krummholz-2', name: 'Krummholz 2', original: '54e9545bf54ef5794f354ef5', portraitURL: '/file/db/thang.type/54e9545bf54ef5794f354ef5/portrait.png', kind: 'Doodad'}\r\n    {slug: 'krummholz-3', name: 'Krummholz 3', original: '54e95492f54ef5794f354ef9', portraitURL: '/file/db/thang.type/54e95492f54ef5794f354ef9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'lambswool-cloak', name: 'Lambswool Cloak', original: '546d48ce9df4a17d0d449a7b', portraitURL: '/file/db/thang.type/546d48ce9df4a17d0d449a7b/portrait.png', kind: 'Item'}\r\n    {slug: 'large-bolt-crossbow', name: 'Large Bolt Crossbow', original: '544d80598494308424f564c7', portraitURL: '/file/db/thang.type/544d80598494308424f564c7/portrait.png', kind: 'Item'}\r\n    {slug: 'large-classroom-viewscreen-off', name: 'Large Classroom Viewscreen Off', original: '56c632c6abf4a61f009040b5', portraitURL: '/file/db/thang.type/56c632c6abf4a61f009040b5/portrait.png', kind: 'Doodad'}\r\n    {slug: 'large-classroom-viewscreen-on', name: 'Large Classroom Viewscreen On', original: '56eb28b267a0142000a36358', portraitURL: '/file/db/thang.type/56eb28b267a0142000a36358/portrait.png', kind: 'Doodad'}\r\n    {slug: 'lava-grate', name: 'Lava Grate', original: '54ef9fb8c1f3bd7c05941750', portraitURL: '/file/db/thang.type/54ef9fb8c1f3bd7c05941750/portrait.png', kind: 'Doodad'}\r\n    {slug: 'leather-belt', name: 'Leather Belt', original: '5437002a7beba4a82024a97d', portraitURL: '/file/db/thang.type/5437002a7beba4a82024a97d/portrait.png', kind: 'Item'}\r\n    {slug: 'leather-boots', name: 'Leather Boots', original: '53e2384453457600003e3f07', portraitURL: '/file/db/thang.type/53e2384453457600003e3f07/portrait.png', kind: 'Item'}\r\n    {slug: 'leather-chainmail-coif', name: 'Leather Chainmail Coif', original: '546d45089df4a17d0d449a4b', portraitURL: '/file/db/thang.type/546d45089df4a17d0d449a4b/portrait.png', kind: 'Item'}\r\n    {slug: 'leather-chainmail-tunic', name: 'Leather Chainmail Tunic', original: '546d3ab69df4a17d0d449a23', portraitURL: '/file/db/thang.type/546d3ab69df4a17d0d449a23/portrait.png', kind: 'Item'}\r\n    {slug: 'leather-tunic', name: 'Leather Tunic', original: '545d3cf22d03e700001b5a58', portraitURL: '/file/db/thang.type/545d3cf22d03e700001b5a58/portrait.png', kind: 'Item'}\r\n    {slug: 'level-banner', name: 'Level Banner', original: '5432c9688364d30000d1f935', portraitURL: '/file/db/thang.type/5432c9688364d30000d1f935/portrait.png', kind: 'Misc'}\r\n    {slug: 'lightning-bolt', name: 'Lightning Bolt', original: '54f3fa515fcc6a3950c7eabd', portraitURL: '/file/db/thang.type/54f3fa515fcc6a3950c7eabd/portrait.png', kind: 'Missile'}\r\n    {slug: 'lightning-stick', name: 'Lightning Stick', original: '544d86318494308424f564e8', portraitURL: '/file/db/thang.type/544d86318494308424f564e8/portrait.png', kind: 'Item'}\r\n    {slug: 'lightning-twig', name: 'Lightning Twig', original: '54eab1ec2b7506e891ca71e1', portraitURL: '/file/db/thang.type/54eab1ec2b7506e891ca71e1/portrait.png', kind: 'Item'}\r\n    {slug: 'lightstone', name: 'Lightstone', original: '54da20b7163110520551ed33', portraitURL: '/file/db/thang.type/54da20b7163110520551ed33/portrait.png', kind: 'Misc'}\r\n    {slug: 'log-1', name: 'Log 1', original: '54e954d7f54ef5794f354efd', portraitURL: '/file/db/thang.type/54e954d7f54ef5794f354efd/portrait.png', kind: 'Doodad'}\r\n    {slug: 'log-2', name: 'Log 2', original: '54e9553ef54ef5794f354f01', portraitURL: '/file/db/thang.type/54e9553ef54ef5794f354f01/portrait.png', kind: 'Doodad'}\r\n    {slug: 'log-3', name: 'Log 3', original: '54e9556af54ef5794f354f05', portraitURL: '/file/db/thang.type/54e9556af54ef5794f354f05/portrait.png', kind: 'Doodad'}\r\n    {slug: 'long-sword', name: 'Long Sword', original: '544d7d1f8494308424f564a3', portraitURL: '/file/db/thang.type/544d7d1f8494308424f564a3/portrait.png', kind: 'Item'}\r\n    {slug: 'loop-da-loop-background', name: 'Loop Da Loop Background', original: '56c67cba797353370060506d', portraitURL: '/file/db/thang.type/56c67cba797353370060506d/portrait.png', kind: 'Floor'}\r\n    {slug: 'magic-missile', name: 'Magic Missile', original: '5467beaf69d1ba0000fb91fb', portraitURL: '/file/db/thang.type/5467beaf69d1ba0000fb91fb/portrait.png', kind: 'Missile'}\r\n    {slug: 'magnetize', name: 'Magnetize', original: '55c6403eef141c65665beb5e', portraitURL: '/file/db/thang.type/55c6403eef141c65665beb5e/portrait.png', kind: 'Mark'}\r\n    {slug: 'mahogany-glasses', name: 'Mahogany Glasses', original: '54694093a2b1f53ce7944408', portraitURL: '/file/db/thang.type/54694093a2b1f53ce7944408/portrait.png', kind: 'Item'}\r\n    {slug: 'mahogany-staff', name: 'Mahogany Staff', original: '544d88158494308424f56501', portraitURL: '/file/db/thang.type/544d88158494308424f56501/portrait.png', kind: 'Item'}\r\n    {slug: 'maka-test-wall', name: 'maka-test-wall', original: '56a7d85fb679392600e31138', portraitURL: '/file/db/thang.type/56a7d85fb679392600e31138/portrait.png', kind: 'Wall'}\r\n    {slug: 'market-stand', name: 'Market Stand', original: '54f11600f854c97a055516da', portraitURL: '/file/db/thang.type/54f11600f854c97a055516da/portrait.png', kind: 'Doodad'}\r\n    {slug: 'master-of-names-background', name: 'Master of Names Background', original: '572e4ec2e8db519501484869', portraitURL: '/file/db/thang.type/572e4ec2e8db519501484869/portrait.png', kind: 'Floor'}\r\n    {slug: 'master-sword', name: 'Master Sword', original: '54ea89112b7506e891ca717d', portraitURL: '/file/db/thang.type/54ea89112b7506e891ca717d/portrait.png', kind: 'Item'}\r\n    {slug: 'masters-flags', name: 'Master\\'s Flags', original: '5478b9be8707a2c3a2493b33', portraitURL: '/file/db/thang.type/5478b9be8707a2c3a2493b33/portrait.png', kind: 'Item'}\r\n    {slug: 'mausoleum', name: 'Mausoleum', original: '54f1128a25be5e8805837491', portraitURL: '/file/db/thang.type/54f1128a25be5e8805837491/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mayhem-background', name: 'Mayhem Background', original: '572e5071e8db519501484896', portraitURL: '/file/db/thang.type/572e5071e8db519501484896/portrait.png', kind: 'Floor'}\r\n    {slug: 'mcp', name: 'mcp', original: '576322da0d81132500afdc8d', portraitURL: '/file/db/thang.type/576322da0d81132500afdc8d/portrait.png', kind: 'Unit'}\r\n    {slug: 'megaphone', name: 'Megaphone', original: '53e216ff53457600003e3eb7', portraitURL: '/file/db/thang.type/53e216ff53457600003e3eb7/portrait.png', kind: 'Item'}\r\n    {slug: 'metal-builders-hammer', name: 'Metal Builder\\'s Hammer', original: '54694c79a2b1f53ce794445e', portraitURL: '/file/db/thang.type/54694c79a2b1f53ce794445e/portrait.png', kind: 'Item'}\r\n    {slug: 'moonless-night', name: 'Moonless Night', original: '54692f44a2b1f53ce79443b8', portraitURL: '/file/db/thang.type/54692f44a2b1f53ce79443b8/portrait.png', kind: 'Item'}\r\n    {slug: 'moonlit-blade', name: 'Moonlit Blade', original: '544d95a48494308424f56523', portraitURL: '/file/db/thang.type/544d95a48494308424f56523/portrait.png', kind: 'Item'}\r\n    {slug: 'moonlit-blade-missile', name: 'Moonlit Blade Missile', original: '544d97bc8494308424f5653c', portraitURL: '/file/db/thang.type/544d97bc8494308424f5653c/portrait.png', kind: 'Missile'}\r\n    {slug: 'mornings-edge', name: 'Morning\\'s Edge', original: '54eaa69a2b7506e891ca7195', portraitURL: '/file/db/thang.type/54eaa69a2b7506e891ca7195/portrait.png', kind: 'Item'}\r\n    {slug: 'mountain-1', name: 'Mountain 1', original: '54e931d7970f0b0a263c03ef', portraitURL: '/file/db/thang.type/54e931d7970f0b0a263c03ef/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mountain-2', name: 'Mountain 2', original: '54e9340b970f0b0a263c03f3', portraitURL: '/file/db/thang.type/54e9340b970f0b0a263c03f3/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mountain-3', name: 'Mountain 3', original: '54e935d1970f0b0a263c03f7', portraitURL: '/file/db/thang.type/54e935d1970f0b0a263c03f7/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mountain-4', name: 'Mountain 4', original: '54e9377e970f0b0a263c03fc', portraitURL: '/file/db/thang.type/54e9377e970f0b0a263c03fc/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mountain-lake-1', name: 'Mountain Lake 1', original: '54e93f0ef54ef5794f354e99', portraitURL: '/file/db/thang.type/54e93f0ef54ef5794f354e99/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mountain-lake-2', name: 'Mountain Lake 2', original: '54e94106f54ef5794f354ea3', portraitURL: '/file/db/thang.type/54e94106f54ef5794f354ea3/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mountain-shrub-1', name: 'Mountain Shrub 1', original: '54e9567ff54ef5794f354f11', portraitURL: '/file/db/thang.type/54e9567ff54ef5794f354f11/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mountain-shrub-2', name: 'Mountain Shrub 2', original: '54e956b7f54ef5794f354f15', portraitURL: '/file/db/thang.type/54e956b7f54ef5794f354f15/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mountain-shrub-3', name: 'Mountain Shrub 3', original: '54e956def54ef5794f354f19', portraitURL: '/file/db/thang.type/54e956def54ef5794f354f19/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mountain-shrub-4', name: 'Mountain Shrub 4', original: '54e95724f54ef5794f354f1d', portraitURL: '/file/db/thang.type/54e95724f54ef5794f354f1d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mountain-tree-stand-1', name: 'Mountain Tree Stand 1', original: '55c24e91dfc8d0b576e60a5e', portraitURL: '/file/db/thang.type/55c24e91dfc8d0b576e60a5e/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mountain-tree-stand-2', name: 'Mountain Tree Stand 2', original: '55c25141dfc8d0b576e60a64', portraitURL: '/file/db/thang.type/55c25141dfc8d0b576e60a64/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mountain-tree-stand-3', name: 'Mountain Tree Stand 3', original: '55c25173dfc8d0b576e60a6a', portraitURL: '/file/db/thang.type/55c25173dfc8d0b576e60a6a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mountain-tree-stand-4', name: 'Mountain Tree Stand 4', original: '55c25190dfc8d0b576e60a70', portraitURL: '/file/db/thang.type/55c25190dfc8d0b576e60a70/portrait.png', kind: 'Doodad'}\r\n    {slug: 'movement-stone', name: 'Movement Stone', original: '546e257a9df4a17d0d449bd9', portraitURL: '/file/db/thang.type/546e257a9df4a17d0d449bd9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'movement-stone-loop', name: 'Movement Stone Loop', original: '546e24679df4a17d0d449bc1', portraitURL: '/file/db/thang.type/546e24679df4a17d0d449bc1/portrait.png', kind: 'Doodad'}\r\n    {slug: 'multiplayer-treasure-grove-background', name: 'Multiplayer Treasure Grove Background', original: '572e526e7a9c3e8101b8be02', portraitURL: '/file/db/thang.type/572e526e7a9c3e8101b8be02/portrait.png', kind: 'Floor'}\r\n    {slug: 'mummy', name: 'Mummy', original: '54ef799c8d75558205e98a8e', portraitURL: '/file/db/thang.type/54ef799c8d75558205e98a8e/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mushroom', name: 'Mushroom', original: '52bcc23a8c4289607b00000a', portraitURL: '/file/db/thang.type/52bcc23a8c4289607b00000a/portrait.png', kind: 'Misc'}\r\n    {slug: 'mushroom-cluster-1', name: 'Mushroom Cluster 1', original: '5576376f1e82182d9e688935', portraitURL: '/file/db/thang.type/5576376f1e82182d9e688935/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mushroom-cluster-2', name: 'Mushroom Cluster 2', original: '557638341e82182d9e688939', portraitURL: '/file/db/thang.type/557638341e82182d9e688939/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mushroom-cluster-3', name: 'Mushroom Cluster 3', original: '557638731e82182d9e68893d', portraitURL: '/file/db/thang.type/557638731e82182d9e68893d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'mushroom-cluster-4', name: 'Mushroom Cluster 4', original: '5576390e1e82182d9e688941', portraitURL: '/file/db/thang.type/5576390e1e82182d9e688941/portrait.png', kind: 'Doodad'}\r\n    {slug: 'musty-linen-robe', name: 'Musty Linen Robe', original: '546d49409df4a17d0d449a83', portraitURL: '/file/db/thang.type/546d49409df4a17d0d449a83/portrait.png', kind: 'Item'}\r\n    {slug: 'newmakatesthushbaum', name: 'newmakatesthushbaum', original: '56ce223647c33f2400d98c66', portraitURL: '/file/db/thang.type/56ce223647c33f2400d98c66/portrait.png', kind: 'undefined'}\r\n    {slug: 'nightingales-song', name: 'Nightingale\\'s Song', original: '54eb570b49fa2d5c905ddf32', portraitURL: '/file/db/thang.type/54eb570b49fa2d5c905ddf32/portrait.png', kind: 'Item'}\r\n    {slug: 'north-mounted-camera-facing-east-west', name: 'north mounted camera facing east-west', original: '56f175f2f3ae4cc900a0c5fc', portraitURL: '/file/db/thang.type/56f175f2f3ae4cc900a0c5fc/portrait.png', kind: 'Doodad'}\r\n    {slug: 'north-mounted-camera-facing-north', name: 'north mounted camera facing north', original: '56f173384852efd20059948a', portraitURL: '/file/db/thang.type/56f173384852efd20059948a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'north-mounted-camera-facing-south', name: 'north mounted camera facing south', original: '56f17562f3ae4cc900a0c57a', portraitURL: '/file/db/thang.type/56f17562f3ae4cc900a0c57a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'oak-crossbow', name: 'Oak Crossbow', original: '544d80928494308424f564cb', portraitURL: '/file/db/thang.type/544d80928494308424f564cb/portrait.png', kind: 'Item'}\r\n    {slug: 'oak-sphere-staff', name: 'Oak Sphere Staff', original: '544d88b78494308424f5650d', portraitURL: '/file/db/thang.type/544d88b78494308424f5650d/portrait.png', kind: 'Item'}\r\n    {slug: 'oak-wand', name: 'Oak Wand', original: '544d87d18494308424f564fd', portraitURL: '/file/db/thang.type/544d87d18494308424f564fd/portrait.png', kind: 'Item'}\r\n    {slug: 'oasis-1', name: 'Oasis 1', original: '544d79678494308424f56480', portraitURL: '/file/db/thang.type/544d79678494308424f56480/portrait.png', kind: 'Doodad'}\r\n    {slug: 'oasis-2', name: 'Oasis 2', original: '544d71198494308424f5647c', portraitURL: '/file/db/thang.type/544d71198494308424f5647c/portrait.png', kind: 'Doodad'}\r\n    {slug: 'oasis-3', name: 'Oasis 3', original: '5435d22f7b554def1f99c49a', portraitURL: '/file/db/thang.type/5435d22f7b554def1f99c49a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'obsidian-breastplate', name: 'Obsidian Breastplate', original: '546ab11b3777d6186329286a', portraitURL: '/file/db/thang.type/546ab11b3777d6186329286a/portrait.png', kind: 'Item'}\r\n    {slug: 'obsidian-helmet', name: 'Obsidian Helmet', original: '546d39989df4a17d0d449a13', portraitURL: '/file/db/thang.type/546d39989df4a17d0d449a13/portrait.png', kind: 'Item'}\r\n    {slug: 'obsidian-shield', name: 'Obsidian Shield', original: '54eaba502b7506e891ca7216', portraitURL: '/file/db/thang.type/54eaba502b7506e891ca7216/portrait.png', kind: 'Item'}\r\n    {slug: 'obsidian-staff', name: 'Obsidian Staff', original: '54eab4b92b7506e891ca71ea', portraitURL: '/file/db/thang.type/54eab4b92b7506e891ca71ea/portrait.png', kind: 'Item'}\r\n    {slug: 'obstacle', name: 'Obstacle', original: '52bcc10d1f766a891c000001', portraitURL: '/file/db/thang.type/52bcc10d1f766a891c000001/portrait.png', kind: 'Misc'}\r\n    {slug: 'office-chair', name: 'office-chair', original: '56b25d8cc9d8ed21008354b8', portraitURL: '/file/db/thang.type/56b25d8cc9d8ed21008354b8/portrait.png', kind: 'Doodad'}\r\n    {slug: 'office-desk', name: 'Office Desk', original: '56b26c487168802600d26218', portraitURL: '/file/db/thang.type/56b26c487168802600d26218/portrait.png', kind: 'Doodad'}\r\n    {slug: 'office-door', name: 'Office Door', original: '56ba3366131fde2a000b84db', portraitURL: '/file/db/thang.type/56ba3366131fde2a000b84db/portrait.png', kind: 'Doodad'}\r\n    {slug: 'office-filing-cabinet', name: 'Office Filing Cabinet', original: '56b267eec2958a26005fbb58', portraitURL: '/file/db/thang.type/56b267eec2958a26005fbb58/portrait.png', kind: 'Doodad'}\r\n    {slug: 'office-filing-cabinet-2', name: 'Office Filing Cabinet 2', original: '56b268dd7168802600d25f3d', portraitURL: '/file/db/thang.type/56b268dd7168802600d25f3d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'office-floor', name: 'Office Floor', original: '56b26e39bb550b26003adef0', portraitURL: '/file/db/thang.type/56b26e39bb550b26003adef0/portrait.png', kind: 'Floor'}\r\n    {slug: 'office-wall', name: 'office-wall', original: '56abc26c26c92a26005b3745', portraitURL: '/file/db/thang.type/56abc26c26c92a26005b3745/portrait.png', kind: 'Wall'}\r\n    {slug: 'ogre-barracks', name: 'Ogre Barracks', original: '530d11faa8583eb90a2fc76f', portraitURL: '/file/db/thang.type/530d11faa8583eb90a2fc76f/portrait.png', kind: 'Unit'}\r\n    {slug: 'ogre-fence', name: 'Ogre Fence', original: '5456b5c5d5ada30000525609', portraitURL: '/file/db/thang.type/5456b5c5d5ada30000525609/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ogre-fence-2', name: 'Ogre Fence 2', original: '5456b631d5ada3000052560b', portraitURL: '/file/db/thang.type/5456b631d5ada3000052560b/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ogre-headhunter-hero', name: 'Ogre Headhunter Hero', original: '5670779dfb9b702400cf6987', portraitURL: '/file/db/thang.type/5670779dfb9b702400cf6987/portrait.png', kind: 'Unit'}\r\n    {slug: 'ogre-peon-f', name: 'Ogre Peon F', original: '53765709a7b5ab3805f15512', portraitURL: '/file/db/thang.type/53765709a7b5ab3805f15512/portrait.png', kind: 'Unit'}\r\n    {slug: 'ogre-peon-m', name: 'Ogre Peon M', original: '53793734f883583805e356e2', portraitURL: '/file/db/thang.type/53793734f883583805e356e2/portrait.png', kind: 'Unit'}\r\n    {slug: 'ogre-scout-f', name: 'Ogre Scout F', original: '54909436b30e9eb7027fe21c', portraitURL: '/file/db/thang.type/54909436b30e9eb7027fe21c/portrait.png', kind: 'Unit'}\r\n    {slug: 'ogre-scout-m', name: 'Ogre Scout M', original: '54908ce5b30e9eb7027fe201', portraitURL: '/file/db/thang.type/54908ce5b30e9eb7027fe201/portrait.png', kind: 'Unit'}\r\n    {slug: 'ogre-tent', name: 'Ogre Tent', original: '5456b49dd5ada30000525607', portraitURL: '/file/db/thang.type/5456b49dd5ada30000525607/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ogre-tower', name: 'ogre tower', original: '578686459fabcb1f0087d064', portraitURL: '/file/db/thang.type/578686459fabcb1f0087d064/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ogre-tower-with-desert-rocks', name: 'ogre tower with desert rocks', original: '572d465dab2d38ad00a1c918', portraitURL: '/file/db/thang.type/572d465dab2d38ad00a1c918/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ogre-towers-with-trees', name: 'ogre towers with trees', original: '572d47eee24ce2fb0025c6f3', portraitURL: '/file/db/thang.type/572d47eee24ce2fb0025c6f3/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ogre-treasure-chest', name: 'Ogre Treasure Chest', original: '540e16d6821af8000097dc55', portraitURL: '/file/db/thang.type/540e16d6821af8000097dc55/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ogre-wall', name: 'ogre wall', original: '5786834a2437842400f4009c', portraitURL: '/file/db/thang.type/5786834a2437842400f4009c/portrait.png', kind: 'Doodad'}\r\n    {slug: 'ogre-witch-hero', name: 'Ogre Witch Hero', original: '5638f6c4ef9d6464094a559d', portraitURL: '/file/db/thang.type/5638f6c4ef9d6464094a559d/portrait.png', kind: 'Unit'}\r\n    {slug: 'old-selection', name: 'Old Selection', original: '52aa5f7520fccb0000000002', portraitURL: '/file/db/thang.type/52aa5f7520fccb0000000002/portrait.png', kind: 'Mark'}\r\n    {slug: 'order-of-the-paladin', name: 'Order of the Paladin', original: '54eb55af49fa2d5c905ddf22', portraitURL: '/file/db/thang.type/54eb55af49fa2d5c905ddf22/portrait.png', kind: 'Item'}\r\n    {slug: 'overseer', name: 'Overseer', original: '56e75e0b67a0142000a12699', portraitURL: '/file/db/thang.type/56e75e0b67a0142000a12699/portrait.png', kind: 'Unit'}\r\n    {slug: 'painted-steel-breastplate', name: 'Painted Steel Breastplate', original: '546ab0dd3777d61863292866', portraitURL: '/file/db/thang.type/546ab0dd3777d61863292866/portrait.png', kind: 'Item'}\r\n    {slug: 'painted-steel-helmet', name: 'Painted Steel Helmet', original: '546d39589df4a17d0d449a0f', portraitURL: '/file/db/thang.type/546d39589df4a17d0d449a0f/portrait.png', kind: 'Item'}\r\n    {slug: 'painted-steel-shield', name: 'Painted Steel Shield', original: '544d7c5b8494308424f5649b', portraitURL: '/file/db/thang.type/544d7c5b8494308424f5649b/portrait.png', kind: 'Item'}\r\n    {slug: 'palisade', name: 'Palisade', original: '546e24bd9df4a17d0d449bc9', portraitURL: '/file/db/thang.type/546e24bd9df4a17d0d449bc9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'paralyze', name: 'Paralyze', original: '53024e6b222f73867774d773', portraitURL: '/file/db/thang.type/53024e6b222f73867774d773/portrait.png', kind: 'Mark'}\r\n    {slug: 'pedestal', name: 'Pedestal', original: '542ae4750048dcb95727a1e6', portraitURL: '/file/db/thang.type/542ae4750048dcb95727a1e6/portrait.png', kind: 'Doodad'}\r\n    {slug: 'phoenixfire', name: 'Phoenixfire', original: '54ea8b602b7506e891ca718d', portraitURL: '/file/db/thang.type/54ea8b602b7506e891ca718d/portrait.png', kind: 'Item'}\r\n    {slug: 'plasma-ball', name: 'Plasma Ball', original: '5589fe594bed1b6c2a2cab6b', portraitURL: '/file/db/thang.type/5589fe594bed1b6c2a2cab6b/portrait.png', kind: 'Missile'}\r\n    {slug: 'poison', name: 'Poison', original: '53024020222f73867774d619', portraitURL: '/file/db/thang.type/53024020222f73867774d619/portrait.png', kind: 'Mark'}\r\n    {slug: 'poisoned-throwing-shard-missile', name: 'Poisoned Throwing Shard Missile', original: '544d97088494308424f56539', portraitURL: '/file/db/thang.type/544d97088494308424f56539/portrait.png', kind: 'Missile'}\r\n    {slug: 'polar-bear-cub-pet', name: 'Polar Bear Cub pet', original: '57588d4b87b06e1f00ded849', portraitURL: '/file/db/thang.type/57588d4b87b06e1f00ded849/portrait.png', kind: 'Unit'}\r\n    {slug: 'polished-agate-sense-stone', name: 'Polished Agate Sense Stone', original: '54693274a2b1f53ce79443c9', portraitURL: '/file/db/thang.type/54693274a2b1f53ce79443c9/portrait.png', kind: 'Item'}\r\n    {slug: 'polished-bronze-breastplate', name: 'Polished Bronze Breastplate', original: '545d3f0b2d03e700001b5a5d', portraitURL: '/file/db/thang.type/545d3f0b2d03e700001b5a5d/portrait.png', kind: 'Item'}\r\n    {slug: 'polished-bronze-helmet', name: 'Polished Bronze Helmet', original: '546d38779df4a17d0d449a03', portraitURL: '/file/db/thang.type/546d38779df4a17d0d449a03/portrait.png', kind: 'Item'}\r\n    {slug: 'polished-bronze-shield', name: 'Polished Bronze Shield', original: '544d7a888494308424f56487', portraitURL: '/file/db/thang.type/544d7a888494308424f56487/portrait.png', kind: 'Item'}\r\n    {slug: 'polished-emerald-sense-stone', name: 'Polished Emerald Sense Stone', original: '546933dda2b1f53ce79443d9', portraitURL: '/file/db/thang.type/546933dda2b1f53ce79443d9/portrait.png', kind: 'Item'}\r\n    {slug: 'polished-sense-stone', name: 'Polished Sense Stone', original: '53e215a253457600003e3eaf', portraitURL: '/file/db/thang.type/53e215a253457600003e3eaf/portrait.png', kind: 'Item'}\r\n    {slug: 'polished-steel-scale-chainmail-coif', name: 'Polished Steel Scale Chainmail Coif', original: '546d46889df4a17d0d449a5f', portraitURL: '/file/db/thang.type/546d46889df4a17d0d449a5f/portrait.png', kind: 'Item'}\r\n    {slug: 'polished-steel-scale-chainmail-tunic', name: 'Polished Steel Scale Chainmail Tunic', original: '546d3c3f9df4a17d0d449a37', portraitURL: '/file/db/thang.type/546d3c3f9df4a17d0d449a37/portrait.png', kind: 'Item'}\r\n    {slug: 'pot-1', name: 'Pot 1', original: '54ef882f83b08b7d054b6d49', portraitURL: '/file/db/thang.type/54ef882f83b08b7d054b6d49/portrait.png', kind: 'Doodad'}\r\n    {slug: 'pot-2', name: 'Pot 2', original: '54ef89dc4bb4788505d21234', portraitURL: '/file/db/thang.type/54ef89dc4bb4788505d21234/portrait.png', kind: 'Doodad'}\r\n    {slug: 'pot-3', name: 'Pot 3', original: '54ef8b1f305d7e790557d5d5', portraitURL: '/file/db/thang.type/54ef8b1f305d7e790557d5d5/portrait.png', kind: 'Doodad'}\r\n    {slug: 'pot-4', name: 'Pot 4', original: '54ef8becace2147e05868483', portraitURL: '/file/db/thang.type/54ef8becace2147e05868483/portrait.png', kind: 'Doodad'}\r\n    {slug: 'potion-belt', name: 'Potion Belt', original: '54694ac4a2b1f53ce794443d', portraitURL: '/file/db/thang.type/54694ac4a2b1f53ce794443d/portrait.png', kind: 'Item'}\r\n    {slug: 'potted-tree', name: 'Potted Tree', original: '56b2c8baf2ea182100d8ce78', portraitURL: '/file/db/thang.type/56b2c8baf2ea182100d8ce78/portrait.png', kind: 'Doodad'}\r\n    {slug: 'powder-charge', name: 'Powder Charge', original: '5462952cf44055a4b5e73599', portraitURL: '/file/db/thang.type/5462952cf44055a4b5e73599/portrait.png', kind: 'Item'}\r\n    {slug: 'powder-charge-missile', name: 'Powder Charge Missile', original: '544d99328494308424f56540', portraitURL: '/file/db/thang.type/544d99328494308424f56540/portrait.png', kind: 'Missile'}\r\n    {slug: 'power-up', name: 'Power Up', original: '55c64140ef141c65665beb6b', portraitURL: '/file/db/thang.type/55c64140ef141c65665beb6b/portrait.png', kind: 'Mark'}\r\n    {slug: 'power-up-2', name: 'Power Up 2', original: '55c6419fef141c65665beb6f', portraitURL: '/file/db/thang.type/55c6419fef141c65665beb6f/portrait.png', kind: 'Mark'}\r\n    {slug: 'precision-rifle', name: 'Precision Rifle', original: '54eaaecc2b7506e891ca71d9', portraitURL: '/file/db/thang.type/54eaaecc2b7506e891ca71d9/portrait.png', kind: 'Item'}\r\n    {slug: 'programmaticon-i', name: 'Programmaticon I', original: '53e4108204c00d4607a89f78', portraitURL: '/file/db/thang.type/53e4108204c00d4607a89f78/portrait.png', kind: 'Item'}\r\n    {slug: 'programmaticon-ii', name: 'Programmaticon II', original: '546e25d99df4a17d0d449be1', portraitURL: '/file/db/thang.type/546e25d99df4a17d0d449be1/portrait.png', kind: 'Item'}\r\n    {slug: 'programmaticon-iii', name: 'Programmaticon III', original: '546e266e9df4a17d0d449be5', portraitURL: '/file/db/thang.type/546e266e9df4a17d0d449be5/portrait.png', kind: 'Item'}\r\n    {slug: 'programmaticon-iv', name: 'Programmaticon IV', original: '55240951f76d6ee949f66512', portraitURL: '/file/db/thang.type/55240951f76d6ee949f66512/portrait.png', kind: 'Item'}\r\n    {slug: 'programmaticon-v', name: 'Programmaticon V', original: '557871261ff17fef5abee3ee', portraitURL: '/file/db/thang.type/557871261ff17fef5abee3ee/portrait.png', kind: 'Item'}\r\n    {slug: 'pugicorn-pet', name: 'Pugicorn Pet', original: '577d5edcab818b210046b73c', portraitURL: '/file/db/thang.type/577d5edcab818b210046b73c/portrait.png', kind: 'Unit'}\r\n    {slug: 'pushcart', name: 'Pushcart', original: '54f119a6d2969f8405ef539f', portraitURL: '/file/db/thang.type/54f119a6d2969f8405ef539f/portrait.png', kind: 'Doodad'}\r\n    {slug: 'quartz-sense-stone', name: 'Quartz Sense Stone', original: '54693240a2b1f53ce79443c5', portraitURL: '/file/db/thang.type/54693240a2b1f53ce79443c5/portrait.png', kind: 'Item'}\r\n    {slug: 'ragged-silk-hat', name: 'Ragged Silk Hat', original: '546d4ba19df4a17d0d449aaf', portraitURL: '/file/db/thang.type/546d4ba19df4a17d0d449aaf/portrait.png', kind: 'Item'}\r\n    {slug: 'railgun', name: 'Railgun', original: '54ea8ea52b7506e891ca7191', portraitURL: '/file/db/thang.type/54ea8ea52b7506e891ca7191/portrait.png', kind: 'Item'}\r\n    {slug: 'rapidfire-rifle', name: 'Rapidfire Rifle', original: '54eaae422b7506e891ca71d5', portraitURL: '/file/db/thang.type/54eaae422b7506e891ca71d5/portrait.png', kind: 'Item'}\r\n    {slug: 'rat', name: 'Rat', original: '55c11b70c87e47c60604f974', portraitURL: '/file/db/thang.type/55c11b70c87e47c60604f974/portrait.png', kind: 'Doodad'}\r\n    {slug: 'razor-ring', name: 'Razor Ring', original: '54c97c9bdef3ad363ff998b7', portraitURL: '/file/db/thang.type/54c97c9bdef3ad363ff998b7/portrait.png', kind: 'Missile'}\r\n    {slug: 'razordisc-missile', name: 'Razordisc Missile', original: '5318d3e56ad8999d34bdf338', portraitURL: '/file/db/thang.type/5318d3e56ad8999d34bdf338/portrait.png', kind: 'Missile'}\r\n    {slug: 'rectangle', name: 'Rectangle', original: '568d915e1717e2f90e9a1250', portraitURL: '/file/db/thang.type/568d915e1717e2f90e9a1250/portrait.png', kind: 'Misc'}\r\n    {slug: 'red-button', name: 'Red Button', original: '56d102c0441ddd2f002ba760', portraitURL: '/file/db/thang.type/56d102c0441ddd2f002ba760/portrait.png', kind: 'Doodad'}\r\n    {slug: 'regen', name: 'Regen', original: '53024f8b27471514685d53e1', portraitURL: '/file/db/thang.type/53024f8b27471514685d53e1/portrait.png', kind: 'Mark'}\r\n    {slug: 'reindeer', name: 'Reindeer', original: '54e95a88f54ef5794f354f3d', portraitURL: '/file/db/thang.type/54e95a88f54ef5794f354f3d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'reinforced-boots', name: 'Reinforced Boots', original: '546d4d259df4a17d0d449ac5', portraitURL: '/file/db/thang.type/546d4d259df4a17d0d449ac5/portrait.png', kind: 'Item'}\r\n    {slug: 'reinforced-crossbow', name: 'Reinforced Crossbow', original: '54eaacdd2b7506e891ca71cd', portraitURL: '/file/db/thang.type/54eaacdd2b7506e891ca71cd/portrait.png', kind: 'Item'}\r\n    {slug: 'reinforced-iron-chainmail-coif', name: 'Reinforced Iron Chainmail Coif', original: '546d46099df4a17d0d449a57', portraitURL: '/file/db/thang.type/546d46099df4a17d0d449a57/portrait.png', kind: 'Item'}\r\n    {slug: 'reinforced-iron-chainmail-tunic', name: 'Reinforced Iron Chainmail Tunic', original: '546d3bbb9df4a17d0d449a2f', portraitURL: '/file/db/thang.type/546d3bbb9df4a17d0d449a2f/portrait.png', kind: 'Item'}\r\n    {slug: 'repair', name: 'Repair', original: '52bcc4591f766a891c000003', portraitURL: '/file/db/thang.type/52bcc4591f766a891c000003/portrait.png', kind: 'Mark'}\r\n    {slug: 'ring-of-developer-experimentation', name: 'Ring of Developer Experimentation', original: '54bac99bacbf5aea089da177', portraitURL: '/file/db/thang.type/54bac99bacbf5aea089da177/portrait.png', kind: 'Item'}\r\n    {slug: 'ring-of-earth', name: 'Ring of Earth', original: '5441c35c4e9aeb727cc9711d', portraitURL: '/file/db/thang.type/5441c35c4e9aeb727cc9711d/portrait.png', kind: 'Item'}\r\n    {slug: 'ring-of-fire', name: 'Ring of Fire', original: '54692ea2a2b1f53ce79443ab', portraitURL: '/file/db/thang.type/54692ea2a2b1f53ce79443ab/portrait.png', kind: 'Item'}\r\n    {slug: 'ring-of-flowers', name: 'Ring of Flowers', original: '5523224b0676ecb7d5c89319', portraitURL: '/file/db/thang.type/5523224b0676ecb7d5c89319/portrait.png', kind: 'Item'}\r\n    {slug: 'ring-of-ice', name: 'Ring of Ice', original: '54692ed3a2b1f53ce79443af', portraitURL: '/file/db/thang.type/54692ed3a2b1f53ce79443af/portrait.png', kind: 'Item'}\r\n    {slug: 'ring-of-speed', name: 'Ring of Speed', original: '54692d2aa2b1f53ce794438f', portraitURL: '/file/db/thang.type/54692d2aa2b1f53ce794438f/portrait.png', kind: 'Item'}\r\n    {slug: 'riveted-dragonscale-chainmail-coif', name: 'Riveted Dragonscale Chainmail Coif', original: '546d47c09df4a17d0d449a6f', portraitURL: '/file/db/thang.type/546d47c09df4a17d0d449a6f/portrait.png', kind: 'Item'}\r\n    {slug: 'riveted-dragonscale-chainmail-tunic', name: 'Riveted Dragonscale Chainmail Tunic', original: '546d3d549df4a17d0d449a47', portraitURL: '/file/db/thang.type/546d3d549df4a17d0d449a47/portrait.png', kind: 'Item'}\r\n    {slug: 'robe-of-the-magi', name: 'Robe of the Magi', original: '54ea3ec22b7506e891ca7126', portraitURL: '/file/db/thang.type/54ea3ec22b7506e891ca7126/portrait.png', kind: 'Item'}\r\n    {slug: 'robobomb', name: 'Robobomb', original: '55b7fb22a337d9b0ea024bb4', portraitURL: '/file/db/thang.type/55b7fb22a337d9b0ea024bb4/portrait.png', kind: 'Unit'}\r\n    {slug: 'robot-walker', name: 'Robot Walker', original: '5301696ad82649ec2c0c9b0d', portraitURL: '/file/db/thang.type/5301696ad82649ec2c0c9b0d/portrait.png', kind: 'Unit'}\r\n    {slug: 'rock-1', name: 'Rock 1', original: '52afcc1fc5b1813ec2000010', portraitURL: '/file/db/thang.type/52afcc1fc5b1813ec2000010/portrait.png', kind: 'Doodad'}\r\n    {slug: 'rock-2', name: 'Rock 2', original: '52afcce4c5b1813ec2000012', portraitURL: '/file/db/thang.type/52afcce4c5b1813ec2000012/portrait.png', kind: 'Doodad'}\r\n    {slug: 'rock-3', name: 'Rock 3', original: '52afcd43c5b1813ec2000014', portraitURL: '/file/db/thang.type/52afcd43c5b1813ec2000014/portrait.png', kind: 'Doodad'}\r\n    {slug: 'rock-4', name: 'Rock 4', original: '52afcd7bc5b1813ec2000016', portraitURL: '/file/db/thang.type/52afcd7bc5b1813ec2000016/portrait.png', kind: 'Doodad'}\r\n    {slug: 'rock-5', name: 'Rock 5', original: '52afcdc7c5b1813ec2000018', portraitURL: '/file/db/thang.type/52afcdc7c5b1813ec2000018/portrait.png', kind: 'Doodad'}\r\n    {slug: 'rock-6', name: 'Rock 6', original: '54e95916f54ef5794f354f2d', portraitURL: '/file/db/thang.type/54e95916f54ef5794f354f2d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'rock-7', name: 'Rock 7', original: '54e959d6f54ef5794f354f31', portraitURL: '/file/db/thang.type/54e959d6f54ef5794f354f31/portrait.png', kind: 'Doodad'}\r\n    {slug: 'rock-8', name: 'Rock 8', original: '54e95a10f54ef5794f354f35', portraitURL: '/file/db/thang.type/54e95a10f54ef5794f354f35/portrait.png', kind: 'Doodad'}\r\n    {slug: 'rock-cluster-1', name: 'Rock Cluster 1', original: '52afcb47c5b1813ec200000a', portraitURL: '/file/db/thang.type/52afcb47c5b1813ec200000a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'rock-cluster-2', name: 'Rock Cluster 2', original: '52afcb98c5b1813ec200000c', portraitURL: '/file/db/thang.type/52afcb98c5b1813ec200000c/portrait.png', kind: 'Doodad'}\r\n    {slug: 'rock-cluster-3', name: 'Rock Cluster 3', original: '52afcbe0c5b1813ec200000e', portraitURL: '/file/db/thang.type/52afcbe0c5b1813ec200000e/portrait.png', kind: 'Doodad'}\r\n    {slug: 'rock-field-1', name: 'Rock Field 1', original: '54e95753f54ef5794f354f21', portraitURL: '/file/db/thang.type/54e95753f54ef5794f354f21/portrait.png', kind: 'Doodad'}\r\n    {slug: 'rock-field-2', name: 'Rock Field 2', original: '54e95861f54ef5794f354f25', portraitURL: '/file/db/thang.type/54e95861f54ef5794f354f25/portrait.png', kind: 'Doodad'}\r\n    {slug: 'rock-field-3', name: 'Rock Field 3', original: '54e958aaf54ef5794f354f29', portraitURL: '/file/db/thang.type/54e958aaf54ef5794f354f29/portrait.png', kind: 'Doodad'}\r\n    {slug: 'root', name: 'Root', original: '55c640feef141c65665beb67', portraitURL: '/file/db/thang.type/55c640feef141c65665beb67/portrait.png', kind: 'Mark'}\r\n    {slug: 'rough-sense-stone', name: 'Rough Sense Stone', original: '54693140a2b1f53ce79443bc', portraitURL: '/file/db/thang.type/54693140a2b1f53ce79443bc/portrait.png', kind: 'Item'}\r\n    {slug: 'roughedge', name: 'Roughedge', original: '544d7d918494308424f564a7', portraitURL: '/file/db/thang.type/544d7d918494308424f564a7/portrait.png', kind: 'Item'}\r\n    {slug: 'rs-demo', name: 'RS Demo', original: '56ce48892438c720001e3ca3', portraitURL: '/file/db/thang.type/56ce48892438c720001e3ca3/portrait.png', kind: 'undefined'}\r\n    {slug: 'runesword', name: 'Runesword', original: '54eaa9622b7506e891ca71b1', portraitURL: '/file/db/thang.type/54eaa9622b7506e891ca71b1/portrait.png', kind: 'Item'}\r\n    {slug: 'rusted-iron-breastplate', name: 'Rusted Iron Breastplate', original: '545d3fe42d03e700001b5a5f', portraitURL: '/file/db/thang.type/545d3fe42d03e700001b5a5f/portrait.png', kind: 'Item'}\r\n    {slug: 'rusted-iron-helmet', name: 'Rusted Iron Helmet', original: '546d38d09df4a17d0d449a07', portraitURL: '/file/db/thang.type/546d38d09df4a17d0d449a07/portrait.png', kind: 'Item'}\r\n    {slug: 'rusted-steel-scale-chainmail-coif', name: 'Rusted Steel Scale Chainmail Coif', original: '546d46419df4a17d0d449a5b', portraitURL: '/file/db/thang.type/546d46419df4a17d0d449a5b/portrait.png', kind: 'Item'}\r\n    {slug: 'rusted-steel-scale-chainmail-tunic', name: 'Rusted Steel Scale Chainmail Tunic', original: '546d3bf99df4a17d0d449a33', portraitURL: '/file/db/thang.type/546d3bf99df4a17d0d449a33/portrait.png', kind: 'Item'}\r\n    {slug: 'sand-01', name: 'Sand 01', original: '5484df79d7b7b862291456af', portraitURL: '/file/db/thang.type/5484df79d7b7b862291456af/portrait.png', kind: 'Floor'}\r\n    {slug: 'sand-02', name: 'Sand 02', original: '5484e7c5d7b7b862291456b3', portraitURL: '/file/db/thang.type/5484e7c5d7b7b862291456b3/portrait.png', kind: 'Floor'}\r\n    {slug: 'sand-03', name: 'Sand 03', original: '5484e81bd7b7b862291456b7', portraitURL: '/file/db/thang.type/5484e81bd7b7b862291456b7/portrait.png', kind: 'Floor'}\r\n    {slug: 'sand-04', name: 'Sand 04', original: '5484e857d7b7b862291456bb', portraitURL: '/file/db/thang.type/5484e857d7b7b862291456bb/portrait.png', kind: 'Floor'}\r\n    {slug: 'sand-05', name: 'Sand 05', original: '5484e89cd7b7b862291456bf', portraitURL: '/file/db/thang.type/5484e89cd7b7b862291456bf/portrait.png', kind: 'Floor'}\r\n    {slug: 'sand-06', name: 'Sand 06', original: '5484e8ddd7b7b862291456c3', portraitURL: '/file/db/thang.type/5484e8ddd7b7b862291456c3/portrait.png', kind: 'Floor'}\r\n    {slug: 'sand-yak', name: 'Sand Yak', original: '5480b2251bf0b10000711c51', portraitURL: '/file/db/thang.type/5480b2251bf0b10000711c51/portrait.png', kind: 'Unit'}\r\n    {slug: 'sapphire-sense-stone', name: 'Sapphire Sense Stone', original: '54693363a2b1f53ce79443d1', portraitURL: '/file/db/thang.type/54693363a2b1f53ce79443d1/portrait.png', kind: 'Item'}\r\n    {slug: 'sarcophagus', name: 'sarcophagus', original: '572d5a2d3ff46db2000a381b', portraitURL: '/file/db/thang.type/572d5a2d3ff46db2000a381b/portrait.png', kind: 'Doodad'}\r\n    {slug: 'scaled-gloves', name: 'Scaled Gloves', original: '5469496ca2b1f53ce794442d', portraitURL: '/file/db/thang.type/5469496ca2b1f53ce794442d/portrait.png', kind: 'Item'}\r\n    {slug: 'school-locker', name: 'School locker', original: '56eb14804eb67a25009be23e', portraitURL: '/file/db/thang.type/56eb14804eb67a25009be23e/portrait.png', kind: 'Doodad'}\r\n    {slug: 'scoreboard', name: 'Scoreboard', original: '56de0ff26f9cc02400831e06', portraitURL: '/file/db/thang.type/56de0ff26f9cc02400831e06/portrait.png', kind: 'Doodad'}\r\n    {slug: 'scorpion', name: 'Scorpion', original: '548cf5340f559d0000be7e5b', portraitURL: '/file/db/thang.type/548cf5340f559d0000be7e5b/portrait.png', kind: 'Doodad'}\r\n    {slug: 'selection', name: 'Selection', original: '546e23d49df4a17d0d449bb5', portraitURL: '/file/db/thang.type/546e23d49df4a17d0d449bb5/portrait.png', kind: 'Misc'}\r\n    {slug: 'shadow-guard-background', name: 'Shadow Guard Background', original: '55bfc4c950cac5d58def9a67', portraitURL: '/file/db/thang.type/55bfc4c950cac5d58def9a67/portrait.png', kind: 'Floor'}\r\n    {slug: 'shadowless-bird', name: 'Shadowless Bird', original: '55079c55cea461db22519e9d', portraitURL: '/file/db/thang.type/55079c55cea461db22519e9d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'shadowless-cloud-1', name: 'Shadowless Cloud 1', original: '53e2df9cd12e873205b6bce8', portraitURL: '/file/db/thang.type/53e2df9cd12e873205b6bce8/portrait.png', kind: 'Doodad'}\r\n    {slug: 'shadowless-cloud-2', name: 'Shadowless Cloud 2', original: '53e2e0176c59f5340504102f', portraitURL: '/file/db/thang.type/53e2e0176c59f5340504102f/portrait.png', kind: 'Doodad'}\r\n    {slug: 'shadowless-cloud-3', name: 'Shadowless Cloud 3', original: '53e2e08eae44ec37059f2148', portraitURL: '/file/db/thang.type/53e2e08eae44ec37059f2148/portrait.png', kind: 'Doodad'}\r\n    {slug: 'sharpened-sword', name: 'Sharpened Sword', original: '544d7deb8494308424f564ab', portraitURL: '/file/db/thang.type/544d7deb8494308424f564ab/portrait.png', kind: 'Item'}\r\n    {slug: 'sharpsong', name: 'Sharpsong', original: '544d95c78494308424f56527', portraitURL: '/file/db/thang.type/544d95c78494308424f56527/portrait.png', kind: 'Item'}\r\n    {slug: 'sharpsong-missile', name: 'Sharpsong Missile', original: '544d98368494308424f5653e', portraitURL: '/file/db/thang.type/544d98368494308424f5653e/portrait.png', kind: 'Missile'}\r\n    {slug: 'shell', name: 'Shell', original: '52ba2c6c981fbb7e48000093', portraitURL: '/file/db/thang.type/52ba2c6c981fbb7e48000093/portrait.png', kind: 'Missile'}\r\n    {slug: 'shield', name: 'Shield', original: '573fa531d0bee72000a4255f', portraitURL: '/file/db/thang.type/573fa531d0bee72000a4255f/portrait.png', kind: 'Mark'}\r\n    {slug: 'short-sword', name: 'Short Sword', original: '544d7f1a8494308424f564b7', portraitURL: '/file/db/thang.type/544d7f1a8494308424f564b7/portrait.png', kind: 'Item'}\r\n    {slug: 'shrub-1', name: 'Shrub 1', original: '52b0a113ccbc671372000017', portraitURL: '/file/db/thang.type/52b0a113ccbc671372000017/portrait.png', kind: 'Doodad'}\r\n    {slug: 'shrub-2', name: 'Shrub 2', original: '52b0a15accbc671372000019', portraitURL: '/file/db/thang.type/52b0a15accbc671372000019/portrait.png', kind: 'Doodad'}\r\n    {slug: 'shrub-3', name: 'Shrub 3', original: '52b0a1a3ccbc67137200001b', portraitURL: '/file/db/thang.type/52b0a1a3ccbc67137200001b/portrait.png', kind: 'Doodad'}\r\n    {slug: 'sign', name: 'Sign', original: '5435cbe77b554def1f99c491', portraitURL: '/file/db/thang.type/5435cbe77b554def1f99c491/portrait.png', kind: 'Doodad'}\r\n    {slug: 'silver-coin', name: 'Silver Coin', original: '535ef1f64f10444d08486b61', portraitURL: '/file/db/thang.type/535ef1f64f10444d08486b61/portrait.png', kind: 'Misc'}\r\n    {slug: 'simple-boots', name: 'Simple Boots', original: '53e237bf53457600003e3f05', portraitURL: '/file/db/thang.type/53e237bf53457600003e3f05/portrait.png', kind: 'Item'}\r\n    {slug: 'simple-katana', name: 'Simple Katana', original: '544d7ed58494308424f564b3', portraitURL: '/file/db/thang.type/544d7ed58494308424f564b3/portrait.png', kind: 'Item'}\r\n    {slug: 'simple-rifle', name: 'Simple Rifle', original: '544d70a18494308424f5647a', portraitURL: '/file/db/thang.type/544d70a18494308424f5647a/portrait.png', kind: 'Item'}\r\n    {slug: 'simple-sword', name: 'Simple Sword', original: '53e218d853457600003e3ebe', portraitURL: '/file/db/thang.type/53e218d853457600003e3ebe/portrait.png', kind: 'Item'}\r\n    {slug: 'simple-wand', name: 'Simple Wand', original: '544d874f8494308424f564f5', portraitURL: '/file/db/thang.type/544d874f8494308424f564f5/portrait.png', kind: 'Item'}\r\n    {slug: 'simple-wristwatch', name: 'Simple Wristwatch', original: '54693797a2b1f53ce79443e9', portraitURL: '/file/db/thang.type/54693797a2b1f53ce79443e9/portrait.png', kind: 'Item'}\r\n    {slug: 'skeleton-bits-1', name: 'Skeleton Bits 1', original: '54ef85bdc1f3bd7c0593d125', portraitURL: '/file/db/thang.type/54ef85bdc1f3bd7c0593d125/portrait.png', kind: 'Doodad'}\r\n    {slug: 'skeleton-bits-2', name: 'Skeleton Bits 2', original: '54ef874370ff9c8005e1eb0d', portraitURL: '/file/db/thang.type/54ef874370ff9c8005e1eb0d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'sky-span-background-1', name: 'Sky Span Background 1', original: '53e3f096ae44ec37059f92d8', portraitURL: '/file/db/thang.type/53e3f096ae44ec37059f92d8/portrait.png', kind: 'Floor'}\r\n    {slug: 'sky-span-background-2', name: 'Sky Span Background 2', original: '53e3f3556c59f5340504359e', portraitURL: '/file/db/thang.type/53e3f3556c59f5340504359e/portrait.png', kind: 'Floor'}\r\n    {slug: 'sky-span-background-3', name: 'Sky Span Background 3', original: '53e3f500ae44ec37059f9415', portraitURL: '/file/db/thang.type/53e3f500ae44ec37059f9415/portrait.png', kind: 'Doodad'}\r\n    {slug: 'sky-span-background-4', name: 'Sky Span Background 4', original: '53e3f5dbae44ec37059f944a', portraitURL: '/file/db/thang.type/53e3f5dbae44ec37059f944a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'sky-span-background-5', name: 'Sky Span Background 5', original: '53e3f646d12e873205b72abd', portraitURL: '/file/db/thang.type/53e3f646d12e873205b72abd/portrait.png', kind: 'Floor'}\r\n    {slug: 'sky-span-background-6', name: 'Sky Span Background 6', original: '53e3f724d12e873205b72af9', portraitURL: '/file/db/thang.type/53e3f724d12e873205b72af9/portrait.png', kind: 'Floor'}\r\n    {slug: 'sky-span-background-7', name: 'Sky Span Background 7', original: '53e3f74dae44ec37059f94b3', portraitURL: '/file/db/thang.type/53e3f74dae44ec37059f94b3/portrait.png', kind: 'Doodad'}\r\n    {slug: 'sleep', name: 'Sleep', original: '5302504b222f73867774d7a1', portraitURL: '/file/db/thang.type/5302504b222f73867774d7a1/portrait.png', kind: 'Mark'}\r\n    {slug: 'slow', name: 'Slow', original: '5302511327471514685d5405', portraitURL: '/file/db/thang.type/5302511327471514685d5405/portrait.png', kind: 'Mark'}\r\n    {slug: 'snake', name: 'Snake', original: '548cf57c0f559d0000be7e5f', portraitURL: '/file/db/thang.type/548cf57c0f559d0000be7e5f/portrait.png', kind: 'Doodad'}\r\n    {slug: 'snake-pillar', name: 'Snake Pillar', original: '54ef8db1223edd8105aff2b9', portraitURL: '/file/db/thang.type/54ef8db1223edd8105aff2b9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'soft-leather-gloves', name: 'Soft Leather Gloves', original: '546948e9a2b1f53ce7944425', portraitURL: '/file/db/thang.type/546948e9a2b1f53ce7944425/portrait.png', kind: 'Item'}\r\n    {slug: 'softened-leather-boots', name: 'Softened Leather Boots', original: '546d4d589df4a17d0d449ac9', portraitURL: '/file/db/thang.type/546d4d589df4a17d0d449ac9/portrait.png', kind: 'Item'}\r\n    {slug: 'sparkbomb', name: 'Sparkbomb', original: '54eb528449fa2d5c905ddf12', portraitURL: '/file/db/thang.type/54eb528449fa2d5c905ddf12/portrait.png', kind: 'Item'}\r\n    {slug: 'sparkbomb-missile', name: 'Sparkbomb Missile', original: '5535b3bd428ddac5686fcf7a', portraitURL: '/file/db/thang.type/5535b3bd428ddac5686fcf7a/portrait.png', kind: 'Missile'}\r\n    {slug: 'spear', name: 'Spear', original: '52ba2affd68e4b7c48000030', portraitURL: '/file/db/thang.type/52ba2affd68e4b7c48000030/portrait.png', kind: 'Missile'}\r\n    {slug: 'spider', name: 'Spider', original: '55c1353bc87e47c60604f997', portraitURL: '/file/db/thang.type/55c1353bc87e47c60604f997/portrait.png', kind: 'Doodad'}\r\n    {slug: 'spiderweb-1', name: 'Spiderweb 1', original: '54ef7c69223edd8105afc1f4', portraitURL: '/file/db/thang.type/54ef7c69223edd8105afc1f4/portrait.png', kind: 'Doodad'}\r\n    {slug: 'spiderweb-2', name: 'Spiderweb 2', original: '54ef7d41ace2147e058655a8', portraitURL: '/file/db/thang.type/54ef7d41ace2147e058655a8/portrait.png', kind: 'Doodad'}\r\n    {slug: 'spiderweb-3', name: 'Spiderweb 3', original: '54ef7ed7b4740779058410c9', portraitURL: '/file/db/thang.type/54ef7ed7b4740779058410c9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'spiderweb-4', name: 'Spiderweb 4', original: '54ef8938ace2147e05867d6d', portraitURL: '/file/db/thang.type/54ef8938ace2147e05867d6d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'spike-walls', name: 'Spike Walls', original: '5422f63718adb78d98d265f7', portraitURL: '/file/db/thang.type/5422f63718adb78d98d265f7/portrait.png', kind: 'Doodad'}\r\n    {slug: 'spiked-ogre-wall', name: 'spiked ogre wall', original: '578682dccca8994b002708eb', portraitURL: '/file/db/thang.type/578682dccca8994b002708eb/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stalactite-1', name: 'Stalactite 1', original: '55760f0a1e82182d9e688912', portraitURL: '/file/db/thang.type/55760f0a1e82182d9e688912/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stalactite-2', name: 'Stalactite 2', original: '55760f4a1e82182d9e688916', portraitURL: '/file/db/thang.type/55760f4a1e82182d9e688916/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stalactite-3', name: 'Stalactite 3', original: '55760f6f1e82182d9e68891a', portraitURL: '/file/db/thang.type/55760f6f1e82182d9e68891a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stalagmite-1', name: 'Stalagmite 1', original: '55760e6f1e82182d9e688906', portraitURL: '/file/db/thang.type/55760e6f1e82182d9e688906/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stalagmite-2', name: 'Stalagmite 2', original: '55760eb61e82182d9e68890a', portraitURL: '/file/db/thang.type/55760eb61e82182d9e68890a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stalagmite-3', name: 'Stalagmite 3', original: '55760ee51e82182d9e68890e', portraitURL: '/file/db/thang.type/55760ee51e82182d9e68890e/portrait.png', kind: 'Doodad'}\r\n    {slug: 'statue-stone-hooded', name: 'Statue Stone Hooded', original: '546e23469df4a17d0d449ba9', portraitURL: '/file/db/thang.type/546e23469df4a17d0d449ba9/portrait.png', kind: 'Doodad'}\r\n    {slug: 'steel-breastplate', name: 'Steel Breastplate', original: '546ab0a83777d61863292862', portraitURL: '/file/db/thang.type/546ab0a83777d61863292862/portrait.png', kind: 'Item'}\r\n    {slug: 'steel-helmet', name: 'Steel Helmet', original: '5441c2ed4e9aeb727cc9710b', portraitURL: '/file/db/thang.type/5441c2ed4e9aeb727cc9710b/portrait.png', kind: 'Item'}\r\n    {slug: 'steel-ring', name: 'Steel Ring', original: '54692dbca2b1f53ce794439b', portraitURL: '/file/db/thang.type/54692dbca2b1f53ce794439b/portrait.png', kind: 'Item'}\r\n    {slug: 'steel-shield', name: 'Steel Shield', original: '544d7bec8494308424f56497', portraitURL: '/file/db/thang.type/544d7bec8494308424f56497/portrait.png', kind: 'Item'}\r\n    {slug: 'steel-striker', name: 'Steel Striker', original: '544d7c948494308424f5649f', portraitURL: '/file/db/thang.type/544d7c948494308424f5649f/portrait.png', kind: 'Item'}\r\n    {slug: 'steel-wand', name: 'Steel Wand', original: '544d88e48494308424f56511', portraitURL: '/file/db/thang.type/544d88e48494308424f56511/portrait.png', kind: 'Item'}\r\n    {slug: 'stiff-lambswool-hat', name: 'Stiff Lambswool Hat', original: '546d4b379df4a17d0d449aa7', portraitURL: '/file/db/thang.type/546d4b379df4a17d0d449aa7/portrait.png', kind: 'Item'}\r\n    {slug: 'stone-builders-hammer', name: 'Stone Builder\\'s Hammer', original: '54694bcca2b1f53ce7944451', portraitURL: '/file/db/thang.type/54694bcca2b1f53ce7944451/portrait.png', kind: 'Item'}\r\n    {slug: 'stone-fall-1', name: 'Stone Fall 1', original: '53e2e5046f406a3505b3ead6', portraitURL: '/file/db/thang.type/53e2e5046f406a3505b3ead6/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stone-fall-2', name: 'Stone Fall 2', original: '53e2e66d6c59f534050410d0', portraitURL: '/file/db/thang.type/53e2e66d6c59f534050410d0/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stone-fall-3', name: 'Stone Fall 3', original: '53e2e728ae44ec37059f2438', portraitURL: '/file/db/thang.type/53e2e728ae44ec37059f2438/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stone-pillars', name: 'stone pillars', original: '572d5958f5da8e29013e4e8d', portraitURL: '/file/db/thang.type/572d5958f5da8e29013e4e8d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stone-statue', name: 'Stone Statue', original: '546e25479df4a17d0d449bd5', portraitURL: '/file/db/thang.type/546e25479df4a17d0d449bd5/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stormbringer', name: 'Stormbringer', original: '54ea87342b7506e891ca7175', portraitURL: '/file/db/thang.type/54ea87342b7506e891ca7175/portrait.png', kind: 'Item'}\r\n    {slug: 'stretched-hide', name: 'Stretched Hide', original: '557608901e82182d9e6888ce', portraitURL: '/file/db/thang.type/557608901e82182d9e6888ce/portrait.png', kind: 'Doodad'}\r\n    {slug: 'student-a', name: 'Student A', original: '56d0edd0441ddd2f002ba5aa', portraitURL: '/file/db/thang.type/56d0edd0441ddd2f002ba5aa/portrait.png', kind: 'Unit'}\r\n    {slug: 'student-b', name: 'Student B', original: '56d0efc14292981f009f51de', portraitURL: '/file/db/thang.type/56d0efc14292981f009f51de/portrait.png', kind: 'Unit'}\r\n    {slug: 'stump-1', name: 'Stump 1', original: '54e955f6f54ef5794f354f09', portraitURL: '/file/db/thang.type/54e955f6f54ef5794f354f09/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stump-2', name: 'Stump 2', original: '54e95634f54ef5794f354f0d', portraitURL: '/file/db/thang.type/54e95634f54ef5794f354f0d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stump-3', name: 'Stump 3', original: '557f91f9b43ce0b15a91b1cd', portraitURL: '/file/db/thang.type/557f91f9b43ce0b15a91b1cd/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stump-4', name: 'Stump 4', original: '557f923eb43ce0b15a91b1d1', portraitURL: '/file/db/thang.type/557f923eb43ce0b15a91b1d1/portrait.png', kind: 'Doodad'}\r\n    {slug: 'stump-5', name: 'Stump 5', original: '557f925ab43ce0b15a91b1d5', portraitURL: '/file/db/thang.type/557f925ab43ce0b15a91b1d5/portrait.png', kind: 'Doodad'}\r\n    {slug: 'sturdy-bronze-shield', name: 'Sturdy Bronze Shield', original: '544d7b028494308424f5648b', portraitURL: '/file/db/thang.type/544d7b028494308424f5648b/portrait.png', kind: 'Item'}\r\n    {slug: 'sulphur-staff', name: 'Sulphur Staff', original: '54eab7132b7506e891ca71fa', portraitURL: '/file/db/thang.type/54eab7132b7506e891ca71fa/portrait.png', kind: 'Item'}\r\n    {slug: 'sundial-wristwatch', name: 'Sundial Wristwatch', original: '53e2396a53457600003e3f0f', portraitURL: '/file/db/thang.type/53e2396a53457600003e3f0f/portrait.png', kind: 'Item'}\r\n    {slug: 'sword', name: 'Sword', original: '52bcda141f766a891c00000a', portraitURL: '/file/db/thang.type/52bcda141f766a891c00000a/portrait.png', kind: 'Misc'}\r\n    {slug: 'sword-belt', name: 'Sword Belt', original: '5441beb74e9aeb727cc970d3', portraitURL: '/file/db/thang.type/5441beb74e9aeb727cc970d3/portrait.png', kind: 'Item'}\r\n    {slug: 'sword-fall-1', name: 'Sword Fall 1', original: '53e2e8a7d12e873205b6c0f1', portraitURL: '/file/db/thang.type/53e2e8a7d12e873205b6c0f1/portrait.png', kind: 'Doodad'}\r\n    {slug: 'sword-fall-2', name: 'Sword Fall 2', original: '53e2e9a9ae44ec37059f2571', portraitURL: '/file/db/thang.type/53e2e9a9ae44ec37059f2571/portrait.png', kind: 'Doodad'}\r\n    {slug: 'sword-of-the-forgotten', name: 'Sword of the Forgotten', original: '54eaaa522b7506e891ca71b9', portraitURL: '/file/db/thang.type/54eaaa522b7506e891ca71b9/portrait.png', kind: 'Item'}\r\n    {slug: 'sword-of-the-temple-guard', name: 'Sword of the Temple Guard', original: '54eaab372b7506e891ca71c1', portraitURL: '/file/db/thang.type/54eaab372b7506e891ca71c1/portrait.png', kind: 'Item'}\r\n    {slug: 'table', name: 'Table', original: '52e9987a427172ae56001ffd', portraitURL: '/file/db/thang.type/52e9987a427172ae56001ffd/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tailored-linen-robe', name: 'Tailored Linen Robe', original: '546d49759df4a17d0d449a87', portraitURL: '/file/db/thang.type/546d49759df4a17d0d449a87/portrait.png', kind: 'Item'}\r\n    {slug: 'talus-1', name: 'Talus 1', original: '54e944a3f54ef5794f354ea9', portraitURL: '/file/db/thang.type/54e944a3f54ef5794f354ea9/portrait.png', kind: 'Floor'}\r\n    {slug: 'talus-2', name: 'Talus 2', original: '54e94880f54ef5794f354ead', portraitURL: '/file/db/thang.type/54e94880f54ef5794f354ead/portrait.png', kind: 'Floor'}\r\n    {slug: 'talus-3', name: 'Talus 3', original: '54e948daf54ef5794f354eb1', portraitURL: '/file/db/thang.type/54e948daf54ef5794f354eb1/portrait.png', kind: 'Floor'}\r\n    {slug: 'talus-4', name: 'Talus 4', original: '54e94908f54ef5794f354eb5', portraitURL: '/file/db/thang.type/54e94908f54ef5794f354eb5/portrait.png', kind: 'Floor'}\r\n    {slug: 'talus-5', name: 'Talus 5', original: '54e9493cf54ef5794f354eb9', portraitURL: '/file/db/thang.type/54e9493cf54ef5794f354eb9/portrait.png', kind: 'Floor'}\r\n    {slug: 'talus-6', name: 'Talus 6', original: '54e94965f54ef5794f354ebd', portraitURL: '/file/db/thang.type/54e94965f54ef5794f354ebd/portrait.png', kind: 'Floor'}\r\n    {slug: 'tarnished-bronze-breastplate', name: 'Tarnished Bronze Breastplate', original: '53e22eac53457600003e3efc', portraitURL: '/file/db/thang.type/53e22eac53457600003e3efc/portrait.png', kind: 'Item'}\r\n    {slug: 'tarnished-bronze-helmet', name: 'Tarnished Bronze Helmet', original: '546d38269df4a17d0d4499ff', portraitURL: '/file/db/thang.type/546d38269df4a17d0d4499ff/portrait.png', kind: 'Item'}\r\n    {slug: 'tarnished-copper-band', name: 'Tarnished Copper Band', original: '54692a75a2b1f53ce7944387', portraitURL: '/file/db/thang.type/54692a75a2b1f53ce7944387/portrait.png', kind: 'Item'}\r\n    {slug: 'tauran-helm', name: 'Tauran Helm', original: '54ea49982b7506e891ca7165', portraitURL: '/file/db/thang.type/54ea49982b7506e891ca7165/portrait.png', kind: 'Item'}\r\n    {slug: 'tauran-plate', name: 'Tauran Plate', original: '54ea4b302b7506e891ca716d', portraitURL: '/file/db/thang.type/54ea4b302b7506e891ca716d/portrait.png', kind: 'Item'}\r\n    {slug: 'teacher-b', name: 'Teacher B', original: '56de0554d048927700b4f741', portraitURL: '/file/db/thang.type/56de0554d048927700b4f741/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tent-1', name: 'Tent 1', original: '548cf2280f559d0000be7e37', portraitURL: '/file/db/thang.type/548cf2280f559d0000be7e37/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tent-2', name: 'Tent 2', original: '548cf2b10f559d0000be7e3b', portraitURL: '/file/db/thang.type/548cf2b10f559d0000be7e3b/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tent-3', name: 'Tent 3', original: '548cf30b0f559d0000be7e3f', portraitURL: '/file/db/thang.type/548cf30b0f559d0000be7e3f/portrait.png', kind: 'Doodad'}\r\n    {slug: 'the-final-kithmaze-background', name: 'the final kithmaze background', original: '577ecc2b67053f25007eb916', portraitURL: '/file/db/thang.type/577ecc2b67053f25007eb916/portrait.png', kind: 'Floor'}\r\n    {slug: 'the-gauntlet-background', name: 'The Gauntlet Background', original: '572d631812f2abce00164c15', portraitURL: '/file/db/thang.type/572d631812f2abce00164c15/portrait.png', kind: 'Floor'}\r\n    {slug: 'the-monolith', name: 'The Monolith', original: '54eabcb72b7506e891ca7226', portraitURL: '/file/db/thang.type/54eabcb72b7506e891ca7226/portrait.png', kind: 'Item'}\r\n    {slug: 'the-precious', name: 'The Precious', original: '54eb56ae49fa2d5c905ddf2a', portraitURL: '/file/db/thang.type/54eb56ae49fa2d5c905ddf2a/portrait.png', kind: 'Item'}\r\n    {slug: 'thick-burlap-robe', name: 'Thick Burlap Robe', original: '546d48989df4a17d0d449a77', portraitURL: '/file/db/thang.type/546d48989df4a17d0d449a77/portrait.png', kind: 'Item'}\r\n    {slug: 'thin-burlap-robe', name: 'Thin Burlap Robe', original: '546d485b9df4a17d0d449a73', portraitURL: '/file/db/thang.type/546d485b9df4a17d0d449a73/portrait.png', kind: 'Item'}\r\n    {slug: 'thoktars-discarded-hammer', name: 'Thoktar\\'s Discarded Hammer', original: '54694cd6a2b1f53ce7944466', portraitURL: '/file/db/thang.type/54694cd6a2b1f53ce7944466/portrait.png', kind: 'Item'}\r\n    {slug: 'thornprick', name: 'Thornprick', original: '54692e75a2b1f53ce79443a7', portraitURL: '/file/db/thang.type/54692e75a2b1f53ce79443a7/portrait.png', kind: 'Item'}\r\n    {slug: 'threadbare-burlap-wizards-hat', name: 'Threadbare Burlap Wizards Hat', original: '546d4a909df4a17d0d449a9b', portraitURL: '/file/db/thang.type/546d4a909df4a17d0d449a9b/portrait.png', kind: 'Item'}\r\n    {slug: 'throne', name: 'Throne', original: '54efa174933e1e7b05846fe6', portraitURL: '/file/db/thang.type/54efa174933e1e7b05846fe6/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tomb-ring', name: 'Tomb Ring', original: '54eb55d849fa2d5c905ddf26', portraitURL: '/file/db/thang.type/54eb55d849fa2d5c905ddf26/portrait.png', kind: 'Item'}\r\n    {slug: 'tool-belt', name: 'Tool Belt', original: '5441beff4e9aeb727cc970d9', portraitURL: '/file/db/thang.type/5441beff4e9aeb727cc970d9/portrait.png', kind: 'Item'}\r\n    {slug: 'torch', name: 'Torch', original: '52aa608b20fccb0000000005', portraitURL: '/file/db/thang.type/52aa608b20fccb0000000005/portrait.png', kind: 'Doodad'}\r\n    {slug: 'torn-silk-cloak', name: 'Torn Silk Cloak', original: '546d49a79df4a17d0d449a8b', portraitURL: '/file/db/thang.type/546d49a79df4a17d0d449a8b/portrait.png', kind: 'Item'}\r\n    {slug: 'torture-table', name: 'Torture Table', original: '54ef8fd4b474077905843564', portraitURL: '/file/db/thang.type/54ef8fd4b474077905843564/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tower-ruined', name: 'Tower Ruined', original: '54f117c548724e7d052b540b', portraitURL: '/file/db/thang.type/54f117c548724e7d052b540b/portrait.png', kind: 'Doodad'}\r\n    {slug: 'training-dummy', name: 'Training Dummy', original: '53e65923bc5cc012113e07b1', portraitURL: '/file/db/thang.type/53e65923bc5cc012113e07b1/portrait.png', kind: 'Doodad'}\r\n    {slug: 'trap-belt', name: 'Trap Belt', original: '54694a8fa2b1f53ce7944439', portraitURL: '/file/db/thang.type/54694a8fa2b1f53ce7944439/portrait.png', kind: 'Item'}\r\n    {slug: 'treasure-chest', name: 'Treasure Chest', original: '52aa3be0ccbd588d4d000005', portraitURL: '/file/db/thang.type/52aa3be0ccbd588d4d000005/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tree-1', name: 'Tree 1', original: '52b09ef7ccbc67137200000f', portraitURL: '/file/db/thang.type/52b09ef7ccbc67137200000f/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tree-2', name: 'Tree 2', original: '52b09fdeccbc671372000011', portraitURL: '/file/db/thang.type/52b09fdeccbc671372000011/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tree-3', name: 'Tree 3', original: '52b0a04fccbc671372000013', portraitURL: '/file/db/thang.type/52b0a04fccbc671372000013/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tree-4', name: 'Tree 4', original: '52b0a0a5ccbc671372000015', portraitURL: '/file/db/thang.type/52b0a0a5ccbc671372000015/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tree-stand-1', name: 'Tree Stand 1', original: '541cc7c48e78524aad94de7d', portraitURL: '/file/db/thang.type/541cc7c48e78524aad94de7d/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tree-stand-2', name: 'Tree Stand 2', original: '542068f38e78524aad94de83', portraitURL: '/file/db/thang.type/542068f38e78524aad94de83/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tree-stand-3', name: 'Tree Stand 3', original: '5420693d8e78524aad94de89', portraitURL: '/file/db/thang.type/5420693d8e78524aad94de89/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tree-stand-4', name: 'Tree Stand 4', original: '542069888e78524aad94de8f', portraitURL: '/file/db/thang.type/542069888e78524aad94de8f/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tree-stand-5', name: 'Tree Stand 5', original: '542092628e78524aad94deca', portraitURL: '/file/db/thang.type/542092628e78524aad94deca/portrait.png', kind: 'Doodad'}\r\n    {slug: 'tree-stand-6', name: 'Tree Stand 6', original: '542092c38e78524aad94ded0', portraitURL: '/file/db/thang.type/542092c38e78524aad94ded0/portrait.png', kind: 'Doodad'}\r\n    {slug: 'true-names-background', name: 'True Names Background', original: '55e451bd206f7df7df6ba966', portraitURL: '/file/db/thang.type/55e451bd206f7df7df6ba966/portrait.png', kind: 'Floor'}\r\n    {slug: 'twilight-glasses', name: 'Twilight Glasses', original: '546941fda2b1f53ce794441d', portraitURL: '/file/db/thang.type/546941fda2b1f53ce794441d/portrait.png', kind: 'Item'}\r\n    {slug: 'twisted-pine-wand', name: 'Twisted Pine Wand', original: '544d877d8494308424f564f9', portraitURL: '/file/db/thang.type/544d877d8494308424f564f9/portrait.png', kind: 'Item'}\r\n    {slug: 'undead', name: 'Undead', original: '55c284933767fd3435eb4471', portraitURL: '/file/db/thang.type/55c284933767fd3435eb4471/portrait.png', kind: 'Mark'}\r\n    {slug: 'undergrowth-dagger', name: 'Undergrowth Dagger', original: '544d95e68494308424f5652b', portraitURL: '/file/db/thang.type/544d95e68494308424f5652b/portrait.png', kind: 'Item'}\r\n    {slug: 'undergrowth-dagger-missile', name: 'Undergrowth Dagger Missile', original: '544d99618494308424f56541', portraitURL: '/file/db/thang.type/544d99618494308424f56541/portrait.png', kind: 'Missile'}\r\n    {slug: 'undying-ring', name: 'Undying Ring', original: '54eb54d349fa2d5c905ddf1e', portraitURL: '/file/db/thang.type/54eb54d349fa2d5c905ddf1e/portrait.png', kind: 'Item'}\r\n    {slug: 'unholy-tome-i', name: 'Unholy Tome I', original: '546374bc3839c6e02811d308', portraitURL: '/file/db/thang.type/546374bc3839c6e02811d308/portrait.png', kind: 'Item'}\r\n    {slug: 'unholy-tome-ii', name: 'Unholy Tome II', original: '5463756f3839c6e02811d30c', portraitURL: '/file/db/thang.type/5463756f3839c6e02811d30c/portrait.png', kind: 'Item'}\r\n    {slug: 'unholy-tome-iii', name: 'Unholy Tome III', original: '5463758f3839c6e02811d30f', portraitURL: '/file/db/thang.type/5463758f3839c6e02811d30f/portrait.png', kind: 'Item'}\r\n    {slug: 'unholy-tome-iv', name: 'Unholy Tome IV', original: '546376b63839c6e02811d31b', portraitURL: '/file/db/thang.type/546376b63839c6e02811d31b/portrait.png', kind: 'Item'}\r\n    {slug: 'unholy-tome-v', name: 'Unholy Tome V', original: '546376da3839c6e02811d31e', portraitURL: '/file/db/thang.type/546376da3839c6e02811d31e/portrait.png', kind: 'Item'}\r\n    {slug: 'viking-helmet', name: 'Viking Helmet', original: '5441c3144e9aeb727cc97111', portraitURL: '/file/db/thang.type/5441c3144e9aeb727cc97111/portrait.png', kind: 'Item'}\r\n    {slug: 'viking-helmet-doodad', name: 'Viking Helmet Doodad', original: '5518239d1f12482609b44f76', portraitURL: '/file/db/thang.type/5518239d1f12482609b44f76/portrait.png', kind: 'Doodad'}\r\n    {slug: 'vine-staff', name: 'Vine Staff', original: '54eab92b2b7506e891ca720a', portraitURL: '/file/db/thang.type/54eab92b2b7506e891ca720a/portrait.png', kind: 'Item'}\r\n    {slug: 'volcano', name: 'Volcano', original: '55c64512ef141c65665beb7e', portraitURL: '/file/db/thang.type/55c64512ef141c65665beb7e/portrait.png', kind: 'Doodad'}\r\n    {slug: 'vr-artist', name: 'VR Artist', original: '56d0c6bf087ee32400763d49', portraitURL: '/file/db/thang.type/56d0c6bf087ee32400763d49/portrait.png', kind: 'Unit'}\r\n    {slug: 'vr-breaker', name: 'VR Breaker', original: '56d0e6e563103d2a00af5795', portraitURL: '/file/db/thang.type/56d0e6e563103d2a00af5795/portrait.png', kind: 'Unit'}\r\n    {slug: 'vr-door', name: 'VR Door', original: '56aa6bf503ec4e2000878867', portraitURL: '/file/db/thang.type/56aa6bf503ec4e2000878867/portrait.png', kind: 'Doodad'}\r\n    {slug: 'vr-floor', name: 'VR Floor', original: '56a2e305b0b7242000e9986e', portraitURL: '/file/db/thang.type/56a2e305b0b7242000e9986e/portrait.png', kind: 'Floor'}\r\n    {slug: 'vr-oracle', name: 'VR Oracle', original: '56d0d144a7daf22000023a13', portraitURL: '/file/db/thang.type/56d0d144a7daf22000023a13/portrait.png', kind: 'Unit'}\r\n    {slug: 'vr-security', name: 'VR Security', original: '56d758b787781b1f00cf4b20', portraitURL: '/file/db/thang.type/56d758b787781b1f00cf4b20/portrait.png', kind: 'Unit'}\r\n    {slug: 'vr-tinker', name: 'VR Tinker', original: '56d07d682a1e1736005b1b37', portraitURL: '/file/db/thang.type/56d07d682a1e1736005b1b37/portrait.png', kind: 'Unit'}\r\n    {slug: 'vr-wall', name: 'vr-wall', original: '56b0c75302b7db290079b542', portraitURL: '/file/db/thang.type/56b0c75302b7db290079b542/portrait.png', kind: 'Wall'}\r\n    {slug: 'vr-wyrm', name: 'VR Wyrm', original: '56bb944d203af82000b2a406', portraitURL: '/file/db/thang.type/56bb944d203af82000b2a406/portrait.png', kind: 'Unit'}\r\n    {slug: 'wagon-broken', name: 'Wagon Broken', original: '548cf1cd0f559d0000be7e33', portraitURL: '/file/db/thang.type/548cf1cd0f559d0000be7e33/portrait.png', kind: 'Doodad'}\r\n    {slug: 'wakka-maul-background', name: 'Wakka Maul Background', original: '5654eae2f9285e86053f7504', portraitURL: '/file/db/thang.type/5654eae2f9285e86053f7504/portrait.png', kind: 'Floor'}\r\n    {slug: 'warcry', name: 'Warcry', original: '53024777222f73867774d6cd', portraitURL: '/file/db/thang.type/53024777222f73867774d6cd/portrait.png', kind: 'Mark'}\r\n    {slug: 'waterfall', name: 'Waterfall', original: '53e2eaffae44ec37059f262a', portraitURL: '/file/db/thang.type/53e2eaffae44ec37059f262a/portrait.png', kind: 'Doodad'}\r\n    {slug: 'weak-charge', name: 'Weak Charge', original: '544d957d8494308424f5651f', portraitURL: '/file/db/thang.type/544d957d8494308424f5651f/portrait.png', kind: 'Item'}\r\n    {slug: 'weak-charge-missile', name: 'Weak Charge Missile', original: '544d97798494308424f5653b', portraitURL: '/file/db/thang.type/544d97798494308424f5653b/portrait.png', kind: 'Missile'}\r\n    {slug: 'weighted-throwing-knives', name: 'Weighted Throwing Knives', original: '544d96108494308424f5652f', portraitURL: '/file/db/thang.type/544d96108494308424f5652f/portrait.png', kind: 'Item'}\r\n    {slug: 'weighted-throwing-knives-missile', name: 'Weighted Throwing Knives Missile', original: '544d99b98494308424f56545', portraitURL: '/file/db/thang.type/544d99b98494308424f56545/portrait.png', kind: 'Missile'}\r\n    {slug: 'well', name: 'Well', original: '52b094cbccbc671372000004', portraitURL: '/file/db/thang.type/52b094cbccbc671372000004/portrait.png', kind: 'Doodad'}\r\n    {slug: 'white-deerhide-gloves', name: 'White Deerhide Gloves', original: '54694936a2b1f53ce7944429', portraitURL: '/file/db/thang.type/54694936a2b1f53ce7944429/portrait.png', kind: 'Item'}\r\n    {slug: 'windwalker-coif', name: 'Windwalker Coif', original: '54ea48512b7506e891ca7157', portraitURL: '/file/db/thang.type/54ea48512b7506e891ca7157/portrait.png', kind: 'Item'}\r\n    {slug: 'windwalker-mail', name: 'Windwalker Mail', original: '54ea46092b7506e891ca7143', portraitURL: '/file/db/thang.type/54ea46092b7506e891ca7143/portrait.png', kind: 'Item'}\r\n    {slug: 'winged-boots', name: 'Winged Boots', original: '546d4e5c9df4a17d0d449ad9', portraitURL: '/file/db/thang.type/546d4e5c9df4a17d0d449ad9/portrait.png', kind: 'Item'}\r\n    {slug: 'wizard-bird-f', name: 'Wizard Bird F', original: '52fc0c9e7e01835453bd8ef8', portraitURL: '/file/db/thang.type/52fc0c9e7e01835453bd8ef8/portrait.png', kind: 'Unit'}\r\n    {slug: 'wizard-bird-m', name: 'Wizard Bird M', original: '52fd015f3a58c6c50fcf4782', portraitURL: '/file/db/thang.type/52fd015f3a58c6c50fcf4782/portrait.png', kind: 'Unit'}\r\n    {slug: 'wizard-doctor', name: 'Wizard Doctor', original: '52fc04fbab6e45c813bc7ced', portraitURL: '/file/db/thang.type/52fc04fbab6e45c813bc7ced/portrait.png', kind: 'Unit'}\r\n    {slug: 'wizard-dude', name: 'Wizard Dude', original: '53e126a4e06b897606d38bef', portraitURL: '/file/db/thang.type/53e126a4e06b897606d38bef/portrait.png', kind: 'Unit'}\r\n    {slug: 'wizard-hermes', name: 'Wizard Hermes', original: '52fc09daab6e45c813bc7d52', portraitURL: '/file/db/thang.type/52fc09daab6e45c813bc7d52/portrait.png', kind: 'Unit'}\r\n    {slug: 'wizard-knight', name: 'Wizard Knight', original: '52fc00ffab6e45c813bc7cb2', portraitURL: '/file/db/thang.type/52fc00ffab6e45c813bc7cb2/portrait.png', kind: 'Unit'}\r\n    {slug: 'wizard-ninja-m', name: 'Wizard Ninja M', original: '52fd04aff0cd954d619a9a4c', portraitURL: '/file/db/thang.type/52fd04aff0cd954d619a9a4c/portrait.png', kind: 'Unit'}\r\n    {slug: 'wizard-overseer-f', name: 'Wizard Overseer F', original: '52fc11fbb2b91c0d5a7b6a14', portraitURL: '/file/db/thang.type/52fc11fbb2b91c0d5a7b6a14/portrait.png', kind: 'Unit'}\r\n    {slug: 'wizard-overseer-m', name: 'Wizard Overseer M', original: '52fd0728ccb2653821eaf8b0', portraitURL: '/file/db/thang.type/52fd0728ccb2653821eaf8b0/portrait.png', kind: 'Unit'}\r\n    {slug: 'wizard-purple', name: 'Wizard Purple', original: '52fd0e16c7e6cf99160e7b6a', portraitURL: '/file/db/thang.type/52fd0e16c7e6cf99160e7b6a/portrait.png', kind: 'Unit'}\r\n    {slug: 'wizard-spine', name: 'Wizard Spine', original: '52fcfed63a58c6c50fcf4732', portraitURL: '/file/db/thang.type/52fcfed63a58c6c50fcf4732/portrait.png', kind: 'Unit'}\r\n    {slug: 'wizard-spine-m', name: 'Wizard Spine M', original: '52fd0c70f0cd954d619a9b10', portraitURL: '/file/db/thang.type/52fd0c70f0cd954d619a9b10/portrait.png', kind: 'Unit'}\r\n    {slug: 'wizard-thorn-f', name: 'Wizard Thorn F', original: '52fc1460b2b91c0d5a7b6af3', portraitURL: '/file/db/thang.type/52fc1460b2b91c0d5a7b6af3/portrait.png', kind: 'Unit'}\r\n    {slug: 'wizard-thorn-m', name: 'Wizard Thorn M', original: '52fd0a40f0cd954d619a9ad7', portraitURL: '/file/db/thang.type/52fd0a40f0cd954d619a9ad7/portrait.png', kind: 'Unit'}\r\n    {slug: 'wizard-top-hat', name: 'Wizard Top Hat', original: '52fd124accb2653821eaf991', portraitURL: '/file/db/thang.type/52fd124accb2653821eaf991/portrait.png', kind: 'Unit'}\r\n    {slug: 'wooden-builders-hammer', name: 'Wooden Builder\\'s Hammer', original: '54694ba3a2b1f53ce794444d', portraitURL: '/file/db/thang.type/54694ba3a2b1f53ce794444d/portrait.png', kind: 'Item'}\r\n    {slug: 'wooden-glasses', name: 'Wooden Glasses', original: '53e2167653457600003e3eb3', portraitURL: '/file/db/thang.type/53e2167653457600003e3eb3/portrait.png', kind: 'Item'}\r\n    {slug: 'wooden-shield', name: 'Wooden Shield', original: '53e22aa153457600003e3ef5', portraitURL: '/file/db/thang.type/53e22aa153457600003e3ef5/portrait.png', kind: 'Item'}\r\n    {slug: 'wooden-strand', name: 'Wooden Strand', original: '54692e3ea2b1f53ce79443a3', portraitURL: '/file/db/thang.type/54692e3ea2b1f53ce79443a3/portrait.png', kind: 'Item'}\r\n    {slug: 'workers-gloves', name: 'Worker\\'s Gloves', original: '5469425ca2b1f53ce7944421', portraitURL: '/file/db/thang.type/5469425ca2b1f53ce7944421/portrait.png', kind: 'Item'}\r\n    {slug: 'worn-dragonplate', name: 'Worn Dragonplate', original: '546ab1a13777d61863292872', portraitURL: '/file/db/thang.type/546ab1a13777d61863292872/portrait.png', kind: 'Item'}\r\n    {slug: 'worn-dragonplate-helmet', name: 'Worn Dragonplate Helmet', original: '546d3a199df4a17d0d449a1b', portraitURL: '/file/db/thang.type/546d3a199df4a17d0d449a1b/portrait.png', kind: 'Item'}\r\n    {slug: 'worn-dragonshield', name: 'Worn Dragonshield', original: '54eabd662b7506e891ca722e', portraitURL: '/file/db/thang.type/54eabd662b7506e891ca722e/portrait.png', kind: 'Item'}\r\n    {slug: 'wyrm2', name: 'wyrm2', original: '56c32fd1807b9f36005e5fd0', portraitURL: '/file/db/thang.type/56c32fd1807b9f36005e5fd0/portrait.png', kind: 'Unit'}\r\n    {slug: 'wyvernclaw', name: 'Wyvernclaw', original: '54ea35fd2b7506e891ca70d5', portraitURL: '/file/db/thang.type/54ea35fd2b7506e891ca70d5/portrait.png', kind: 'Item'}\r\n    {slug: 'x-mark-bones', name: 'X Mark Bones', original: '54938352e9850ae3e8fbdd64', portraitURL: '/file/db/thang.type/54938352e9850ae3e8fbdd64/portrait.png', kind: 'Doodad'}\r\n    {slug: 'x-mark-forest', name: 'X Mark Forest', original: '549381a7e9850ae3e8fbdd60', portraitURL: '/file/db/thang.type/549381a7e9850ae3e8fbdd60/portrait.png', kind: 'Doodad'}\r\n    {slug: 'x-mark-red', name: 'X Mark Red', original: '5493844be9850ae3e8fbdd70', portraitURL: '/file/db/thang.type/5493844be9850ae3e8fbdd70/portrait.png', kind: 'Doodad'}\r\n    {slug: 'x-mark-stone', name: 'X Mark Stone', original: '549383aae9850ae3e8fbdd68', portraitURL: '/file/db/thang.type/549383aae9850ae3e8fbdd68/portrait.png', kind: 'Doodad'}\r\n    {slug: 'x-mark-wood', name: 'X Mark Wood', original: '54938408e9850ae3e8fbdd6c', portraitURL: '/file/db/thang.type/54938408e9850ae3e8fbdd6c/portrait.png', kind: 'Doodad'}\r\n    {slug: 'x-marker', name: 'X Marker', original: '5452ec9f06a59e000067e518', portraitURL: '/file/db/thang.type/5452ec9f06a59e000067e518/portrait.png', kind: 'Doodad'}\r\n    {slug: 'x-ray-goggles', name: 'X-Ray Goggles', original: '53e2392453457600003e3f0d', portraitURL: '/file/db/thang.type/53e2392453457600003e3f0d/portrait.png', kind: 'Item'}\r\n    {slug: 'yeti', name: 'Yeti', original: '54e91dc5970f0b0a263c03de', portraitURL: '/file/db/thang.type/54e91dc5970f0b0a263c03de/portrait.png', kind: 'Unit'}\r\n    {slug: 'yeti-cave', name: 'Yeti Cave', original: '557f8f84b43ce0b15a91b1c7', portraitURL: '/file/db/thang.type/557f8f84b43ce0b15a91b1c7/portrait.png', kind: 'Doodad'}\r\n    {slug: 'yeti-skin', name: 'Yeti Skin', original: '557f370ab43ce0b15a91b171', portraitURL: '/file/db/thang.type/557f370ab43ce0b15a91b171/portrait.png', kind: 'Doodad'}\r\n  ]\r\n","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/level/modal/infinite_loop'\r\n\r\nmodule.exports = class InfiniteLoopModal extends ModalView\r\n  id: '#infinite-loop-modal'\r\n  template: template\r\n\r\n  events:\r\n    'click #restart-level-infinite-loop-retry-button': -> Backbone.Mediator.publish 'tome:cast-spell', {}\r\n    'click #restart-level-infinite-loop-confirm-button': -> Backbone.Mediator.publish 'level:restart', {}\r\n    'click #restart-level-infinite-loop-comment-button': -> Backbone.Mediator.publish 'tome:comment-my-code', {}\r\n","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/level/modal/keyboard_shortcuts'\r\n\r\nmodule.exports = class KeyboardShortcutsModal extends ModalView\r\n  id: 'keyboard-shortcuts-modal'\r\n  template: template\r\n\r\n  isMac: -> false\r\n\r\n  getRenderData: ->\r\n    c = super()\r\n    c.ctrl = if @isMac() then '⌘' else '^'\r\n    c.ctrlName = if @isMac() then 'Cmd' else 'Ctrl'\r\n    c.alt = if @isMac() then '⌥' else '⎇'\r\n    c.altName = if @isMac() then 'Opt' else 'Alt'\r\n    c.enter = $.i18n.t 'keyboard_shortcuts.enter'\r\n    c.space = $.i18n.t 'keyboard_shortcuts.space'\r\n    c.escapeKey = $.i18n.t 'keyboard_shortcuts.escape'\r\n    c.shift = $.i18n.t 'keyboard_shortcuts.shift'\r\n    c\r\n","CocoView = require 'views/core/CocoView'\r\n\r\nmodule.exports = class NewItemView extends CocoView\r\n  id: 'new-item-view'\r\n  className: 'modal-content' \r\n  template: require('templates/play/level/modal/new-item-view')\r\n  \r\n  events:\r\n    'click #continue-btn': 'onClickContinueButton'\r\n    \r\n  afterRender: ->\r\n    super()\r\n    # TODO: Animate icon\r\n    \r\n  initialize: (options) ->\r\n    @item = options.item\r\n    super()\r\n\r\n  onClickContinueButton: ->\r\n    @trigger 'continue'","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/level/modal/picoctf-victory-modal'\r\nLevel = require 'models/Level'\r\n\r\nmodule.exports = class PicoCTFVictoryModal extends ModalView\r\n  id: 'picoctf-victory-modal'\r\n  template: template\r\n  closesOnClickOutside: false\r\n\r\n  initialize: (options) ->\r\n    @session = options.session\r\n    @level = options.level\r\n\r\n    form = {flag: options.world.picoCTFFlag, pid: @level.picoCTFProblem.pid}\r\n    @supermodel.addRequestResource(url: '/picoctf/submit', method: 'POST', data: form, success: (response) =>\r\n      console.log 'submitted', form, 'and got response', response\r\n    ).load()\r\n\r\n    if nextLevel = @level.get('nextLevel')\r\n      @nextLevel = new Level().setURL \"/db/level/#{nextLevel.original}/version/#{nextLevel.majorVersion}\"\r\n      @nextLevel = @supermodel.loadModel(@nextLevel).model\r\n\r\n    @playSound 'victory'\r\n\r\n  onLoaded: ->\r\n    super()\r\n","CocoView = require 'views/core/CocoView'\r\nutils = require 'core/utils'\r\nurls = require 'core/urls'\r\n\r\nmodule.exports = class ProgressView extends CocoView\r\n\r\n  id: 'progress-view'\r\n  className: 'modal-content'\r\n  template: require 'templates/play/level/modal/progress-view'\r\n\r\n  events:\r\n    'click #done-btn': 'onClickDoneButton'\r\n    'click #next-level-btn': 'onClickNextLevelButton'\r\n    'click #ladder-btn': 'onClickLadderButton'\r\n    'click #share-level-btn': 'onClickShareLevelButton'\r\n\r\n  initialize: (options) ->\r\n    @level = options.level\r\n    @course = options.course\r\n    @classroom = options.classroom\r\n    @nextLevel = options.nextLevel\r\n    @levelSessions = options.levelSessions\r\n    @session = options.session\r\n    # Translate and Markdownify level description, but take out any images (we don't have room for arena banners, etc.).\r\n    # Images in Markdown are like ![description](url)\r\n    @nextLevel.get('description', true)  # Make sure the defaults are available\r\n    @nextLevelDescription = marked(utils.i18n(@nextLevel.attributesWithDefaults, 'description').replace(/!\\[.*?\\]\\(.*?\\)\\n*/g, ''))\r\n    if @level.get('shareable') is 'project'\r\n      @shareURL = urls.playDevLevel({@level, @session, @course})\r\n\r\n  onClickDoneButton: ->\r\n    @trigger 'done'\r\n\r\n  onClickNextLevelButton: ->\r\n    @trigger 'next-level'\r\n\r\n  onClickLadderButton: ->\r\n    @trigger 'ladder'\r\n\r\n  onClickShareLevelButton: ->\r\n    if _.string.startsWith(@course.get('slug'), 'game-dev')\r\n      name = 'Student Game Dev - Copy URL'\r\n      category = 'GameDev'\r\n    else\r\n      name = 'Student Web Dev - Copy URL'\r\n      category = 'WebDev'\r\n    eventProperties = {\r\n      levelID: @level.id\r\n      levelSlug: @level.get('slug')\r\n      classroomID: @classroom.id\r\n      courseID: @course.id\r\n      category\r\n    }\r\n    window.tracker?.trackEvent name, eventProperties, ['MixPanel']\r\n    @$('#share-level-input').val(@shareURL).select()\r\n    @tryCopy()\r\n","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/level/modal/reload-level-modal'\r\n\r\nmodule.exports = class ReloadLevelModal extends ModalView\r\n  id: '#reload-level-modal'\r\n  template: template\r\n\r\n  events:\r\n    'click #restart-level-confirm-button': 'onClickRestart'\r\n\r\n  onClickRestart: (e) ->\r\n    @playSound 'menu-button-click'\r\n    Backbone.Mediator.publish 'level:restart', {}\r\n","ModalView = require 'views/core/ModalView'\r\nCreateAccountModal = require 'views/core/CreateAccountModal'\r\ntemplate = require 'templates/play/level/modal/victory'\r\n{me} = require 'core/auth'\r\nLadderSubmissionView = require 'views/play/common/LadderSubmissionView'\r\nLevelFeedback = require 'models/LevelFeedback'\r\nutils = require 'core/utils'\r\n\r\nmodule.exports = class VictoryModal extends ModalView\r\n  id: 'level-victory-modal'\r\n  template: template\r\n\r\n  subscriptions:\r\n    'ladder:game-submitted': 'onGameSubmitted'\r\n\r\n  events:\r\n    'click .sign-up-button': 'onClickSignupButton'\r\n\r\n    # review events\r\n    'mouseover .rating i': (e) -> @showStars(@starNum($(e.target)))\r\n    'mouseout .rating i': -> @showStars()\r\n    'click .rating i': (e) ->\r\n      @setStars(@starNum($(e.target)))\r\n      @$el.find('.review').show()\r\n    'keypress .review textarea': -> @saveReviewEventually()\r\n\r\n  constructor: (options) ->\r\n    application.router.initializeSocialMediaServices()\r\n    victory = options.level.get('victory', true)\r\n    body = utils.i18n(victory, 'body') or 'Sorry, this level has no victory message yet.'\r\n    @body = marked(body)\r\n    @level = options.level\r\n    @session = options.session\r\n    @saveReviewEventually = _.debounce(@saveReviewEventually, 2000)\r\n    @loadExistingFeedback()\r\n    super options\r\n\r\n  loadExistingFeedback: ->\r\n    url = \"/db/level/#{@level.id}/feedback\"\r\n    @feedback = new LevelFeedback()\r\n    @feedback.setURL url\r\n    @feedback.fetch cache: false\r\n    @listenToOnce(@feedback, 'sync', -> @onFeedbackLoaded())\r\n    @listenToOnce(@feedback, 'error', -> @onFeedbackNotFound())\r\n\r\n  onFeedbackLoaded: ->\r\n    @feedback.url = -> '/db/level.feedback/' + @id\r\n    @$el.find('.review textarea').val(@feedback.get('review'))\r\n    @$el.find('.review').show()\r\n    @showStars()\r\n\r\n  onFeedbackNotFound: ->\r\n    @feedback = new LevelFeedback()\r\n    @feedback.set('levelID', @level.get('slug') or @level.id)\r\n    @feedback.set('levelName', @level.get('name') or '')\r\n    @feedback.set('level', {majorVersion: @level.get('version').major, original: @level.get('original')})\r\n    @showStars()\r\n\r\n  onClickSignupButton: (e) ->\r\n    e.preventDefault()\r\n    window.tracker?.trackEvent 'Started Signup', category: 'Play Level', label: 'Victory Modal', level: @level.get('slug')\r\n    @openModalView new CreateAccountModal()\r\n\r\n  onGameSubmitted: (e) ->\r\n    ladderURL = \"/play/ladder/#{@level.get('slug')}#my-matches\"\r\n    Backbone.Mediator.publish 'router:navigate', route: ladderURL\r\n\r\n  getRenderData: ->\r\n    c = super()\r\n    c.body = @body\r\n    c.me = me\r\n    c.levelName = utils.i18n @level.attributes, 'name'\r\n    c.level = @level\r\n    if c.level.isType('ladder')\r\n      c.readyToRank = @session.readyToRank()\r\n    c\r\n\r\n  afterRender: ->\r\n    super()\r\n    @ladderSubmissionView = new LadderSubmissionView session: @session, level: @level\r\n    @insertSubView @ladderSubmissionView, @$el.find('.ladder-submission-view')\r\n\r\n  afterInsert: ->\r\n    super()\r\n    @playSound 'victory'\r\n    gapi?.plusone?.go? @$el[0]\r\n    FB?.XFBML?.parse? @$el[0]\r\n    twttr?.widgets?.load?()\r\n\r\n  destroy: ->\r\n    @saveReview() if @$el.find('.review textarea').val()\r\n    @feedback.off()\r\n    super()\r\n\r\n  # rating, review\r\n\r\n  starNum: (starEl) -> starEl.prevAll('i').length + 1\r\n\r\n  showStars: (num) ->\r\n    @$el.find('.rating').show()\r\n    num ?= @feedback?.get('rating') or 0\r\n    stars = @$el.find('.rating i')\r\n    stars.removeClass('icon-star').addClass('icon-star-empty')\r\n    stars.slice(0, num).removeClass('icon-star-empty').addClass('icon-star')\r\n\r\n  setStars: (num) ->\r\n    @feedback.set('rating', num)\r\n    @feedback.save()\r\n\r\n  saveReviewEventually: ->\r\n    @saveReview()\r\n\r\n  saveReview: ->\r\n    @feedback.set('review', @$el.find('.review textarea').val())\r\n    @feedback.save()\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/tome/cast-button-view'\r\n{me} = require 'core/auth'\r\nLadderSubmissionView = require 'views/play/common/LadderSubmissionView'\r\nLevelSession = require 'models/LevelSession'\r\n\r\nmodule.exports = class CastButtonView extends CocoView\r\n  id: 'cast-button-view'\r\n  template: template\r\n\r\n  events:\r\n    'click .cast-button': 'onCastButtonClick'\r\n    'click .submit-button': 'onCastRealTimeButtonClick'\r\n    'click .done-button': 'onDoneButtonClick'\r\n    'click .game-dev-play-btn': 'onClickGameDevPlayButton'\r\n\r\n  subscriptions:\r\n    'tome:spell-changed': 'onSpellChanged'\r\n    'tome:cast-spells': 'onCastSpells'\r\n    'tome:manual-cast-denied': 'onManualCastDenied'\r\n    'god:new-world-created': 'onNewWorld'\r\n    'goal-manager:new-goal-states': 'onNewGoalStates'\r\n    'god:goals-calculated': 'onGoalsCalculated'\r\n    'playback:ended-changed': 'onPlaybackEndedChanged'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @spells = options.spells\r\n    @castShortcut = '⇧↵'\r\n    @updateReplayabilityInterval = setInterval @updateReplayability, 1000\r\n    @observing = options.session.get('creator') isnt me.id\r\n    @loadMirrorSession() if @options.level.get('slug') in ['ace-of-coders', 'elemental-wars', 'the-battle-of-sky-span']\r\n    @mirror = @mirrorSession?\r\n    @autoSubmitsToLadder = @options.level.get('slug') in ['wakka-maul']\r\n\r\n  destroy: ->\r\n    clearInterval @updateReplayabilityInterval\r\n    super()\r\n\r\n  afterRender: ->\r\n    super()\r\n    @castButton = $('.cast-button', @$el)\r\n    spell.view?.createOnCodeChangeHandlers() for spellKey, spell of @spells\r\n    if @options.level.get('hidesSubmitUntilRun') or @options.level.get('hidesRealTimePlayback') or @options.level.isType('web-dev')\r\n      @$el.find('.submit-button').hide()  # Hide Submit for the first few until they run it once.\r\n    if @options.session.get('state')?.complete and (@options.level.get('hidesRealTimePlayback') or @options.level.isType('web-dev'))\r\n      @$el.find('.done-button').show()\r\n    if @options.level.get('slug') in ['course-thornbush-farm', 'thornbush-farm']\r\n      @$el.find('.submit-button').hide()  # Hide submit until first win so that script can explain it.\r\n    @updateReplayability()\r\n    @updateLadderSubmissionViews()\r\n\r\n  attachTo: (spellView) ->\r\n    @$el.detach().prependTo(spellView.toolbarView.$el).show()\r\n\r\n  castShortcutVerbose: ->\r\n    shift = $.i18n.t 'keyboard_shortcuts.shift'\r\n    enter = $.i18n.t 'keyboard_shortcuts.enter'\r\n    \"#{shift}+#{enter}\"\r\n\r\n  castVerbose: ->\r\n    @castShortcutVerbose() + ': ' + $.i18n.t('keyboard_shortcuts.run_code')\r\n\r\n  castRealTimeVerbose: ->\r\n    castRealTimeShortcutVerbose = (if @isMac() then 'Cmd' else 'Ctrl') + '+' + @castShortcutVerbose()\r\n    castRealTimeShortcutVerbose + ': ' + $.i18n.t('keyboard_shortcuts.run_real_time')\r\n\r\n  onCastButtonClick: (e) ->\r\n    Backbone.Mediator.publish 'tome:manual-cast', {}\r\n\r\n  onCastRealTimeButtonClick: (e) ->\r\n    if @options.level.get('replayable') and (timeUntilResubmit = @options.session.timeUntilResubmit()) > 0\r\n      Backbone.Mediator.publish 'tome:manual-cast-denied', timeUntilResubmit: timeUntilResubmit\r\n    else\r\n      Backbone.Mediator.publish 'tome:manual-cast', {realTime: true}\r\n    @updateReplayability()\r\n\r\n  onClickGameDevPlayButton: ->\r\n    Backbone.Mediator.publish 'tome:manual-cast', {realTime: true}\r\n\r\n  onDoneButtonClick: (e) ->\r\n    return if @options.level.hasLocalChanges()  # Don't award achievements when beating level changed in level editor\r\n    @options.session.recordScores @world?.scores, @options.level\r\n    Backbone.Mediator.publish 'level:show-victory', { showModal: true, manual: true }\r\n\r\n  onSpellChanged: (e) ->\r\n    @updateCastButton()\r\n\r\n  onCastSpells: (e) ->\r\n    return if e.preload\r\n    @casting = true\r\n    if @hasStartedCastingOnce  # Don't play this sound the first time\r\n      @playSound 'cast', 0.5 unless @options.level.isType('game-dev')\r\n    @hasStartedCastingOnce = true\r\n    @updateCastButton()\r\n\r\n  onManualCastDenied: (e) ->\r\n    wait = moment().add(e.timeUntilResubmit, 'ms').fromNow()\r\n    #@playSound 'manual-cast-denied', 1.0   # find some sound for this?\r\n    noty text: \"You can try again #{wait}.\", layout: 'center', type: 'warning', killer: false, timeout: 6000\r\n\r\n  onNewWorld: (e) ->\r\n    @casting = false\r\n    if @hasCastOnce  # Don't play this sound the first time\r\n      @playSound 'cast-end', 0.5 unless @options.level.isType('game-dev')\r\n      # Worked great for live beginner tournaments, but probably annoying for asynchronous tournament mode.\r\n      myHeroID = if me.team is 'ogres' then 'Hero Placeholder 1' else 'Hero Placeholder'\r\n      if @autoSubmitsToLadder and not e.world.thangMap[myHeroID]?.errorsOut and not me.get('anonymous')\r\n        _.delay (=> @ladderSubmissionView?.rankSession()), 1000 if @ladderSubmissionView\r\n    @hasCastOnce = true\r\n    @updateCastButton()\r\n    @world = e.world\r\n\r\n  onNewGoalStates: (e) ->\r\n    winnable = e.overallStatus is 'success'\r\n    return if @winnable is winnable\r\n    @winnable = winnable\r\n    @$el.toggleClass 'winnable', @winnable\r\n    Backbone.Mediator.publish 'tome:winnability-updated', winnable: @winnable, level: @options.level\r\n    if @options.level.get('hidesRealTimePlayback') or @options.level.isType('web-dev', 'game-dev')\r\n      @$el.find('.done-button').toggle @winnable\r\n    else if @winnable and @options.level.get('slug') in ['course-thornbush-farm', 'thornbush-farm']\r\n      @$el.find('.submit-button').show()  # Hide submit until first win so that script can explain it.\r\n\r\n  onGoalsCalculated: (e) ->\r\n    # When preloading, with real-time playback enabled, we highlight the submit button when we think they'll win.\r\n    return unless e.god is @god\r\n    return unless e.preload\r\n    return if @options.level.get 'hidesRealTimePlayback'\r\n    return if @options.level.get('slug') in ['course-thornbush-farm', 'thornbush-farm']  # Don't show it until they actually win for this first one.\r\n    @onNewGoalStates e\r\n\r\n  onPlaybackEndedChanged: (e) ->\r\n    return unless e.ended and @winnable\r\n    @$el.toggleClass 'has-seen-winning-replay', true\r\n\r\n  updateCastButton: ->\r\n    return if _.some @spells, (spell) => not spell.loaded\r\n\r\n    async.some _.values(@spells), (spell, callback) =>\r\n      spell.hasChangedSignificantly spell.getSource(), null, callback\r\n    , (castable) =>\r\n      Backbone.Mediator.publish 'tome:spell-has-changed-significantly-calculation', hasChangedSignificantly: castable\r\n      @castButton.toggleClass('castable', castable).toggleClass('casting', @casting)\r\n      if @casting\r\n        castText = $.i18n.t('play_level.tome_cast_button_running')\r\n      else if castable or true\r\n        castText = $.i18n.t('play_level.tome_cast_button_run')\r\n        unless @options.level.get 'hidesRunShortcut'  # Hide for first few.\r\n          castText += ' ' + @castShortcut\r\n      else\r\n        castText = $.i18n.t('play_level.tome_cast_button_ran')\r\n      @castButton.text castText\r\n      #@castButton.prop 'disabled', not castable\r\n      @ladderSubmissionView?.updateButton()\r\n\r\n  updateReplayability: =>\r\n    return if @destroyed\r\n    return unless @options.level.get 'replayable'\r\n    timeUntilResubmit = @options.session.timeUntilResubmit()\r\n    disabled = timeUntilResubmit > 0\r\n    submitButton = @$el.find('.submit-button').toggleClass('disabled', disabled)\r\n    submitAgainLabel = submitButton.find('.submit-again-time').toggleClass('secret', not disabled)\r\n    if disabled\r\n      waitTime = moment().add(timeUntilResubmit, 'ms').fromNow()\r\n      submitAgainLabel.text waitTime\r\n\r\n  loadMirrorSession: ->\r\n    url = \"/db/level/#{@options.level.get('slug') or @options.level.id}/session\"\r\n    url += \"?team=#{if me.team is 'humans' then 'ogres' else 'humans'}\"\r\n    mirrorSession = new LevelSession().setURL url\r\n    @mirrorSession = @supermodel.loadModel(mirrorSession, {cache: false}).model\r\n\r\n  updateLadderSubmissionViews: ->\r\n    @removeSubView subview for key, subview of @subviews when subview instanceof LadderSubmissionView\r\n    placeholder = @$el.find('.ladder-submission-view')\r\n    return unless placeholder.length\r\n    @ladderSubmissionView = new LadderSubmissionView session: @options.session, level: @options.level, mirrorSession: @mirrorSession\r\n    @insertSubView @ladderSubmissionView, placeholder\r\n","popoverTemplate = require 'templates/play/level/tome/spell_palette_entry_popover'\r\n{downTheChain} = require 'lib/world/world_utils'\r\nwindow.Vector = require 'lib/world/vector'  # So we can document it\r\nutils = require 'core/utils'\r\n\r\nsafeJSONStringify = (input, maxDepth) ->\r\n  recursion = (input, path, depth) ->\r\n    output = {}\r\n    pPath = undefined\r\n    refIdx = undefined\r\n    path = path or ''\r\n    depth = depth or 0\r\n    depth++\r\n    return '{depth over ' + maxDepth + '}' if maxDepth and depth > maxDepth\r\n    for p of input\r\n      pPath = ((if path then (path + '.') else '')) + p\r\n      if typeof input[p] is 'function'\r\n        output[p] = '{function}'\r\n      else if typeof input[p] is 'object'\r\n        refIdx = refs.indexOf(input[p])\r\n        if -1 isnt refIdx\r\n          output[p] = '{reference to ' + refsPaths[refIdx] + '}'\r\n        else\r\n          refs.push input[p]\r\n          refsPaths.push pPath\r\n          output[p] = recursion(input[p], pPath, depth)\r\n      else\r\n        output[p] = input[p]\r\n    output\r\n  refs = []\r\n  refsPaths = []\r\n  maxDepth = maxDepth or 5\r\n  if typeof input is 'object'\r\n    output = recursion(input)\r\n  else\r\n    output = input\r\n  JSON.stringify output, null, 1\r\n\r\nmodule.exports = class DocFormatter\r\n  constructor: (@options) ->\r\n    @doc = _.cloneDeep @options.doc\r\n    @fillOutDoc()\r\n\r\n  fillOutDoc: ->\r\n    # TODO: figure out better ways to format html/css/scripting docs for web-dev levels\r\n    if _.isString @doc\r\n      @doc = name: @doc, type: typeof @options.thang[@doc]\r\n    if @options.isSnippet\r\n      @doc.type = 'snippet'\r\n      @doc.owner = 'snippets'\r\n      @doc.shortName = @doc.shorterName = @doc.title = @doc.name\r\n    else if @doc.owner in ['HTML', 'CSS', 'WebJavaScript', 'jQuery']\r\n      @doc.shortName = @doc.shorterName = @doc.title = @doc.name\r\n    else\r\n      @doc.owner ?= 'this'\r\n      ownerName = @doc.ownerName = if @doc.owner isnt 'this' then @doc.owner else switch @options.language\r\n        when 'python', 'lua' then (if @options.useHero then 'hero' else 'self')\r\n        when 'java' then 'hero'\r\n        when 'coffeescript' then '@'\r\n        else (if @options.useHero then 'hero' else 'this')\r\n      ownerName = 'game' if @options.level.isType('game-dev')\r\n      if @doc.type is 'function'\r\n        [docName, args] = @getDocNameAndArguments()\r\n        argNames = args.join ', '\r\n        argString = if argNames then '__ARGS__' else ''\r\n        @doc.shortName = switch @options.language\r\n          when 'coffeescript' then \"#{ownerName}#{if ownerName is '@' then '' else '.'}#{docName}#{if argString then ' ' + argString else '()'}\"\r\n          when 'python' then \"#{ownerName}.#{docName}(#{argString})\"\r\n          when 'lua' then \"#{ownerName}:#{docName}(#{argString})\"\r\n          else \"#{ownerName}.#{docName}(#{argString});\"\r\n      else\r\n        @doc.shortName = switch @options.language\r\n          when 'coffeescript' then \"#{ownerName}#{if ownerName is '@' then '' else '.'}#{@doc.name}\"\r\n          when 'python' then \"#{ownerName}.#{@doc.name}\"\r\n          when 'lua' then \"#{ownerName}.#{@doc.name}\"\r\n          else \"#{ownerName}.#{@doc.name};\"\r\n      @doc.shorterName = @doc.shortName\r\n      if @doc.type is 'function' and argString\r\n        @doc.shortName = @doc.shorterName.replace argString, argNames\r\n        @doc.shorterName = @doc.shorterName.replace argString, (if not /cast[A-Z]/.test(@doc.name) and argNames.length > 6 then '...' else argNames)\r\n      if @doc.type is 'event'\r\n        @doc.shortName = @doc.name\r\n        @doc.shorterName = @doc.name\r\n      if @options.language is 'javascript'\r\n        @doc.shorterName = @doc.shortName.replace ';', ''\r\n        if @doc.owner is 'this' or @options.tabbify or ownerName is 'game'\r\n          @doc.shorterName = @doc.shorterName.replace /^(this|hero)\\./, ''\r\n      else if (@options.language in ['python', 'lua']) and (@doc.owner is 'this' or @options.tabbify or ownerName is 'game')\r\n        @doc.shorterName = @doc.shortName.replace /^(self|hero|game)[:.]/, ''\r\n      @doc.title = if @options.shortenize then @doc.shorterName else @doc.shortName\r\n      translatedName = utils.i18n(@doc, 'name')\r\n      if translatedName isnt @doc.name\r\n        @doc.translatedShortName = @doc.shortName.replace(@doc.name, translatedName)\r\n\r\n\r\n    # Grab the language-specific documentation for some sub-properties, if we have it.\r\n    toTranslate = [{obj: @doc, prop: 'description'}, {obj: @doc, prop: 'example'}]\r\n    for arg in (@doc.args ? [])\r\n      toTranslate.push {obj: arg, prop: 'example'}, {obj: arg, prop: 'description'}\r\n    if @doc.returns\r\n      toTranslate.push {obj: @doc.returns, prop: 'example'}, {obj: @doc.returns, prop: 'description'}\r\n    for {obj, prop} in toTranslate\r\n      # Translate into chosen code language.\r\n      if val = obj[prop]?[@options.language]\r\n        obj[prop] = val\r\n      else unless _.isString obj[prop]\r\n        obj[prop] = null\r\n\r\n      # Translate into chosen spoken language.\r\n      if val = originalVal = obj[prop]\r\n        context = @doc.context\r\n        obj[prop] = val = utils.i18n obj, prop\r\n        # For multiplexed-by-both-code-and-spoken-language objects, now also get code language again.\r\n        if _.isObject(val)\r\n          if valByCodeLanguage = obj[prop]?[@options.language]\r\n            obj[prop] = val = valByCodeLanguage\r\n          else\r\n            obj[prop] = originalVal  # Never mind, we don't have that code language for that spoken language.\r\n        if @doc.i18n\r\n          spokenLanguage = me.get 'preferredLanguage'\r\n          while spokenLanguage\r\n            spokenLanguage = spokenLanguage.substr 0, spokenLanguage.lastIndexOf('-') if fallingBack?\r\n            if spokenLanguageContext = @doc.i18n[spokenLanguage]?.context\r\n              context = _.merge context, spokenLanguageContext\r\n              break\r\n            fallingBack = true\r\n        if context\r\n          try\r\n            obj[prop] = _.template val, context\r\n          catch e\r\n            console.error \"Couldn't create docs template of\", val, \"\\nwith context\", context, \"\\nError:\", e\r\n        obj[prop] = @replaceSpriteName obj[prop]  # Do this before using the template, otherwise marked might get us first.\r\n\r\n    # Temporary hack to replace self|this with hero until we can update the docs\r\n    if @options.useHero\r\n      thisToken =\r\n        'python': /self/g,\r\n        'javascript': /this/g,\r\n        'lua': /self/g\r\n\r\n      if thisToken[@options.language]\r\n        if @doc.example\r\n          @doc.example = @doc.example.replace thisToken[@options.language], 'hero'\r\n        if @doc.snippets?[@options.language]?.code\r\n          @doc.snippets[@options.language].code.replace thisToken[@options.language], 'hero'\r\n        if @doc.args\r\n          arg.example = arg.example.replace thisToken[@options.language], 'hero' for arg in @doc.args when arg.example\r\n\r\n    if @doc.shortName is 'loop' and @options.level.isType('course', 'course-ladder')\r\n      @replaceSimpleLoops()\r\n\r\n  replaceSimpleLoops: ->\r\n    # Temporary hackery to make it look like we meant while True: in our loop: docs until we can update everything\r\n    @doc.shortName = @doc.shorterName = @doc.title = @doc.name = switch @options.language\r\n      when 'coffeescript' then \"loop\"\r\n      when 'python' then \"while True:\"\r\n      when 'lua' then \"while true do\"\r\n      else \"while (true)\"\r\n    for field in ['example', 'description']\r\n      [simpleLoop, whileLoop] = switch @options.language\r\n        when 'coffeescript' then [/loop/g, \"loop\"]\r\n        when 'python' then [/loop:/g, \"while True:\"]\r\n        when 'lua' then [/loop/g, \"while true do\"]\r\n        else [/loop/g, \"while (true)\"]\r\n      @doc[field] = @doc[field].replace simpleLoop, whileLoop\r\n\r\n  formatPopover: ->\r\n    [docName, args] = @getDocNameAndArguments()\r\n    argumentExamples = (arg.example or arg.default or arg.name for arg in @doc.args ? [])\r\n    argumentExamples.unshift args[0] if args.length > argumentExamples.length\r\n    content = popoverTemplate {\r\n      doc: @doc\r\n      docName: docName\r\n      language: @options.language\r\n      value: @formatValue()\r\n      marked: marked\r\n      argumentExamples: argumentExamples\r\n      writable: @options.writable\r\n      selectedMethod: @options.selectedMethod\r\n      cooldowns: @inferCooldowns()\r\n      item: @options.item\r\n      _: _\r\n    }\r\n    owner = if @doc.owner is 'this' then @options.thang else window[@doc.owner]\r\n    content = @replaceSpriteName content\r\n    content = content.replace /\\#\\{(.*?)\\}/g, (s, properties) => @formatValue downTheChain(owner, properties.split('.'))\r\n    content = content.replace /{([a-z]+)}([^]*?){\\/\\1}/g, (s, language, text) =>\r\n      if language is @options.language then return text\r\n      return ''\r\n\r\n  replaceSpriteName: (s) ->\r\n    # Prefer type, and excluded the quotes we'd get with @formatValue\r\n    name = @options.thang.type ? @options.thang.spriteName\r\n    name = 'hero' if /Hero Placeholder/.test @options.thang.id\r\n    s.replace /#{spriteName}/g, name\r\n\r\n  getDocNameAndArguments: ->\r\n    return [@doc.name, []] unless @doc.type is 'function'\r\n    docName = @doc.name\r\n    args = (arg.name for arg in @doc.args ? [])\r\n    if /cast[A-Z]/.test docName\r\n      docName = 'cast'\r\n      args.unshift '\"' + _.string.dasherize(@doc.name).replace('cast-', '') + '\"'\r\n    [docName, args]\r\n\r\n  formatValue: (v) ->\r\n    return null if @options.level.isType('web-dev')\r\n    return null if @doc.type is 'snippet'\r\n    return @options.thang.now() if @doc.name is 'now'\r\n    return '[Function]' if not v and @doc.type is 'function'\r\n    unless v?\r\n      if @doc.owner is 'this'\r\n        v = @options.thang[@doc.name]\r\n      else\r\n        v = window[@doc.owner][@doc.name]  # grab Math or Vector\r\n    if @doc.type is 'number' and not _.isNaN v\r\n      if v is Math.round v\r\n        return v\r\n      if _.isNumber v\r\n        return v.toFixed 2\r\n      unless v\r\n        return 'null'\r\n      return '' + v\r\n    if _.isString v\r\n      return \"\\\"#{v}\\\"\"\r\n    if v?.id\r\n      return v.id\r\n    if v?.name\r\n      return v.name\r\n    if _.isArray v\r\n      return '[' + (@formatValue v2 for v2 in v).join(', ') + ']'\r\n    if _.isPlainObject v\r\n      return safeJSONStringify v, 2\r\n    v\r\n\r\n  inferCooldowns: ->\r\n    return null unless @doc.type is 'function' and @doc.owner is 'this'\r\n    owner = @options.thang\r\n    cooldowns = null\r\n    spellName = @doc.name.match /^cast(.+)$/\r\n    if spellName\r\n      actionName = _.string.slugify _.string.underscored spellName[1]\r\n      action = owner.spells?[actionName]\r\n      type = 'spell'\r\n    else\r\n      actionName = _.string.slugify _.string.underscored @doc.name\r\n      action = owner.actions?[actionName]\r\n      type = 'action'\r\n    return null unless action\r\n    cooldowns = cooldown: action.cooldown, specificCooldown: action.specificCooldown, name: actionName, type: type\r\n    for prop in ['range', 'radius', 'duration', 'damage']\r\n      v = owner[_.string.camelize actionName + _.string.capitalize(prop)]\r\n      continue if prop is 'range' and v <= 5  # Don't confuse players by showing melee ranges, they will inappropriately use distanceTo(enemy) < 3.\r\n      cooldowns[prop] = v\r\n      if _.isNumber(v) and v isnt Math.round v\r\n        cooldowns[prop] = v.toFixed 2\r\n    cooldowns\r\n","ace = require 'ace'\r\nRange = ace.require('ace/range').Range\r\n\r\n# This class can either wrap an AetherProblem,\r\n# or act as a general runtime error container for web-dev iFrame errors.\r\n# TODO: Use subclasses? Might need a factory pattern for that (bleh)\r\nmodule.exports = class Problem\r\n  annotation: null\r\n  markerRange: null\r\n  # Construction with AetherProblem will include all but `error`\r\n  # Construction with a standard error will have `error`, `isCast`, `levelID`, `ace`\r\n  constructor: ({ @aether, @aetherProblem, @ace, isCast=false, @levelID, error, userCodeHasChangedSinceLastCast }) ->\r\n    if @aetherProblem\r\n      @annotation = @buildAnnotationFromAetherProblem(@aetherProblem)\r\n      { @lineMarkerRange, @textMarkerRange } = @buildMarkerRangesFromAetherProblem(@aetherProblem) if isCast\r\n\r\n      { @level, @range, @message, @hint, @userInfo } = @aetherProblem\r\n      { @row, @column: col } = @aetherProblem.range?[0] or {}\r\n      @createdBy = 'aether'\r\n    else\r\n      unless userCodeHasChangedSinceLastCast\r\n        @annotation = @buildAnnotationFromWebDevError(error)\r\n        { @lineMarkerRange, @textMarkerRange } = @buildMarkerRangesFromWebDevError(error)\r\n\r\n      @level = 'error'\r\n      @row = error.line\r\n      @column = error.column\r\n      @message = error.message or 'Unknown Error'\r\n      if error.line and not userCodeHasChangedSinceLastCast\r\n        @message = \"Line #{error.line + 1}: \" + @message # Ace's gutter numbers are 1-indexed but annotation.rows are 0-indexed\r\n      if userCodeHasChangedSinceLastCast\r\n        @hint = \"This error was generated by old code — Try running your new code first.\"\r\n      else\r\n        @hint = undefined\r\n      @userInfo = undefined\r\n      @createdBy = 'web-dev-iframe'\r\n      # TODO: Include runtime/transpile error types depending on something?\r\n\r\n    # TODO: get ACE screen line, too, for positioning, since any multiline \"lines\" will mess up positioning\r\n    Backbone.Mediator.publish(\"problem:problem-created\", line: @annotation.row, text: @annotation.text) if application.isIPadApp\r\n\r\n  isEqual: (problem) ->\r\n    _.all ['row', 'column', 'level', 'column', 'message', 'hint'], (attr) =>\r\n      @[attr] is problem[attr]\r\n\r\n  destroy: ->\r\n    @removeMarkerRanges()\r\n    @userCodeProblem.off() if @userCodeProblem\r\n\r\n  buildAnnotationFromWebDevError: (error) ->\r\n    {\r\n      row: error.line\r\n      column: error.column\r\n      raw: error.message\r\n      text: error.message\r\n      type: 'error'\r\n      createdBy: 'web-dev-iframe'\r\n    }\r\n\r\n  buildAnnotationFromAetherProblem: (aetherProblem) ->\r\n    return unless aetherProblem.range\r\n    text = aetherProblem.message.replace /^Line \\d+: /, ''\r\n    start = aetherProblem.range[0]\r\n    {\r\n      row: start.row,\r\n      column: start.col,\r\n      raw: text,\r\n      text: text,\r\n      type: @aetherProblem.level ? 'error'\r\n      createdBy: 'aether'\r\n    }\r\n\r\n  buildMarkerRangesFromWebDevError: (error) ->\r\n    lineMarkerRange = new Range error.line, 0, error.line, 1\r\n    lineMarkerRange.start = @ace.getSession().getDocument().createAnchor lineMarkerRange.start\r\n    lineMarkerRange.end = @ace.getSession().getDocument().createAnchor lineMarkerRange.end\r\n    lineMarkerRange.id = @ace.getSession().addMarker lineMarkerRange, 'problem-line', 'fullLine'\r\n    textMarkerRange = undefined # We don't get any per-character info from standard errors\r\n    { lineMarkerRange, textMarkerRange }\r\n\r\n  buildMarkerRangesFromAetherProblem: (aetherProblem) ->\r\n    return {} unless aetherProblem.range\r\n    [start, end] = aetherProblem.range\r\n    textClazz = \"problem-marker-#{aetherProblem.level}\"\r\n    textMarkerRange = new Range start.row, start.col, end.row, end.col\r\n    textMarkerRange.start = @ace.getSession().getDocument().createAnchor textMarkerRange.start\r\n    textMarkerRange.end = @ace.getSession().getDocument().createAnchor textMarkerRange.end\r\n    textMarkerRange.id = @ace.getSession().addMarker textMarkerRange, textClazz, 'text'\r\n    lineClazz = \"problem-line\"\r\n    lineMarkerRange = new Range start.row, start.col, end.row, end.col\r\n    lineMarkerRange.start = @ace.getSession().getDocument().createAnchor lineMarkerRange.start\r\n    lineMarkerRange.end = @ace.getSession().getDocument().createAnchor lineMarkerRange.end\r\n    lineMarkerRange.id = @ace.getSession().addMarker lineMarkerRange, lineClazz, 'fullLine'\r\n    { lineMarkerRange, textMarkerRange }\r\n\r\n  removeMarkerRanges: ->\r\n    if @textMarkerRange\r\n      @ace.getSession().removeMarker @textMarkerRange.id\r\n      @textMarkerRange.start.detach()\r\n      @textMarkerRange.end.detach()\r\n    if @lineMarkerRange\r\n      @ace.getSession().removeMarker @lineMarkerRange.id\r\n      @lineMarkerRange.start.detach()\r\n      @lineMarkerRange.end.detach()\r\n","CocoView = require 'views/core/CocoView'\r\nGameMenuModal = require 'views/play/menu/GameMenuModal'\r\ntemplate = require 'templates/play/level/tome/problem_alert'\r\n{me} = require 'core/auth'\r\n\r\nmodule.exports = class ProblemAlertView extends CocoView\r\n  id: 'problem-alert-view'\r\n  className: 'problem-alert'\r\n  template: template\r\n\r\n  subscriptions:\r\n    'tome:show-problem-alert': 'onShowProblemAlert'\r\n    'tome:hide-problem-alert': 'onHideProblemAlert'\r\n    'level:restart': 'onHideProblemAlert'\r\n    'tome:jiggle-problem-alert': 'onJiggleProblemAlert'\r\n    'tome:manual-cast': 'onHideProblemAlert'\r\n\r\n  events:\r\n    'click .close': 'onRemoveClicked'\r\n    'click': -> Backbone.Mediator.publish 'tome:focus-editor', {}\r\n\r\n  constructor: (options) ->\r\n    @supermodel = options.supermodel # Has to go before super so events are hooked up\r\n    super options\r\n    @level = options.level\r\n    @session = options.session\r\n    if options.problem?\r\n      @problem = options.problem\r\n      @onWindowResize()\r\n    else\r\n      @$el.hide()\r\n    $(window).on 'resize', @onWindowResize\r\n\r\n  destroy: ->\r\n    $(window).off 'resize', @onWindowResize\r\n    super()\r\n\r\n  afterRender: ->\r\n    super()\r\n    if @problem?\r\n      @$el.addClass('alert').addClass(\"alert-#{@problem.level}\").hide().fadeIn('slow')\r\n      @$el.addClass('no-hint') unless @problem.hint\r\n      @playSound 'error_appear'\r\n\r\n  setProblemMessage: ->\r\n    if @problem?\r\n      format = (s) -> marked(s.replace(/</g, '&lt;').replace(/>/g, '&gt;')) if s?\r\n      message = @problem.message\r\n      # Add time to problem message if hint is for a missing null check\r\n      # NOTE: This may need to be updated with Aether error hint changes\r\n      if @problem.hint? and /(?:null|undefined)/.test @problem.hint\r\n        age = @problem.userInfo?.age\r\n        if age?\r\n          if /^Line \\d+:/.test message\r\n            message = message.replace /^(Line \\d+)/, \"$1, time #{age.toFixed(1)}\"\r\n          else\r\n            message = \"Time #{age.toFixed(1)}: #{message}\"\r\n      @message = format message\r\n      @hint = format @problem.hint\r\n\r\n  onShowProblemAlert: (data) ->\r\n    return unless $('#code-area').is(\":visible\")\r\n    if @problem?\r\n      if @$el.hasClass \"alert-#{@problem.level}\"\r\n        @$el.removeClass \"alert-#{@problem.level}\"\r\n      if @$el.hasClass \"no-hint\"\r\n        @$el.removeClass \"no-hint\"\r\n    @problem = data.problem\r\n    @lineOffsetPx = data.lineOffsetPx or 0\r\n    @$el.show()\r\n    @onWindowResize()\r\n    @setProblemMessage()\r\n    @render()\r\n    @onJiggleProblemAlert()\r\n    application.tracker?.trackEvent 'Show problem alert', {levelID: @level.get('slug'), ls: @session?.get('_id')}\r\n\r\n  onJiggleProblemAlert: ->\r\n    return unless @problem?\r\n    @$el.show() unless @$el.is(\":visible\")\r\n    @$el.addClass 'jiggling'\r\n    @playSound 'error_appear'\r\n    pauseJiggle = =>\r\n      @$el?.removeClass 'jiggling'\r\n    _.delay pauseJiggle, 1000\r\n\r\n  onHideProblemAlert: ->\r\n    return unless @$el.is(':visible')\r\n    @onRemoveClicked()\r\n\r\n  onRemoveClicked: ->\r\n    @playSound 'menu-button-click'\r\n    @$el.hide()\r\n    Backbone.Mediator.publish 'tome:focus-editor', {}\r\n\r\n  onWindowResize: (e) =>\r\n    # TODO: This all seems a little hacky\r\n    if @problem?\r\n      levelContentWidth = $('.level-content').outerWidth(true)\r\n      goalsViewWidth = $('#goals-view').outerWidth(true)\r\n      codeAreaWidth = $('#code-area').outerWidth(true)\r\n      # problem alert view has 20px padding\r\n      @$el.css('max-width', levelContentWidth - codeAreaWidth - goalsViewWidth + 40 + 'px')\r\n      @$el.css('right', codeAreaWidth + 'px')\r\n\r\n      # 110px from top roughly aligns top of alert with top of first code line\r\n      # TODO: calculate this in a more dynamic, less sketchy way\r\n      @$el.css('top', (110 + @lineOffsetPx) + 'px')\r\n","SpellView = require './SpellView'\r\nSpellTopBarView = require './SpellTopBarView'\r\n{me} = require 'core/auth'\r\n{createAetherOptions} = require 'lib/aether_utils'\r\nutils = require 'core/utils'\r\n\r\nmodule.exports = class Spell\r\n  loaded: false\r\n  view: null\r\n  topBarView: null\r\n\r\n  constructor: (options) ->\r\n    @spellKey = options.spellKey\r\n    @pathComponents = options.pathComponents\r\n    @session = options.session\r\n    @otherSession = options.otherSession\r\n    @spectateView = options.spectateView\r\n    @spectateOpponentCodeLanguage = options.spectateOpponentCodeLanguage\r\n    @observing = options.observing\r\n    @supermodel = options.supermodel\r\n    @skipProtectAPI = options.skipProtectAPI\r\n    @worker = options.worker\r\n    @level = options.level\r\n    @createFromProgrammableMethod options.programmableMethod, options.language\r\n    if @canRead()  # We can avoid creating these views if we'll never use them.\r\n      @view = new SpellView {spell: @, level: options.level, session: @session, otherSession: @otherSession, worker: @worker, god: options.god, @supermodel, levelID: options.levelID}\r\n      @view.render()  # Get it ready and code loaded in advance\r\n      @topBarView = new SpellTopBarView\r\n        hintsState: options.hintsState\r\n        spell: @\r\n        supermodel: @supermodel\r\n        codeLanguage: @language\r\n        level: options.level\r\n        session: options.session\r\n        courseID: options.courseID\r\n      @topBarView.render()\r\n    Backbone.Mediator.publish 'tome:spell-created', spell: @\r\n\r\n  createFromProgrammableMethod: (programmableMethod, codeLanguage) ->\r\n    p = programmableMethod\r\n    @commentI18N = p.i18n\r\n    @commentContext = p.context\r\n    @languages = p.languages ? {}\r\n    @languages.javascript ?= p.source\r\n    @name = p.name\r\n    @permissions = read: p.permissions?.read ? [], readwrite: p.permissions?.readwrite ? ['humans']  # teams\r\n    @team = @permissions.readwrite[0] ? 'common'\r\n    if @canWrite()\r\n      @setLanguage codeLanguage\r\n    else if @otherSession and @team is @otherSession.get 'team'\r\n      @setLanguage @otherSession.get('submittedCodeLanguage') or @otherSession.get('codeLanguage')\r\n    else\r\n      @setLanguage 'javascript'\r\n\r\n    @source = @originalSource\r\n    @parameters = p.parameters\r\n    if @permissions.readwrite.length and sessionSource = @session.getSourceFor(@spellKey)\r\n      if sessionSource isnt '// Should fill in some default source\\n'  # TODO: figure out why session is getting this default source in there and stop it\r\n        @source = sessionSource\r\n    if p.aiSource and not @otherSession and not @canWrite()\r\n      @source = @originalSource = p.aiSource\r\n      @isAISource = true\r\n\r\n  destroy: ->\r\n    @view?.destroy()\r\n    @topBarView?.destroy()\r\n    @thang = null\r\n    @worker = null\r\n\r\n  setLanguage: (@language) ->\r\n    @language = 'html' if @level.isType('web-dev')\r\n    @displayCodeLanguage = utils.capitalLanguages[@language]\r\n    @originalSource = @languages[@language] ? @languages.javascript\r\n    @originalSource = @addPicoCTFProblem() if window.serverConfig.picoCTF\r\n\r\n    if @level.isType('web-dev')\r\n      # Pull apart the structural wrapper code and the player code, remember the wrapper code, and strip indentation on player code.\r\n      playerCode = utils.extractPlayerCodeTag(@originalSource)\r\n      @wrapperCode = @originalSource.replace /<playercode>[\\s\\S]*<\\/playercode>/, '☃'  # ☃ serves as placeholder for constructHTML\r\n      @originalSource = playerCode\r\n\r\n    # Translate comments chosen spoken language.\r\n    return unless @commentContext\r\n    context = $.extend true, {}, @commentContext\r\n    if @commentI18N\r\n      spokenLanguage = me.get 'preferredLanguage'\r\n      while spokenLanguage\r\n        spokenLanguage = spokenLanguage.substr 0, spokenLanguage.lastIndexOf('-') if fallingBack?\r\n        if spokenLanguageContext = @commentI18N[spokenLanguage]?.context\r\n          context = _.merge context, spokenLanguageContext\r\n          break\r\n        fallingBack = true\r\n    try\r\n      @originalSource = _.template @originalSource, context\r\n      @wrapperCode = _.template @wrapperCode, context\r\n    catch e\r\n      console.error \"Couldn't create example code template of\", @originalSource, \"\\nwith context\", context, \"\\nError:\", e\r\n\r\n    if /loop/.test(@originalSource) and @level.isType('course', 'course-ladder')\r\n      # Temporary hackery to make it look like we meant while True: in our sample code until we can update everything\r\n      @originalSource = switch @language\r\n        when 'python' then @originalSource.replace /loop:/, 'while True:'\r\n        when 'javascript' then @originalSource.replace /loop {/, 'while (true) {'\r\n        when 'lua' then @originalSource.replace /loop\\n/, 'while true then\\n'\r\n        when 'coffeescript' then @originalSource\r\n        else @originalSource\r\n\r\n  constructHTML: (source) ->\r\n    @wrapperCode.replace '☃', source\r\n\r\n  addPicoCTFProblem: ->\r\n    return @originalSource unless problem = @level.picoCTFProblem\r\n    description = \"\"\"\r\n      -- #{problem.name} --\r\n      #{problem.description}\r\n    \"\"\".replace /<p>(.*?)<\\/p>/gi, '$1'\r\n    (\"// #{line}\" for line in description.split('\\n')).join('\\n') + '\\n' + @originalSource\r\n\r\n  addThang: (thang) ->\r\n    if @thang?.thang.id is thang.id\r\n      @thang.thang = thang\r\n    else\r\n      @thang = {thang: thang, aether: @createAether(thang), castAether: null}\r\n\r\n  removeThangID: (thangID) ->\r\n    @thang = null if @thang?.thang.id is thangID\r\n\r\n  canRead: (team) ->\r\n    (team ? me.team) in @permissions.read or (team ? me.team) in @permissions.readwrite\r\n\r\n  canWrite: (team) ->\r\n    (team ? me.team) in @permissions.readwrite\r\n\r\n  getSource: ->\r\n    @view?.getSource() ? @source\r\n\r\n  transpile: (source) ->\r\n    if source\r\n      @source = source\r\n    else\r\n      source = @getSource()\r\n    unless @language is 'html'\r\n      @thang?.aether.transpile source\r\n    null\r\n\r\n  # NOTE: By default, I think this compares the current source code with the source *last saved to the server* (not the last time it was run)\r\n  hasChanged: (newSource=null, currentSource=null) ->\r\n    (newSource ? @originalSource) isnt (currentSource ? @source)\r\n\r\n  hasChangedSignificantly: (newSource=null, currentSource=null, cb) ->\r\n    unless aether = @thang?.aether\r\n      console.error @toString(), 'couldn\\'t find a spellThang with aether', @thang\r\n      cb false\r\n    if @worker\r\n      workerMessage =\r\n        function: 'hasChangedSignificantly'\r\n        a: (newSource ? @originalSource)\r\n        spellKey: @spellKey\r\n        b: (currentSource ? @source)\r\n        careAboutLineNumbers: true\r\n        careAboutLint: true\r\n      @worker.addEventListener 'message', (e) =>\r\n        workerData = JSON.parse e.data\r\n        if workerData.function is 'hasChangedSignificantly' and workerData.spellKey is @spellKey\r\n          @worker.removeEventListener 'message', arguments.callee, false\r\n          cb(workerData.hasChanged)\r\n      @worker.postMessage JSON.stringify(workerMessage)\r\n    else\r\n      cb(aether.hasChangedSignificantly((newSource ? @originalSource), (currentSource ? @source), true, true))\r\n\r\n  createAether: (thang) ->\r\n    writable = @permissions.readwrite.length > 0 and not @isAISource\r\n    skipProtectAPI = @skipProtectAPI or not writable or @level.isType('game-dev')\r\n    problemContext = @createProblemContext thang\r\n    includeFlow = @level.isType('hero', 'hero-ladder', 'hero-coop', 'course', 'course-ladder', 'game-dev') and not skipProtectAPI\r\n    aetherOptions = createAetherOptions\r\n      functionName: @name\r\n      codeLanguage: @language\r\n      functionParameters: @parameters\r\n      skipProtectAPI: skipProtectAPI\r\n      includeFlow: includeFlow\r\n      problemContext: problemContext\r\n      useInterpreter: true\r\n    aether = new Aether aetherOptions\r\n    if @worker\r\n      workerMessage =\r\n        function: 'createAether'\r\n        spellKey: @spellKey\r\n        options: aetherOptions\r\n      @worker.postMessage JSON.stringify workerMessage\r\n    aether\r\n\r\n  updateLanguageAether: (@language) ->\r\n    @thang?.aether?.setLanguage @language\r\n    @thang?.castAether = null\r\n    Backbone.Mediator.publish 'tome:spell-changed-language', spell: @, language: @language\r\n    if @worker\r\n      workerMessage =\r\n        function: 'updateLanguageAether'\r\n        newLanguage: @language\r\n      @worker.postMessage JSON.stringify workerMessage\r\n    @transpile()\r\n\r\n  toString: ->\r\n    \"<Spell: #{@spellKey}>\"\r\n\r\n  createProblemContext: (thang) ->\r\n    # Create problemContext Aether can use to craft better error messages\r\n    # stringReferences: values that should be referred to as a string instead of a variable (e.g. \"Brak\", not Brak)\r\n    # thisMethods: methods available on the 'this' object\r\n    # thisProperties: properties available on the 'this' object\r\n    # commonThisMethods: methods that are available sometimes, but not awlays\r\n\r\n    # NOTE: Assuming the first createProblemContext call has everything we need, and we'll use that forevermore\r\n    return @problemContext if @problemContext?\r\n\r\n    @problemContext = { stringReferences: [], thisMethods: [], thisProperties: [] }\r\n    # TODO: These should be read from the database\r\n    @problemContext.commonThisMethods = ['moveRight', 'moveLeft', 'moveUp', 'moveDown', 'attack', 'findNearestEnemy', 'buildXY', 'moveXY', 'say', 'move', 'distance', 'findEnemies', 'findFriends', 'addFlag', 'findFlag', 'removeFlag', 'findFlags', 'attackRange', 'cast', 'buildTypes', 'jump', 'jumpTo', 'attackXY']\r\n    return @problemContext unless thang?\r\n\r\n    # Populate stringReferences\r\n    for key, value of thang.world?.thangMap\r\n      if (value.isAttackable or value.isSelectable) and value.id not in @problemContext.stringReferences\r\n        @problemContext.stringReferences.push value.id\r\n\r\n    # Populate thisMethods and thisProperties\r\n    if thang.programmableProperties?\r\n      for prop in thang.programmableProperties\r\n        if _.isFunction(thang[prop])\r\n          @problemContext.thisMethods.push prop\r\n        else\r\n          @problemContext.thisProperties.push prop\r\n\r\n    # TODO: See SpellPaletteView.createPalette() for other interesting contextual properties\r\n\r\n    @problemContext\r\n\r\n  reloadCode: ->\r\n    # We pressed the reload button. Fetch our original source again in case it changed.\r\n    return unless programmableMethod = @thang?.thang?.programmableMethods?[@name]\r\n    @createFromProgrammableMethod programmableMethod, @language\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/tome/spell_debug'\r\nace = require 'ace'\r\nRange = ace.require('ace/range').Range\r\nTokenIterator = ace.require('ace/token_iterator').TokenIterator\r\nserializedClasses =\r\n  Thang: require 'lib/world/thang'\r\n  Vector: require 'lib/world/vector'\r\n  Rectangle: require 'lib/world/rectangle'\r\n  Ellipse: require 'lib/world/ellipse'\r\n  LineSegment: require 'lib/world/line_segment'\r\n\r\nmodule.exports = class SpellDebugView extends CocoView\r\n  className: 'spell-debug-view'\r\n  template: template\r\n\r\n  subscriptions:\r\n    'god:new-world-created': 'onNewWorld'\r\n    'god:debug-value-return': 'handleDebugValue'\r\n    'god:debug-world-load-progress-changed': 'handleWorldLoadProgressChanged'\r\n    'tome:cast-spells': 'onTomeCast'\r\n    'surface:frame-changed': 'onFrameChanged'\r\n    'tome:spell-has-changed-significantly-calculation': 'onSpellChangedCalculation'\r\n\r\n  events: {}\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @ace = options.ace\r\n    @thang = options.thang\r\n    @spell = options.spell\r\n    @progress = 0\r\n    @variableStates = {}\r\n    @globals = {Math: Math, _: _, String: String, Number: Number, Array: Array, Object: Object}  # ... add more as documented\r\n    for className, serializedClass of serializedClasses\r\n      @globals[className] = serializedClass\r\n\r\n    @onMouseMove = _.throttle @onMouseMove, 25\r\n    @cache = {}\r\n    @lastFrameRequested = -1\r\n    @workerIsSimulating = false\r\n    @spellHasChanged = false\r\n    @currentFrame = 0\r\n    @frameRate = 10 #only time it won't be set is at very beginning\r\n    @debouncedTooltipUpdate = _.debounce @updateTooltipProgress, 100\r\n\r\n  pad2: (num) ->\r\n    if not num? or num is 0 then '00' else ((if num < 10 then '0' else '') + num)\r\n\r\n  calculateCurrentTimeString: =>\r\n    time = @currentFrame / @frameRate\r\n    mins = Math.floor(time / 60)\r\n    secs = (time - mins * 60).toFixed(1)\r\n    \"#{mins}:#{@pad2 secs}\"\r\n\r\n  setTooltipKeyAndValue: (key, value) =>\r\n    @hideProgressBarAndShowText()\r\n    message = \"Time: #{@calculateCurrentTimeString()}\\n#{key}: #{value}\"\r\n    @$el.find('code').text message\r\n    @$el.show().css(@pos)\r\n\r\n  setTooltipText: (text) =>\r\n    #perhaps changing styling here in the future\r\n    @hideProgressBarAndShowText()\r\n    @$el.find('code').text text\r\n    @$el.show().css(@pos)\r\n\r\n  setTooltipProgress: (progress) =>\r\n    @showProgressBarAndHideText()\r\n    @$el.find('.progress-bar').css('width', progress + '%').attr 'aria-valuenow', progress\r\n    @$el.show().css(@pos)\r\n\r\n  showProgressBarAndHideText: ->\r\n    @$el.find('pre').css('display', 'none')\r\n    @$el.find('.progress').css('display', 'block')\r\n\r\n  hideProgressBarAndShowText: ->\r\n    @$el.find('pre').css('display', 'block')\r\n    @$el.find('.progress').css('display', 'none')\r\n\r\n  onTomeCast: ->\r\n    @invalidateCache()\r\n\r\n  invalidateCache: -> @cache = {}\r\n\r\n  retrieveValueFromCache: (thangID, spellID, variableChain, frame) ->\r\n    joinedVariableChain = variableChain.join()\r\n    value = @cache[frame]?[thangID]?[spellID]?[joinedVariableChain]\r\n    return value ? undefined\r\n\r\n  updateCache: (thangID, spellID, variableChain, frame, value) ->\r\n    currentObject = @cache\r\n    keys = [frame, thangID, spellID, variableChain.join()]\r\n    for keyIndex in [0...(keys.length - 1)]\r\n      key = keys[keyIndex]\r\n      unless key of currentObject\r\n        currentObject[key] = {}\r\n      currentObject = currentObject[key]\r\n    currentObject[keys[keys.length - 1]] = value\r\n\r\n  handleDebugValue: (e) ->\r\n    {key, value} = e\r\n    @workerIsSimulating = false\r\n    @updateCache(@thang.id, @spell.name, key.split('.'), @lastFrameRequested, value)\r\n    if @variableChain and not key is @variableChain.join('.') then return\r\n    @setTooltipKeyAndValue(key, value)\r\n\r\n  handleWorldLoadProgressChanged: (e) ->\r\n    @progress = e.progress\r\n\r\n  afterRender: ->\r\n    super()\r\n    @ace.on 'mousemove', @onMouseMove\r\n\r\n  setVariableStates: (@variableStates) ->\r\n    @update()\r\n\r\n  isIdentifier: (t) ->\r\n    t and (t.type is 'identifier' or t.value is 'this' or @globals[t.value])\r\n\r\n  onMouseMove: (e) =>\r\n    return if @destroyed\r\n    pos = e.getDocumentPosition()\r\n    it = new TokenIterator e.editor.session, pos.row, pos.column\r\n    endOfLine = it.getCurrentToken()?.index is it.$rowTokens.length - 1\r\n    while it.getCurrentTokenRow() is pos.row and not @isIdentifier(token = it.getCurrentToken())\r\n      break if endOfLine or not token  # Don't iterate beyond end or beginning of line\r\n      it.stepBackward()\r\n    if @isIdentifier token\r\n      # This could be a property access, like 'enemy.target.pos' or 'this.spawnedRectangles'.\r\n      # We have to realize this and dig into the nesting of the objects.\r\n      start = it.getCurrentTokenColumn()\r\n      [chain, start, end] = [[token.value], start, start + token.value.length]\r\n      while it.getCurrentTokenRow() is pos.row\r\n        it.stepBackward()\r\n        break unless it.getCurrentToken()?.value is '.'\r\n        it.stepBackward()\r\n        token = null  # If we're doing a complex access like this.getEnemies().length, then length isn't a valid var.\r\n        break unless @isIdentifier(prev = it.getCurrentToken())\r\n        token = prev\r\n        start = it.getCurrentTokenColumn()\r\n        chain.unshift token.value\r\n    #Highlight all tokens, so true overrides all other conditions TODO: Refactor this later\r\n    if token and (true or token.value of @variableStates or token.value is 'this' or @globals[token.value])\r\n      @variableChain = chain\r\n      offsetX = e.domEvent.offsetX ? e.clientX - $(e.domEvent.target).offset().left\r\n      offsetY = e.domEvent.offsetY ? e.clientY - $(e.domEvent.target).offset().top\r\n      w = $(document).width()\r\n      offsetX = w - $(e.domEvent.target).offset().left - 300 if e.clientX + 300 > w\r\n      @pos = {left: offsetX + 50, top: offsetY + 20}\r\n      @markerRange = new Range pos.row, start, pos.row, end\r\n    else\r\n      @variableChain = @markerRange = null\r\n    @update()\r\n\r\n  onMouseOut: (e) ->\r\n    @variableChain = @markerRange = null\r\n    @update()\r\n\r\n  updateTooltipProgress: =>\r\n    if @variableChain and @progress < 1\r\n      @setTooltipProgress(@progress * 100)\r\n      _.delay @updateTooltipProgress, 100\r\n\r\n  onNewWorld: (e) ->\r\n    @thang = @options.thang = e.world.thangMap[@thang.id] if @thang\r\n    @frameRate = e.world.frameRate\r\n\r\n  onFrameChanged: (data) ->\r\n    @currentFrame = Math.round(data.frame)\r\n    @frameRate = data.world.frameRate\r\n\r\n  onSpellChangedCalculation: (data) ->\r\n    @spellHasChanged = data.hasChangedSignificantly\r\n\r\n  update: ->\r\n    if @variableChain\r\n      if @spellHasChanged\r\n        @setTooltipText('You\\'ve changed this spell! \\nPlease recast to use the hover debugger.')\r\n      else if @variableChain.length is 2 and @variableChain[0] is 'this'\r\n        @setTooltipKeyAndValue(@variableChain.join('.'), @stringifyValue(@thang[@variableChain[1]], 0))\r\n      else if @variableChain.length is 1 and Aether.globals[@variableChain[0]]\r\n        @setTooltipKeyAndValue(@variableChain.join('.'), @stringifyValue(Aether.globals[@variableChain[0]], 0))\r\n      else if @workerIsSimulating and @progress < 1\r\n        @debouncedTooltipUpdate()\r\n      else if @currentFrame is @lastFrameRequested and (cacheValue = @retrieveValueFromCache(@thang.id, @spell.name, @variableChain, @currentFrame))\r\n        @setTooltipKeyAndValue(@variableChain.join('.'), cacheValue)\r\n      else\r\n        Backbone.Mediator.publish 'tome:spell-debug-value-request',\r\n          thangID: @thang.id\r\n          spellID: @spell.name\r\n          variableChain: @variableChain\r\n          frame: @currentFrame\r\n        if @currentFrame isnt @lastFrameRequested then @workerIsSimulating = true\r\n        @lastFrameRequested = @currentFrame\r\n        @progress = 0\r\n        @debouncedTooltipUpdate()\r\n    else\r\n      @$el.hide()\r\n    if @variableChain?.length is 2\r\n      clearTimeout @hoveredPropertyTimeout if @hoveredPropertyTimeout\r\n      @hoveredPropertyTimeout = _.delay @notifyPropertyHovered, 500\r\n    else\r\n      @notifyPropertyHovered()\r\n    @updateMarker()\r\n\r\n  stringifyValue: (value, depth) ->\r\n    return value if not value or _.isString value\r\n    if _.isFunction value\r\n      return if depth is 2 then undefined else '<Function>'\r\n    return \"<this #{value.id}>\" if value is @thang and depth\r\n    if depth is 2\r\n      if value.constructor?.className is 'Thang'\r\n        value = \"<#{value.type or value.spriteName} - #{value.id}, #{if value.pos then value.pos.toString() else 'non-physical'}>\"\r\n      else\r\n        value = value.toString()\r\n      return value\r\n\r\n    isArray = _.isArray value\r\n    isObject = _.isObject value\r\n    return value.toString() unless isArray or isObject\r\n    brackets = if isArray then ['[', ']'] else ['{', '}']\r\n    size = _.size value\r\n    return brackets.join '' unless size\r\n    values = []\r\n    if isArray\r\n      for v in value\r\n        s = @stringifyValue(v, depth + 1)\r\n        values.push '' + s unless s is undefined\r\n    else\r\n      for key in value.apiProperties ? _.keys value\r\n        s = @stringifyValue(value[key], depth + 1)\r\n        values.push key + ': ' + s unless s is undefined\r\n    sep = '\\n' + ('  ' for i in [0 ... depth]).join('')\r\n    prefix = value.constructor?.className\r\n    prefix ?= 'Array' if isArray\r\n    prefix ?= 'Object' if isObject\r\n    prefix = if prefix then prefix + ' ' else ''\r\n    return \"#{prefix}#{brackets[0]}#{sep}  #{values.join(sep + '  ')}#{sep}#{brackets[1]}\"\r\n  notifyPropertyHovered: =>\r\n    clearTimeout @hoveredPropertyTimeout if @hoveredPropertyTimeout\r\n    @hoveredPropertyTimeout = null\r\n    oldHoveredProperty = @hoveredProperty\r\n    @hoveredProperty = if @variableChain?.length is 2 then owner: @variableChain[0], property: @variableChain[1] else {}\r\n    unless _.isEqual oldHoveredProperty, @hoveredProperty\r\n      Backbone.Mediator.publish 'tome:spell-debug-property-hovered', @hoveredProperty\r\n\r\n  updateMarker: ->\r\n    if @marker\r\n      @ace.getSession().removeMarker @marker\r\n      @marker = null\r\n    if @markerRange\r\n      @marker = @ace.getSession().addMarker @markerRange, 'ace_bracket', 'text'\r\n\r\n\r\n  destroy: ->\r\n    @ace?.removeEventListener 'mousemove', @onMouseMove\r\n    super()\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/tome/spell_palette_entry'\r\n{me} = require 'core/auth'\r\nfilters = require 'lib/image_filter'\r\nDocFormatter = require './DocFormatter'\r\nace = require 'ace'\r\nutils = require 'core/utils'\r\n\r\nmodule.exports = class SpellPaletteEntryView extends CocoView\r\n  tagName: 'div'  # Could also try <code> instead of <div>, but would need to adjust colors\r\n  className: 'spell-palette-entry-view'\r\n  template: template\r\n  popoverPinned: false\r\n  overridePopoverTemplate: '<div class=\"popover spell-palette-popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>'\r\n\r\n  subscriptions:\r\n    'surface:frame-changed': 'onFrameChanged'\r\n    'tome:palette-hovered': 'onPaletteHovered'\r\n    'tome:palette-clicked': 'onPaletteClicked'\r\n    'tome:palette-pin-toggled': 'onPalettePinToggled'\r\n    'tome:spell-debug-property-hovered': 'onSpellDebugPropertyHovered'\r\n\r\n  events:\r\n    'mouseenter': 'onMouseEnter'\r\n    'mouseleave': 'onMouseLeave'\r\n    'click': 'onClick'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @thang = options.thang\r\n    @docFormatter = new DocFormatter options\r\n    @doc = @docFormatter.doc\r\n    @doc.initialHTML = @docFormatter.formatPopover()\r\n    @aceEditors = []\r\n\r\n  afterRender: ->\r\n    super()\r\n    @$el.addClass _.string.slugify @doc.type\r\n\r\n  resetPopoverContent: ->\r\n    #@$el.data('bs.popover').options.content = @docFormatter.formatPopover()\r\n    #@$el.popover('setContent')\r\n\r\n  onMouseEnter: (e) ->\r\n    return if @popoverPinned or @otherPopoverPinned\r\n    #@resetPopoverContent()\r\n    #@$el.popover 'show'\r\n\r\n  onMouseLeave: (e) ->\r\n    #@$el.popover 'hide' unless @popoverPinned or @otherPopoverPinned\r\n\r\n  togglePinned: ->\r\n    if @popoverPinned\r\n      @popoverPinned = false\r\n      @$el.add('.spell-palette-popover.popover').removeClass 'pinned'\r\n      $('.spell-palette-popover.popover .close').remove()\r\n      @$el.popover 'hide'\r\n      @playSound 'spell-palette-entry-unpin'\r\n    else\r\n      @popoverPinned = true\r\n      @resetPopoverContent()\r\n      @$el.add('.spell-palette-popover.popover').addClass 'pinned'\r\n      @$el.popover 'show'\r\n      x = $('<button type=\"button\" data-dismiss=\"modal\" aria-hidden=\"true\" class=\"close\">×</button>')\r\n      $('.spell-palette-popover.popover').append x\r\n      x.on 'click', @onClick\r\n      @playSound 'spell-palette-entry-pin'\r\n    Backbone.Mediator.publish 'tome:palette-pin-toggled', entry: @, pinned: @popoverPinned\r\n\r\n  onPaletteClicked: (e) =>\r\n    @$el.toggleClass('selected', e.prop is @doc.name)\r\n\r\n  onClick: (e) =>\r\n    if key.shift\r\n      Backbone.Mediator.publish 'tome:insert-snippet', doc: @options.doc, language: @options.language, formatted: @doc\r\n      return\r\n    #@togglePinned()\r\n    Backbone.Mediator.publish 'tome:palette-clicked', thang: @thang, prop: @doc.name, entry: @\r\n\r\n  onFrameChanged: (e) ->\r\n    return unless e.selectedThang?.id is @thang.id\r\n    @options.thang = @thang = @docFormatter.options.thang = e.selectedThang  # Update our thang to the current version\r\n\r\n  onPaletteHovered: (e) ->\r\n    return if e.entry is @\r\n    @togglePinned() if @popoverPinned\r\n\r\n  onPalettePinToggled: (e) ->\r\n    return if e.entry is @\r\n    @otherPopoverPinned = e.pinned\r\n\r\n  onSpellDebugPropertyHovered: (e) ->\r\n    matched = e.property is @doc.name and e.owner is @doc.owner\r\n    if matched and not @debugHovered\r\n      @debugHovered = true\r\n      @togglePinned() unless @popoverPinned\r\n    else if @debugHovered and not matched\r\n      @debugHovered = false\r\n      @togglePinned() if @popoverPinned\r\n    null\r\n\r\n  destroy: ->\r\n    $('.popover.pinned').remove() if @popoverPinned  # @$el.popover('destroy') doesn't work\r\n    @togglePinned() if @popoverPinned\r\n    @$el.popover 'destroy'\r\n    @$el.off()\r\n    oldEditor.destroy() for oldEditor in @aceEditors\r\n    super()\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/tome/spell-palette-thang-entry'\r\npopoverTemplate = require 'templates/play/level/tome/spell_palette_entry_popover'\r\n{me} = require 'core/auth'\r\nfilters = require 'lib/image_filter'\r\nDocFormatter = require './DocFormatter'\r\nutils = require 'core/utils'\r\n\r\nmodule.exports = class SpellPaletteThangEntryView extends CocoView\r\n  tagName: 'div'  # Could also try <code> instead of <div>, but would need to adjust colors\r\n  className: 'spell-palette-thang-entry-view'\r\n  template: template\r\n \r\n  subscriptions:\r\n    'surface:frame-changed': 'onFrameChanged'\r\n    'tome:palette-hovered': 'onPaletteHovered'\r\n    'tome:palette-clicked': 'onPaletteClicked'\r\n    'tome:spell-debug-property-hovered': 'onSpellDebugPropertyHovered'\r\n\r\n  events:\r\n    'mouseenter': 'onMouseEnter'\r\n    'mouseleave': 'onMouseLeave'\r\n    'click': 'onClick'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @thang = options.thang\r\n    if options.doc.example?\r\n      example = options.doc.example?[options.language]\r\n    else\r\n      example = \"\\# usage code \\ngame.spawnXY(\\\"#{options.buildableName}\\\", 21, 20)\"\r\n    @doc =\r\n      name: options.buildableName\r\n      initialHTML: popoverTemplate _: _, marked: marked, doc:\r\n        #shortName: @thang.get('name')\r\n        shortName: options.doc.name\r\n        type: \"spawnable\"\r\n        description: \"![#{@thang.get('name')}](#{@thang.getPortraitURL()}) #{options.doc.description}\"\r\n        example: example\r\n      example: example\r\n\r\n    #@aceEditors = []\r\n\r\n  afterRender: ->\r\n    super()\r\n    #@$el.addClass _.string.slugify @doc.type\r\n\r\n  resetPopoverContent: ->\r\n    #@$el.data('bs.popover').options.content = @docFormatter.formatPopover()\r\n    #@$el.popover('setContent')\r\n\r\n  onMouseEnter: (e) ->\r\n    return if @popoverPinned or @otherPopoverPinned\r\n    #@resetPopoverContent()\r\n    #@$el.popover 'show'\r\n\r\n  onMouseLeave: (e) ->\r\n    #@$el.popover 'hide' unless @popoverPinned or @otherPopoverPinned\r\n\r\n\r\n  onPaletteClicked: (e) =>\r\n    @$el.toggleClass('selected', e.prop is @doc.name)\r\n\r\n  onClick: (e) =>\r\n    if key.shift\r\n      Backbone.Mediator.publish 'tome:insert-snippet', doc: @options.doc, language: @options.language, formatted: @doc\r\n      return\r\n    Backbone.Mediator.publish 'tome:palette-clicked', thang: @thang, prop: @doc.name, entry: @\r\n\r\n  onFrameChanged: (e) ->\r\n    #return unless e.selectedThang?.id is @thang.id\r\n    #@options.thang = @thang = @docFormatter.options.thang = e.selectedThang  # Update our thang to the current version\r\n\r\n  onPaletteHovered: (e) ->\r\n    return if e.entry is @\r\n\r\n  onSpellDebugPropertyHovered: (e) ->\r\n    matched = e.property is @doc.name and e.owner is @doc.owner\r\n    if matched and not @debugHovered\r\n      @debugHovered = true\r\n      @togglePinned() unless @popoverPinned\r\n    else if @debugHovered and not matched\r\n      @debugHovered = false\r\n      @togglePinned() if @popoverPinned\r\n    null\r\n\r\n  destroy: ->\r\n    @$el.off()\r\n    oldEditor.destroy() for oldEditor in @aceEditors\r\n    super()\r\n","CocoView = require 'views/core/CocoView'\r\n{me} = require 'core/auth'\r\nfilters = require 'lib/image_filter'\r\nSpellPaletteEntryView = require './SpellPaletteEntryView'\r\nSpellPaletteThangEntryView = require './SpellPaletteThangEntryView'\r\nLevelComponent = require 'models/LevelComponent'\r\nThangType = require 'models/ThangType'\r\nGameMenuModal = require 'views/play/menu/GameMenuModal'\r\nLevelSetupManager = require 'lib/LevelSetupManager'\r\nace = require 'ace'\r\nutils = require 'core/utils'\r\n\r\nN_ROWS = 4\r\n\r\nmodule.exports = class SpellPaletteView extends CocoView\r\n  id: 'spell-palette-view'\r\n  template: require 'templates/play/level/tome/spell-palette-view'\r\n  controlsEnabled: true\r\n\r\n  subscriptions:\r\n    'level:disable-controls': 'onDisableControls'\r\n    'level:enable-controls': 'onEnableControls'\r\n    'surface:frame-changed': 'onFrameChanged'\r\n    'tome:change-language': 'onTomeChangedLanguage'\r\n    'tome:palette-clicked': 'onPalleteClick'\r\n    'surface:stage-mouse-down': 'hide'\r\n    'level:set-playing': 'hide'\r\n    \r\n\r\n  events:\r\n    'click #spell-palette-help-button': 'onClickHelp'\r\n    'click .closeBtn': 'onClickClose'\r\n    'click .section-header': 'onSectionHeaderClick'\r\n\r\n  initialize: (options) ->\r\n    {@level, @session, @thang, @useHero} = options\r\n    @aceEditors = []\r\n    docs = @options.level.get('documentation') ? {}\r\n    @showsHelp = docs.specificArticles?.length or docs.generalArticles?.length\r\n    @createPalette()\r\n    $(window).on 'resize', @onResize\r\n    console.log \"My thang is\", @thang\r\n\r\n  getRenderData: ->\r\n    c = super()\r\n    c.entryGroups = @entryGroups\r\n    c.entryGroupSlugs = @entryGroupSlugs\r\n    c.entryGroupNames = @entryGroupNames\r\n    c.tabbed = _.size(@entryGroups) > 1\r\n    c.defaultGroupSlug = @defaultGroupSlug\r\n    c.showsHelp = @showsHelp\r\n    c.tabs = @tabs  # For hero-based, non-this-owned tabs like Vector, Math, etc.\r\n    c.thisName = {coffeescript: '@', lua: 'self', python: 'self', java: 'hero'}[@options.language] or 'this'\r\n    c._ = _\r\n    c\r\n\r\n  afterRender: ->\r\n    super()\r\n    if @entryGroupSlugs\r\n      for group, entries of @entryGroups\r\n        groupSlug = @entryGroupSlugs[group]\r\n        for columnNumber, entryColumn of entries\r\n          col = $('<div class=\"property-entry-column\"></div>').appendTo @$el.find(\".properties-#{groupSlug}\")\r\n          for entry in entryColumn\r\n            col.append entry.el\r\n            entry.render()  # Render after appending so that we can access parent container for popover\r\n      @$('.nano').nanoScroller alwaysVisible: true\r\n      @updateCodeLanguage @options.language\r\n    else\r\n      @entryGroupElements = {}\r\n      for group, entries of @entryGroups\r\n        @entryGroupElements[group] = itemGroup = $('<div class=\"property-entry-item-group\"></div>').appendTo @$el.find('.properties-this')\r\n        if entries[0].options.item?.getPortraitURL\r\n          itemImage = $('<img class=\"item-image\" draggable=false></img>').attr('src', entries[0].options.item.getPortraitURL())\r\n          itemGroup.append itemImage\r\n          firstEntry = entries[0]\r\n          do (firstEntry) ->\r\n            itemImage.on \"mouseenter\", (e) -> firstEntry.onMouseEnter e\r\n            itemImage.on \"mouseleave\", (e) -> firstEntry.onMouseLeave e\r\n        for entry, entryIndex in entries\r\n          itemGroup.append entry.el\r\n          entry.render()  # Render after appending so that we can access parent container for popover\r\n          if entries.length is 1\r\n            entry.$el.addClass 'single-entry'\r\n          if entryIndex is 0\r\n            entry.$el.addClass 'first-entry'\r\n      for tab, entries of @tabs or {}\r\n        tabSlug = _.string.slugify tab\r\n        itemsInGroup = 0\r\n        for entry, entryIndex in entries\r\n          if itemsInGroup is 0 or (itemsInGroup is 2 and entryIndex isnt entries.length - 1)\r\n            itemGroup = $('<div class=\"property-entry-item-group\"></div>').appendTo @$el.find(\".properties-#{tabSlug}\")\r\n            itemsInGroup = 0\r\n          ++itemsInGroup\r\n          itemGroup.append entry.el\r\n          entry.render()  # Render after appending so that we can access parent container for popover\r\n          if itemsInGroup is 0\r\n            entry.$el.addClass 'first-entry'\r\n      @$el.addClass 'hero'\r\n      @$el.toggleClass 'shortenize', Boolean @shortenize\r\n      @$el.toggleClass 'web-dev', @options.level.isType('web-dev')\r\n\r\n    tts = @supermodel.getModels ThangType\r\n    console.log @deferredDocs\r\n\r\n    for dn of @deferredDocs\r\n      doc = @deferredDocs[dn]\r\n      if doc.type is \"spawnable\"\r\n        thangName = doc.name\r\n        if @thang.spawnAliases[thangName]\r\n          thangName = @thang.spawnAliases[thangName][0]\r\n\r\n        info = @thang.buildables[thangName]\r\n        tt = _.find tts, (t) -> t.get('original') is info?.thangType\r\n        continue unless tt?\r\n        t = new SpellPaletteThangEntryView doc: doc, thang: tt, buildable: info, buildableName: doc.name, shortenize: true, language: @options.language, level: @options.level, useHero: @useHero\r\n        @$el.find(\"#palette-tab-stuff-area\").append t.el\r\n        t.render()\r\n\r\n      if doc.type is \"event\"\r\n        t = new SpellPaletteEntryView doc: doc, thang: @thang, shortenize: true, language: @options.language, level: @options.level, useHero: @useHero\r\n        @$el.find(\"#palette-tab-events\").append t.el\r\n        t.render()\r\n\r\n\r\n    @$(\".section-header:has(+.collapse:empty)\").hide()\r\n\r\n  afterInsert: ->\r\n    super()\r\n    _.delay => @$el?.css('bottom', 0) unless $('#spell-view').is('.shown')\r\n\r\n  updateCodeLanguage: (language) ->\r\n    @options.language = language\r\n\r\n  onResize: (e) =>\r\n    @updateMaxHeight?()\r\n\r\n  createPalette: ->\r\n    Backbone.Mediator.publish 'tome:palette-cleared', {thangID: @thang.id}\r\n    lcs = @supermodel.getModels LevelComponent\r\n\r\n    allDocs = {}\r\n    excludedDocs = {}\r\n    for lc in lcs\r\n      for doc in (lc.get('propertyDocumentation') ? [])\r\n        if doc.codeLanguages and not (@options.language in doc.codeLanguages)\r\n          excludedDocs['__' + doc.name] = doc\r\n          continue\r\n        allDocs['__' + doc.name] ?= []\r\n        allDocs['__' + doc.name].push doc\r\n        if doc.type is 'snippet' then doc.owner = 'snippets'\r\n\r\n    if @options.programmable\r\n      propStorage =\r\n        'this': 'programmableProperties'\r\n        more: 'moreProgrammableProperties'\r\n        Math: 'programmableMathProperties'\r\n        Array: 'programmableArrayProperties'\r\n        Object: 'programmableObjectProperties'\r\n        String: 'programmableStringProperties'\r\n        Global: 'programmableGlobalProperties'\r\n        Function: 'programmableFunctionProperties'\r\n        RegExp: 'programmableRegExpProperties'\r\n        Date: 'programmableDateProperties'\r\n        Number: 'programmableNumberProperties'\r\n        JSON: 'programmableJSONProperties'\r\n        LoDash: 'programmableLoDashProperties'\r\n        Vector: 'programmableVectorProperties'\r\n        HTML: 'programmableHTMLProperties'\r\n        WebJavaScript: 'programmableWebJavaScriptProperties'\r\n        jQuery: 'programmableJQueryProperties'\r\n        CSS: 'programmableCSSProperties'\r\n        snippets: 'programmableSnippets'\r\n    else\r\n      propStorage =\r\n        'this': ['apiProperties', 'apiMethods']\r\n    if not @options.level.isType('hero', 'hero-ladder', 'hero-coop', 'course', 'course-ladder', 'game-dev', 'web-dev') or not @options.programmable\r\n      @organizePalette propStorage, allDocs, excludedDocs\r\n    else\r\n      @organizePaletteHero propStorage, allDocs, excludedDocs\r\n\r\n  organizePalette: (propStorage, allDocs, excludedDocs) ->\r\n    count = 0\r\n    propGroups = {}\r\n    for owner, storages of propStorage\r\n      storages = [storages] if _.isString storages\r\n      for storage in storages\r\n        props = _.reject @thang[storage] ? [], (prop) -> prop[0] is '_'  # no private properties\r\n        props = _.uniq props\r\n        added = _.sortBy(props).slice()\r\n        propGroups[owner] = (propGroups[owner] ? []).concat added\r\n        count += added.length\r\n    Backbone.Mediator.publish 'tome:update-snippets', propGroups: propGroups, allDocs: allDocs, language: @options.language\r\n\r\n    @shortenize = count > 6\r\n    tabbify = count >= 10\r\n    @entries = []\r\n    for owner, props of propGroups\r\n      for prop in props\r\n        doc = _.find (allDocs['__' + prop] ? []), (doc) ->\r\n          return true if doc.owner is owner\r\n          return (owner is 'this' or owner is 'more') and (not doc.owner? or doc.owner is 'this')\r\n        if not doc and not excludedDocs['__' + prop]\r\n          console.log 'could not find doc for', prop, 'from', allDocs['__' + prop], 'for', owner, 'of', propGroups\r\n          doc ?= prop\r\n        if doc\r\n          @entries.push @addEntry(doc, @shortenize, owner is 'snippets')\r\n    groupForEntry = (entry) ->\r\n      return 'more' if entry.doc.owner is 'this' and entry.doc.name in (propGroups.more ? [])\r\n      entry.doc.owner\r\n    @entries = _.sortBy @entries, (entry) ->\r\n      order = ['this', 'more', 'Math', 'Vector', 'String', 'Object', 'Array', 'Function', 'HTML', 'CSS', 'WebJavaScript', 'jQuery', 'snippets']\r\n      index = order.indexOf groupForEntry entry\r\n      index = String.fromCharCode if index is -1 then order.length else index\r\n      index += entry.doc.name\r\n    if tabbify and _.find @entries, ((entry) -> entry.doc.owner isnt 'this')\r\n      @entryGroups = _.groupBy @entries, groupForEntry\r\n    else\r\n      i18nKey = if @options.level.isType('hero', 'hero-ladder', 'hero-coop', 'course', 'course-ladder', 'game-dev', 'web-dev') then 'play_level.tome_your_skills' else 'play_level.tome_available_spells'\r\n      defaultGroup = $.i18n.t i18nKey\r\n      @entryGroups = {}\r\n      @entryGroups[defaultGroup] = @entries\r\n      @defaultGroupSlug = _.string.slugify defaultGroup\r\n    @entryGroupSlugs = {}\r\n    @entryGroupNames = {}\r\n    for group, entries of @entryGroups\r\n      @entryGroups[group] = _.groupBy entries, (entry, i) -> Math.floor i / N_ROWS\r\n      @entryGroupSlugs[group] = _.string.slugify group\r\n      @entryGroupNames[group] = group\r\n    if thisName = {coffeescript: '@', lua: 'self', python: 'self'}[@options.language]\r\n      if @entryGroupNames.this\r\n        @entryGroupNames.this = thisName\r\n\r\n  organizePaletteHero: (propStorage, allDocs, excludedDocs) ->\r\n    # Assign any kind of programmable properties to the items that grant them.\r\n    @isHero = true\r\n    itemThangTypes = {}\r\n    itemThangTypes[tt.get('name')] = tt for tt in @supermodel.getModels ThangType  # Also heroes\r\n    propsByItem = {}\r\n    propCount = 0\r\n    itemsByProp = {}\r\n    @deferredDocs = {}\r\n    # Make sure that we get the spellbook first, then the primary hand, then anything else.\r\n    slots = _.sortBy _.keys(@thang.inventoryThangTypeNames ? {}), (slot) ->\r\n      if slot is 'left-hand' then 0 else if slot is 'right-hand' then 1 else 2\r\n    for slot in slots\r\n      thangTypeName = @thang.inventoryThangTypeNames[slot]\r\n      if item = itemThangTypes[thangTypeName]\r\n        unless item.get('components')\r\n          console.error 'Item', item, 'did not have any components when we went to assemble docs.'\r\n        for component in item.get('components') ? [] when component.config\r\n          for owner, storages of propStorage\r\n            if props = component.config[storages]\r\n              for prop in _.sortBy(props) when prop[0] isnt '_' and not itemsByProp[prop]  # no private properties\r\n                continue if prop is 'moveXY' and @options.level.get('slug') is 'slalom'  # Hide for Slalom\r\n                propsByItem[item.get('name')] ?= []\r\n                propsByItem[item.get('name')].push owner: owner, prop: prop, item: item\r\n                itemsByProp[prop] = item\r\n                ++propCount\r\n      else\r\n        console.log @thang.id, \"couldn't find item ThangType for\", slot, thangTypeName\r\n\r\n    # Get any Math-, Vector-, etc.-owned properties into their own tabs\r\n    for owner, storage of propStorage when not (owner in ['this', 'more', 'snippets', 'HTML', 'CSS', 'WebJavaScript', 'jQuery'])\r\n      continue unless @thang[storage]?.length\r\n      @tabs ?= {}\r\n      @tabs[owner] = []\r\n      programmaticonName = @thang.inventoryThangTypeNames['programming-book']\r\n      programmaticon = itemThangTypes[programmaticonName]\r\n      sortedProps = @thang[storage].slice().sort()\r\n      for prop in sortedProps\r\n        if doc = _.find (allDocs['__' + prop] ? []), {owner: owner}  # Not all languages have all props\r\n          entry = @addEntry doc, false, false, programmaticon\r\n          @tabs[owner].push entry\r\n\r\n    # Assign any unassigned properties to the hero itself.\r\n    for owner, storage of propStorage\r\n      continue unless owner in ['this', 'more', 'snippets', 'HTML', 'CSS', 'WebJavaScript', 'jQuery']\r\n      for prop in _.reject(@thang[storage] ? [], (prop) -> itemsByProp[prop] or prop[0] is '_')  # no private properties\r\n        continue if prop is 'say' and @options.level.get 'hidesSay'  # Hide for Dungeon Campaign\r\n        continue if prop is 'moveXY' and @options.level.get('slug') is 'slalom'  # Hide for Slalom\r\n        propsByItem['Hero'] ?= []\r\n        propsByItem['Hero'].push owner: owner, prop: prop, item: itemThangTypes[@thang.spriteName]\r\n        ++propCount\r\n\r\n    Backbone.Mediator.publish 'tome:update-snippets', propGroups: propsByItem, allDocs: allDocs, language: @options.language\r\n\r\n    @shortenize = propCount > 6\r\n    @entries = []\r\n    for itemName, props of propsByItem\r\n      for prop, propIndex in props\r\n        item = prop.item\r\n        owner = prop.owner\r\n        prop = prop.prop\r\n        doc = _.find (allDocs['__' + prop] ? []), (doc) ->\r\n          return true if doc.owner is owner\r\n          return (owner is 'this' or owner is 'more') and (not doc.owner? or doc.owner is 'this')\r\n        if not doc and not excludedDocs['__' + prop]\r\n          console.log 'could not find doc for', prop, 'from', allDocs['__' + prop], 'for', owner, 'of', propsByItem, 'with item', item\r\n          doc ?= prop\r\n        if doc\r\n          if doc.type in ['spawnable', 'event']\r\n            @deferredDocs[doc.name] = doc\r\n          else\r\n            @entries.push @addEntry(doc, @shortenize, owner is 'snippets', item, propIndex > 0)\r\n    if @options.level.isType('web-dev')\r\n      @entryGroups = _.groupBy @entries, (entry) -> entry.doc.type\r\n    else\r\n      @entryGroups = _.groupBy @entries, (entry) -> itemsByProp[entry.doc.name]?.get('name') ? 'Hero'\r\n    iOSEntryGroups = {}\r\n    for group, entries of @entryGroups\r\n      iOSEntryGroups[group] =\r\n        item: {name: group, imageURL: itemThangTypes[group]?.getPortraitURL()}\r\n        props: (entry.doc for entry in entries)\r\n    Backbone.Mediator.publish 'tome:palette-updated', thangID: @thang.id, entryGroups: JSON.stringify(iOSEntryGroups)\r\n\r\n  addEntry: (doc, shortenize, isSnippet=false, item=null, showImage=false) ->\r\n    writable = (if _.isString(doc) then doc else doc.name) in (@thang.apiUserProperties ? [])\r\n    new SpellPaletteEntryView doc: doc, thang: @thang, shortenize: shortenize, isSnippet: isSnippet, language: @options.language, writable: writable, level: @options.level, item: item, showImage: showImage, useHero: @useHero\r\n\r\n  onDisableControls: (e) -> @toggleControls e, false\r\n  onEnableControls: (e) -> @toggleControls e, true\r\n  toggleControls: (e, enabled) ->\r\n    return if e.controls and not ('palette' in e.controls)\r\n    return if enabled is @controlsEnabled\r\n    @controlsEnabled = enabled\r\n    @$el.find('*').attr('disabled', not enabled)\r\n    @$el.toggleClass 'controls-disabled', not enabled\r\n\r\n  onFrameChanged: (e) ->\r\n    return unless e.selectedThang?.id is @thang.id\r\n    @options.thang = @thang = e.selectedThang  # Update our thang to the current version\r\n\r\n  onTomeChangedLanguage: (e) ->\r\n    @updateCodeLanguage e.language\r\n    entry.destroy() for entry in @entries\r\n    @createPalette()\r\n    @render()\r\n\r\n  onSectionHeaderClick: (e) ->\r\n\r\n    $et = @$(e.target)\r\n    target = @$($et.attr('data-panel'))\r\n    isCollapsed = !target.hasClass('in')\r\n    console.log \"O\", target[0], isCollapsed\r\n    if isCollapsed\r\n      target.collapse 'show'\r\n      $et.find('.glyphicon').removeClass('glyphicon-chevron-right').addClass('glyphicon-chevron-down')\r\n    else\r\n      target.collapse 'hide'\r\n      $et.find('.glyphicon').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-right')\r\n\r\n    setTimeout () =>\r\n      @$('.nano').nanoScroller alwaysVisible: true\r\n    , 200\r\n    e.preventDefault()\r\n\r\n  onClickHelp: (e) ->\r\n    application.tracker?.trackEvent 'Spell palette help clicked', levelID: @level.get('slug')\r\n    gameMenuModal = new GameMenuModal showTab: 'guide', level: @level, session: @session, supermodel: @supermodel\r\n    @openModalView gameMenuModal\r\n    @listenToOnce gameMenuModal, 'change-hero', ->\r\n      @setupManager?.destroy()\r\n      @setupManager = new LevelSetupManager({supermodel: @supermodel, level: @level, levelID: @level.get('slug'), parent: @, session: @session, courseID: @options.courseID, courseInstanceID: @options.courseInstanceID})\r\n      @setupManager.open()\r\n\r\n  onClickClose: (e) ->\r\n    @hide()\r\n\r\n  hide: () =>\r\n    @$el.find('.left .selected').removeClass 'selected'\r\n    @$el.removeClass('open')\r\n\r\n  onPalleteClick: (e) ->\r\n    @$el.addClass('open')\r\n    content = @$el.find(\".rightContentTarget\")\r\n    content.html(e.entry.doc.initialHTML)\r\n    codeLanguage = e.entry.options.language\r\n    oldEditor.destroy() for oldEditor in @aceEditors\r\n    @aceEditors = []\r\n    aceEditors = @aceEditors\r\n    # Initialize Ace for each popover code snippet that still needs it\r\n    content.find('.docs-ace').each ->\r\n      aceEditor = utils.initializeACE @, codeLanguage\r\n      aceEditors.push aceEditor\r\n\r\n  destroy: ->\r\n    entry.destroy() for entry in @entries\r\n    @toggleBackground = null\r\n    $(window).off 'resize', @onResize\r\n    @setupManager?.destroy()\r\n    super()\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/tome/spell_toolbar'\r\n\r\nmodule.exports = class SpellToolbarView extends CocoView\r\n  className: 'spell-toolbar-view'\r\n  template: template\r\n  progressHoverDelay: 500\r\n\r\n  subscriptions:\r\n    'tome:spell-step-backward': 'onStepBackward'\r\n    'tome:spell-step-forward': 'onStepForward'\r\n\r\n  events:\r\n    'mousedown .spell-progress': 'onProgressMouseDown'\r\n    'mouseup .spell-progress': 'onProgressMouseUp'\r\n    'mousemove .spell-progress': 'onProgressMouseMove'\r\n    'tapstart .spell-progress': 'onProgressTapStart'\r\n    'tapend .spell-progress': 'onProgressTapEnd'\r\n    'tapmove .spell-progress': 'onProgressTapMove'\r\n    'click .step-backward': 'onStepBackward'\r\n    'click .step-forward': 'onStepForward'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @ace = options.ace\r\n\r\n  afterRender: ->\r\n    super()\r\n\r\n  toggleFlow: (to) ->\r\n    @$el.find('.flow').toggle to\r\n\r\n  setStatementIndex: (statementIndex) ->\r\n    return unless total = @callState?.statementsExecuted\r\n    @statementIndex = Math.min(total - 1, Math.max(0, statementIndex))\r\n    @statementRatio = @statementIndex / (total - 1)\r\n    @statementTime = @callState.statements[@statementIndex]?.userInfo.time ? 0\r\n    @$el.find('.progress-bar').css('width', 100 * @statementRatio + '%')\r\n    @$el.find('.step-backward').prop('disabled', @statementIndex is 0)\r\n    @$el.find('.step-forward').prop('disabled', @statementIndex is total - 1)\r\n    @updateMetrics()\r\n    _.defer =>\r\n      Backbone.Mediator.publish 'tome:spell-statement-index-updated', statementIndex: @statementIndex, ace: @ace\r\n\r\n  updateMetrics: ->\r\n    statementsExecuted = @callState.statementsExecuted\r\n    $metrics = @$el.find('.metrics')\r\n    return $metrics.hide() if @suppressMetricsUpdates or not (statementsExecuted or @metrics.statementsExecuted)\r\n    if @metrics.callsExecuted > 1\r\n      $metrics.find('.call-index').text @callIndex + 1\r\n      $metrics.find('.calls-executed').text @metrics.callsExecuted\r\n      $metrics.find('.calls-metric').show().attr('title', \"Method call #{@callIndex + 1} of #{@metrics.callsExecuted} calls\")\r\n    else\r\n      $metrics.find('.calls-metric').hide()\r\n    if @metrics.statementsExecuted\r\n      $metrics.find('.statement-index').text @statementIndex + 1\r\n      $metrics.find('.statements-executed').text statementsExecuted\r\n      if @metrics.statementsExecuted > statementsExecuted\r\n        $metrics.find('.statements-executed-total').text \" (#{@metrics.statementsExecuted})\"\r\n        titleSuffix = \" (#{@metrics.statementsExecuted} statements total)\"\r\n      else\r\n        $metrics.find('.statements-executed-total').text ''\r\n        titleSuffix = ''\r\n      $metrics.find('.statements-metric').show().attr('title', \"Statement #{@statementIndex + 1} of #{statementsExecuted} this call#{titleSuffix}\")\r\n    else\r\n      $metrics.find('.statements-metric').hide()\r\n    left = @$el.find('.scrubber-handle').position().left + @$el.find('.spell-progress').position().left\r\n    $metrics.finish().show().css({left: left - $metrics.width() / 2}).delay(2000).fadeOut('fast')\r\n\r\n  setStatementRatio: (ratio) ->\r\n    return unless total = @callState?.statementsExecuted\r\n    statementIndex = Math.floor ratio * total\r\n    @setStatementIndex statementIndex unless statementIndex is @statementIndex\r\n\r\n  onProgressMouseDown: (e) ->\r\n    @dragging = true\r\n    @scrubProgress e\r\n    Backbone.Mediator.publish 'level:set-playing', playing: false\r\n\r\n  onProgressMouseUp: (e) ->\r\n    @dragging = false\r\n\r\n  onProgressMouseMove: (e) ->\r\n    return unless @dragging\r\n    @scrubProgress e\r\n\r\n  onProgressTapStart: (e, touchData) ->\r\n    # Haven't tested tap versions, don't even need them for iPad app, but hey, it worked for the playback scrubber.\r\n    @dragging = true\r\n    @scrubProgress e, touchData\r\n\r\n  onProgressTapEnd: (e, touchData) ->\r\n    @dragging = false\r\n\r\n  onProgressTapMove: (e, touchData) ->\r\n    return unless @dragging\r\n    @scrubProgress e, touchData\r\n\r\n  scrubProgress: (e, touchData) ->\r\n    screenOffsetX = e.clientX ? touchData?.position.x ? 0\r\n    offsetX = screenOffsetX - @$el.find('.spell-progress').offset().left\r\n    offsetX = Math.max offsetX, 0\r\n    @setStatementRatio offsetX / @$el.find('.spell-progress').width()\r\n    @updateTime()\r\n    @updateScroll()\r\n\r\n  onStepBackward: (e) -> @step -1\r\n  onStepForward: (e) -> @step 1\r\n  step: (delta) ->\r\n    lastTime = @statementTime\r\n    @setStatementIndex @statementIndex + delta\r\n    @updateTime() if @statementTime isnt lastTime\r\n    @updateScroll()\r\n    Backbone.Mediator.publish 'level:set-playing', playing: false\r\n\r\n  updateTime: ->\r\n    @maintainIndexScrub = true\r\n    clearTimeout @maintainIndexScrubTimeout if @maintainIndexScrubTimeout\r\n    @maintainIndexScrubTimeout = _.delay (=> @maintainIndexScrub = false), 500\r\n    Backbone.Mediator.publish 'level:set-time', time: @statementTime, scrubDuration: 500\r\n\r\n  updateScroll: ->\r\n    return unless statementStart = @callState?.statements?[@statementIndex]?.range[0]\r\n    text = @ace.getValue() # code in editor\r\n    currentLine = statementStart.row\r\n    @ace.scrollToLine currentLine, true, true\r\n\r\n  setCallState: (callState, statementIndex, @callIndex, @metrics) ->\r\n    return if callState is @callState and statementIndex is @statementIndex\r\n    return unless @callState = callState\r\n    @suppressMetricsUpdates = true\r\n    if not @maintainIndexScrub and not @dragging and statementIndex? and callState.statements[statementIndex]?.userInfo.time isnt @statementTime\r\n      @setStatementIndex statementIndex\r\n    else\r\n      @setStatementRatio @statementRatio\r\n    @suppressMetricsUpdates = false\r\n","template = require 'templates/play/level/tome/spell-top-bar-view'\r\nReloadLevelModal = require 'views/play/level/modal/ReloadLevelModal'\r\nCocoView = require 'views/core/CocoView'\r\nImageGalleryModal = require 'views/play/level/modal/ImageGalleryModal'\r\n\r\nmodule.exports = class SpellTopBarView extends CocoView\r\n  template: template\r\n  id: 'spell-top-bar-view'\r\n  controlsEnabled: true\r\n\r\n  subscriptions:\r\n    'level:disable-controls': 'onDisableControls'\r\n    'level:enable-controls': 'onEnableControls'\r\n    'tome:spell-loaded': 'onSpellLoaded'\r\n    'tome:spell-changed': 'onSpellChanged'\r\n    'tome:spell-changed-language': 'onSpellChangedLanguage'\r\n    'tome:toggle-maximize': 'onToggleMaximize'\r\n\r\n  events:\r\n    'click .reload-code': 'onCodeReload'\r\n    'click .beautify-code': 'onBeautifyClick'\r\n    'click .fullscreen-code': 'onToggleMaximize'\r\n    'click .hints-button': 'onClickHintsButton'\r\n    'click .image-gallery-button': 'onClickImageGalleryButton'\r\n\r\n  constructor: (options) ->\r\n    @hintsState = options.hintsState\r\n    @spell = options.spell\r\n    super(options)\r\n\r\n  getRenderData: (context={}) ->\r\n    context = super context\r\n    ctrl = if @isMac() then 'Cmd' else 'Ctrl'\r\n    shift = $.i18n.t 'keyboard_shortcuts.shift'\r\n    context.beautifyShortcutVerbose = \"#{ctrl}+#{shift}+B: #{$.i18n.t 'keyboard_shortcuts.beautify'}\"\r\n    context.maximizeShortcutVerbose = \"#{ctrl}+#{shift}+M: #{$.i18n.t 'keyboard_shortcuts.maximize_editor'}\"\r\n    context.codeLanguage = @options.codeLanguage\r\n    context\r\n\r\n  afterRender: ->\r\n    super()\r\n    @attachTransitionEventListener()\r\n    @$('[data-toggle=\"popover\"]').popover()\r\n\r\n  onDisableControls: (e) -> @toggleControls e, false\r\n  onEnableControls: (e) -> @toggleControls e, true\r\n\r\n  onClickImageGalleryButton: (e) ->\r\n    @openModalView new ImageGalleryModal()\r\n\r\n  onClickHintsButton: ->\r\n    return unless @hintsState?\r\n    @hintsState.set('hidden', not @hintsState.get('hidden'))\r\n    window.tracker?.trackEvent 'Hints Clicked', category: 'Students', levelSlug: @options.level.get('slug'), hintCount: @hintsState.get('hints')?.length ? 0, []\r\n\r\n  onCodeReload: (e) ->\r\n    if key.shift\r\n      Backbone.Mediator.publish 'level:restart', {}\r\n    else\r\n      @openModalView new ReloadLevelModal()\r\n\r\n  onBeautifyClick: (e) ->\r\n    return unless @controlsEnabled\r\n    Backbone.Mediator.publish 'tome:spell-beautify', spell: @spell\r\n\r\n  onToggleMaximize: (e) ->\r\n    $codearea = $('html')\r\n    $('#code-area').css 'z-index', 20 unless $codearea.hasClass 'fullscreen-editor'\r\n    $('html').toggleClass 'fullscreen-editor'\r\n    $('.fullscreen-code').toggleClass 'maximized'\r\n    Backbone.Mediator.publish 'tome:maximize-toggled', {}\r\n\r\n  updateReloadButton: ->\r\n    changed = @spell.hasChanged null, @spell.getSource()\r\n    @$el.find('.reload-code').css('display', if changed then 'inline-block' else 'none')\r\n\r\n  onSpellLoaded: (e) ->\r\n    return unless e.spell is @spell\r\n    @updateReloadButton()\r\n\r\n  onSpellChanged: (e) ->\r\n    return unless e.spell is @spell\r\n    @updateReloadButton()\r\n\r\n  onSpellChangedLanguage: (e) ->\r\n    return unless e.spell is @spell\r\n    @options.codeLanguage = e.language\r\n    @render()\r\n    @updateReloadButton()\r\n\r\n  toggleControls: (e, enabled) ->\r\n    return if e.controls and not ('editor' in e.controls)\r\n    return if enabled is @controlsEnabled\r\n    @controlsEnabled = enabled\r\n    @$el.toggleClass 'read-only', not enabled\r\n\r\n  attachTransitionEventListener: =>\r\n    transitionListener = ''\r\n    testEl = document.createElement 'fakeelement'\r\n    transitions =\r\n      'transition':'transitionend'\r\n      'OTransition':'oTransitionEnd'\r\n      'MozTransition':'transitionend'\r\n      'WebkitTransition':'webkitTransitionEnd'\r\n    for transition, transitionEvent of transitions\r\n      unless testEl.style[transition] is undefined\r\n        transitionListener = transitionEvent\r\n        break\r\n    $codearea = $('#code-area')\r\n    $codearea.on transitionListener, =>\r\n      $codearea.css 'z-index', 2 unless $('html').hasClass 'fullscreen-editor'\r\n\r\n  destroy: ->\r\n    super()\r\n","CocoView = require 'views/core/CocoView'\r\nLevelComponent = require 'models/LevelComponent'\r\ntemplate = require 'templates/play/level/tome/spell_translation'\r\nace = require 'ace'\r\nRange = ace.require('ace/range').Range\r\nTokenIterator = ace.require('ace/token_iterator').TokenIterator\r\nutils = require 'core/utils'\r\n\r\nmodule.exports = class SpellTranslationView extends CocoView\r\n  className: 'spell-translation-view'\r\n  template: template\r\n  \r\n  events:\r\n    'mousemove': ->\r\n      @$el.hide()\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @ace = options.ace\r\n    \r\n    levelComponents = @supermodel.getModels LevelComponent\r\n    @componentTranslations = levelComponents.reduce((acc, lc) ->\r\n      for doc in (lc.get('propertyDocumentation') ? [])\r\n        translated = utils.i18n(doc, 'name', null, false)\r\n        acc[doc.name] = translated if translated isnt doc.name\r\n      acc\r\n    , {})\r\n    \r\n    @onMouseMove = _.throttle @onMouseMove, 25\r\n    \r\n  afterRender: ->\r\n    super()\r\n    @ace.on 'mousemove', @onMouseMove\r\n\r\n  setTooltipText: (text) =>\r\n    @$el.find('code').text text\r\n    @$el.show().css(@pos)\r\n    \r\n  isIdentifier: (t) ->\r\n    t and (_.any([/identifier/, /keyword/], (regex) -> regex.test(t.type)) or t.value is 'this')\r\n    \r\n  onMouseMove: (e) =>\r\n    return if @destroyed\r\n    pos = e.getDocumentPosition()\r\n    it = new TokenIterator e.editor.session, pos.row, pos.column\r\n    endOfLine = it.getCurrentToken()?.index is it.$rowTokens.length - 1\r\n    while it.getCurrentTokenRow() is pos.row and not @isIdentifier(token = it.getCurrentToken())\r\n      break if endOfLine or not token  # Don't iterate beyond end or beginning of line\r\n      it.stepBackward()\r\n    unless @isIdentifier(token)\r\n      @word = null\r\n      @update()\r\n      return\r\n    try\r\n      # Ace was breaking under some (?) conditions, dependent on mouse location.\r\n      #   with $rowTokens = [] (but should have things)\r\n      start = it.getCurrentTokenColumn()\r\n    catch error\r\n      start = 0\r\n    end = start + token.value.length\r\n    if @isIdentifier(token)\r\n      @word = token.value\r\n      @markerRange = new Range pos.row, start, pos.row, end\r\n      @reposition(e.domEvent)\r\n    @update()\r\n    \r\n  reposition: (e) ->\r\n    offsetX = e.offsetX ? e.clientX - $(e.target).offset().left\r\n    offsetY = e.offsetY ? e.clientY - $(e.target).offset().top\r\n    w = $(document).width() - 20\r\n    offsetX = w - $(e.target).offset().left - @$el.width() if e.clientX + @$el.width() > w\r\n    @pos = {left: offsetX + 80, top: offsetY - 20}\r\n    @$el.css(@pos)\r\n    \r\n  onMouseOut: ->\r\n    @word = null\r\n    @markerRange = null\r\n    @update()\r\n    \r\n  update: ->\r\n    i18nKey = 'code.'+@word\r\n    translation = @componentTranslations[@word] or $.t(i18nKey)\r\n    if @word and translation and translation not in [i18nKey, @word]\r\n      @setTooltipText translation\r\n    else\r\n      @$el.hide()\r\n\r\n  destroy: ->\r\n    @ace?.removeEventListener 'mousemove', @onMouseMove\r\n    super()\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/tome/spell'\r\n{me} = require 'core/auth'\r\nfilters = require 'lib/image_filter'\r\nace = require 'ace'\r\nRange = ace.require('ace/range').Range\r\nUndoManager = ace.require('ace/undomanager').UndoManager\r\nProblem = require './Problem'\r\nSpellDebugView = require './SpellDebugView'\r\nSpellTranslationView = require './SpellTranslationView'\r\nSpellToolbarView = require './SpellToolbarView'\r\nLevelComponent = require 'models/LevelComponent'\r\nUserCodeProblem = require 'models/UserCodeProblem'\r\nutils = require 'core/utils'\r\nCodeLog = require 'models/CodeLog'\r\nAutocomplete = require './editor/autocomplete'\r\nTokenIterator = ace.require('ace/token_iterator').TokenIterator\r\n\r\nmodule.exports = class SpellView extends CocoView\r\n  id: 'spell-view'\r\n  className: 'shown'\r\n  template: template\r\n  controlsEnabled: true\r\n  eventsSuppressed: true\r\n  writable: true\r\n  languagesThatUseWorkers: ['html']\r\n\r\n  keyBindings:\r\n    'default': null\r\n    'vim': 'ace/keyboard/vim'\r\n    'emacs': 'ace/keyboard/emacs'\r\n\r\n  subscriptions:\r\n    'level:disable-controls': 'onDisableControls'\r\n    'level:enable-controls': 'onEnableControls'\r\n    'surface:frame-changed': 'onFrameChanged'\r\n    'surface:coordinate-selected': 'onCoordinateSelected'\r\n    'god:new-world-created': 'onNewWorld'\r\n    'god:user-code-problem': 'onUserCodeProblem'\r\n    'god:non-user-code-problem': 'onNonUserCodeProblem'\r\n    'tome:manual-cast': 'onManualCast'\r\n    'tome:spell-changed': 'onSpellChanged'\r\n    'level:session-will-save': 'onSessionWillSave'\r\n    'modal:closed': 'focus'\r\n    'tome:focus-editor': 'focus'\r\n    'tome:spell-statement-index-updated': 'onStatementIndexUpdated'\r\n    'tome:change-language': 'onChangeLanguage'\r\n    'tome:change-config': 'onChangeEditorConfig'\r\n    'tome:update-snippets': 'addAutocompleteSnippets'\r\n    'tome:insert-snippet': 'onInsertSnippet'\r\n    'tome:spell-beautify': 'onSpellBeautify'\r\n    'tome:maximize-toggled': 'onMaximizeToggled'\r\n    'tome:problems-updated': 'onProblemsUpdated'\r\n    'script:state-changed': 'onScriptStateChange'\r\n    'playback:ended-changed': 'onPlaybackEndedChanged'\r\n    'level:contact-button-pressed': 'onContactButtonPressed'\r\n    'level:show-victory': 'onShowVictory'\r\n    'web-dev:error': 'onWebDevError'\r\n\r\n  events:\r\n    'mouseout': 'onMouseOut'\r\n\r\n  constructor: (options) ->\r\n    @supermodel = options.supermodel\r\n    super options\r\n    @worker = options.worker\r\n    @session = options.session\r\n    @spell = options.spell\r\n    @problems = []\r\n    @savedProblems = {} # Cache saved user code problems to prevent duplicates\r\n    @writable = false unless me.team in @spell.permissions.readwrite  # TODO: make this do anything\r\n    @highlightCurrentLine = _.throttle @highlightCurrentLine, 100\r\n    $(window).on 'resize', @onWindowResize\r\n    @observing = @session.get('creator') isnt me.id\r\n\r\n  afterRender: ->\r\n    super()\r\n    @createACE()\r\n    @createACEShortcuts()\r\n    @hookACECustomBehavior()\r\n    @fillACE()\r\n    @createOnCodeChangeHandlers()\r\n    @lockDefaultCode()\r\n    _.defer @onAllLoaded  # Needs to happen after the code generating this view is complete\r\n\r\n  # This ACE is used for the code editor, and is only instantiated once per level.\r\n  createACE: ->\r\n    # Test themes and settings here: http://ace.ajax.org/build/kitchen-sink.html\r\n    aceConfig = me.get('aceConfig') ? {}\r\n    @destroyAceEditor(@ace)\r\n    @ace = ace.edit @$el.find('.ace')[0]\r\n    @aceSession = @ace.getSession()\r\n    # Override setAnnotations so the Ace html worker doesn't clobber our annotations\r\n    @reallySetAnnotations = @aceSession.setAnnotations.bind(@aceSession)\r\n    @aceSession.setAnnotations = (annotations) =>\r\n      previousAnnotations = @aceSession.getAnnotations()\r\n      newAnnotations = _.filter previousAnnotations, (annotation) -> annotation.createdBy? # Keep the ones we generated\r\n        .concat _.reject annotations, (annotation) -> # Ignore this particular info-annotation the html worker generates\r\n          annotation.text is 'Start tag seen without seeing a doctype first. Expected e.g. <!DOCTYPE html>.'\r\n      @reallySetAnnotations newAnnotations\r\n    @aceDoc = @aceSession.getDocument()\r\n    @aceSession.setUseWorker @spell.language in @languagesThatUseWorkers\r\n    @aceSession.setMode utils.aceEditModes[@spell.language]\r\n    @aceSession.setWrapLimitRange null\r\n    @aceSession.setUseWrapMode true\r\n    @aceSession.setNewLineMode 'unix'\r\n    @aceSession.setUseSoftTabs true\r\n    @ace.setTheme 'ace/theme/textmate'\r\n    @ace.setDisplayIndentGuides false\r\n    @ace.setShowPrintMargin false\r\n    @ace.setShowInvisibles aceConfig.invisibles\r\n    @ace.setBehavioursEnabled aceConfig.behaviors\r\n    @ace.setAnimatedScroll true\r\n    @ace.setShowFoldWidgets false\r\n    @ace.setKeyboardHandler @keyBindings[aceConfig.keyBindings ? 'default']\r\n    @ace.$blockScrolling = Infinity\r\n    @ace.on 'mousemove', @onAceMouseMove\r\n    @ace.on 'mouseout', @onAceMouseOut\r\n    @toggleControls null, @writable\r\n    @aceSession.selection.on 'changeCursor', @onCursorActivity\r\n    $(@ace.container).find('.ace_gutter').on 'click mouseenter', '.ace_error, .ace_warning, .ace_info', @onAnnotationClick\r\n    $(@ace.container).find('.ace_gutter').on 'click', @onGutterClick\r\n    @initAutocomplete aceConfig.liveCompletion ? true\r\n\r\n    return if @session.get('creator') isnt me.id or @session.fake\r\n    # Create a Spade to 'dig' into Ace.\r\n    @spade = new Spade()\r\n    @spade.track(@ace)\r\n    # If a user is taking longer than 10 minutes, let's log it.\r\n    saveSpadeDelay = 10 * 60 * 1000\r\n    @saveSpadeTimeout = setTimeout @saveSpade, saveSpadeDelay\r\n\r\n  createACEShortcuts: ->\r\n    @aceCommands = aceCommands = []\r\n    addCommand = (c) =>\r\n      @ace.commands.addCommand c\r\n      aceCommands.push c.name\r\n    addCommand\r\n      name: 'run-code'\r\n      bindKey: {win: 'Shift-Enter|Ctrl-Enter', mac: 'Shift-Enter|Command-Enter|Ctrl-Enter'}\r\n      exec: => Backbone.Mediator.publish 'tome:manual-cast', {realTime: @options.level.isType('game-dev')}\r\n    unless @observing\r\n      addCommand\r\n        name: 'run-code-real-time'\r\n        bindKey: {win: 'Ctrl-Shift-Enter', mac: 'Command-Shift-Enter|Ctrl-Shift-Enter'}\r\n        exec: =>\r\n          doneButton = @$('.done-button:visible')\r\n          if doneButton.length\r\n            doneButton.trigger 'click'\r\n          else if @options.level.get('replayable') and (timeUntilResubmit = @session.timeUntilResubmit()) > 0\r\n            Backbone.Mediator.publish 'tome:manual-cast-denied', timeUntilResubmit: timeUntilResubmit\r\n          else\r\n            Backbone.Mediator.publish 'tome:manual-cast', {realTime: true}\r\n    addCommand\r\n      name: 'no-op'\r\n      bindKey: {win: 'Ctrl-S', mac: 'Command-S|Ctrl-S'}\r\n      exec: ->  # just prevent page save call\r\n    addCommand\r\n      name: 'toggle-playing'\r\n      bindKey: {win: 'Ctrl-P', mac: 'Command-P|Ctrl-P'}\r\n      readOnly: true\r\n      exec: -> Backbone.Mediator.publish 'level:toggle-playing', {}\r\n    addCommand\r\n      name: 'end-current-script'\r\n      bindKey: {win: 'Shift-Space', mac: 'Shift-Space'}\r\n      readOnly: true\r\n      exec: =>\r\n        if @scriptRunning\r\n          Backbone.Mediator.publish 'level:shift-space-pressed', {}\r\n        else\r\n          @ace.insert ' '\r\n    addCommand\r\n      name: 'end-all-scripts'\r\n      bindKey: {win: 'Escape', mac: 'Escape'}\r\n      readOnly: true\r\n      exec: ->\r\n        Backbone.Mediator.publish 'level:escape-pressed', {}\r\n    addCommand\r\n      name: 'toggle-grid'\r\n      bindKey: {win: 'Ctrl-G', mac: 'Command-G|Ctrl-G'}\r\n      readOnly: true\r\n      exec: -> Backbone.Mediator.publish 'level:toggle-grid', {}\r\n    addCommand\r\n      name: 'toggle-debug'\r\n      bindKey: {win: 'Ctrl-\\\\', mac: 'Command-\\\\|Ctrl-\\\\'}\r\n      readOnly: true\r\n      exec: -> Backbone.Mediator.publish 'level:toggle-debug', {}\r\n    addCommand\r\n      name: 'toggle-pathfinding'\r\n      bindKey: {win: 'Ctrl-O', mac: 'Command-O|Ctrl-O'}\r\n      readOnly: true\r\n      exec: -> Backbone.Mediator.publish 'level:toggle-pathfinding', {}\r\n    addCommand\r\n      name: 'level-scrub-forward'\r\n      bindKey: {win: 'Ctrl-]', mac: 'Command-]|Ctrl-]'}\r\n      readOnly: true\r\n      exec: -> Backbone.Mediator.publish 'level:scrub-forward', {}\r\n    addCommand\r\n      name: 'level-scrub-back'\r\n      bindKey: {win: 'Ctrl-[', mac: 'Command-[|Ctrl-]'}\r\n      readOnly: true\r\n      exec: -> Backbone.Mediator.publish 'level:scrub-back', {}\r\n    addCommand\r\n      name: 'spell-step-forward'\r\n      bindKey: {win: 'Ctrl-Alt-]', mac: 'Command-Alt-]|Ctrl-Alt-]'}\r\n      readOnly: true\r\n      exec: -> Backbone.Mediator.publish 'tome:spell-step-forward', {}\r\n    addCommand\r\n      name: 'spell-step-backward'\r\n      bindKey: {win: 'Ctrl-Alt-[', mac: 'Command-Alt-[|Ctrl-Alt-]'}\r\n      readOnly: true\r\n      exec: -> Backbone.Mediator.publish 'tome:spell-step-backward', {}\r\n    addCommand\r\n      name: 'spell-beautify'\r\n      bindKey: {win: 'Ctrl-Shift-B', mac: 'Command-Shift-B|Ctrl-Shift-B'}\r\n      exec: -> Backbone.Mediator.publish 'tome:spell-beautify', {}\r\n    addCommand\r\n      name: 'prevent-line-jump'\r\n      bindKey: {win: 'Ctrl-L', mac: 'Command-L'}\r\n      passEvent: true\r\n      exec: ->  # just prevent default ACE go-to-line alert\r\n    addCommand\r\n      name: 'open-fullscreen-editor'\r\n      bindKey: {win: 'Ctrl-Shift-M', mac: 'Command-Shift-M|Ctrl-Shift-M'}\r\n      exec: -> Backbone.Mediator.publish 'tome:toggle-maximize', {}\r\n    addCommand\r\n      # TODO: Restrict to beginner campaign levels like we do backspaceThrottle\r\n      name: 'enter-skip-delimiters'\r\n      bindKey: 'Enter|Return'\r\n      exec: =>\r\n        if @aceSession.selection.isEmpty()\r\n          cursor = @ace.getCursorPosition()\r\n          line = @aceDoc.getLine(cursor.row)\r\n          if delimMatch = line.substring(cursor.column).match /^([\"|']?\\)+;?)/  # Yay for editors misreading regexes: \"\r\n            newRange = @ace.getSelectionRange()\r\n            newRange.setStart newRange.start.row, newRange.start.column + delimMatch[1].length\r\n            newRange.setEnd newRange.end.row, newRange.end.column + delimMatch[1].length\r\n            @aceSession.selection.setSelectionRange newRange\r\n        @ace.execCommand 'insertstring', '\\n'\r\n    addCommand\r\n      name: 'disable-spaces'\r\n      bindKey: 'Space'\r\n      exec: =>\r\n        disableSpaces = @options.level.get('disableSpaces') or false\r\n        aceConfig = me.get('aceConfig') ? {}\r\n        disableSpaces = false if aceConfig.keyBindings and aceConfig.keyBindings isnt 'default'  # Not in vim/emacs mode\r\n        disableSpaces = false if @spell.language in ['lua', 'java', 'coffeescript', 'html']  # Don't disable for more advanced/experimental languages\r\n        if not disableSpaces or (_.isNumber(disableSpaces) and disableSpaces < me.level())\r\n          return @ace.execCommand 'insertstring', ' '\r\n        line = @aceDoc.getLine @ace.getCursorPosition().row\r\n        return @ace.execCommand 'insertstring', ' ' if @singleLineCommentRegex().test line\r\n\r\n    if @options.level.get 'backspaceThrottle'\r\n      addCommand\r\n        name: 'throttle-backspaces'\r\n        bindKey: 'Backspace'\r\n        exec: =>\r\n          # Throttle the backspace speed\r\n          # Slow to 500ms when whitespace at beginning of line is first encountered\r\n          # Slow to 100ms for remaining whitespace at beginning of line\r\n          # Rough testing showed backspaces happen at 150ms when tapping.\r\n          # Backspace speed varies by system when holding, 30ms on fastest Macbook setting.\r\n          nowDate = Date.now()\r\n          if @aceSession.selection.isEmpty()\r\n            cursor = @ace.getCursorPosition()\r\n            line = @aceDoc.getLine(cursor.row)\r\n            if /^\\s*$/.test line.substring(0, cursor.column)\r\n              @backspaceThrottleMs ?= 500\r\n              # console.log \"SpellView @backspaceThrottleMs=#{@backspaceThrottleMs}\"\r\n              # console.log 'SpellView lastBackspace diff', nowDate - @lastBackspace if @lastBackspace?\r\n              if not @lastBackspace? or nowDate - @lastBackspace > @backspaceThrottleMs\r\n                @backspaceThrottleMs = 100\r\n                @lastBackspace = nowDate\r\n                @ace.remove \"left\"\r\n              return\r\n          @backspaceThrottleMs = null\r\n          @lastBackspace = nowDate\r\n          @ace.remove \"left\"\r\n\r\n\r\n  hookACECustomBehavior: ->\r\n    aceConfig = me.get('aceConfig') ? {}\r\n    @ace.commands.on 'exec', (e) =>\r\n      # When pressing enter with an active selection, just make a new line under it.\r\n      if e.command.name is 'enter-skip-delimiters'\r\n        selection = @ace.selection.getRange()\r\n        unless selection.start.column is selection.end.column and selection.start.row is selection.end.row\r\n          e.editor.execCommand 'gotolineend'\r\n          return true\r\n\r\n    # Add visual indent guides\r\n    language = @spell.language\r\n    ensureLineStartsBlock = (line) ->\r\n      return false unless language is \"python\"\r\n      match = /^\\s*([^#]+)/.exec(line)\r\n      return false if not match?\r\n      return /:\\s*$/.test(match[1])\r\n\r\n    @aceSession.addDynamicMarker\r\n      update: (html, markerLayer, session, config) =>\r\n        Range = ace.require('ace/range').Range\r\n\r\n        foldWidgets = @aceSession.foldWidgets\r\n        return if not foldWidgets?\r\n\r\n        lines = @aceDoc.getAllLines()\r\n        startOfRow = (r) ->\r\n          str = lines[r]\r\n          ar = str.match(/^\\s*/)\r\n          ar.pop().length\r\n\r\n        colors = [{border: '74,144,226', fill: '108,162,226'}, {border: '132,180,235', fill: '230,237,245'}]\r\n\r\n        for row in [0..@aceSession.getLength()]\r\n          foldWidgets[row] = @aceSession.getFoldWidget(row) unless foldWidgets[row]?\r\n          continue unless foldWidgets? and foldWidgets[row] is \"start\"\r\n          try\r\n            docRange = @aceSession.getFoldWidgetRange(row)\r\n          catch error\r\n            console.warn \"Couldn't find fold widget docRange for row #{row}:\", error\r\n          if not docRange?\r\n            guess = startOfRow(row)\r\n            docRange = new Range(row,guess,row,guess+4)\r\n\r\n          continue unless ensureLineStartsBlock(lines[row])\r\n\r\n          if /^\\s+$/.test lines[docRange.end.row+1]\r\n            docRange.end.row += 1\r\n\r\n          xstart = startOfRow(row)\r\n          if language is 'python'\r\n            requiredIndent = new RegExp '^' + new Array(Math.floor(xstart / 4 + 1)).join('(    |\\t)') + '(    |\\t)+(\\\\S|\\\\s*$)'\r\n            for crow in [docRange.start.row+1..docRange.end.row]\r\n              unless requiredIndent.test lines[crow]\r\n                docRange.end.row = crow - 1\r\n                break\r\n\r\n          rstart = @aceSession.documentToScreenPosition docRange.start.row, docRange.start.column\r\n          rend = @aceSession.documentToScreenPosition docRange.end.row, docRange.end.column\r\n          range = new Range rstart.row, rstart.column, rend.row, rend.column\r\n          level = Math.floor(xstart / 4)\r\n          color = colors[level % colors.length]\r\n          bw = 3\r\n          to = markerLayer.$getTop(range.start.row, config)\r\n          t = markerLayer.$getTop(range.start.row + 1, config)\r\n          h = config.lineHeight * (range.end.row - range.start.row)\r\n          l = markerLayer.$padding + xstart * config.characterWidth\r\n          # w = (data.i - data.b) * config.characterWidth\r\n          w = 4 * config.characterWidth\r\n          fw = config.characterWidth * ( @aceSession.getScreenLastRowColumn(range.start.row) - xstart )\r\n\r\n          html.push \"\"\"\r\n            <div style=\r\n              \"position: absolute; top: #{to}px; left: #{l}px; width: #{fw+bw}px; height: #{config.lineHeight}px;\r\n               border: #{bw}px solid rgba(#{color.border},1); border-left: none;\"\r\n            ></div>\r\n            <div style=\r\n              \"position: absolute; top: #{t}px; left: #{l}px; width: #{w}px; height: #{h}px; background-color: rgba(#{color.fill},0.5);\r\n               border-right: #{bw}px solid rgba(#{color.border},1); border-bottom: #{bw}px solid rgba(#{color.border},1);\"\r\n            ></div>\r\n          \"\"\"\r\n\r\n  fillACE: ->\r\n    @ace.setValue @spell.source\r\n    @aceSession.setUndoManager(new UndoManager())\r\n    @ace.clearSelection()\r\n\r\n  lockDefaultCode: (force=false) ->\r\n    # TODO: Lock default indent for an empty line?\r\n    lockDefaultCode = @options.level.get('lockDefaultCode') or false\r\n    if not lockDefaultCode or (_.isNumber(lockDefaultCode) and lockDefaultCode < me.level())\r\n      return\r\n    return unless @spell.source is @spell.originalSource or force\r\n    return if @isIE()  # Temporary workaround for #2512\r\n    aceConfig = me.get('aceConfig') ? {}\r\n    return if aceConfig.keyBindings and aceConfig.keyBindings isnt 'default'  # Don't lock in vim/emacs mode\r\n\r\n    console.info 'Locking down default code.'\r\n\r\n    intersects = =>\r\n      return true for range in @readOnlyRanges when @ace.getSelectionRange().intersects(range)\r\n      false\r\n\r\n    intersectsLeft = =>\r\n      leftRange = @ace.getSelectionRange().clone()\r\n      if leftRange.start.column > 0\r\n        leftRange.setStart leftRange.start.row, leftRange.start.column - 1\r\n      else if leftRange.start.row > 0\r\n        leftRange.setStart leftRange.start.row - 1, 0\r\n      return true for range in @readOnlyRanges when leftRange.intersects(range)\r\n      false\r\n\r\n    intersectsRight = =>\r\n      rightRange = @ace.getSelectionRange().clone()\r\n      if rightRange.end.column < @aceDoc.getLine(rightRange.end.row).length\r\n        rightRange.setEnd rightRange.end.row, rightRange.end.column + 1\r\n      else if rightRange.start.row < @aceDoc.getLength() - 1\r\n        rightRange.setEnd rightRange.end.row + 1, 0\r\n      return true for range in @readOnlyRanges when rightRange.intersects(range)\r\n      false\r\n\r\n    pulseLockedCode = ->\r\n      $('.locked-code').finish().addClass('pulsating').effect('shake', times: 1, distance: 2, direction: 'down').removeClass('pulsating')\r\n\r\n    preventReadonly = (next) ->\r\n      if intersects()\r\n        pulseLockedCode()\r\n        return true\r\n      next?()\r\n\r\n    interceptCommand = (obj, method, wrapper) ->\r\n      orig = obj[method]\r\n      obj[method] = ->\r\n        args = Array.prototype.slice.call arguments\r\n        wrapper => orig.apply obj, args\r\n      obj[method]\r\n\r\n    finishRange = (row, startRow, startColumn) =>\r\n      range = new Range startRow, startColumn, row, @aceSession.getLine(row).length - 1\r\n      range.start = @aceDoc.createAnchor range.start\r\n      range.end = @aceDoc.createAnchor range.end\r\n      range.end.$insertRight = true\r\n      @readOnlyRanges.push range\r\n\r\n    # Remove previous locked code highlighting\r\n    if @lockedCodeMarkerIDs?\r\n      @aceSession.removeMarker marker for marker in @lockedCodeMarkerIDs\r\n    @lockedCodeMarkerIDs = []\r\n\r\n    # Create locked default code text ranges\r\n    @readOnlyRanges = []\r\n    if @spell.language in ['python', 'coffeescript']\r\n      # Lock contiguous section of default code\r\n      # Only works for languages without closing delimeters on blocks currently\r\n      lines = @aceDoc.getAllLines()\r\n      for line, row in lines when not /^\\s*$/.test(line)\r\n        lastRow = row\r\n      if lastRow?\r\n        @readOnlyRanges.push new Range 0, 0, lastRow, lines[lastRow].length - 1\r\n\r\n    # TODO: Highlighting does not work for multiple ranges\r\n    # TODO: Everything looks correct except the actual result.\r\n    # TODO: https://github.com/codecombat/codecombat/issues/1852\r\n    # else\r\n    #   # Create a read-only range for each chunk of text not separated by an empty line\r\n    #   startRow = startColumn = null\r\n    #   for row in [0...@aceSession.getLength()]\r\n    #     unless /^\\s*$/.test @aceSession.getLine(row)\r\n    #       unless startRow? and startColumn?\r\n    #         startRow = row\r\n    #         startColumn = 0\r\n    #     else\r\n    #       if startRow? and startColumn?\r\n    #         finishRange row - 1, startRow, startColumn\r\n    #         startRow = startColumn = null\r\n    #   if startRow? and startColumn?\r\n    #     finishRange @aceSession.getLength() - 1, startRow, startColumn\r\n\r\n    # Highlight locked ranges\r\n    for range in @readOnlyRanges\r\n      @lockedCodeMarkerIDs.push @aceSession.addMarker range, 'locked-code', 'fullLine'\r\n\r\n    # Override write operations that intersect with default code\r\n    interceptCommand @ace, 'onPaste', preventReadonly\r\n    interceptCommand @ace, 'onCut', preventReadonly\r\n    # TODO: can we use interceptCommand for this too?  'exec' and 'onExec' did not work.\r\n    @ace.commands.on 'exec', (e) =>\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      if (e.command.name is 'insertstring' and intersects()) or\r\n         (e.command.name in ['Backspace', 'throttle-backspaces'] and intersectsLeft()) or\r\n         (e.command.name is 'del' and intersectsRight())\r\n        @autocomplete?.off?()\r\n        pulseLockedCode()\r\n        return false\r\n      else if e.command.name in ['enter-skip-delimiters', 'Enter', 'Return']\r\n        if intersects()\r\n          e.editor.navigateDown 1\r\n          e.editor.navigateLineStart()\r\n          return false\r\n        else if e.command.name in ['Enter', 'Return'] and not e.editor?.completer?.popup?.isOpen\r\n          @autocomplete?.on?()\r\n          return e.editor.execCommand 'enter-skip-delimiters'\r\n      @autocomplete?.on?()\r\n      e.command.exec e.editor, e.args or {}\r\n\r\n  initAutocomplete: (@autocompleteOn) ->\r\n    # TODO: Turn on more autocompletion based on level sophistication\r\n    # TODO: E.g. using the language default snippets yields a bunch of crazy non-beginner suggestions\r\n    # TODO: Options logic shouldn't exist both here and in updateAutocomplete()\r\n    return if @spell.language is 'html'\r\n    popupFontSizePx = @options.level.get('autocompleteFontSizePx') ? 16\r\n    @autocomplete = new Autocomplete @ace,\r\n      basic: false\r\n      liveCompletion: false\r\n      snippetsLangDefaults: false\r\n      completers:\r\n        keywords: false\r\n        snippets: @autocompleteOn\r\n      autoLineEndings:\r\n        javascript: ';'\r\n      popupFontSizePx: popupFontSizePx\r\n      popupLineHeightPx: 1.5 * popupFontSizePx\r\n      popupWidthPx: 380\r\n\r\n  updateAutocomplete: (@autocompleteOn) ->\r\n    @autocomplete?.set 'snippets', @autocompleteOn\r\n\r\n  addAutocompleteSnippets: (e) ->\r\n    # Snippet entry format:\r\n    # content: code inserted into document\r\n    # meta: displayed right-justfied in popup\r\n    # name: displayed left-justified in popup, and what's being matched\r\n    # tabTrigger: fallback for name field\r\n    return unless @autocomplete and @autocompleteOn\r\n    @autocomplete.addCodeCombatSnippets @options.level, @, e\r\n\r\n  translateFindNearest: ->\r\n    # If they have advanced glasses but are playing a level which assumes earlier glasses, we'll adjust the sample code to use the more advanced APIs instead.\r\n    oldSource = @getSource()\r\n    newSource = oldSource.replace /(self:|self.|this.|@)findNearestEnemy\\(\\)/g, \"$1findNearest($1findEnemies())\"\r\n    newSource = newSource.replace /(self:|self.|this.|@)findNearestItem\\(\\)/g, \"$1findNearest($1findItems())\"\r\n    return if oldSource is newSource\r\n    @spell.originalSource = newSource\r\n    @updateACEText newSource\r\n    _.delay (=> @recompile?()), 1000\r\n\r\n  createFirepad: ->\r\n    # Currently not called; could be brought back for future multiplayer modes.\r\n    # Load from firebase or the original source if there's nothing there.\r\n    return if @firepadLoading\r\n    @eventsSuppressed = true\r\n    @loaded = false\r\n    @previousSource = @ace.getValue()\r\n    @ace.setValue('')\r\n    @aceSession.setUndoManager(new UndoManager())\r\n    fireURL = 'https://codecombat.firebaseio.com/' + @spell.pathComponents.join('/')\r\n    @fireRef = new Firebase fireURL\r\n    firepadOptions = userId: me.id\r\n    @firepad = Firepad.fromACE @fireRef, @ace, firepadOptions\r\n    @firepadLoading = true\r\n    @firepad.on 'ready', =>\r\n      return if @destroyed\r\n      @firepadLoading = false\r\n      firepadSource = @ace.getValue()\r\n      if firepadSource\r\n        @spell.source = firepadSource\r\n      else\r\n        @ace.setValue @previousSource\r\n        @aceSession.setUndoManager(new UndoManager())\r\n        @ace.clearSelection()\r\n      @onAllLoaded()\r\n\r\n  onAllLoaded: =>\r\n    @spell.transpile @spell.source\r\n    @spell.loaded = true\r\n    Backbone.Mediator.publish 'tome:spell-loaded', spell: @spell\r\n    @eventsSuppressed = false  # Now that the initial change is in, we can start running any changed code\r\n    @createToolbarView()\r\n    @updateHTML create: true if @options.level.isType('web-dev')\r\n\r\n  createDebugView: ->\r\n    return if @options.level.isType('hero', 'hero-ladder', 'hero-coop', 'course', 'course-ladder', 'game-dev', 'web-dev')  # We'll turn this on later, maybe, but not yet.\r\n    @debugView = new SpellDebugView ace: @ace, thang: @thang, spell:@spell\r\n    @$el.append @debugView.render().$el.hide()\r\n\r\n  createTranslationView: ->\r\n    @translationView = new SpellTranslationView { @ace, @supermodel }\r\n    @$el.append @translationView.render().$el.hide()\r\n\r\n  createToolbarView: ->\r\n    @toolbarView = new SpellToolbarView ace: @ace\r\n    @$el.append @toolbarView.render().$el\r\n\r\n  onMouseOut: (e) ->\r\n    @debugView?.onMouseOut e\r\n\r\n  onContactButtonPressed: (e) ->\r\n    @saveSpade()\r\n\r\n  getSource: ->\r\n    @ace.getValue()\r\n\r\n  setThang: (thang) ->\r\n    @focus()\r\n    @lastScreenLineCount = null\r\n    @updateLines()\r\n    return if thang.id is @thang?.id\r\n    @thang = thang\r\n    @spellThang = @spell.thang\r\n    @createDebugView() unless @debugView\r\n    @debugView?.thang = @thang\r\n    @createTranslationView() unless @translationView\r\n    @toolbarView?.toggleFlow false\r\n    @updateAether false, false\r\n    # @addAutocompleteSnippets()\r\n    @highlightCurrentLine()\r\n\r\n  cast: (preload=false, realTime=false, justBegin=false) ->\r\n    Backbone.Mediator.publish 'tome:cast-spell', { @spell, @thang, preload, realTime, justBegin }\r\n\r\n  notifySpellChanged: =>\r\n    return if @destroyed\r\n    Backbone.Mediator.publish 'tome:spell-changed', spell: @spell\r\n\r\n  notifyEditingEnded: =>\r\n    return if @destroyed or @aceDoc.undergoingFirepadOperation  # from my Firepad ACE adapter\r\n    Backbone.Mediator.publish 'tome:editing-ended', {}\r\n\r\n  notifyEditingBegan: =>\r\n    return if @destroyed or @aceDoc.undergoingFirepadOperation  # from my Firepad ACE adapter\r\n    Backbone.Mediator.publish 'tome:editing-began', {}\r\n\r\n  updateLines: =>\r\n    # Make sure there are always blank lines for the player to type on, and that the editor resizes to the height of the lines.\r\n    return if @destroyed\r\n    lineCount = @aceDoc.getLength()\r\n    lastLine = @aceDoc.$lines[lineCount - 1]\r\n    if lastLine isnt ''\r\n      cursorPosition = @ace.getCursorPosition()\r\n      wasAtEnd = cursorPosition.row is lineCount - 1 and cursorPosition.column is lastLine.length\r\n      @aceDoc.insertNewLine row: lineCount, column: 0  #lastLine.length\r\n      @ace.navigateLeft(1) if wasAtEnd\r\n      ++lineCount\r\n      # Force the popup back\r\n      @ace?.completer?.showPopup(@ace)\r\n    screenLineCount = @aceSession.getScreenLength()\r\n    if screenLineCount isnt @lastScreenLineCount\r\n      @lastScreenLineCount = screenLineCount\r\n      lineHeight = @ace.renderer.lineHeight or 20\r\n      tomeHeight = $('#tome-view').innerHeight()\r\n      spellTopBarHeight = $('#spell-top-bar-view').outerHeight()\r\n      spellToolbarHeight = $('.spell-toolbar-view').outerHeight()\r\n      @spellPaletteHeight ?= 75\r\n      spellPaletteAllowedHeight = Math.min @spellPaletteHeight, tomeHeight / 3\r\n      maxHeight = tomeHeight - spellTopBarHeight - spellToolbarHeight - spellPaletteAllowedHeight\r\n      minHeight = Math.max 8, (Math.min($(\"#canvas-wrapper\").outerHeight(),$(\"#level-view\").innerHeight() - 175) / lineHeight) - 2\r\n      linesAtMaxHeight = Math.floor(maxHeight / lineHeight)\r\n      lines = Math.max minHeight, Math.min(screenLineCount + 2, linesAtMaxHeight)\r\n      # 2 lines buffer is nice\r\n      @ace.setOptions minLines: lines, maxLines: lines\r\n      # Move spell palette up, slightly overlapping us.\r\n      newTop = 185 + lineHeight * lines\r\n      #spellPaletteView.css('top', newTop)\r\n      # Expand it to bottom of tome if too short.\r\n      #newHeight = Math.max @spellPaletteHeight, tomeHeight - newTop + 10\r\n      #spellPaletteView.css('height', newHeight) if @spellPaletteHeight isnt newHeight\r\n\r\n  hideProblemAlert: ->\r\n    return if @destroyed\r\n    Backbone.Mediator.publish 'tome:hide-problem-alert', {}\r\n\r\n  saveSpade: =>\r\n    return if @destroyed or not @spade\r\n    spadeEvents = @spade.compile()\r\n    # Uncomment the below line for a debug panel to display inside the level\r\n    #@spade.debugPlay(spadeEvents)\r\n    condensedEvents = @spade.condense(spadeEvents)\r\n\r\n    return unless condensedEvents.length\r\n    compressedEvents = LZString.compressToUTF16(JSON.stringify(condensedEvents))\r\n\r\n    codeLog = new CodeLog({\r\n      sessionID: @options.session.id\r\n      level:\r\n        original: @options.level.get 'original'\r\n        majorVersion: (@options.level.get 'version').major\r\n      levelSlug: @options.level.get 'slug'\r\n      userID: @options.session.get 'creator'\r\n      log: compressedEvents\r\n    })\r\n\r\n    codeLog.save()\r\n\r\n  onShowVictory: (e) ->\r\n    if @saveSpadeTimeout?\r\n      window.clearTimeout @saveSpadeTimeout\r\n      @saveSpadeTimeout = null\r\n\r\n  onManualCast: (e) ->\r\n    cast = @$el.parent().length\r\n    @recompile cast, e.realTime\r\n    @focus() if cast\r\n    if @options.level.isType('web-dev')\r\n      @sourceAtLastCast = @getSource()\r\n      @ace.setStyle 'spell-cast'\r\n      @updateHTML create: true\r\n\r\n  reloadCode: (cast=true) ->\r\n    @spell.reloadCode() if cast\r\n    @thang = @spell.thang.thang\r\n    @updateACEText @spell.originalSource\r\n    @lockDefaultCode true\r\n    @recompile cast\r\n    Backbone.Mediator.publish 'tome:spell-loaded', spell: @spell\r\n    @updateLines()\r\n\r\n  recompile: (cast=true, realTime=false) ->\r\n    hasChanged = @spell.source isnt @getSource()\r\n    if hasChanged\r\n      @spell.transpile @getSource()\r\n      @updateAether true, false\r\n    if cast  #and (hasChanged or realTime)  # just always cast now\r\n      @cast(false, realTime)\r\n    if hasChanged\r\n      @notifySpellChanged()\r\n\r\n  updateACEText: (source) ->\r\n    @eventsSuppressed = true\r\n    if @firepad\r\n      @firepad.setText source\r\n    else\r\n      @ace.setValue source\r\n      @aceSession.setUndoManager(new UndoManager())\r\n    @eventsSuppressed = false\r\n    try\r\n      @ace.resize true  # hack: @ace may not have updated its text properly, so we force it to refresh\r\n    catch error\r\n      console.warn 'Error resizing ACE after an update:', error\r\n\r\n  createOnCodeChangeHandlers: ->\r\n    @aceDoc.removeListener 'change', @onCodeChangeMetaHandler if @onCodeChangeMetaHandler\r\n    onSignificantChange = []\r\n    onAnyChange = [\r\n      _.debounce @updateAether, if @options.level.isType('game-dev') then 10 else 500\r\n      _.debounce @notifyEditingEnded, 1000\r\n      _.throttle @notifyEditingBegan, 250\r\n      _.throttle @notifySpellChanged, 300\r\n      _.throttle @updateLines, 500\r\n      _.throttle @hideProblemAlert, 500\r\n    ]\r\n    onSignificantChange.push _.debounce @checkRequiredCode, 750 if @options.level.get 'requiredCode'\r\n    onSignificantChange.push _.debounce @checkSuspectCode, 750 if @options.level.get 'suspectCode'\r\n    onAnyChange.push _.throttle @updateHTML, 10 if @options.level.isType('web-dev')\r\n\r\n    @onCodeChangeMetaHandler = =>\r\n      return if @eventsSuppressed\r\n      #@playSound 'code-change', volume: 0.5  # Currently not using this sound.\r\n      if @spellThang\r\n        @spell.hasChangedSignificantly @getSource(), @spellThang.aether.raw, (hasChanged) =>\r\n          if not @spellThang or hasChanged\r\n            callback() for callback in onSignificantChange  # Do these first\r\n          callback() for callback in onAnyChange  # Then these\r\n    @aceDoc.on 'change', @onCodeChangeMetaHandler\r\n\r\n  onCursorActivity: =>  # Used to refresh autocast delay; doesn't do anything at the moment.\r\n\r\n  updateHTML: (options={}) =>\r\n    # TODO: Merge with onSpellChanged\r\n    # NOTE: Consider what goes in onManualCast only\r\n    if @spell.hasChanged(@spell.getSource(), @sourceAtLastCast)\r\n      @ace.unsetStyle 'spell-cast' # NOTE: Doesn't do anything for web-dev as of this writing, including for consistency\r\n    @clearWebDevErrors()\r\n    Backbone.Mediator.publish 'tome:html-updated', html: @spell.constructHTML(@getSource()), create: Boolean(options.create)\r\n\r\n  # Design for a simpler system?\r\n  # * Keep Aether linting, debounced, on any significant change\r\n  # - All problems just vanish when you make any change to the code\r\n  # * You wouldn't accept any Aether updates/runtime information/errors unless its code was current when you got it\r\n  # * Store the last run Aether in each spellThang and use it whenever its code actually is current.\r\n  #   Use dynamic markers for problem ranges and keep annotations/alerts in when insignificant\r\n  #   changes happen, but always treat any change in the (trimmed) number of lines as a significant change.\r\n  # - All problems have a master representation as a Problem, and we can easily generate all Problems from\r\n  #   any Aether instance. Then when we switch contexts in any way, we clear, recreate, and reapply the Problems.\r\n  # * Problem alerts have their own templated ProblemAlertViews.\r\n  # * We'll only show the first problem alert, and it will always be at the bottom.\r\n  #   Annotations and problem ranges can show all, I guess.\r\n  # * The editor will reserve space for one annotation as a codeless area.\r\n  # - Problem alerts and ranges will only show on fully cast worlds. Annotations will show continually.\r\n\r\n  updateAether: (force=false, fromCodeChange=true) =>\r\n    # Depending on whether we have any code changes, significant code changes, or have switched\r\n    # to a new spellThang, we may want to refresh our Aether display.\r\n    return unless aether = @spellThang?.aether\r\n    source = @getSource()\r\n    @spell.hasChangedSignificantly source, aether.raw, (hasChanged) =>\r\n      codeHasChangedSignificantly = force or hasChanged\r\n      needsUpdate = codeHasChangedSignificantly or @spellThang isnt @lastUpdatedAetherSpellThang\r\n      return if not needsUpdate and aether is @displayedAether\r\n      castAether = @spellThang.castAether\r\n      codeIsAsCast = castAether and source is castAether.raw\r\n      aether = castAether if codeIsAsCast\r\n      return if not needsUpdate and aether is @displayedAether\r\n\r\n      # Now that that's figured out, perform the update.\r\n      # The web worker Aether won't track state, so don't have to worry about updating it\r\n      finishUpdatingAether = (aether) =>\r\n        @clearAetherDisplay() # In case problems were added since last clearing\r\n        @displayAether aether, codeIsAsCast\r\n        @lastUpdatedAetherSpellThang = @spellThang\r\n        @guessWhetherFinished aether if fromCodeChange\r\n\r\n      @clearAetherDisplay()\r\n      if codeHasChangedSignificantly and not codeIsAsCast\r\n        if @worker\r\n          workerMessage =\r\n            function: 'transpile'\r\n            spellKey: @spell.spellKey\r\n            source: source\r\n\r\n          @worker.addEventListener 'message', (e) =>\r\n            workerData = JSON.parse e.data\r\n            if workerData.function is 'transpile' and workerData.spellKey is @spell.spellKey\r\n              @worker.removeEventListener 'message', arguments.callee, false\r\n              aether.problems = workerData.problems\r\n              aether.raw = source\r\n              finishUpdatingAether(aether)\r\n          @worker.postMessage JSON.stringify(workerMessage)\r\n        else\r\n          aether.transpile source\r\n          finishUpdatingAether(aether)\r\n      else\r\n        finishUpdatingAether(aether)\r\n\r\n  # Each problem-generating piece (aether, web-dev, ace html worker) clears its own problems/annotations\r\n  clearAetherDisplay: ->\r\n    @clearProblemsCreatedBy 'aether'\r\n    @highlightCurrentLine {}  # This'll remove all highlights\r\n\r\n  clearWebDevErrors: ->\r\n    @clearProblemsCreatedBy 'web-dev-iframe'\r\n\r\n  clearProblemsCreatedBy: (createdBy) ->\r\n    nonAetherAnnotations = _.reject @aceSession.getAnnotations(), (annotation) -> annotation.createdBy is createdBy\r\n    @reallySetAnnotations nonAetherAnnotations\r\n\r\n    problemsToClear = _.filter @problems, (p) -> p.createdBy is createdBy\r\n    problemsToClear.forEach (problem) -> problem.destroy()\r\n    @problems = _.difference @problems, problemsToClear\r\n    Backbone.Mediator.publish 'tome:problems-updated', spell: @spell, problems: @problems, isCast: false\r\n\r\n  convertAetherProblems: (aether, aetherProblems, isCast) ->\r\n    # TODO: Functional-ify\r\n    _.unique(aetherProblems, (p) -> p.userInfo?.key).map (aetherProblem) =>\r\n      new Problem { aether, aetherProblem, @ace, isCast, levelID: @options.levelID }\r\n\r\n  displayAether: (aether, isCast=false) ->\r\n    @displayedAether = aether\r\n    isCast = isCast or not _.isEmpty(aether.metrics) or _.some aether.getAllProblems(), {type: 'runtime'}\r\n    annotations = @aceSession.getAnnotations()\r\n\r\n    newProblems = @convertAetherProblems(aether, aether.getAllProblems(), isCast)\r\n    annotations.push problem.annotation for problem in newProblems when problem.annotation\r\n    if isCast\r\n      @displayProblemBanner(newProblems[0]) if newProblems[0]\r\n      @saveUserCodeProblem(aether, problem.aetherProblem) for problem in newProblems\r\n    @problems = @problems.concat(newProblems)\r\n\r\n    @aceSession.setAnnotations annotations\r\n    @highlightCurrentLine aether.flow unless _.isEmpty aether.flow\r\n    #console.log '  and we could do the metrics', aether.metrics unless _.isEmpty aether.metrics\r\n    #console.log '  and we could do the style', aether.style unless _.isEmpty aether.style\r\n    #console.log '  and we could do the visualization', aether.visualization unless _.isEmpty aether.visualization\r\n    Backbone.Mediator.publish 'tome:problems-updated', spell: @spell, problems: @problems, isCast: isCast\r\n    @ace.resize()\r\n\r\n  # Tell ProblemAlertView to display this problem (only)\r\n  displayProblemBanner: (problem) ->\r\n    lineOffsetPx = 0\r\n    if problem.row?\r\n      for i in [0...problem.row]\r\n        lineOffsetPx += @aceSession.getRowLength(i) * @ace.renderer.lineHeight\r\n      lineOffsetPx -= @ace.session.getScrollTop()\r\n    Backbone.Mediator.publish 'tome:show-problem-alert', problem: problem, lineOffsetPx: Math.max lineOffsetPx, 0\r\n\r\n  # Gets the number of lines before the start of <script> content in the usercode\r\n  # Because Errors report their line number relative to the <script> tag\r\n  linesBeforeScript: (html) ->\r\n    # TODO: refactor, make it work with multiple scripts. What to do when error is in level-creator's code?\r\n    _.size(html.split('<script>')[0].match(/\\n/g))\r\n\r\n  addAnnotation: (annotation) ->\r\n    annotations = @aceSession.getAnnotations()\r\n    annotations.push annotation\r\n    @reallySetAnnotations annotations\r\n\r\n  # Handle errors from the web-dev iframe asynchronously\r\n  onWebDevError: (error) ->\r\n    # TODO: Refactor this and the Aether problem flow to share as much as possible.\r\n    # TODO: Handle when the error is in our code, not theirs\r\n    # Compensate for line number being relative to <script> tag\r\n    offsetError = _.merge {}, error, { line: error.line + @linesBeforeScript(@getSource()) }\r\n    userCodeHasChangedSinceLastCast = @spell.hasChanged(@spell.getSource(), @sourceAtLastCast)\r\n    problem = new Problem({ error: offsetError, @ace, levelID: @options.levelID, userCodeHasChangedSinceLastCast })\r\n    # Ignore the Problem if we already know about it\r\n    if _.any(@problems, (preexistingProblem) -> problem.isEqual(preexistingProblem))\r\n      problem.destroy()\r\n    else # Ok, the problem is worth keeping\r\n      @problems.push problem\r\n      @displayProblemBanner(problem)\r\n\r\n      # @saveUserCodeProblem(aether, aetherProblem) # TODO: Enable saving of web-dev user code problems\r\n      @addAnnotation(problem.annotation) if problem.annotation\r\n      Backbone.Mediator.publish 'tome:problems-updated', spell: @spell, problems: @problems, isCast: false\r\n\r\n  onProblemsUpdated: ({ spell, problems, isCast }) ->\r\n    # This just handles some ace styles for now; other things handle @problems changes elsewhere\r\n    @ace[if problems.length then 'setStyle' else 'unsetStyle'] 'user-code-problem'\r\n    @ace[if isCast then 'setStyle' else 'unsetStyle'] 'spell-cast' # Does this still do anything?\r\n\r\n  saveUserCodeProblem: (aether, aetherProblem) ->\r\n    # Skip duplicate problems\r\n    hashValue = aether.raw + aetherProblem.message\r\n    return if hashValue of @savedProblems\r\n    @savedProblems[hashValue] = true\r\n    return unless Math.random() < 0.01  # Let's only save a tiny fraction of these during HoC to reduce writes.\r\n\r\n    # Save new problem\r\n    @userCodeProblem = new UserCodeProblem()\r\n    @userCodeProblem.set 'code', aether.raw\r\n    if aetherProblem.range\r\n      rawLines = aether.raw.split '\\n'\r\n      errorLines = rawLines.slice aetherProblem.range[0].row, aetherProblem.range[1].row + 1\r\n      @userCodeProblem.set 'codeSnippet', errorLines.join '\\n'\r\n    @userCodeProblem.set 'errHint', aetherProblem.hint if aetherProblem.hint\r\n    @userCodeProblem.set 'errId', aetherProblem.id if aetherProblem.id\r\n    @userCodeProblem.set 'errLevel', aetherProblem.level if aetherProblem.level\r\n    if aetherProblem.message\r\n      @userCodeProblem.set 'errMessage', aetherProblem.message\r\n      # Save error message without 'Line N: ' prefix\r\n      messageNoLineInfo = aetherProblem.message\r\n      if lineInfoMatch = messageNoLineInfo.match /^Line [0-9]+\\: /\r\n        messageNoLineInfo = messageNoLineInfo.slice(lineInfoMatch[0].length)\r\n      @userCodeProblem.set 'errMessageNoLineInfo', messageNoLineInfo\r\n    @userCodeProblem.set 'errRange', aetherProblem.range if aetherProblem.range\r\n    @userCodeProblem.set 'errType', aetherProblem.type if aetherProblem.type\r\n    @userCodeProblem.set 'language', aether.language.id if aether.language?.id\r\n    @userCodeProblem.set 'levelID', @options.levelID if @options.levelID\r\n    @userCodeProblem.save()\r\n    null\r\n\r\n  # Autocast (preload the world in the background):\r\n  # Goes immediately if the code is a) changed and b) complete/valid and c) the cursor is at beginning or end of a line\r\n  # We originally thought it would:\r\n  # - Go after specified delay if a) and b) but not c)\r\n  # - Go only when manually cast or deselecting a Thang when there are errors\r\n  # But the error message display was delayed, so now trying:\r\n  # - Go after specified delay if a) and not b) or c)\r\n  guessWhetherFinished: (aether) ->\r\n    valid = not aether.getAllProblems().length\r\n    return unless valid\r\n    cursorPosition = @ace.getCursorPosition()\r\n    currentLine = _.string.rtrim(@aceDoc.$lines[cursorPosition.row].replace(@singleLineCommentRegex(), ''))  # trim // unless inside \"\r\n    endOfLine = cursorPosition.column >= currentLine.length  # just typed a semicolon or brace, for example\r\n    beginningOfLine = not currentLine.substr(0, cursorPosition.column).trim().length  # uncommenting code, for example\r\n    incompleteThis = /^(s|se|sel|self|t|th|thi|this)$/.test currentLine.trim()\r\n    #console.log \"finished=#{valid and (endOfLine or beginningOfLine) and not incompleteThis}\", valid, endOfLine, beginningOfLine, incompleteThis, cursorPosition, currentLine.length, aether, new Date() - 0, currentLine\r\n    if not incompleteThis and @options.level.isType('game-dev')\r\n      # TODO: Improve gamedev autocast speed\r\n      @spell.transpile @getSource()\r\n      @cast(false, false, true)\r\n    else if (endOfLine or beginningOfLine) and not incompleteThis\r\n      @preload()\r\n\r\n  singleLineCommentRegex: ->\r\n    if @_singleLineCommentRegex\r\n      @_singleLineCommentRegex.lastIndex = 0\r\n      return @_singleLineCommentRegex\r\n    if @spell.language is 'html'\r\n      commentStart = \"#{commentStarts.html}|#{commentStarts.css}|#{commentStarts.javascript}\"\r\n    else\r\n      commentStart = commentStarts[@spell.language] or '//'\r\n    @_singleLineCommentRegex = new RegExp \"[ \\t]*(#{commentStart})[^\\\"'\\n]*\"\r\n    @_singleLineCommentRegex\r\n\r\n  singleLineCommentOnlyRegex: ->\r\n    if @_singleLineCommentOnlyRegex\r\n      @_singleLineCommentOnlyRegex.lastIndex = 0\r\n      return @_singleLineCommentOnlyRegex\r\n    @_singleLineCommentOnlyRegex = new RegExp( '^' + @singleLineCommentRegex().source)\r\n    @_singleLineCommentOnlyRegex\r\n\r\n  commentOutMyCode: ->\r\n    prefix = if @spell.language is 'javascript' then 'return;  ' else 'return  '\r\n    comment = prefix + commentStarts[@spell.language]\r\n\r\n  preload: ->\r\n    # Send this code over to the God for preloading, but don't change the cast state.\r\n    #console.log 'preload?', @spell.source.indexOf('while'), @spell.source.length, @spellThang?.castAether?.metrics?.statementsExecuted\r\n    return if @spell.source.indexOf('while') isnt -1  # If they're working with while-loops, it's more likely to be an incomplete infinite loop, so don't preload.\r\n    return if @spell.source.length > 500  # Only preload on really short methods\r\n    return if @spellThang?.castAether?.metrics?.statementsExecuted > 2000  # Don't preload if they are running significant amounts of user code\r\n    return if @options.level.isType('web-dev')\r\n    oldSource = @spell.source\r\n    oldSpellThangAether = @spell.thang?.aether.serialize()\r\n    @spell.transpile @getSource()\r\n    @cast true\r\n    @spell.source = oldSource\r\n    for key, value of oldSpellThangAether\r\n      @spell.thang.aether[key] = value\r\n\r\n  onSpellChanged: (e) ->\r\n    # TODO: Merge with updateHTML\r\n    @spellHasChanged = true\r\n\r\n  onAceMouseOut: (e) ->\r\n    Backbone.Mediator.publish(\"web-dev:stop-hovering-line\")\r\n\r\n  onAceMouseMove: (e) =>\r\n    return if @destroyed\r\n    row = e.getDocumentPosition().row\r\n    return if row is @lastRowHovered # Don't spam repeated messages for the same line\r\n    @lastRowHovered = row\r\n    line = @aceSession.getLine(row)\r\n    Backbone.Mediator.publish(\"web-dev:hover-line\", { row: row, line })\r\n    null\r\n\r\n  onSessionWillSave: (e) ->\r\n    return unless @spellHasChanged and me.isAdmin()\r\n    setTimeout(=>\r\n      unless @destroyed or @spellHasChanged\r\n        @$el.find('.save-status').finish().show().fadeOut(2000)\r\n    , 1000)\r\n    @spellHasChanged = false\r\n\r\n  onUserCodeProblem: (e) ->\r\n    return unless e.god is @options.god\r\n    return @onInfiniteLoop e if e.problem.id is 'runtime_InfiniteLoop'\r\n    return unless e.problem.userInfo.methodName is @spell.name\r\n    return unless @spell.thang?.thang.id is e.problem.userInfo.thangID\r\n    @spell.hasChangedSignificantly @getSource(), null, (hasChanged) =>\r\n      return if hasChanged\r\n      @spell.thang.aether.addProblem e.problem\r\n      @lastUpdatedAetherSpellThang = null  # force a refresh without a re-transpile\r\n      @updateAether false, false\r\n\r\n  onNonUserCodeProblem: (e) ->\r\n    return unless e.god is @options.god\r\n    return unless @spellThang\r\n    problem = @spellThang.aether.createUserCodeProblem type: 'runtime', kind: 'Unhandled', message: \"Unhandled error: #{e.problem.message}\"\r\n    @spellThang.aether.addProblem problem\r\n    @spellThang.castAether?.addProblem problem\r\n    @lastUpdatedAetherSpellThang = null  # force a refresh without a re-transpile\r\n    @updateAether false, false  # TODO: doesn't work, error doesn't display\r\n\r\n  onInfiniteLoop: (e) ->\r\n    return unless @spellThang\r\n    @spellThang.aether.addProblem e.problem\r\n    @spellThang.castAether?.addProblem e.problem\r\n    @lastUpdatedAetherSpellThang = null  # force a refresh without a re-transpile\r\n    @updateAether false, false\r\n\r\n  onNewWorld: (e) ->\r\n    if thang = e.world.getThangByID @spell.thang?.thang.id\r\n      aether = e.world.userCodeMap[thang.id]?[@spell.name]\r\n      @spell.thang.castAether = aether\r\n      @spell.thang.aether = @spell.createAether thang\r\n      #console.log thang.id, @spell.spellKey, 'ran', aether.metrics.callsExecuted, 'times over', aether.metrics.statementsExecuted, 'statements, with max recursion depth', aether.metrics.maxDepth, 'and full flow/metrics', aether.metrics, aether.flow\r\n    else\r\n      @spell.thang = null\r\n\r\n    @spell.transpile()  # TODO: is there any way we can avoid doing this if it hasn't changed? Causes a slight hang.\r\n    @updateAether false, false\r\n\r\n  # --------------------------------------------------------------------------------------------------\r\n\r\n  focus: ->\r\n    # TODO: it's a hack checking if a modal is visible; the events should be removed somehow\r\n    # but this view is not part of the normal subview destroying because of how it's swapped\r\n    return unless @controlsEnabled and @writable and $('.modal:visible').length is 0\r\n    return if @ace.isFocused()\r\n    @ace.focus()\r\n    @ace.clearSelection()\r\n\r\n  onFrameChanged: (e) ->\r\n    return unless @spellThang and e.selectedThang?.id is @spellThang?.thang.id\r\n    @thang = e.selectedThang  # update our thang to the current version\r\n    @highlightCurrentLine()\r\n\r\n  onCoordinateSelected: (e) ->\r\n    return unless @ace.isFocused() and e.x? and e.y?\r\n    if @spell.language is 'python'\r\n      @ace.insert \"{\\\"x\\\": #{e.x}, \\\"y\\\": #{e.y}}\"\r\n    else if @spell.language is 'lua'\r\n      @ace.insert \"{x=#{e.x}, y=#{e.y}}\"\r\n    else\r\n      @ace.insert \"{x: #{e.x}, y: #{e.y}}\"\r\n    @highlightCurrentLine()\r\n\r\n  onStatementIndexUpdated: (e) ->\r\n    return unless e.ace is @ace\r\n    @highlightCurrentLine()\r\n\r\n  highlightCurrentLine: (flow) =>\r\n    # TODO: move this whole thing into SpellDebugView or somewhere?\r\n    @highlightEntryPoints() unless @destroyed\r\n    flow ?= @spellThang?.castAether?.flow\r\n    return unless flow and @thang\r\n    executed = []\r\n    executedRows = {}\r\n    matched = false\r\n    states = flow.states ? []\r\n    currentCallIndex = null\r\n    for callState, callNumber in states\r\n      if not currentCallIndex? and callState.userInfo?.time > @thang.world.age\r\n        currentCallIndex = callNumber - 1\r\n      if matched\r\n        executed.pop()\r\n        break\r\n      executed.push []\r\n      for state, statementNumber in callState.statements\r\n        if state.userInfo?.time > @thang.world.age\r\n          matched = true\r\n          break\r\n        _.last(executed).push state\r\n        executedRows[state.range[0].row] = true\r\n    #state.executing = true if state.userInfo?.time is @thang.world.age  # no work\r\n    currentCallIndex ?= callNumber - 1\r\n    #console.log 'got call index', currentCallIndex, 'for time', @thang.world.age, 'out of', states.length\r\n\r\n    @decoratedGutter = @decoratedGutter || {}\r\n\r\n    # TODO: don't redo the markers if they haven't actually changed\r\n    for markerRange in (@markerRanges ?= [])\r\n      markerRange.start.detach()\r\n      markerRange.end.detach()\r\n      @aceSession.removeMarker markerRange.id\r\n    @markerRanges = []\r\n    for row in [0 ... @aceSession.getLength()]\r\n      unless executedRows[row]\r\n        @aceSession.removeGutterDecoration row, 'executing'\r\n        @aceSession.removeGutterDecoration row, 'executed'\r\n        @decoratedGutter[row] = ''\r\n    lastExecuted = _.last executed\r\n    showToolbarView = executed.length and @spellThang.castAether.metrics.statementsExecuted > 3 and not @options.level.get 'hidesCodeToolbar'  # Hide for a while\r\n    showToolbarView = false  # TODO: fix toolbar styling in new design to have some space for it\r\n\r\n    if showToolbarView\r\n      statementIndex = Math.max 0, lastExecuted.length - 1\r\n      @toolbarView?.toggleFlow true\r\n      @toolbarView?.setCallState states[currentCallIndex], statementIndex, currentCallIndex, @spellThang.castAether.metrics\r\n      lastExecuted = lastExecuted[0 .. @toolbarView.statementIndex] if @toolbarView?.statementIndex?\r\n    else\r\n      @toolbarView?.toggleFlow false\r\n      @debugView?.setVariableStates {}\r\n    marked = {}\r\n    gotVariableStates = false\r\n    for state, i in lastExecuted ? []\r\n      [start, end] = state.range\r\n      clazz = if i is lastExecuted.length - 1 then 'executing' else 'executed'\r\n      if clazz is 'executed'\r\n        continue if marked[start.row]\r\n        marked[start.row] = true\r\n        markerType = 'fullLine'\r\n      else\r\n        @debugView?.setVariableStates state.variables\r\n        gotVariableStates = true\r\n        markerType = 'text'\r\n      markerRange = new Range start.row, start.col, end.row, end.col\r\n      markerRange.start = @aceDoc.createAnchor markerRange.start\r\n      markerRange.end = @aceDoc.createAnchor markerRange.end\r\n      markerRange.id = @aceSession.addMarker markerRange, clazz, markerType\r\n      @markerRanges.push markerRange\r\n      if executedRows[start.row] and @decoratedGutter[start.row] isnt clazz\r\n        @aceSession.removeGutterDecoration start.row, @decoratedGutter[start.row] if @decoratedGutter[start.row] isnt ''\r\n        @aceSession.addGutterDecoration start.row, clazz\r\n        @decoratedGutter[start.row] = clazz\r\n        Backbone.Mediator.publish(\"tome:highlight-line\", line:start.row) if application.isIPadApp\r\n    @debugView?.setVariableStates {} unless gotVariableStates\r\n    null\r\n\r\n  highlightEntryPoints: ->\r\n    # Put a yellow arrow in the gutter pointing to each place we expect them to put in code.\r\n    # Usually, this is indicated by a blank line after a comment line, except for the first comment lines.\r\n    # If we need to indicate an entry point on a line that has code, we use ∆ in a comment on that line.\r\n    # If the entry point line has been changed (beyond the most basic shifted lines), we don't point it out.\r\n    lines = @aceDoc.$lines\r\n    originalLines = @spell.originalSource.split '\\n'\r\n    session = @aceSession\r\n    commentStart = commentStarts[@spell.language] or '//'\r\n    seenAnEntryPoint = false\r\n    previousLine = null\r\n    previousLineHadComment = false\r\n    previousLineHadCode = false\r\n    previousLineWasBlank = false\r\n    pastIntroComments = false\r\n    for line, index in lines\r\n      session.removeGutterDecoration index, 'entry-point'\r\n      session.removeGutterDecoration index, 'next-entry-point'\r\n      session.removeGutterDecoration index, \"entry-point-indent-#{i}\" for i in [0, 4, 8, 12, 16]\r\n\r\n      lineHasComment = @singleLineCommentRegex().test line\r\n      lineHasCode = line.trim()[0] and not @singleLineCommentOnlyRegex().test line\r\n      lineIsBlank = /^[ \\t]*$/.test line\r\n      lineHasExplicitMarker = line.indexOf('∆') isnt -1\r\n\r\n      originalLine = originalLines[index]\r\n      lineHasChanged = line isnt originalLine\r\n\r\n      isEntryPoint = lineIsBlank and previousLineHadComment and not previousLineHadCode and pastIntroComments\r\n      if isEntryPoint and lineHasChanged\r\n        # It might just be that the line was shifted around by the player inserting more code.\r\n        # We also look for the unchanged comment line in a new position to find what line we're really on.\r\n        movedIndex = originalLines.indexOf previousLine\r\n        if movedIndex isnt -1 and line is originalLines[movedIndex + 1]\r\n          lineHasChanged = false\r\n        else\r\n          isEntryPoint = false\r\n\r\n      if lineHasExplicitMarker\r\n        if lineHasChanged\r\n          if originalLines.indexOf(line) isnt -1\r\n            lineHasChanged = false\r\n            isEntryPoint = true\r\n        else\r\n          isEntryPoint = true\r\n\r\n      if isEntryPoint\r\n        session.addGutterDecoration index, 'entry-point'\r\n        unless seenAnEntryPoint\r\n          session.addGutterDecoration index, 'next-entry-point'\r\n          seenAnEntryPoint = true\r\n\r\n        # Shift pointer right based on current indentation\r\n        # TODO: tabs probably need different horizontal offsets than spaces\r\n        indent = 0\r\n        indent++ while /\\s/.test(line[indent])\r\n        indent = Math.min(16, Math.floor(indent / 4) * 4)\r\n        session.addGutterDecoration index, \"entry-point-indent-#{indent}\"\r\n\r\n      previousLine = line\r\n      previousLineHadComment = lineHasComment\r\n      previousLineHadCode = lineHasCode\r\n      previousLineWasBlank = lineIsBlank\r\n      pastIntroComments ||= lineHasCode or previousLineWasBlank\r\n\r\n  onAnnotationClick: ->\r\n    # @ is the gutter element\r\n    Backbone.Mediator.publish 'tome:jiggle-problem-alert', {}\r\n\r\n  onGutterClick: =>\r\n    @ace.clearSelection()\r\n\r\n  onDisableControls: (e) -> @toggleControls e, false\r\n  onEnableControls: (e) -> @toggleControls e, @writable\r\n  toggleControls: (e, enabled) ->\r\n    return if @destroyed\r\n    return if e?.controls and not ('editor' in e.controls)\r\n    return if enabled is @controlsEnabled\r\n    @controlsEnabled = enabled and @writable\r\n    disabled = not enabled\r\n    wasFocused = @ace.isFocused()\r\n    @ace.setReadOnly disabled\r\n    @ace[if disabled then 'setStyle' else 'unsetStyle'] 'disabled'\r\n    @toggleBackground()\r\n    $('body').focus() if disabled and wasFocused\r\n\r\n  toggleBackground: =>\r\n    # TODO: make the background an actual background and do the CSS trick\r\n    # used in spell-top-bar-view.sass for disabling\r\n    background = @$el.find('img.code-background')[0]\r\n    if background.naturalWidth is 0  # not loaded yet\r\n      return _.delay @toggleBackground, 100\r\n    filters.revertImage background, 'span.code-background' if @controlsEnabled\r\n    filters.darkenImage background, 'span.code-background', 0.8 unless @controlsEnabled\r\n\r\n  onSpellBeautify: (e) ->\r\n    return unless @spellThang and (@ace.isFocused() or e.spell is @spell)\r\n    ugly = @getSource()\r\n    pretty = @spellThang.aether.beautify(ugly.replace /\\bloop\\b/g, 'while (__COCO_LOOP_CONSTRUCT__)').replace /while \\(__COCO_LOOP_CONSTRUCT__\\)/g, 'loop'\r\n    @ace.setValue pretty\r\n\r\n  onMaximizeToggled: (e) ->\r\n    _.delay (=> @resize()), 500 + 100  # Wait $level-resize-transition-time, plus a bit.\r\n\r\n  onWindowResize: (e) =>\r\n    @spellPaletteHeight = null\r\n    #$('#spell-palette-view').css 'height', 'auto'  # Let it go back to controlling its own height\r\n    _.delay (=> @resize?()), 500 + 100  # Wait $level-resize-transition-time, plus a bit.\r\n\r\n  resize: ->\r\n    @ace?.resize true\r\n    @lastScreenLineCount = null\r\n    @updateLines()\r\n\r\n  onChangeEditorConfig: (e) ->\r\n    aceConfig = me.get('aceConfig') ? {}\r\n    @ace.setDisplayIndentGuides aceConfig.indentGuides # default false\r\n    @ace.setShowInvisibles aceConfig.invisibles # default false\r\n    @ace.setKeyboardHandler @keyBindings[aceConfig.keyBindings ? 'default']\r\n    @updateAutocomplete(aceConfig.liveCompletion ? false)\r\n\r\n  onChangeLanguage: (e) ->\r\n    return unless @spell.canWrite()\r\n    @aceSession.setMode utils.aceEditModes[e.language]\r\n    @autocomplete?.set 'language', utils.aceEditModes[e.language].substr('ace/mode/')\r\n    wasDefault = @getSource() is @spell.originalSource\r\n    @spell.setLanguage e.language\r\n    @reloadCode true if wasDefault\r\n\r\n  onInsertSnippet: (e) ->\r\n    snippetCode = null\r\n    if e.doc.snippets?[e.language]?.code\r\n      snippetCode = e.doc.snippets[e.language].code\r\n    else if (e.formatted.type isnt 'snippet') and e.formatted.shortName?\r\n      snippetCode = e.formatted.shortName\r\n    return unless snippetCode?\r\n    snippetManager = ace.require('ace/snippets').snippetManager\r\n    snippetManager.insertSnippet @ace, snippetCode\r\n    return\r\n\r\n  dismiss: ->\r\n    @spell.hasChangedSignificantly @getSource(), null, (hasChanged) =>\r\n      @recompile() if hasChanged\r\n\r\n  onScriptStateChange: (e) ->\r\n    @scriptRunning = if e.currentScript is null then false else true\r\n\r\n  onPlaybackEndedChanged: (e) ->\r\n    $(@ace?.container).toggleClass 'playback-ended', e.ended\r\n\r\n  checkRequiredCode: =>\r\n    return if @destroyed\r\n    source = @getSource().replace @singleLineCommentRegex(), ''\r\n    requiredCodeFragments = @options.level.get 'requiredCode'\r\n    for requiredCodeFragment in requiredCodeFragments\r\n      # Could make this obey regular expressions like suspectCode if needed\r\n      if source.indexOf(requiredCodeFragment) is -1\r\n        @warnedCodeFragments ?= {}\r\n        unless @warnedCodeFragments[requiredCodeFragment]\r\n          Backbone.Mediator.publish 'tome:required-code-fragment-deleted', codeFragment: requiredCodeFragment\r\n        @warnedCodeFragments[requiredCodeFragment] = true\r\n\r\n  checkSuspectCode: =>\r\n    return if @destroyed\r\n    source = @getSource().replace @singleLineCommentRegex(), ''\r\n    suspectCodeFragments = @options.level.get 'suspectCode'\r\n    detectedSuspectCodeFragmentNames = []\r\n    for suspectCodeFragment in suspectCodeFragments\r\n      pattern = new RegExp suspectCodeFragment.pattern, 'm'\r\n      if pattern.test source\r\n        @warnedCodeFragments ?= {}\r\n        unless @warnedCodeFragments[suspectCodeFragment.name]\r\n          Backbone.Mediator.publish 'tome:suspect-code-fragment-added', codeFragment: suspectCodeFragment.name, codeLanguage: @spell.language\r\n        @warnedCodeFragments[suspectCodeFragment.name] = true\r\n        detectedSuspectCodeFragmentNames.push suspectCodeFragment.name\r\n    for lastDetectedSuspectCodeFragmentName in @lastDetectedSuspectCodeFragmentNames ? []\r\n      unless lastDetectedSuspectCodeFragmentName in detectedSuspectCodeFragmentNames\r\n        Backbone.Mediator.publish 'tome:suspect-code-fragment-deleted', codeFragment: lastDetectedSuspectCodeFragmentName, codeLanguage: @spell.language\r\n    @lastDetectedSuspectCodeFragmentNames = detectedSuspectCodeFragmentNames\r\n\r\n  destroy: ->\r\n    $(@ace?.container).find('.ace_gutter').off 'click', '.ace_error, .ace_warning, .ace_info', @onAnnotationClick\r\n    $(@ace?.container).find('.ace_gutter').off 'click', @onGutterClick\r\n    @firepad?.dispose()\r\n    @ace?.commands.removeCommand command for command in @aceCommands\r\n    @ace?.destroy()\r\n    @aceDoc?.off 'change', @onCodeChangeMetaHandler\r\n    @aceSession?.selection.off 'changeCursor', @onCursorActivity\r\n    @destroyAceEditor(@ace)\r\n    @debugView?.destroy()\r\n    @translationView?.destroy()\r\n    @toolbarView?.destroy()\r\n    @autocomplete?.addSnippets [], @editorLang if @editorLang?\r\n    $(window).off 'resize', @onWindowResize\r\n    window.clearTimeout @saveSpadeTimeout\r\n    @saveSpadeTimeout = null\r\n    super()\r\n\r\n# Note: These need to be double-escaped for insertion into regexes\r\ncommentStarts =\r\n  javascript: '//'\r\n  python: '#'\r\n  coffeescript: '#'\r\n  lua: '--'\r\n  java: '//'\r\n  html: '<!--'\r\n  css: '/\\\\*'\r\n","# There's one TomeView per Level. It has:\r\n# - a CastButtonView, which has\r\n#   - a cast button\r\n#   - a submit/done button\r\n# - for each spell (programmableMethod) (which is now just always only 'plan')\r\n#   - a Spell, which has\r\n#     - a Thang that uses that Spell, with an aether and a castAether\r\n#     - a SpellView, which has\r\n#       - tons of stuff; the meat\r\n#     - a SpellTopBarView, which has some controls\r\n# - a SpellPaletteView, which has\r\n#   - for each programmableProperty:\r\n#     - a SpellPaletteEntryView\r\n#\r\n# The CastButtonView always shows.\r\n# The SpellPaletteView shows the entries for the currently selected Programmable Thang.\r\n# The SpellView shows the code and runtime state for the currently selected Spell and, specifically, Thang.\r\n# You can switch a SpellView to showing the runtime state of another Thang sharing that Spell.\r\n# SpellPaletteViews are destroyed and recreated whenever you switch Thangs.\r\n\r\nCocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/level/tome/tome'\r\n{me} = require 'core/auth'\r\nSpell = require './Spell'\r\nSpellPaletteView = require './SpellPaletteView'\r\nCastButtonView = require './CastButtonView'\r\nutils = require 'core/utils'\r\n\r\nmodule.exports = class TomeView extends CocoView\r\n  id: 'tome-view'\r\n  template: template\r\n  controlsEnabled: true\r\n  cache: false\r\n\r\n  subscriptions:\r\n    'tome:spell-loaded': 'onSpellLoaded'\r\n    'tome:cast-spell': 'onCastSpell'\r\n    'tome:change-language': 'updateLanguageForAllSpells'\r\n    'surface:sprite-selected': 'onSpriteSelected'\r\n    'god:new-world-created': 'onNewWorld'\r\n    'tome:comment-my-code': 'onCommentMyCode'\r\n    'tome:select-primary-sprite': 'onSelectPrimarySprite'\r\n\r\n  events:\r\n    'click': 'onClick'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    unless options.god\r\n      console.error \"TomeView created with no God!\"\r\n\r\n  afterRender: ->\r\n    super()\r\n    @worker = @createWorker()\r\n    programmableThangs = _.filter @options.thangs, (t) -> t.isProgrammable and t.programmableMethods\r\n    if @options.level.isType('web-dev')\r\n      if @fakeProgrammableThang = @createFakeProgrammableThang()\r\n        programmableThangs = [@fakeProgrammableThang]\r\n    @createSpells programmableThangs, programmableThangs[0]?.world  # Do before castButton\r\n    @castButton = @insertSubView new CastButtonView spells: @spells, level: @options.level, session: @options.session, god: @options.god\r\n    @teamSpellMap = @generateTeamSpellMap(@spells)\r\n    unless programmableThangs.length\r\n      @cast()\r\n      warning = 'Warning: There are no Programmable Thangs in this level, which makes it unplayable.'\r\n      noty text: warning, layout: 'topCenter', type: 'warning', killer: false, timeout: 15000, dismissQueue: true, maxVisible: 3\r\n      console.warn warning\r\n    delete @options.thangs\r\n\r\n  onNewWorld: (e) ->\r\n    programmableThangs = _.filter e.thangs, (t) -> t.isProgrammable and t.programmableMethods and t.inThangList\r\n    @createSpells programmableThangs, e.world\r\n\r\n  onCommentMyCode: (e) ->\r\n    for spellKey, spell of @spells when spell.canWrite()\r\n      console.log 'Commenting out', spellKey\r\n      commentedSource = spell.view.commentOutMyCode() + 'Commented out to stop infinite loop.\\n' + spell.getSource()\r\n      spell.view.updateACEText commentedSource\r\n      spell.view.recompile false\r\n    @cast()\r\n\r\n  createWorker: ->\r\n    return null unless Worker?\r\n    return null if window.application.isIPadApp  # Save memory!\r\n    return new Worker('/javascripts/workers/aether_worker.js')\r\n\r\n  generateTeamSpellMap: (spellObject) ->\r\n    teamSpellMap = {}\r\n    for spellName, spell of spellObject\r\n      teamName = spell.team\r\n      teamSpellMap[teamName] ?= []\r\n\r\n      spellNameElements = spellName.split '/'\r\n      thangName = spellNameElements[0]\r\n      spellName = spellNameElements[1]\r\n\r\n      teamSpellMap[teamName].push thangName if thangName not in teamSpellMap[teamName]\r\n\r\n    return teamSpellMap\r\n\r\n  createSpells: (programmableThangs, world) ->\r\n    language = @options.session.get('codeLanguage') ? me.get('aceConfig')?.language ? 'python'\r\n    pathPrefixComponents = ['play', 'level', @options.levelID, @options.session.id, 'code']\r\n    @spells ?= {}\r\n    @thangSpells ?= {}\r\n    for thang in programmableThangs\r\n      continue if @thangSpells[thang.id]?\r\n      @thangSpells[thang.id] = []\r\n      for methodName, method of thang.programmableMethods\r\n        pathComponents = [thang.id, methodName]\r\n        pathComponents[0] = _.string.slugify pathComponents[0]\r\n        spellKey = pathComponents.join '/'\r\n        @thangSpells[thang.id].push spellKey\r\n        skipProtectAPI = @getQueryVariable 'skip_protect_api', false\r\n        spell = @spells[spellKey] = new Spell\r\n          hintsState: @options.hintsState\r\n          programmableMethod: method\r\n          spellKey: spellKey\r\n          pathComponents: pathPrefixComponents.concat(pathComponents)\r\n          session: @options.session\r\n          otherSession: @options.otherSession\r\n          supermodel: @supermodel\r\n          skipProtectAPI: skipProtectAPI\r\n          worker: @worker\r\n          language: language\r\n          spectateView: @options.spectateView\r\n          spectateOpponentCodeLanguage: @options.spectateOpponentCodeLanguage\r\n          observing: @options.observing\r\n          levelID: @options.levelID\r\n          level: @options.level\r\n          god: @options.god\r\n          courseID: @options.courseID\r\n\r\n    for thangID, spellKeys of @thangSpells\r\n      thang = @fakeProgrammableThang ? world.getThangByID thangID\r\n      if thang\r\n        @spells[spellKey].addThang thang for spellKey in spellKeys\r\n      else\r\n        delete @thangSpells[thangID]\r\n        spell.removeThangID thangID for spell in @spells\r\n    for spellKey, spell of @spells when not spell.canRead()  # Make sure these get transpiled (they have no views).\r\n      spell.transpile()\r\n      spell.loaded = true\r\n    null\r\n\r\n  onSpellLoaded: (e) ->\r\n    console.log 'onSpellLoaded', e if me.get('name') is 'Shanakin'\r\n    for spellID, spell of @spells\r\n      return unless spell.loaded\r\n    console.log '... all loaded, let us begin' if me.get('name') is 'Shanakin'\r\n    justBegin = @options.level.isType('game-dev')\r\n    @cast false, false, justBegin\r\n\r\n  onCastSpell: (e) ->\r\n    # A single spell is cast.\r\n    @cast e?.preload, e?.realTime, e?.justBegin\r\n\r\n  cast: (preload=false, realTime=false, justBegin=false) ->\r\n    return if @options.level.isType('web-dev')\r\n    sessionState = @options.session.get('state') ? {}\r\n    if realTime\r\n      sessionState.submissionCount = (sessionState.submissionCount ? 0) + 1\r\n      sessionState.flagHistory = _.filter sessionState.flagHistory ? [], (event) => event.team isnt (@options.session.get('team') ? 'humans')\r\n      sessionState.lastUnsuccessfulSubmissionTime = new Date() if @options.level.get 'replayable'\r\n      @options.session.set 'state', sessionState\r\n    difficulty = sessionState.difficulty ? 0\r\n    if @options.observing\r\n      difficulty = Math.max 0, difficulty - 1  # Show the difficulty they won, not the next one.\r\n    Backbone.Mediator.publish 'level:set-playing', {playing: false}\r\n    Backbone.Mediator.publish 'tome:cast-spells', {\r\n      @spells,\r\n      preload,\r\n      realTime,\r\n      justBegin,\r\n      difficulty,\r\n      submissionCount: sessionState.submissionCount ? 0,\r\n      flagHistory: sessionState.flagHistory ? [],\r\n      god: @options.god,\r\n      fixedSeed: @options.fixedSeed\r\n    }\r\n\r\n  onClick: (e) ->\r\n    Backbone.Mediator.publish 'tome:focus-editor', {} unless $(e.target).parents('.popover').length\r\n\r\n  onSpriteSelected: (e) ->\r\n    return if @spellView and @options.level.get('type', true) in ['hero', 'hero-ladder', 'hero-coop', 'course', 'course-ladder', 'game-dev', 'web-dev']  # Never deselect the hero in the Tome.\r\n    spell = @spellFor e.thang, e.spellName\r\n    if spell?.canRead()\r\n      @setSpellView spell, e.thang\r\n\r\n  setSpellView: (spell, thang) ->\r\n    unless spell.view is @spellView\r\n      @spellView = spell.view\r\n      @spellTopBarView = spell.topBarView\r\n      @$el.find('#' + @spellView.id).after(@spellView.el).remove()\r\n      @$el.find('#' + @spellTopBarView.id).after(@spellTopBarView.el).remove()\r\n      @castButton?.attachTo @spellView\r\n    @updateSpellPalette thang, spell\r\n    @spellView?.setThang thang\r\n\r\n  updateSpellPalette: (thang, spell) ->\r\n    @options.playLevelView.updateSpellPalette thang, spell\r\n\r\n  spellFor: (thang, spellName) ->\r\n    return null unless thang?.isProgrammable\r\n    return unless @thangSpells[thang.id]  # Probably in streaming mode, where we don't update until it's done.\r\n    selectedThangSpells = (@spells[spellKey] for spellKey in @thangSpells[thang.id])\r\n    if spellName\r\n      spell = _.find selectedThangSpells, {name: spellName}\r\n    else\r\n      spell = _.find selectedThangSpells, (spell) -> spell.canWrite()\r\n      spell ?= _.find selectedThangSpells, (spell) -> spell.canRead()\r\n    spell\r\n\r\n  reloadAllCode: ->\r\n    if utils.getQueryVariable 'dev'\r\n      @options.playLevelView.spellPaletteView.destroy()\r\n      @updateSpellPalette @spellView.thang, @spellView.spell\r\n    spell.view.reloadCode false for spellKey, spell of @spells when spell.view and (spell.team is me.team or (spell.team in ['common', 'neutral', null]))\r\n    @cast false, false\r\n\r\n  updateLanguageForAllSpells: (e) ->\r\n    spell.updateLanguageAether e.language for spellKey, spell of @spells when spell.canWrite()\r\n    if e.reload\r\n      @reloadAllCode()\r\n    else\r\n      @cast()\r\n\r\n  onSelectPrimarySprite: (e) ->\r\n    if @options.level.isType('web-dev')\r\n      @setSpellView @spells['hero-placeholder/plan'], @fakeProgrammableThang\r\n      return\r\n    # This is fired by PlayLevelView\r\n    if @options.session.get('team') is 'ogres'\r\n      Backbone.Mediator.publish 'level:select-sprite', thangID: 'Hero Placeholder 1'\r\n    else\r\n      Backbone.Mediator.publish 'level:select-sprite', thangID: 'Hero Placeholder'\r\n\r\n  createFakeProgrammableThang: ->\r\n    return null unless hero = _.find @options.level.get('thangs'), id: 'Hero Placeholder'\r\n    return null unless programmableConfig = _.find(hero.components, (component) -> component.config?.programmableMethods).config\r\n    usesHTMLConfig = _.find(hero.components, (component) -> component.config?.programmableHTMLProperties).config\r\n    usesWebJavaScriptConfig = _.find(hero.components, (component) -> component.config?.programmableWebJavaScriptProperties)?.config\r\n    usesJQueryConfig = _.find(hero.components, (component) -> component.config?.programmableJQueryProperties)?.config\r\n    console.warn \"Couldn't find usesHTML config; is it presented and not defaulted on the Hero Placeholder?\" unless usesHTMLConfig\r\n    thang =\r\n      id: 'Hero Placeholder'\r\n      isProgrammable: true\r\n    thang = _.merge thang, programmableConfig, usesHTMLConfig, usesWebJavaScriptConfig, usesJQueryConfig\r\n    thang\r\n\r\n  destroy: ->\r\n    spell.destroy() for spellKey, spell of @spells\r\n    @worker?.terminate()\r\n    super()\r\n","utils = require 'core/utils'\r\nace = require 'ace'\r\n\r\ndefaults =\r\n  autoLineEndings:\r\n    # Mapping ace mode language to line endings to automatically insert\r\n    # E.g. javascript: \";\"\r\n    {}\r\n  basic: true\r\n  snippetsLangDefaults: true\r\n  liveCompletion: true\r\n  language: 'javascript'\r\n  languagePrefixes: 'this.,@,self.'\r\n  completers:\r\n    snippets: true\r\n\r\n\r\n\r\n# TODO: Should we be hooking in completers differently?\r\n# TODO: https://github.com/ajaxorg/ace/blob/f133231df8c1f39156cc230ce31e66103ef4b1e2/lib/ace/ext/language_tools.js#L202\r\n\r\n# TODO: Should show popup if we have a snippet match in Autocomplete.filterCompletions\r\n# TODO: https://github.com/ajaxorg/ace/blob/695e24c41844c17fb2029f073d06338cd73ec33e/lib/ace/autocomplete.js#L449\r\n\r\n# TODO: Create list of manual test cases\r\n\r\nmodule.exports = class Autocomplete\r\n  Tokenizer = ''\r\n  BackgroundTokenizer = ''\r\n\r\n  constructor: (aceEditor, options) ->\r\n    {Tokenizer} = ace.require 'ace/tokenizer'\r\n    {BackgroundTokenizer} = ace.require 'ace/background_tokenizer'\r\n\r\n    @editor = aceEditor\r\n    config = ace.require 'ace/config'\r\n\r\n    options ?= {}\r\n\r\n    defaultsCopy = _.extend {}, defaults\r\n    @options = _.merge defaultsCopy, options\r\n\r\n\r\n    #TODO: Renable option validation if we care\r\n    #validationResult = optionsValidator @options\r\n    #unless validationResult.valid\r\n    #  throw new Error \"Invalid Autocomplete options: \" + JSON.stringify(validationResult.errors, null, 4)\r\n\r\n    ace.config.loadModule 'ace/ext/language_tools', () =>\r\n      @snippetManager = ace.require('ace/snippets').snippetManager\r\n\r\n      # Prevent tabbing a selection trigging an incorrect autocomplete\r\n      # E.g. Given this.moveRight() selecting \".moveRight\" from left to right and hitting tab yields this.this.moveRight()()\r\n      # TODO: Figure out how to intercept this properly\r\n      # TODO: Or, override expandSnippet command\r\n      # TODO: Or, SnippetManager's expandSnippetForSelection\r\n      @snippetManager.expandWithTab = -> return false\r\n\r\n      # Define a background tokenizer that constantly tokenizes the code\r\n      highlightRules = new (@editor.getSession().getMode().HighlightRules)()\r\n      tokenizer = new Tokenizer highlightRules.getRules()\r\n      @bgTokenizer = new BackgroundTokenizer tokenizer, @editor\r\n      aceDocument = @editor.getSession().getDocument()\r\n      @bgTokenizer.setDocument aceDocument\r\n      @bgTokenizer.start(0)\r\n\r\n      @setAceOptions()\r\n      @copyCompleters()\r\n      @activateCompleter()\r\n      @editor.commands.on 'afterExec', @doLiveCompletion\r\n\r\n  setAceOptions: () ->\r\n    aceOptions =\r\n      'enableLiveAutocompletion': @options.liveCompletion\r\n      'enableBasicAutocompletion': @options.basic\r\n      'enableSnippets': @options.completers.snippets\r\n\r\n    @editor.setOptions aceOptions\r\n    @editor.completer?.autoSelect = true\r\n\r\n  copyCompleters: () ->\r\n    @completers = {snippets: {}, text: {}, keywords: {}}\r\n    if @editor.completers?\r\n      [@completers.snippets.comp, @completers.text.comp, @completers.keywords.comp] = @editor.completers\r\n    if @options.completers.snippets\r\n      @completers.snippets = pos: 0\r\n      # Replace the default snippet completer with our custom one\r\n      @completers.snippets.comp = require('./snippets') @snippetManager, @options.autoLineEndings\r\n\r\n  activateCompleter: (comp) ->\r\n    if Array.isArray comp\r\n      @editor.completers = comp\r\n    else if typeof comp is 'string'\r\n      if @completers[comp]? and @editor.completers[@completers[comp].pos] isnt @completers[comp].comp\r\n        @editor.completers.splice(@completers[comp].pos, 0, @completers[comp].comp)\r\n    else\r\n      @editor.completers = []\r\n      for type, comparator of @completers\r\n        if @options.completers[type] is true\r\n          @activateCompleter type\r\n\r\n  addSnippets: (snippets, language) ->\r\n    @options.language = language\r\n    ace.config.loadModule 'ace/ext/language_tools', () =>\r\n      @snippetManager = ace.require('ace/snippets').snippetManager\r\n      snippetModulePath = 'ace/snippets/' + language\r\n      ace.config.loadModule snippetModulePath, (m) =>\r\n        if m?\r\n          @snippetManager.files[language] = m\r\n          @snippetManager.unregister m.snippets if m.snippets?.length > 0\r\n          @snippetManager.unregister @oldSnippets if @oldSnippets?\r\n          m.snippets = if @options.snippetsLangDefaults then @snippetManager.parseSnippetFile m.snippetText else []\r\n          m.snippets.push s for s in snippets\r\n          @snippetManager.register m.snippets\r\n          @oldSnippets = m.snippets\r\n\r\n  setLiveCompletion: (val) ->\r\n    if val is true or val is false\r\n      @options.liveCompletion = val\r\n      @setAceOptions()\r\n\r\n  set: (setting, value) ->\r\n    switch setting\r\n      when 'snippets' or 'completers.snippets'\r\n        return unless typeof value is 'boolean'\r\n        @options.completers.snippets = value\r\n        @setAceOptions()\r\n        @activateCompleter 'snippets'\r\n      when 'basic'\r\n        return unless typeof value is 'boolean'\r\n        @options.basic = value\r\n        @setAceOptions()\r\n        @activateCompleter()\r\n      when 'liveCompletion'\r\n        return unless typeof value is 'boolean'\r\n        @options.liveCompletion = value\r\n        @setAceOptions()\r\n        @activateCompleter()\r\n      when 'language'\r\n        return unless typeof value is 'string'\r\n        @options.language = value\r\n        @setAceOptions()\r\n        @activateCompleter()\r\n      when 'completers.keywords'\r\n        return unless typeof value is 'boolean'\r\n        @options.completers.keywords = value\r\n        @activateCompleter()\r\n      when 'completers.text'\r\n        return unless typeof value is 'boolean'\r\n        @options.completers.text = value\r\n        @activateCompleter()\r\n    return\r\n\r\n  on: -> @paused = false\r\n  off: -> @paused = true\r\n\r\n  doLiveCompletion: (e) =>\r\n    # console.log 'Autocomplete doLiveCompletion', e\r\n    return unless @options.basic or @options.liveCompletion or @options.completers.snippets\r\n    return if @paused\r\n\r\n    TokenIterator = TokenIterator or ace.require('ace/token_iterator').TokenIterator\r\n    editor = e.editor\r\n    text = e.args or \"\"\r\n    hasCompleter = editor.completer and editor.completer.activated\r\n\r\n    # We don't want to autocomplete with no prefix\r\n    if e.command.name is \"backspace\" or e.command.name is \"insertstring\"\r\n      pos = editor.getCursorPosition()\r\n      token = (new TokenIterator editor.getSession(), pos.row, pos.column).getCurrentToken()\r\n      if token? and token.type not in ['comment', 'string']\r\n        prefix = @getCompletionPrefix editor\r\n        # Bake a fresh autocomplete every keystroke\r\n        editor.completer?.detach() if hasCompleter\r\n\r\n        # Skip common single letter variable names\r\n        return if /^x$|^y$/i.test(prefix)\r\n\r\n        # Only autocomplete if there's a prefix that can be matched\r\n        if (prefix)\r\n          unless (editor.completer)\r\n\r\n            # Create new autocompleter\r\n            Autocomplete = ace.require('ace/autocomplete').Autocomplete\r\n\r\n            # Overwrite \"Shift-Return\" to Esc + Return instead\r\n            # https://github.com/ajaxorg/ace/blob/695e24c41844c17fb2029f073d06338cd73ec33e/lib/ace/autocomplete.js#L208\r\n            # TODO: Need a better way to update this command.  This is super shady.\r\n            # TODO: Shift-Return errors when Autocomplete is open, dying on this call:\r\n            # TODO: calls editor.completer.insertMatch(true) in lib/ace/autocomplete.js\r\n            if Autocomplete?.prototype?.commands?\r\n              exitAndReturn = (editor) =>\r\n                # TODO: Execute a proper Return that selects the Autocomplete if open\r\n                editor.completer.detach()\r\n                @editor.insert \"\\n\"\r\n              Autocomplete.prototype.commands[\"Shift-Return\"] = exitAndReturn\r\n\r\n            editor.completer = new Autocomplete()\r\n\r\n          # Disable autoInsert and show popup\r\n          editor.completer.autoSelect = true\r\n          editor.completer.autoInsert = false\r\n          editor.completer.showPopup(editor)\r\n\r\n          # Hide popup if too many suggestions\r\n          # TODO: Completions aren't asked for unless we show popup, so this is super hacky\r\n          # TODO: Backspacing to yield more suggestions does not close popup\r\n          if editor.completer?.completions?.filtered?.length > 20\r\n            editor.completer.detach()\r\n\r\n          # Update popup CSS after it's been launched\r\n          # TODO: Popup has original CSS on first load, and then visibly/weirdly changes based on these updates\r\n          # TODO: Find better way to extend popup.\r\n          else if editor.completer.popup?\r\n            $('.ace_autocomplete').find('.ace_content').css('cursor', 'pointer')\r\n            $('.ace_autocomplete').css('font-size', @options.popupFontSizePx + 'px') if @options.popupFontSizePx?\r\n            $('.ace_autocomplete').css('line-height', @options.popupLineHeightPx + 'px') if @options.popupLineHeightPx?\r\n            $('.ace_autocomplete').css('width', @options.popupWidthPx + 'px') if @options.popupWidthPx?\r\n            editor.completer.popup.resize?()\r\n\r\n            # TODO: Can't change padding before resize(), but changing it afterwards clears new padding\r\n            # TODO: Figure out how to hook into events rather than using setTimeout()\r\n            # fixStuff = =>\r\n            #   $('.ace_autocomplete').find('.ace_line').css('color', 'purple')\r\n            #   $('.ace_autocomplete').find('.ace_line').css('padding', '20px')\r\n            #   # editor.completer.popup.resize?(true)\r\n            # setTimeout fixStuff, 1000\r\n\r\n    # Update tokens for text completer\r\n    if @options.completers.text and e.command.name in ['backspace', 'del', 'insertstring', 'removetolinestart', 'Enter', 'Return', 'Space', 'Tab']\r\n      @bgTokenizer.fireUpdateEvent 0, @editor.getSession().getLength()\r\n\r\n  getCompletionPrefix: (editor) ->\r\n    # TODO: this is not used to get prefix that is passed to completer.getCompletions\r\n    # TODO: Autocomplete.gatherCompletions is using this (no regex 3rd param):\r\n    # TODO: var prefix = util.retrievePrecedingIdentifier(line, pos.column);\r\n    util = util or ace.require 'ace/autocomplete/util'\r\n    pos = editor.getCursorPosition()\r\n    line = editor.session.getLine pos.row\r\n    prefix = null\r\n    editor.completers?.forEach (completer) ->\r\n      if completer?.identifierRegexps\r\n        completer.identifierRegexps.forEach (identifierRegex) ->\r\n          if not prefix and identifierRegex\r\n            prefix = util.retrievePrecedingIdentifier line, pos.column, identifierRegex\r\n    prefix = util.retrievePrecedingIdentifier line, pos.column unless prefix?\r\n    prefix\r\n\r\n  addCodeCombatSnippets: (level, spellView, e) ->\r\n    snippetEntries = []\r\n    source = spellView.getSource()\r\n    haveFindNearestEnemy = false\r\n    haveFindNearest = false\r\n    for group, props of e.propGroups\r\n      for prop in props\r\n        if _.isString prop  # organizePalette\r\n          owner = group\r\n        else                # organizePaletteHero\r\n          owner = prop.owner\r\n          prop = prop.prop\r\n        doc = _.find (e.allDocs['__' + prop] ? []), (doc) ->\r\n          return true if doc.owner is owner\r\n          return (owner is 'this' or owner is 'more') and (not doc.owner? or doc.owner is 'this')\r\n        if doc?.snippets?[e.language]\r\n          name = doc.name\r\n          content = doc.snippets[e.language].code\r\n          if /loop/.test(content) and level.get 'moveRightLoopSnippet'\r\n            # Replace default loop snippet with an embedded moveRight()\r\n            content = switch e.language\r\n              when 'python' then 'loop:\\n    self.moveRight()\\n    ${1:}'\r\n              when 'javascript' then 'loop {\\n    this.moveRight();\\n    ${1:}\\n}'\r\n              else content\r\n          if /loop/.test(content) and level.isType('course', 'course-ladder')\r\n            # Temporary hackery to make it look like we meant while True: in our loop snippets until we can update everything\r\n            content = switch e.language\r\n              when 'python' then content.replace /loop:/, 'while True:'\r\n              when 'javascript' then content.replace /loop/, 'while (true)'\r\n              when 'lua' then content.replace /loop/, 'while true then'\r\n              when 'coffeescript' then content\r\n              else content\r\n            name = switch e.language\r\n              when 'python' then 'while True'\r\n              when 'coffeescript' then 'loop'\r\n              else 'while true'\r\n          # For now, update autocomplete to use hero instead of self/this, if hero is already used in the source.\r\n          # Later, we should make this happen all the time - or better yet update the snippets.\r\n          if /hero/.test(source) or not /(self[\\.\\:]|this\\.|\\@)/.test(source)\r\n            thisToken =\r\n              'python': /self/,\r\n              'javascript': /this/,\r\n              'lua': /self/\r\n            if thisToken[e.language] and thisToken[e.language].test(content)\r\n              content = content.replace thisToken[e.language], 'hero'\r\n\r\n          entry =\r\n            content: content\r\n            meta: $.i18n.t('keyboard_shortcuts.press_enter', defaultValue: 'press enter')\r\n            name: name\r\n            tabTrigger: doc.snippets[e.language].tab\r\n            importance: doc.autoCompletePriority ? 1.0\r\n          haveFindNearestEnemy ||= name is 'findNearestEnemy'\r\n          haveFindNearest ||= name is 'findNearest'\r\n          if name is 'attack'\r\n            # Postpone this until we know if findNearestEnemy is available\r\n            attackEntry = entry\r\n          else\r\n            snippetEntries.push entry\r\n\r\n          if doc.userShouldCaptureReturn\r\n            varName = doc.userShouldCaptureReturn.variableName ? 'result'\r\n            entry.captureReturn = switch e.language\r\n              when 'javascript' then 'var ' + varName + ' = '\r\n              #when 'lua' then 'local ' + varName + ' = '  # TODO: should we do this?\r\n              else varName + ' = '\r\n\r\n    # TODO: Generalize this snippet replacement\r\n    # TODO: Where should this logic live, and what format should it be in?\r\n    if attackEntry?\r\n      unless haveFindNearestEnemy or haveFindNearest or level.get('slug') in ['known-enemy', 'course-known-enemy']\r\n        # No findNearestEnemy, so update attack snippet to string-based target\r\n        # (On Known Enemy, we are introducing enemy2 = \"Gert\", so we want them to do attack(enemy2).)\r\n        attackEntry.content = attackEntry.content.replace '${1:enemy}', '\"${1:Enemy Name}\"'\r\n      snippetEntries.push attackEntry\r\n\r\n    # Update 'hero.' and 'game.' entries to include their prefixes\r\n    for entry in snippetEntries\r\n      if entry.content?.indexOf('hero.') is 0 and entry.name?.indexOf('hero.') < 0\r\n        entry.name = \"hero.#{entry.name}\"\r\n      else if entry.content?.indexOf('game.') is 0 and entry.name?.indexOf('game.') < 0\r\n        entry.name = \"game.#{entry.name}\"\r\n\r\n    if haveFindNearest and not haveFindNearestEnemy\r\n      spellView.translateFindNearest()\r\n\r\n    # window.AutocompleteInstance = @Autocomplete  # For debugging. Make sure to not leave active when committing.\r\n    # window.snippetEntries = snippetEntries\r\n    lang = utils.aceEditModes[e.language].substr 'ace/mode/'.length\r\n    @addSnippets snippetEntries, lang\r\n    spellView.editorLang = lang\r\n","/**\r\n * Based upon:\r\n * A Dynamic Programming Algorithm for Name Matching\r\n * Top, P.;   Dowla, F.;   Gansemer, J.;   \r\n * Sch. of Electr. & Comput. Eng., Purdue Univ., West Lafayette, IN\r\n *\r\n * Variation in JavaScript\r\n * Copyright © 2011, Christopher Stoll\r\n * @author <a href=\"http://www.christopherstoll.org/\">Christopher Stoll</a>\r\n *\r\n * @constructor\r\n * @param {String} [pNameSource=''] The source name, the name of interest\r\n * @param {Boolean} [pDebug=false] The instance is in debugging mode\r\n * @param {String} [pDebugOutputArea=''] Where to put debuging output\r\n */\r\nfunction fuzziac(pNameSource, pDebug, pDebugOutputArea){\r\n\tvar tNameSource = pNameSource || '';\r\n\t\r\n\tif(tNameSource){\r\n\t\t// convert \"last, first\" to \"first last\"\r\n\t\tif(tNameSource.indexOf(',') > 0){\r\n\t\t\tvar tIndex = tNameSource.indexOf(','),\r\n\t\t\t\ttFirst = tNameSource.slice(tIndex+1),\r\n\t\t\t\ttLast = tNameSource.slice(0, tIndex);\r\n\t\t\ttNameSource = tFirst + ' ' + tLast;\r\n\t\t}\r\n\t\t\r\n\t\t// all lowercase, no special characters, and no double sapces\r\n\t\ttNameSource = tNameSource.toLowerCase();\r\n\t\ttNameSource = tNameSource.replace(/[.'\"]/ig, ' ');\r\n\t\ttNameSource = tNameSource.replace(/\\s{2,}/g, ' ');\r\n\t}\r\n\t\r\n\t// TODO: remove when converted for string matching only\r\n\t// debug variables\r\n\tthis.DEBUG = pDebug || false;\r\n\tthis.DEBUG_AREA = pDebugOutputArea;\r\n\t\r\n\t// y axis in matrix, the name in question\r\n\tthis.nameSource = tNameSource;\r\n\tthis.nameSourceLength = this.nameSource.length + 1;\r\n\tthis.nameSourceScore = 0;\r\n\tthis._reset();\r\n}\r\n\r\nfuzziac.prototype = {\r\n\t/**\r\n\t * Reset class variables\r\n\t * @private\r\n\t */\r\n\t_reset: function(pNameTarget){\r\n\t\tvar tNameTarget = pNameTarget || '';\r\n\t\t\r\n\t\t// TODO: remove when converted for string matching only\r\n\t\tif(tNameTarget){\r\n\t\t\ttNameTarget = tNameTarget.toLowerCase();\r\n\t\t\ttNameTarget = tNameTarget.replace(/[.,'\"]/ig, '');\r\n\t\t\ttNameTarget = tNameTarget.replace(/\\s{2,}/g, ' ');\r\n\t\t}\r\n\t\t\r\n\t\t// x axis in matrix, the name to check against\r\n\t\tthis.nameTarget = tNameTarget;\r\n\t\tthis.nameTargetLength = this.nameTarget.length + 1;\r\n\t\tthis.nameTargetScore = 0;\r\n\t\r\n\t\t// DV, the dunamic programming matrix\r\n\t\tthis.dynamicMatrix = [];\r\n\t\t\r\n\t\t// Max value in the matrix\r\n\t\tthis.maxMatrixValue = 0;\r\n\t\t\r\n\t\t// the score for the string\r\n\t\tthis.overallScore = 0;\r\n\t\t\r\n\t\t// weighted average of string and tokens\r\n\t\tthis.finalScore = 0;\r\n\t},\r\n\t\r\n\t/**\r\n\t * CM, character mismatch lookup,\r\n\t * Abreviated 2D array for hex values\r\n\t *\r\n\t * @static\r\n\t * @field\r\n\t */\r\n\tcharacterMatrix: [\r\n\t\t//bcdefghijklmnopqrstuvwxyz\r\n\t\t'a0004000000000400000000000', // a\r\n\t\t'0a000000000000000000000000', // b\r\n\t\t'00a00000004000002000000000', // c\r\n\t\t'000a0000000000000002000000', // d\r\n\t\t'4000a000000000000000000020', // e\r\n\t\t'00000a00000000020000020000', // f\r\n\t\t'000000a0000000000000000000', // g\r\n\t\t'0000000a040000000000000000', // h\r\n\t\t'00000000a20400000000000020', // i\r\n\t\t'000000042a0000000000000040', // j\r\n\t\t'0040000000a000002000000000', // k\r\n\t\t'00000000400a00000000000000', // l\r\n\t\t'000000000000a4000000000000', // m\r\n\t\t'0000000000004a000000000000', // n\r\n\t\t'40000000000000a00000000000', // o\r\n\t\t'000002000000000a0000000000', // p\r\n\t\t'0020000000200000a000000000', // q\r\n\t\t'00000000000000000a00000000', // r\r\n\t\t'000000000000000000a0000000', // s\r\n\t\t'0002000000000000000a000000', // t\r\n\t\t'00000000000000000000a00000', // u\r\n\t\t'000002000000000000000a4000', // v\r\n\t\t'0000000000000000000004a000', // w\r\n\t\t'00000000000000000000000a00', // x\r\n\t\t'000020002400000000000000a0', // y\r\n\t\t'0000000000000000002000000a', // z\r\n\t\t'00000000000000400000000000', // 0\r\n\t\t'00000000400400000000000000', // 1\r\n\t\t'00000000000000000100000002', // 2\r\n\t\t'00002000000000000000000001', // 3\r\n\t\t'20000002000000000000000000', // 4\r\n\t\t'00000000000000000020000000', // 5\r\n\t\t'01000010000000000000000000', // 6\r\n\t\t'00000000100100000002000000', // 7\r\n\t\t'01000000000000000000000000', // 8\r\n\t\t'00000020000000000000000000'  // 9\r\n\t],\r\n\t\r\n\t/**\r\n\t * Dictionary to speed lookups in the character matrix\r\n\t *\r\n\t * @static\r\n\t * @field\r\n\t */\r\n\tcharMatrixDictionary: {\r\n\t\ta: 0,\r\n\t\tb: 1,\r\n\t\tc: 2,\r\n\t\td: 3,\r\n\t\te: 4,\r\n\t\tf: 5,\r\n\t\tg: 6,\r\n\t\th: 7,\r\n\t\ti: 8,\r\n\t\tj: 9,\r\n\t\tk: 10,\r\n\t\tl: 11,\r\n\t\tm: 12,\r\n\t\tn: 13,\r\n\t\to: 14,\r\n\t\tp: 15,\r\n\t\tq: 16,\r\n\t\tr: 17,\r\n\t\ts: 18,\r\n\t\tt: 19,\r\n\t\tu: 20,\r\n\t\tv: 21,\r\n\t\tw: 22,\r\n\t\tx: 23,\r\n\t\ty: 24,\r\n\t\tz: 25,\r\n\t\t0: 26,\r\n\t\t1: 27,\r\n\t\t2: 28,\r\n\t\t3: 29,\r\n\t\t4: 30,\r\n\t\t5: 31,\r\n\t\t6: 32,\r\n\t\t7: 33,\r\n\t\t8: 34,\r\n\t\t9: 35\r\n\t},\r\n\t\r\n\t/**\r\n\t * Return a matching score for two characters\r\n\t *\r\n\t * @private\r\n\t * @param {String} pCharA The first character to test\r\n\t * @param {String} pCharB The second character to test\r\n\t * @returns {Number} Score for the current characters\r\n\t */\r\n\t_characterScore: function(pCharA, pCharB){\r\n\t\tvar matchScore = 10,\r\n\t\t\tmismatchScore = 0,\r\n\t\t\tmismatchPenalty = -4,\r\n\t\t\tcharIndexA = 0,\r\n\t\t\tcharIndexB = 0,\r\n\t\t\trefValue = 0;\r\n\t\t\t\r\n\t\tif(pCharA && pCharB){\r\n\t\t\tif(pCharA == pCharB){\r\n\t\t\t\treturn matchScore;\r\n\t\t\t}else{\r\n\t\t\t\tcharIndexA = this.charMatrixDictionary[pCharA];\r\n\t\t\t\tcharIndexB = this.charMatrixDictionary[pCharB];\r\n\t\t\t\t\r\n\t\t\t\tif(charIndexA && charIndexB){\r\n\t\t\t\t\tmismatchScore = this.characterMatrix[charIndexA][charIndexB]\r\n\t\t\t\t\trefValue = parseInt(mismatchScore, 16);\r\n\r\n\t\t\t\t\tif(refValue){\r\n\t\t\t\t\t\treturn refValue;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn mismatchPenalty;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn mismatchPenalty;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn mismatchPenalty;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t * Return a score for string gaps\r\n\t *\r\n\t * @private\r\n\t * @param {String} pCharA The first character to test\r\n\t * @param {String} pCharB The second character to test\r\n\t * @returns {Number} Score for the current characters\r\n\t */\r\n\t_gappedScore: function(pCharA, pCharB){\r\n\t\tvar gapPenalty = -3,\r\n\t\t\tmismatchPenalty = -4;\r\n\t\t\t\r\n\t\tif((pCharA == ' ') || (pCharB == ' ')){\r\n\t\t\treturn gapPenalty;\r\n\t\t}else{\r\n\t\t\treturn mismatchPenalty;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t * Return a score for transposed strings\r\n\t * TODO: Either actuallly check for transposed characters or eliminate\r\n\t *\r\n\t * @private\r\n\t * @param {String} pCharA The first character to test\r\n\t * @param {String} pCharB The second character to test\r\n\t * @returns {Number} Score for the current characters\r\n\t */\r\n\t_transposedScore: function(pCharA, pCharB){\r\n\t\tvar transposePenalty = -2;\r\n\t\treturn transposePenalty;\r\n\t},\r\n\t\r\n\t/**\r\n\t * Build the dynamic programming matrix for the two current strings \r\n\t * @private\r\n\t */\r\n\t_buildMatrix: function(){\r\n\t\tvar tmpArray = [],\r\n\t\t\ttCharA = '',\r\n\t\t\ttCharB = '',\r\n\t\t\tgapScore = 0;\r\n\t\t\r\n\t\t// fill DV, the dynamic programming matrix, with zeros\r\n\t\tfor(var ix=0; ix<this.nameTargetLength; ix++){\r\n\t\t\ttmpArray.push(0);\r\n\t\t}\r\n\t\tfor(var iy=0; iy<this.nameSourceLength; iy++){\r\n\t\t\tthis.dynamicMatrix.push(tmpArray.slice(0));\r\n\t\t}\r\n\t\t\r\n\t\t// calculate the actual values for DV\r\n\t\tfor(var iy=1; iy<this.nameSourceLength; iy++){\r\n\t\t\tfor(var ix=1; ix<this.nameTargetLength; ix++){\r\n\t\t\t\ttCharA = this.nameSource[iy-1];\r\n\t\t\t\ttCharB = this.nameTarget[ix-1];\r\n\t\t\t\t\r\n\t\t\t\tgapScore = this._gappedScore(tCharA, tCharB);\r\n\t\t\t\tthis.dynamicMatrix[iy][ix] = Math.max(\r\n\t\t\t\t\tthis.dynamicMatrix[iy-1][ix-1] + this._characterScore(tCharA, tCharB),\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tthis.dynamicMatrix[iy-1][ix] + gapScore,\r\n\t\t\t\t\tthis.dynamicMatrix[iy][ix-1] + gapScore\r\n\t\t\t\t);\r\n\t\t\t\t\r\n\t\t\t\tif((this.dynamicMatrix[iy-1][ix] > this.dynamicMatrix[iy-1][ix-1]) && \r\n\t\t\t\t\t(this.dynamicMatrix[iy][ix-1] > this.dynamicMatrix[iy-1][ix-1])){\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.dynamicMatrix[iy-1][ix-1] = Math.max(\r\n\t\t\t\t\t\tthis.dynamicMatrix[iy-1][ix],\r\n\t\t\t\t\t\tthis.dynamicMatrix[iy][ix-1]\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.dynamicMatrix[iy][ix] = Math.max(\r\n\t\t\t\t\t\tthis.dynamicMatrix[iy-1][ix-1] + this._transposedScore(tCharA, tCharB),\r\n\t\t\t\t\t\tthis.dynamicMatrix[iy][ix]\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t * Backtrack through the matrix to find the best path\r\n\t * @private\r\n\t */\r\n\t_backtrack: function(){\r\n\t\tvar tmaxi = 0,\r\n\t\t\tmaxix = 0;\r\n\t\t\r\n\t\t// find the intial local max\r\n\t\tfor(var ix=this.nameTargetLength-1; ix>0; ix--){\r\n\t\t\tif(this.dynamicMatrix[this.nameSourceLength-1][ix] > tmaxi){\r\n\t\t\t\ttmaxi = this.dynamicMatrix[this.nameSourceLength-1][ix];\r\n\t\t\t\tmaxix = ix;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// break out of loop if we have reached zeros after non zeros\r\n\t\t\tif((tmaxi > 0) && (this.dynamicMatrix[this.nameSourceLength-1][ix+1] == 0)){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(tmaxi <= 0){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tvar ix = maxix,\r\n\t\t\tiy = this.nameSourceLength-1,\r\n\t\t\tixLast = 0,\r\n\t\t\tiyLast = 0,\r\n\t\t\tdiagonal = 0,\r\n\t\t\tabove = 0,\r\n\t\t\tleft = 0;\r\n\t\t\r\n\t\t// TODO: replace with better algo or refactor\r\n\t\twhile((iy>0) && (ix>0)){\r\n\t\t\t// store max value\r\n\t\t\tif(this.dynamicMatrix[iy][ix] > this.maxMatrixValue){\r\n\t\t\t\tthis.maxMatrixValue = this.dynamicMatrix[iy][ix];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// DEBUG\r\n\t\t\tif(this.DEBUG){\r\n\t\t\t\t$('#'+this.DEBUG_AC+'-'+(iy+1)+'-'+(ix+1)).css('background-color','#ccc');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// calculate values for possible paths\r\n\t\t\tdiagonal = this.dynamicMatrix[iy-1][ix-1];\r\n\t\t\tabove = this.dynamicMatrix[iy][ix-1];\r\n\t\t\tleft = this.dynamicMatrix[iy-1][ix];\r\n\t\t\t\r\n\t\t\t// choose next path\r\n\t\t\tif((diagonal>=above) && (diagonal>=left)){\r\n\t\t\t\tiy--;\r\n\t\t\t\tix--;\r\n\t\t\t}else if((above>=diagonal) && (above>=left)){\r\n\t\t\t\tix--;\r\n\t\t\t}else if((left>=diagonal) && (left>=above)){\r\n\t\t\t\tiy--;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// end while if we have all zeros\r\n\t\t\tif((diagonal == 0) && (above == 0) && (left == 0)){\r\n\t\t\t\tiy = 0;\r\n\t\t\t\tix = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn true;\r\n\t},\r\n\t\r\n\t/**\r\n\t * Calculate the final match score for this pair of names\r\n\t * @private\r\n\t */\r\n\t_finalMatchScore: function(){\r\n\t\tvar averageNameLength = (this.nameSourceLength + this.nameTargetLength) / 2\r\n\t\tthis.overallScore = (2 * this.maxMatrixValue) / averageNameLength;\r\n\t\tthis.finalScore = this.overallScore / 10;\r\n\t},\r\n\t\r\n\t/**\r\n\t * Display debug information\r\n\t * TODO: remove when converted for string matching only\r\n\t *\r\n\t * @private\r\n\t */\r\n\t_debug_ShowDVtable: function(){\r\n\t\tvar DEBUG_AA = 0,\r\n\t\t\tDEBUG_AB = '';\r\n\t\t\tDEBUG_AC = Math.round(Math.random() * 9999);\r\n\t\t\t\r\n\t\tthis.DEBUG_AC = DEBUG_AC;\r\n\t\t\t\r\n\t\tDEBUG_AB += '<table class=\"example\">';\r\n\t\tfor(var iy=0; iy<=(this.nameSourceLength); iy++){\r\n\t\t\tDEBUG_AB += '<tr>';\r\n\t\t\tfor(var ix=0; ix<=(this.nameTargetLength); ix++){\r\n\t\t\t\tif(iy==0){\r\n\t\t\t\t\tif(ix>1){\r\n\t\t\t\t\t\tDEBUG_AB += '<td id=\"'+DEBUG_AC+'-'+iy+'-'+ix+'\">'+this.nameTarget[ix-2]+'</td>';\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tDEBUG_AB += '<td id=\"'+DEBUG_AC+'-'+iy+'-'+ix+'\"></td>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(ix>0){\r\n\t\t\t\t\t\tDEBUG_AA = Math.round(this.dynamicMatrix[iy-1][ix-1] * 100) / 100;\r\n\t\t\t\t\t\tDEBUG_AB += '<td id=\"'+DEBUG_AC+'-'+iy+'-'+ix+'\">'+DEBUG_AA+'</td>';\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(iy>1){\r\n\t\t\t\t\t\t\tDEBUG_AB += '<td id=\"'+DEBUG_AC+'-'+iy+'-'+ix+'\">'+this.nameSource[iy-2]+'</td>';\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tDEBUG_AB += '<td id=\"'+DEBUG_AC+'-'+iy+'-'+ix+'\"></td>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tDEBUG_AB += '</tr>';\r\n\t\t}\r\n\t\tDEBUG_AB += '</table>';\r\n\t\t$(this.DEBUG_AREA).append(DEBUG_AB);\r\n\t},\r\n\t\r\n\t/**\r\n\t * Public method to perform a search\r\n\t *\r\n\t * @param {String} pNameTarget The target to compare the source with\r\n\t * @returns The match score of the two strings\r\n\t */\r\n\tscore: function(pNameTarget){\r\n\t\tthis._reset(pNameTarget);\r\n\t\t\r\n\t\tthis._buildMatrix();\r\n\t\t\r\n\t\tif(this.DEBUG){\r\n\t\t\tthis._debug_ShowDVtable();\r\n\t\t}\r\n\t\t\r\n\t\tthis._backtrack();\r\n\t\tthis._finalMatchScore();\t\r\n\t\treturn this.finalScore;\r\n\t},\r\n\r\n\t/**\r\n\t * Find matches from an array of choices\r\n\t *\r\n\t * @param {String[]} pArray The array of strings to check against\r\n\t * @param {Number} [10] pLimit The number of resutls to return \r\n\t * @returns {string[]} The top matching strings\r\n\t */\r\n\ttopMatchesFromArray: function(pArray, pLimit){\r\n\t\tvar tmpValue = 0,\r\n\t\t\ttmpValRound = 0,\r\n\t\t\tworstValue = 0,\r\n\t\t\tresultLimit = pLimit || 10,\r\n\t\t\tresultArray = [];\r\n\t\t\t\r\n\t\tfor(var i=0; i<resultLimit; ++i){\r\n\t\t\tresultArray.push({v:0,n:'-'});\r\n\t\t}\r\n\t\t\r\n\t\t//var dateStart = {},\r\n\t\t//\tdateEnd = {},\r\n\t\t\r\n\t\t// Emperical Analysis\r\n\t\t//dateStart = new Date();\r\n\r\n\t\t// check against all names in the name list\r\n\t\tfor(var i=0; i<pArray.length; i++){\r\n\t\t\ttmpValue = this.score(allNames[i]);\r\n\t\t\t//tmpValRound = String(Math.round(tmpValue * 100) / 1000);\r\n\r\n\t\t\t// add selected names to drop-down list\r\n\t\t\t// does unnecessary work, refactor to improve speed\r\n\t\t\tif(tmpValue > resultArray[resultLimit-1].v){\r\n\t\t\t\tnewObj = {v:tmpValue,n:pArray[i]};\r\n\t\t\t\ttmpObj = {v:0,n:''};\r\n\t\t\t\tfor(var j=0; j<resultLimit; ++j){\r\n\t\t\t\t\tif(newObj.v > resultArray[j].v){\r\n\t\t\t\t\t\ttmpObj.v = resultArray[j].v;\r\n\t\t\t\t\t\ttmpObj.n = resultArray[j].n;\r\n\t\t\t\t\t\tresultArray[j].v = newObj.v;\r\n\t\t\t\t\t\tresultArray[j].n = newObj.n;\r\n\t\t\t\t\t\tnewObj.v = tmpObj.v;\r\n\t\t\t\t\t\tnewObj.n = tmpObj.n;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i=0; i<resultArray.length; i++){\r\n\t\t\ttmp = resultArray[i];\r\n\t\t\t//resultArray[i] = tmp.v + ' ~~ ' + tmp.n;\r\n\t\t\tresultArray[i] = tmp.n;\r\n\t\t}\r\n\r\n\t\t// Emperical Analysis\r\n\t\t//dateEnd = new Date();\r\n\t\t//timeElapsed = dateEnd.getTime() - dateStart.getTime();\r\n\t\t//console.log('topMatchesFromArray:', timeElapsed);\r\n\r\n\t\treturn resultArray;\r\n\t}\r\n};\r\n\r\nmodule.exports = fuzziac;","###\r\n  This is essentially a copy from the snippet completer from Ace's ext/language-tools.js\r\n  However this completer assigns a score to the snippets to ensure that snippet suggestions are\r\n  treated better in the autocomplete than local values\r\n###\r\n\r\n{score} = fuzzaldrin\r\n#score = (a, b) -> new Fuzziac(a).score b\r\nlineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/g\r\nidentifierRegex = /[\\.a-zA-Z_0-9\\$\\-\\u00A2-\\uFFFF]/\r\nFuzziac = require './fuzziac' # https://github.com/stollcri/fuzziac.js\r\nace = require 'ace'\r\n\r\nmodule.exports = (SnippetManager, autoLineEndings) ->\r\n  {Range} = ace.require 'ace/range'\r\n  util = ace.require 'ace/autocomplete/util'\r\n  identifierRegexps: [identifierRegex]\r\n\r\n  # Cleanup surrounding text\r\n  baseInsertSnippet = SnippetManager.insertSnippet\r\n  SnippetManager.insertSnippet = (editor, snippet) ->\r\n    # Remove dangling snippet prefixes\r\n    # Examples:\r\n    #   \"self self.moveUp()\"\r\n    #   \"elf.self.moveUp()\"\r\n    #   \"ssefl.moveUp()\"\r\n    #   \"slef.moveUp()\"\r\n    # TODO: This function is a mess\r\n    # TODO: Can some of this nonsense be done upstream in scrubSnippet?\r\n    cursor = editor.getCursorPosition()\r\n    line = editor.session.getLine cursor.row\r\n    if cursor.column > 0\r\n      prevWord = util.retrievePrecedingIdentifier line, cursor.column - 1, identifierRegex\r\n      if prevWord.length > 0\r\n        # Remove previous word if it's at the beginning of the snippet\r\n        prevWordIndex = snippet.toLowerCase().indexOf prevWord.toLowerCase()\r\n        if prevWordIndex is 0\r\n          range = new Range cursor.row, cursor.column - 1 - prevWord.length, cursor.row, cursor.column\r\n          editor.session.remove range\r\n        else\r\n          # console.log \"Snippets cursor.column=#{cursor.column} snippet='#{snippet}' line='#{line}' prevWord='#{prevWord}'\"\r\n          # console.log \"Snippets prevWordIndex=#{prevWordIndex}\"\r\n\r\n          # Lookup original completion\r\n          # TODO: Can we identify correct completer somehow?\r\n          for completer in editor.completers\r\n            if completer.completions?\r\n              for completion in completer.completions\r\n                if completion.snippet is snippet\r\n                  originalCompletion = completion\r\n                  break\r\n              break if originalCompletion\r\n\r\n          if originalCompletion?\r\n            # console.log 'Snippets original completion', originalCompletion\r\n            # Get original snippet prefix (accounting for extra '\\n' and possibly autoLineEndings at end)\r\n            lang = editor.session.getMode()?.$id?.substr 'ace/mode/'.length\r\n            # console.log 'Snippets lang', lang, autoLineEndings[lang]?.length\r\n            extraEndLength = 1\r\n            extraEndLength += autoLineEndings[lang].length if autoLineEndings[lang]?\r\n            if snippetIndex = originalCompletion.content.indexOf snippet.substr(0, snippet.length - extraEndLength)\r\n              originalPrefix = originalCompletion.content.substring 0, snippetIndex\r\n            else\r\n              originalPrefix = ''\r\n            snippetStart = cursor.column - originalPrefix.length\r\n            # console.log \"Snippets originalPrefix='#{originalPrefix}' snippetStart=#{snippetStart}\"\r\n\r\n            if snippetStart > 0 and snippetStart <= line.length\r\n              extraIndex = snippetStart - 1\r\n              # console.log \"Snippets prev char='#{line[extraIndex]}'\"\r\n\r\n              if line[extraIndex] is '.'\r\n                # Fuzzy string match previous word before '.', and remove if a match to beginning of snippet\r\n                originalObject = originalCompletion.content.substring(0, originalCompletion.content.indexOf('.'))\r\n                prevObjectIndex = extraIndex - 1\r\n                # console.log \"Snippets prevObjectIndex=#{prevObjectIndex}\"\r\n                if prevObjectIndex >= 0 and /\\w/.test(line[prevObjectIndex])\r\n                  prevObjectIndex-- while prevObjectIndex >= 0 and /\\w/.test(line[prevObjectIndex])\r\n                  prevObjectIndex++ if prevObjectIndex < 0 or not /\\w/.test(line[prevObjectIndex])\r\n                  # console.log \"Snippets prevObjectIndex=#{prevObjectIndex} extraIndex=#{extraIndex}\"\r\n                  prevObject = line.substring prevObjectIndex, extraIndex\r\n\r\n                  #TODO: We use to use fuzziac here, but we forgot why.  Using\r\n                  # fuzzaldren for now.\r\n                  #fuzzer = {score: (n) -> score originalObject, n}\r\n                  fuzzer = new Fuzziac originalObject\r\n                  finalScore = 0\r\n                  if fuzzer\r\n                    finalScore = fuzzer.score prevObject\r\n\r\n                  # console.log \"Snippets originalObject='#{originalObject}' prevObject='#{prevObject}'\", finalScore\r\n                  if finalScore > 0.5\r\n                    range = new Range cursor.row, prevObjectIndex, cursor.row, snippetStart\r\n                    editor.session.remove range\r\n                  else if /^[^.]+\\./.test snippet\r\n                    # Remove the first part of the snippet, and use whats there.\r\n                    snippet = snippet.replace /^[^.]+\\./, ''\r\n\r\n              else if /\\w/.test(line[extraIndex])\r\n                # Remove any alphanumeric characters on this line immediately before prefix\r\n                extraIndex-- while extraIndex >= 0 and /\\w/.test(line[extraIndex])\r\n                extraIndex++ if extraIndex < 0 or not /\\w/.test(line[extraIndex])\r\n                range = new Range cursor.row, extraIndex, cursor.row, snippetStart\r\n                editor.session.remove range\r\n\r\n    #Remove anything that looks like an identifier after the completion\r\n    afterIndex = cursor.column\r\n    trailingText = line.substring afterIndex\r\n    match = trailingText.match /^[a-zA-Z_0-9]*(\\(\\s*\\))?/\r\n    afterIndex += match[0].length if match\r\n    afterRange = new Range cursor.row, cursor.column, cursor.row, afterIndex\r\n    editor.session.remove afterRange\r\n\r\n    baseInsertSnippet.call @, editor, snippet\r\n\r\n  getCompletions: (editor, session, pos, prefix, callback) ->\r\n    # console.log \"Snippets getCompletions pos.column=#{pos.column} prefix=#{prefix}\"\r\n    # Completion format:\r\n    # prefix: text that will be replaced by snippet\r\n    # caption: displayed left-justified in popup, and what's being matched\r\n    # snippet: what will be inserted into document\r\n    # score: used to order autocomplete snippet suggestions\r\n    # meta: displayed right-justfied in popup\r\n    lang = session.getMode()?.$id?.substr 'ace/mode/'.length\r\n    line = session.getLine pos.row\r\n    completions = []\r\n\r\n    #If the prefix is a member expression, supress completions\r\n    fullPrefix = getFullIdentifier session, pos\r\n    fullPrefixParts = fullPrefix.split /[.:]/g\r\n    word = getCurrentWord session, pos\r\n\r\n    if fullPrefixParts.length > 2\r\n      @completions = []\r\n      return callback null, completions\r\n\r\n    beginningOfLine = session.getLine(pos.row).substring(0,pos.column - prefix.length)\r\n\r\n    unless (fullPrefixParts.length < 3 and /^(hero|self|this|@)$/.test(fullPrefixParts[0]) ) or /^\\s*$/.test(beginningOfLine)\r\n      # console.log \"DEBUG: autocomplete bailing\", fullPrefixParts, '|', prefix, '|', beginningOfLine, '|', pos.column - prefix.length\r\n      @completions = completions\r\n      return callback null, completions\r\n\r\n    snippetMap = SnippetManager.snippetMap\r\n\r\n    SnippetManager.getActiveScopes(editor).forEach (scope) ->\r\n      snippets = snippetMap[scope] or []\r\n      for s in snippets\r\n        caption  = s.name or s.tabTrigger\r\n        continue unless caption\r\n        [snippet, fuzzScore] = scrubSnippet s.content, caption, line, prefix, pos, lang, autoLineEndings, s.captureReturn\r\n        completions.push\r\n          content: s.content  # Used internally by Snippets, not by ace autocomplete\r\n          caption: caption\r\n          snippet: snippet\r\n          score: fuzzScore * s.importance ? 1.0\r\n          meta: s.meta or (if s.tabTrigger and not s.name then s.tabTrigger + '\\u21E5' else 'snippets')\r\n    , @\r\n\r\n    #If the prefix is a reserved word, only exact prefix snippets match\r\n    keywords = session.getMode()?.$highlightRules?.$keywordList\r\n    if keywords and prefix in keywords\r\n      @completions = _.filter(completions, (x) -> x.caption.indexOf prefix is 0)\r\n      return callback null, @completions\r\n\r\n    # console.log 'Snippets snippet completions', completions\r\n    @completions = completions\r\n    callback null, completions\r\n\r\n  # TODO: This shim doesn't work because our version of ace isn't updated to this change:\r\n  # TODO: https://github.com/ajaxorg/ace/commit/7b01a4273e91985c9177f53d238d6b83fe99dc56\r\n  # TODO: But, if it was we could use this and pass a 'completer: @' property for each completion\r\n  # insertMatch: (editor, data) ->\r\n  #   console.log 'Snippets snippets insertMatch', editor, data\r\n  #   if data.snippet\r\n  #     SnippetManager.insertSnippet editor, data.snippet\r\n  #   else\r\n  #     editor.execCommand \"insertstring\", data.value || data\r\n\r\ngetCurrentWord = (doc, pos) ->\r\n  end = pos.column\r\n  start = end - 1\r\n  text = doc.getLine(pos.row)\r\n  start-- while start >= 0 and not text[start].match /\\s+|[\\.\\@]/\r\n  start++ if start >= 0\r\n  text.substring start, end\r\n\r\ngetFullIdentifier = (doc, pos) ->\r\n  end = pos.column\r\n  start = end - 1\r\n  text = doc.getLine(pos.row)\r\n  start-- while start >= 0 and not text[start].match /\\s+/\r\n  start++ if start >= 0\r\n  text.substring start, end\r\n\r\nscrubSnippet = (snippet, caption, line, input, pos, lang, autoLineEndings, captureReturn) ->\r\n  # console.log \"Snippets snippet=#{snippet} caption=#{caption} line=#{line} input=#{input} pos.column=#{pos.column} lang=#{lang}\"\r\n  fuzzScore = 0.1\r\n  snippetLineBreaks = (snippet.match(lineBreak) || []).length\r\n  # input will be replaced by snippet\r\n  # trim snippet prefix and suffix if already in the document (line)\r\n  if prefixStart = snippet.toLowerCase().indexOf(input.toLowerCase()) > -1\r\n    captionStart = snippet.indexOf caption\r\n\r\n    # Calculate snippet prefixes and suffixes. E.g. full snippet might be: \"self.\" + \"moveLeft\" + \"()\"\r\n    snippetPrefix = snippet.substring 0, captionStart\r\n    snippetSuffix = snippet.substring snippetPrefix.length + caption.length\r\n\r\n    # Calculate line prefixes and suffixes\r\n    # linePrefix: beginning portion of snippet that already exists\r\n    linePrefixIndex = pos.column - input.length - 1\r\n    if linePrefixIndex >= 0 and snippetPrefix.length > 0 and line[linePrefixIndex] is snippetPrefix[snippetPrefix.length - 1]\r\n      snippetPrefixIndex = snippetPrefix.length - 1\r\n      while line[linePrefixIndex] is snippetPrefix[snippetPrefixIndex]\r\n        break if linePrefixIndex is 0 or snippetPrefixIndex is 0\r\n        linePrefixIndex--\r\n        snippetPrefixIndex--\r\n      linePrefix = line.substr linePrefixIndex, pos.column - input.length - linePrefixIndex\r\n    else\r\n      linePrefix = ''\r\n    lineSuffix = line.substr pos.column, snippetSuffix.length - 1 + caption.length - input.length + 1\r\n    lineSuffix = '' if snippet.indexOf(lineSuffix) < 0\r\n\r\n    # TODO: This is broken for attack(find in Python, but seems ok in JavaScript.\r\n\r\n    # Don't eat existing matched parentheses\r\n    # console.log \"Snippets checking parentheses lineSuffix=#{lineSuffix} pos.column=#{pos.column} input.length=#{input.length}, prevChar=#{line[pos.column - input.length - 1]} line.length=#{line.length} nextChar=#{line[pos.column]}\"\r\n    if pos.column - input.length >= 0 and line[pos.column - input.length - 1] is '(' and pos.column < line.length and line[pos.column] is ')' and lineSuffix is ')'\r\n      lineSuffix = ''\r\n\r\n    # Score match before updating snippet\r\n    fuzzScore += score snippet, linePrefix + input + lineSuffix\r\n\r\n    # Update snippet based on surrounding document/line\r\n    snippet = snippet.slice snippetPrefix.length if snippetPrefix.length > 0 and snippetPrefix is linePrefix\r\n    snippet = snippet.slice 0, snippet.length - lineSuffix.length if lineSuffix.length > 0\r\n\r\n    # Append automatic line ending and newline\r\n    # If at end of line\r\n    # And, no parentheses are before snippet. E.g. 'if ('\r\n    # And, line doesn't start with whitespace followed by 'if ' or 'elif '\r\n    # console.log \"Snippets autoLineEndings linePrefixIndex='#{linePrefixIndex}'\"\r\n    if lineSuffix.length is 0 and /^\\s*$/.test line.slice pos.column\r\n      # console.log 'Snippets atLineEnd', pos.column, lineSuffix.length, line.slice(pos.column + lineSuffix.length), line\r\n      toLinePrefix = line.substring 0, linePrefixIndex\r\n      if linePrefixIndex < 0 or linePrefixIndex >= 0 and not /[\\(\\)]/.test(toLinePrefix) and not /^[ \\t]*(?:if\\b|elif\\b)/.test(toLinePrefix)\r\n        snippet += autoLineEndings[lang] if snippetLineBreaks is 0 and autoLineEndings[lang]\r\n        snippet += \"\\n\" if snippetLineBreaks is 0 and not /\\$\\{/.test(snippet)\r\n\r\n        if captureReturn and /^\\s*$/.test(toLinePrefix)\r\n          snippet = captureReturn + linePrefix + snippet\r\n\r\n    # console.log \"Snippets snippetPrefix=#{snippetPrefix} linePrefix=#{linePrefix} snippetSuffix=#{snippetSuffix} lineSuffix=#{lineSuffix} snippet=#{snippet} score=#{fuzzScore}\"\r\n  else\r\n    # Append automatic line ending and newline for simple scenario\r\n    if line.trim() is input\r\n      snippet += autoLineEndings[lang] if snippetLineBreaks is 0 and autoLineEndings[lang]\r\n      snippet += \"\\n\" if snippetLineBreaks is 0 and not /\\$\\{/.test(snippet)\r\n    fuzzScore += score snippet, input\r\n\r\n  startsWith = (string, searchString, position) ->\r\n    position = position or 0\r\n    return string.substr(position, searchString.length) is searchString\r\n\r\n  # Prefixing is twice as good as fuzzy mathing?\r\n  fuzzScore *= 2 if startsWith(caption, input)\r\n\r\n  # All things equal, a shorter snippet is better\r\n  fuzzScore -= caption.length / 500\r\n\r\n  # Exact match is really good.\r\n  fuzzScore = 10 if caption == input\r\n\r\n  [snippet, fuzzScore]\r\n","ModalView = require 'views/core/ModalView'\r\nCreateAccountModal = require 'views/core/CreateAccountModal'\r\ntemplate = require 'templates/play/menu/game-menu-modal'\r\nsubmenuViews = [\r\n  require 'views/play/menu/SaveLoadView'\r\n  require 'views/play/menu/OptionsView'\r\n  require 'views/play/menu/GuideView'\r\n]\r\n\r\nmodule.exports = class GameMenuModal extends ModalView\r\n  className: 'modal fade play-modal'\r\n  template: template\r\n  id: 'game-menu-modal'\r\n  instant: true\r\n\r\n  events:\r\n    'change input.select': 'onSelectionChanged'\r\n    'shown.bs.tab #game-menu-nav a': 'onTabShown'\r\n    'click #change-hero-tab': -> @trigger 'change-hero'\r\n    'click #close-modal': 'hide'\r\n    'click .auth-tab': 'onClickSignupButton'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @level = @options.level\r\n    @options.levelID = @options.level.get('slug')\r\n    @options.startingSessionHeroConfig = $.extend {}, true, (@options.session.get('heroConfig') ? {})\r\n    Backbone.Mediator.publish 'music-player:enter-menu', terrain: @options.level.get('terrain', true) ? 'Dungeon'\r\n\r\n  getRenderData: (context={}) ->\r\n    context = super(context)\r\n    docs = @options.level.get('documentation') ? {}\r\n    submenus = ['guide', 'options', 'save-load']\r\n    submenus = _.without submenus, 'options' if window.serverConfig.picoCTF\r\n    unless window.serverConfig.picoCTF\r\n      if @level.isType('course', 'course-ladder') or not @options.level.get('helpVideos')?.length > 0\r\n        submenus = _.without submenus, 'guide'\r\n    submenus = _.without submenus, 'save-load' unless me.isAdmin() or /https?:\\/\\/localhost/.test(window.location.href)\r\n    @includedSubmenus = submenus\r\n    context.showTab = @options.showTab ? submenus[0]\r\n    context.submenus = submenus\r\n    context.iconMap =\r\n      'options': 'cog'\r\n      'guide': 'list'\r\n      'save-load': 'floppy-disk'\r\n    context\r\n\r\n  showsChooseHero: ->\r\n    return false if @level?.isType('course', 'course-ladder')\r\n    return false if @options.levelID in ['zero-sum', 'ace-of-coders', 'elemental-wars', 'the-battle-of-sky-span']\r\n    return true\r\n\r\n  afterRender: ->\r\n    super()\r\n    @insertSubView new submenuView @options for submenuView in submenuViews\r\n    firstView = switch @options.showTab\r\n      when 'guide' then @subviews.guide_view\r\n      else\r\n        if 'guide' in @includedSubmenus then @subviews.guide_view else @subviews.options_view\r\n    firstView.$el.addClass 'active'\r\n    firstView.onShown?()\r\n    @playSound 'game-menu-open'\r\n    @$el.find('.nano:visible').nanoScroller()\r\n\r\n  onTabShown: (e) ->\r\n    @playSound 'game-menu-tab-switch'\r\n    shownSubviewKey = e.target.hash.substring(1).replace(/-/g, '_')\r\n    @subviews[shownSubviewKey].onShown?()\r\n    subview.onHidden?() for subviewKey, subview of @subviews when subviewKey isnt shownSubviewKey\r\n\r\n  onHidden: ->\r\n    super()\r\n    subview.onHidden?() for subviewKey, subview of @subviews\r\n    @playSound 'game-menu-close'\r\n    Backbone.Mediator.publish 'music-player:exit-menu', {}\r\n\r\n  onClickSignupButton: (e) ->\r\n    window.tracker?.trackEvent 'Started Signup', category: 'Play Level', label: 'Game Menu', level: @options.levelID\r\n    # TODO: Default already seems to be prevented.  Need to be explicit?\r\n    e.preventDefault()\r\n    @openModalView new CreateAccountModal()\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/menu/guide-view'\r\nArticle = require 'models/Article'\r\nSubscribeModal = require 'views/core/SubscribeModal'\r\nace = require 'ace'\r\nutils = require 'core/utils'\r\n\r\nmodule.exports = class LevelGuideView extends CocoView\r\n  template: template\r\n  id: 'guide-view'\r\n  className: 'tab-pane'\r\n  helpVideoHeight: '295'\r\n  helpVideoWidth: '471'\r\n\r\n  events:\r\n    'click .start-subscription-button': 'clickSubscribe'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @levelSlug = options.level.get('slug')\r\n    @sessionID = options.session.get('_id')\r\n    @requiresSubscription = not me.isPremium()\r\n    @isCourseLevel = options.level.isType('course', 'course-ladder')\r\n    @helpVideos = if @isCourseLevel then [] else options.level.get('helpVideos') ? []\r\n    @trackedHelpVideoStart = @trackedHelpVideoFinish = false\r\n    # A/B Testing video tutorial styles\r\n    @helpVideosIndex = me.getVideoTutorialStylesIndex(@helpVideos.length)\r\n    @helpVideo = @helpVideos[@helpVideosIndex] if @helpVideos.length > 0 and not @isCourseLevel\r\n    @videoLocked = not (@helpVideo?.free or @isCourseLevel) and @requiresSubscription\r\n\r\n    @firstOnly = options.firstOnly\r\n    if window.serverConfig.picoCTF\r\n      @docs = options?.docs ? options.level.get('documentation') ? {}\r\n      general = @docs.generalArticles or []\r\n      specific = @docs.specificArticles or []\r\n\r\n      articles = options.supermodel.getModels(Article)\r\n      articleMap = {}\r\n      articleMap[article.get('original')] = article for article in articles\r\n      general = (articleMap[ref.original] for ref in general)\r\n      general = (article.attributes for article in general when article)\r\n\r\n      @docs = specific.concat(general)\r\n      @docs = $.extend(true, [], @docs)\r\n      @docs = [@docs[0]] if @firstOnly and @docs[0]\r\n      @addPicoCTFProblem() \r\n      doc.html = marked(utils.filterMarkdownCodeLanguages(utils.i18n(doc, 'body'), options.session.get('codeLanguage'))) for doc in @docs\r\n      doc.slug = _.string.slugify(doc.name) for doc in @docs\r\n      doc.name = (utils.i18n doc, 'name') for doc in @docs\r\n    else\r\n      @docs = []\r\n\r\n  destroy: ->\r\n    if @vimeoListenerAttached\r\n      if window.addEventListener\r\n        window.removeEventListener('message', @onMessageReceived, false)\r\n      else\r\n        window.detachEvent('onmessage', @onMessageReceived, false)\r\n    oldEditor.destroy() for oldEditor in @aceEditors ? []\r\n    super()\r\n\r\n  getRenderData: ->\r\n    c = super()\r\n    c.docs = @docs\r\n    c.showVideo = @helpVideos.length > 0 unless @isCourseLevel\r\n    c.videoLocked = @videoLocked\r\n    c\r\n\r\n  afterRender: ->\r\n    super()\r\n    @setupVideoPlayer() unless @videoLocked\r\n    if @docs.length + @helpVideos.length > 1\r\n      if @helpVideos.length\r\n        startingTab = 0\r\n      else\r\n        startingTab = _.findIndex @docs, slug: 'overview'\r\n        startingTab = 0 if startingTab is -1\r\n      # incredible hackiness. Getting bootstrap tabs to work shouldn't be this complex\r\n      @$el.find(\".nav-tabs li:nth(#{startingTab})\").addClass('active')\r\n      @$el.find(\".tab-content .tab-pane:nth(#{startingTab})\").addClass('active')\r\n      @$el.find('.nav-tabs a').click(@clickTab)\r\n      @$el.addClass 'has-tabs'\r\n    @configureACEEditors()\r\n    @playSound 'guide-open'\r\n\r\n  configureACEEditors: ->\r\n    oldEditor.destroy() for oldEditor in @aceEditors ? []\r\n    @aceEditors = []\r\n    aceEditors = @aceEditors\r\n    codeLanguage = @options.session.get('codeLanguage') or me.get('aceConfig')?.language or 'python'\r\n    @$el.find('pre').each ->\r\n      aceEditor = utils.initializeACE @, codeLanguage\r\n      aceEditors.push aceEditor\r\n\r\n  clickSubscribe: (e) ->\r\n    level = @levelSlug # Save ref to level slug\r\n    @openModalView new SubscribeModal()\r\n    # TODO: Added levelID on 2/9/16. Remove level property and associated AnalyticsLogEvent 'properties.level' index later.\r\n    window.tracker?.trackEvent 'Show subscription modal', category: 'Subscription', label: 'help video clicked', level: level, levelID: level\r\n\r\n  clickTab: (e) =>\r\n    @$el.find('li.active').removeClass('active')\r\n    @playSound 'guide-tab-switch'\r\n\r\n  afterInsert: ->\r\n    super()\r\n    Backbone.Mediator.publish 'level:docs-shown', {}\r\n\r\n  onHidden: ->\r\n    if @vimeoListenerAttached\r\n      player = @$('#help-video-player')[0]\r\n      player.contentWindow.postMessage JSON.stringify(method: 'pause'), '*'\r\n    createjs?.Sound?.setVolume?(@volume ? ( me.get('volume') ? 1.0))\r\n    Backbone.Mediator.publish 'level:docs-hidden', {}\r\n\r\n  onShown: ->\r\n    # TODO: Disable sound only when video is playing?\r\n    @volume ?= me.get('volume') ? 1.0\r\n    createjs?.Sound?.setVolume(0.0)\r\n\r\n  onStartHelpVideo: ->\r\n    unless @trackedHelpVideoStart\r\n      window.tracker?.trackEvent 'Start help video', level: @levelSlug, ls: @sessionID, style: @helpVideo?.style\r\n      @trackedHelpVideoStart = true\r\n\r\n  onFinishHelpVideo: ->\r\n    unless @trackedHelpVideoFinish\r\n      window.tracker?.trackEvent 'Finish help video', level: @levelSlug, ls: @sessionID, style: @helpVideo?.style\r\n      @trackedHelpVideoFinish = true\r\n\r\n  setupVideoPlayer: () ->\r\n    return unless @helpVideo\r\n    # Always use HTTPS\r\n    # TODO: Not specifying the protocol should work based on Vimeo docs, but breaks postMessage/eventing in practice.\r\n    url = \"https:\" + @helpVideo.url.substr @helpVideo.url.indexOf '/'\r\n    @setupVimeoVideoPlayer url\r\n\r\n  setupVimeoVideoPlayer: (helpVideoURL) ->\r\n    # Setup Vimeo player\r\n    # https://developer.vimeo.com/player/js-api#universal-with-postmessage\r\n\r\n    # Create Vimeo iframe player\r\n    tag = document.createElement('iframe')\r\n    tag.id = 'help-video-player'\r\n    tag.src = helpVideoURL + \"?api=1&badge=0&byline=0&portrait=0&title=0\"\r\n    tag.height = @helpVideoHeight\r\n    tag.width = @helpVideoWidth\r\n    tag.allowFullscreen = true\r\n    tag.mozAllowFullscreen = true\r\n    $tag = $(tag)\r\n    $tag.attr('webkitallowfullscreen', true) # strong arm Safari into working\r\n    @$el.find('#help-video-player').replaceWith($tag)\r\n\r\n    @onMessageReceived = (e) =>\r\n      data = JSON.parse(e.data)\r\n      if data.event is 'ready'\r\n        # Vimeo player is ready, can now hook up other events\r\n        # https://developer.vimeo.com/player/js-api#events\r\n        player = $('#help-video-player')[0]\r\n        player.contentWindow.postMessage JSON.stringify(method: 'addEventListener', value: 'play'), helpVideoURL\r\n        player.contentWindow.postMessage JSON.stringify(method: 'addEventListener', value: 'finish'), helpVideoURL\r\n      else if data.event is 'play'\r\n        @onStartHelpVideo?()\r\n      else if data.event is 'finish'\r\n        @onFinishHelpVideo?()\r\n\r\n    # Listen for Vimeo player 'ready'\r\n    if window.addEventListener\r\n      window.addEventListener('message', @onMessageReceived, false)\r\n    else\r\n      window.attachEvent('onmessage', @onMessageReceived, false)\r\n    @vimeoListenerAttached = true\r\n\r\n  addPicoCTFProblem: ->\r\n    return unless problem = @options.level.picoCTFProblem\r\n    @docs = [name: 'Intro', body: '', slug: 'intro'] unless @docs.length\r\n    for doc in @docs when doc.name in ['Overview', 'Intro']\r\n      doc.body += \"\"\"\r\n        ### #{problem.name}\r\n\r\n        #{problem.description}\r\n\r\n        #{problem.category} - #{problem.score} points\r\n\r\n        Hint: #{problem.hints}\r\n      \"\"\".replace /<p>(.*?)<\\/p>/gi, '$1'\r\n","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/menu/inventory-modal'\r\nbuyGemsPromptTemplate = require 'templates/play/modal/buy-gems-prompt'\r\n{me} = require 'core/auth'\r\nThangType = require 'models/ThangType'\r\nCocoCollection = require 'collections/CocoCollection'\r\nItemView = require './ItemView'\r\nSpriteBuilder = require 'lib/sprites/SpriteBuilder'\r\nItemDetailsView = require 'views/play/modal/ItemDetailsView'\r\nPurchase = require 'models/Purchase'\r\nBuyGemsModal = require 'views/play/modal/BuyGemsModal'\r\nCreateAccountModal = require 'views/core/CreateAccountModal'\r\n\r\nhasGoneFullScreenOnce = false\r\n\r\nmodule.exports = class InventoryModal extends ModalView\r\n  id: 'inventory-modal'\r\n  className: 'modal fade play-modal'\r\n  template: template\r\n  slots: ['head', 'eyes', 'neck', 'torso', 'wrists', 'gloves', 'left-ring', 'right-ring', 'right-hand', 'left-hand', 'waist', 'feet', 'programming-book', 'pet', 'minion', 'flag']  #, 'misc-0', 'misc-1']  # TODO: bring in misc slot(s) again when we have space\r\n  ringSlots: ['left-ring', 'right-ring']\r\n  closesOnClickOutside: false # because draggable somehow triggers hide when you don't drag onto a draggable\r\n\r\n  events:\r\n    'click .item-slot': 'onItemSlotClick'\r\n    'click #unequipped .item': 'onUnequippedItemClick'\r\n    'doubletap #unequipped .item': 'onUnequippedItemDoubleClick'\r\n    'doubletap .item-slot .item': 'onEquippedItemDoubleClick'\r\n    'click button.equip-item': 'onClickEquipItemButton'\r\n    'shown.bs.modal': 'onShown'\r\n    'click #choose-hero-button': 'onClickChooseHero'\r\n    'click #play-level-button': 'onClickPlayLevel'\r\n    'click .unlock-button': 'onUnlockButtonClicked'\r\n    'click #equip-item-viewed': 'onClickEquipItemViewed'\r\n    'click #unequip-item-viewed': 'onClickUnequipItemViewed'\r\n    'click #close-modal': 'hide'\r\n    'click .buy-gems-prompt-button': 'onBuyGemsPromptButtonClicked'\r\n    'click': 'onClickedSomewhere'\r\n    'update #unequipped .nano': 'onScrollUnequipped'\r\n\r\n  shortcuts:\r\n    'esc': 'clearSelection'\r\n    'enter': 'onClickPlayLevel'\r\n\r\n\r\n  #- Setup\r\n\r\n  initialize: (options) ->\r\n    @onScrollUnequipped = _.throttle(_.bind(@onScrollUnequipped, @), 200)\r\n    super(arguments...)\r\n    @items = new CocoCollection([], {model: ThangType})\r\n    # TODO: switch to item store loading system?\r\n    @items.url = '/db/thang.type?view=items'\r\n    @items.setProjection [\r\n      'name'\r\n      'slug'\r\n      'components'\r\n      'original'\r\n      'rasterIcon'\r\n      'dollImages'\r\n      'gems'\r\n      'tier'\r\n      'description'\r\n      'heroClass'\r\n      'i18n'\r\n    ]\r\n    @supermodel.loadCollection(@items, 'items')\r\n    @equipment = {}  # Assign for real when we have loaded the session and items.\r\n\r\n  onItemsLoaded: ->\r\n    for item in @items.models\r\n      item.notInLevel = true\r\n      programmableConfig = _.find(item.get('components'), (c) -> c.config?.programmableProperties)?.config\r\n      item.programmableProperties = (programmableConfig?.programmableProperties or []).concat programmableConfig?.moreProgrammableProperties or []\r\n    @itemsProgrammablePropertiesConfigured = true\r\n    @equipment = @options.equipment or @options.session?.get('heroConfig')?.inventory or me.get('heroConfig')?.inventory or {}\r\n    @equipment = $.extend true, {}, @equipment\r\n    @requireLevelEquipment()\r\n    @itemGroups = {}\r\n    @itemGroups.requiredPurchaseItems = new Backbone.Collection()\r\n    @itemGroups.availableItems = new Backbone.Collection()\r\n    @itemGroups.restrictedItems = new Backbone.Collection()\r\n    @itemGroups.lockedItems = new Backbone.Collection()\r\n    itemGroup.comparator = ((m) -> m.get('tier') ? m.get('gems')) for itemGroup in _.values @itemGroups\r\n\r\n    equipped = _.values(@equipment)\r\n    @sortItem(item, equipped) for item in @items.models\r\n\r\n  sortItem: (item, equipped) ->\r\n    equipped ?= _.values(@equipment)\r\n\r\n    # general starting classes\r\n    item.classes = _.clone(item.getAllowedSlots())\r\n    for heroClass in item.getAllowedHeroClasses()\r\n      item.classes.push heroClass\r\n    item.classes.push 'equipped' if item.get('original') in equipped\r\n\r\n    # sort into one of the four groups\r\n    locked = not me.ownsItem item.get('original')\r\n\r\n    restrictedGear = @calculateRestrictedGearPerSlot()\r\n    allRestrictedGear = _.flatten(_.values(restrictedGear))\r\n    restricted = item.get('original') in allRestrictedGear\r\n\r\n    # TODO: make this re-use result of computation of updateLevelRequiredItems, which we can only do after heroClass is ready...\r\n    requiredToPurchase = false\r\n    inCampaignView = $('#campaign-view').length\r\n    unless gearSlugs[item.get('original')] is 'tarnished-bronze-breastplate' and inCampaignView and @options.level.get('slug') is 'the-raised-sword'\r\n      requiredGear = @calculateRequiredGearPerSlot()\r\n      for slot in item.getAllowedSlots()\r\n        continue unless requiredItems = requiredGear[slot]\r\n        continue if @equipment[slot] and @equipment[slot] not in allRestrictedGear and slot not in @ringSlots\r\n        # Point out that they must buy it if they haven't bought any of the required items for that slot, and it's the first one.\r\n        if item.get('original') is requiredItems[0] and not _.find(requiredItems, (requiredItem) -> me.ownsItem requiredItem)\r\n          requiredToPurchase = true\r\n          break\r\n\r\n    if requiredToPurchase and locked and not item.get('gems')\r\n      # Either one of two things has happened:\r\n      # 1. There's a bug and the player doesn't have a required item they should have.\r\n      # 2. The player is trying to play a level they haven't unlocked.\r\n      # We'll just pretend they own it so that they don't get stuck.\r\n      application.tracker?.trackEvent 'Required Item Locked', level: @options.level.get('slug'), label: @options.level.get('slug'), item: item.get('name'), playerLevel: me.level(), levelUnlocked: me.ownsLevel @options.level.get('original')\r\n      locked = false\r\n\r\n    placeholder = not item.getFrontFacingStats().props.length and not _.size(item.getFrontFacingStats().stats)\r\n\r\n    if placeholder and locked  # The item is not complete, so don't put it into a collection.\r\n      null\r\n    else if locked and requiredToPurchase\r\n      item.classes.push 'locked'\r\n      @itemGroups.requiredPurchaseItems.add item\r\n    else if locked\r\n      item.classes.push 'locked'\r\n      if item.isSilhouettedItem() or not item.get('gems')\r\n        # Don't even load/show these--don't add to a collection. (Bandwidth optimization.)\r\n        null\r\n      else\r\n        @itemGroups.lockedItems.add(item)\r\n    else if restricted\r\n      @itemGroups.restrictedItems.add(item)\r\n      item.classes.push 'restricted'\r\n    else\r\n      @itemGroups.availableItems.add(item)\r\n\r\n    # level to unlock\r\n    item.level = item.levelRequiredForItem() if item.get('tier')?\r\n\r\n  onLoaded: ->\r\n    # Both items and session have been loaded.\r\n    @onItemsLoaded()\r\n    super()\r\n\r\n  getRenderData: (context={}) ->\r\n    context = super(context)\r\n    context.equipped = _.values(@equipment)\r\n    context.items = @items.models\r\n    context.itemGroups = @itemGroups\r\n    context.slots = @slots\r\n    context.selectedHero = @selectedHero\r\n    context.selectedHeroClass = @selectedHero?.get('heroClass')\r\n    context.equipment = _.clone @equipment\r\n    context.equipment[slot] = @items.findWhere {original: itemOriginal} for slot, itemOriginal of context.equipment\r\n    context.gems = me.gems()\r\n    context\r\n\r\n  afterRender: ->\r\n    super()\r\n    @$el.find('#play-level-button').css('visibility', 'hidden')\r\n    return unless @supermodel.finished()\r\n    @$el.find('#play-level-button').css('visibility', 'visible')\r\n\r\n    @setUpDraggableEventsForAvailableEquipment()\r\n    @setUpDraggableEventsForEquippedArea()\r\n    @delegateEvents()\r\n    @itemDetailsView = new ItemDetailsView()\r\n    @insertSubView(@itemDetailsView)\r\n    @requireLevelEquipment()\r\n    @$el.find('.nano').nanoScroller({alwaysVisible: true})\r\n    @onSelectionChanged()\r\n    @onEquipmentChanged()\r\n\r\n  afterInsert: ->\r\n    super()\r\n    @canvasWidth = @$el.find('canvas').innerWidth()\r\n    @canvasHeight = @$el.find('canvas').innerHeight()\r\n    @inserted = true\r\n    @requireLevelEquipment()\r\n\r\n  #- Draggable logic\r\n\r\n  setUpDraggableEventsForAvailableEquipment: ->\r\n    for availableItemEl in @$el.find('#unequipped .item')\r\n      availableItemEl = $(availableItemEl)\r\n      continue if availableItemEl.hasClass('locked') or availableItemEl.hasClass('restricted')\r\n      dragHelper = availableItemEl.clone().addClass('draggable-item')\r\n      do (dragHelper, availableItemEl) =>\r\n        availableItemEl.draggable\r\n          revert: 'invalid'\r\n          appendTo: @$el\r\n          cursorAt: {left: 35.5, top: 35.5}\r\n          helper: -> dragHelper\r\n          revertDuration: 200\r\n          distance: 10\r\n          scroll: false\r\n          zIndex: 1100\r\n        availableItemEl.on 'dragstart', => @selectUnequippedItem(availableItemEl)\r\n\r\n  setUpDraggableEventsForEquippedArea: ->\r\n    for itemSlot in @$el.find '.item-slot'\r\n      slot = $(itemSlot).data 'slot'\r\n      do (slot, itemSlot) =>\r\n        $(itemSlot).droppable\r\n          drop: (e, ui) => @equipSelectedItem()\r\n          accept: (el) -> $(el).parent().hasClass slot\r\n          activeClass: 'droppable'\r\n          hoverClass: 'droppable-hover'\r\n          tolerance: 'touch'\r\n        @makeEquippedSlotDraggable $(itemSlot)\r\n\r\n    @$el.find('#equipped').droppable\r\n      drop: (e, ui) => @equipSelectedItem()\r\n      accept: (el) -> true\r\n      activeClass: 'droppable'\r\n      hoverClass: 'droppable-hover'\r\n      tolerance: 'pointer'\r\n\r\n  makeEquippedSlotDraggable: (slot) ->\r\n    unequip = =>\r\n      itemEl = @unequipItemFromSlot slot\r\n      selectedSlotItemID = itemEl.data('item-id')\r\n      item = @items.get(selectedSlotItemID)\r\n      @requireLevelEquipment()\r\n      @showItemDetails(item, 'equip')\r\n      @onSelectionChanged()\r\n      @onEquipmentChanged()\r\n    shouldStayEquippedWhenDropped = (isValidDrop) ->\r\n      pos = $(@).position()\r\n      revert = Math.abs(pos.left) < $(@).outerWidth() and Math.abs(pos.top) < $(@).outerHeight()\r\n      unequip() if not revert\r\n      revert\r\n    # TODO: figure out how to make this actually above the available items list (the .ui-draggable-helper img is still inside .item-view and so underlaps...)\r\n    $(slot).find('img').draggable\r\n      revert: shouldStayEquippedWhenDropped\r\n      appendTo: @$el\r\n      cursorAt: {left: 35.5, top: 35.5}\r\n      revertDuration: 200\r\n      distance: 10\r\n      scroll: false\r\n      zIndex: 100\r\n    slot.on 'dragstart', => @selectItemSlot(slot)\r\n\r\n\r\n  #- Select/equip event handlers\r\n\r\n  onItemSlotClick: (e) ->\r\n    return if @remainingRequiredEquipment?.length  # Don't let them select a slot if we need them to first equip some require gear.\r\n    #@playSound 'menu-button-click'\r\n    @selectItemSlot($(e.target).closest('.item-slot'))\r\n\r\n  onUnequippedItemClick: (e) ->\r\n    return if @justDoubleClicked\r\n    return if @justClickedEquipItemButton\r\n    itemEl = $(e.target).closest('.item')\r\n    #@playSound 'menu-button-click'\r\n    @selectUnequippedItem(itemEl)\r\n\r\n  onUnequippedItemDoubleClick: (e) ->\r\n    itemEl = $(e.target).closest('.item')\r\n    return if itemEl.hasClass('locked') or itemEl.hasClass('restricted')\r\n    @equipSelectedItem()\r\n    @justDoubleClicked = true\r\n    _.defer => @justDoubleClicked = false\r\n\r\n  onEquippedItemDoubleClick: -> @unequipSelectedItem()\r\n  onClickEquipItemViewed: -> @equipSelectedItem()\r\n  onClickUnequipItemViewed: -> @unequipSelectedItem()\r\n\r\n  onClickEquipItemButton: (e) ->\r\n    @playSound 'menu-button-click'\r\n    itemEl = $(e.target).closest('.item')\r\n    @selectUnequippedItem(itemEl)\r\n    @equipSelectedItem()\r\n    @justClickedEquipItemButton = true\r\n    _.defer => @justClickedEquipItemButton = false\r\n\r\n  #- Select/equip higher-level, all encompassing methods the callbacks all use\r\n\r\n  selectItemSlot: (slotEl) ->\r\n    @clearSelection()\r\n    slotEl.addClass('selected')\r\n    selectedSlotItemID = slotEl.find('.item').data('item-id')\r\n    item = @items.get(selectedSlotItemID)\r\n    if item then @showItemDetails(item, 'unequip')\r\n    @onSelectionChanged()\r\n\r\n  selectUnequippedItem: (itemEl) ->\r\n    @clearSelection()\r\n    itemEl.addClass('active')\r\n    showExtra = if itemEl.hasClass('restricted') then 'restricted' else if not itemEl.hasClass('locked') then 'equip' else ''\r\n    @showItemDetails(@items.get(itemEl.data('item-id')), showExtra)\r\n    @onSelectionChanged()\r\n\r\n  equipSelectedItem: ->\r\n    selectedItemEl = @getSelectedUnequippedItem()\r\n    selectedItem = @items.get(selectedItemEl.data('item-id'))\r\n    return unless selectedItem\r\n    allowedSlots = selectedItem.getAllowedSlots()\r\n    firstSlot = unequippedSlot = null\r\n    for allowedSlot in allowedSlots\r\n      slotEl = @$el.find(\".item-slot[data-slot='#{allowedSlot}']\")\r\n      firstSlot ?= slotEl\r\n      unequippedSlot ?= slotEl unless slotEl.find('img').length\r\n    slotEl = unequippedSlot ? firstSlot\r\n    selectedItemEl.effect('transfer', to: slotEl, duration: 500, easing: 'easeOutCubic')\r\n    unequipped = @unequipItemFromSlot(slotEl)\r\n    selectedItemEl.addClass('equipped')\r\n    slotEl.append(selectedItemEl.find('img').clone().addClass('item').data('item-id', selectedItem.id))\r\n    @clearSelection()\r\n    @showItemDetails(selectedItem, 'unequip')\r\n    slotEl.addClass('selected')\r\n    selectedItem.classes.push 'equipped'\r\n    @makeEquippedSlotDraggable slotEl\r\n    @requireLevelEquipment()\r\n    @onSelectionChanged()\r\n    @onEquipmentChanged()\r\n\r\n  unequipSelectedItem: ->\r\n    slotEl = @getSelectedSlot()\r\n    @clearSelection()\r\n    itemEl = @unequipItemFromSlot(slotEl)\r\n    return unless itemEl?.length\r\n    itemEl.addClass('active')\r\n    slotEl.effect('transfer', to: itemEl, duration: 500, easing: 'easeOutCubic')\r\n    selectedSlotItemID = itemEl.data('item-id')\r\n    item = @items.get(selectedSlotItemID)\r\n    item.classes = _.without item.classes, 'equipped'\r\n    @showItemDetails(item, 'equip')\r\n    @requireLevelEquipment()\r\n    @onSelectionChanged()\r\n    @onEquipmentChanged()\r\n\r\n  #- Select/equip helpers\r\n\r\n  clearSelection: ->\r\n    @deselectAllSlots()\r\n    @deselectAllUnequippedItems()\r\n    @hideItemDetails()\r\n\r\n  unequipItemFromSlot: (slotEl) ->\r\n    itemEl = slotEl.find('.item')\r\n    itemIDToUnequip = itemEl.data('item-id')\r\n    return unless itemIDToUnequip\r\n    itemEl.remove()\r\n    item = @items.get itemIDToUnequip\r\n    item.classes = _.without item.classes, 'equipped'\r\n    @$el.find(\"#unequipped .item[data-item-id=#{itemIDToUnequip}]\").removeClass('equipped')\r\n\r\n  deselectAllSlots: ->\r\n    @$el.find('#equipped .item-slot.selected').removeClass('selected')\r\n\r\n  deselectAllUnequippedItems: ->\r\n    @$el.find('#unequipped .item').removeClass('active')\r\n\r\n  getSlot: (name) ->\r\n    @$el.find(\".item-slot[data-slot=#{name}]\")\r\n\r\n  getSelectedSlot: ->\r\n    @$el.find('#equipped .item-slot.selected')\r\n\r\n  getSelectedUnequippedItem: ->\r\n    @$el.find('#unequipped .item.active')\r\n\r\n  onSelectionChanged: ->\r\n    heroClass = @selectedHero?.get('heroClass')\r\n    itemsCanBeEquipped = @$el.find('#unequipped .item.available:not(.equipped)').filter('.'+heroClass).length\r\n    toShow = @$el.find('#double-click-hint, #available-description')\r\n    if itemsCanBeEquipped then toShow.removeClass('secret') else toShow.addClass('secret')\r\n    @delegateEvents()\r\n\r\n\r\n  showItemDetails: (item, showExtra) ->\r\n    @itemDetailsView.setItem(item)\r\n    @$el.find('#item-details-extra > *').addClass('secret')\r\n    @$el.find(\"##{showExtra}-item-viewed\").removeClass('secret')\r\n\r\n  hideItemDetails: ->\r\n    @itemDetailsView?.setItem(null)\r\n    @$el.find('#item-details-extra > *').addClass('secret')\r\n\r\n  getCurrentEquipmentConfig: ->\r\n    config = {}\r\n    for slot in @$el.find('.item-slot')\r\n      slotName = $(slot).data('slot')\r\n      slotItemID = $(slot).find('.item').data('item-id')\r\n      continue unless slotItemID\r\n      item = _.find @items.models, {id:slotItemID}\r\n      config[slotName] = item.get('original')\r\n    config\r\n\r\n  requireLevelEquipment: ->\r\n    # This is called frequently to make sure the player isn't using any restricted items and knows she must equip any required items.\r\n    return unless @inserted and @itemsProgrammablePropertiesConfigured\r\n    equipment = if @supermodel.finished() then @getCurrentEquipmentConfig() else @equipment  # Make sure we're using latest equipment.\r\n    hadRequired = @remainingRequiredEquipment?.length\r\n    @remainingRequiredEquipment = []\r\n    @$el.find('.should-equip').removeClass('should-equip')\r\n    @unequipClassRestrictedItems equipment\r\n    @unequipLevelRestrictedItems equipment\r\n    @updateLevelRequiredItems equipment\r\n    if hadRequired and not @remainingRequiredEquipment.length\r\n      @endHighlight()\r\n      @highlightElement '#play-level-button', duration: 5000\r\n    $('#play-level-button').prop('disabled', @remainingRequiredEquipment.length > 0)\r\n\r\n  unequipClassRestrictedItems: (equipment) ->\r\n    return unless @supermodel.finished() and heroClass = @selectedHero?.get 'heroClass'\r\n    for slot, item of _.clone equipment\r\n      itemModel = @items.findWhere original: item\r\n      unless itemModel and heroClass in itemModel.classes\r\n        console.log 'Unequipping', itemModel.get('heroClass'), 'item', itemModel.get('name'), 'from slot due to class restrictions.'\r\n        @unequipItemFromSlot @$el.find(\".item-slot[data-slot='#{slot}']\")\r\n        delete equipment[slot]\r\n\r\n  calculateRequiredGearPerSlot: ->\r\n    return @requiredGearPerSlot if @requiredGearPerSlot\r\n    requiredGear = _.clone(@options.level.get('requiredGear')) ? {}\r\n    requiredProperties = @options.level.get('requiredProperties') ? []\r\n    restrictedProperties = @options.level.get('restrictedProperties') ? []\r\n    requiredPropertiesPerSlot = {}\r\n    for item in @items.models\r\n      requiredPropertiesOnThisItem = _.intersection(item.programmableProperties, requiredProperties)\r\n      restrictedPropertiesOnThisItem = _.intersection(item.programmableProperties, restrictedProperties)\r\n      continue unless requiredPropertiesOnThisItem.length and not restrictedPropertiesOnThisItem.length\r\n      for slot in item.getAllowedSlots()\r\n        continue if slot isnt 'right-hand' and _.isEqual requiredPropertiesOnThisItem, ['buildXY']  # Don't require things like caltrops belt\r\n        requiredGear[slot] ?= []\r\n        requiredGear[slot].push(item.get('original')) unless item.get('original') in requiredGear[slot]\r\n        requiredPropertiesPerSlot[slot] ?= []\r\n        requiredPropertiesPerSlot[slot].push(prop) for prop in requiredPropertiesOnThisItem when prop not in requiredPropertiesPerSlot[slot]\r\n    @requiredPropertiesPerSlot = requiredPropertiesPerSlot\r\n    @requiredGearPerSlot = requiredGear\r\n    @requiredGearPerSlot\r\n\r\n  calculateRestrictedGearPerSlot: ->\r\n    return @restrictedGearPerSlot if @restrictedGearPerSlot\r\n    @calculateRequiredGearPerSlot() unless @requiredGearPerSlot\r\n    restrictedGear = _.clone(@options.level.get('restrictedGear')) ? {}\r\n    restrictedProperties = @options.level.get('restrictedProperties') ? []\r\n    for item in @items.models\r\n      restrictedPropertiesOnThisItem = _.intersection(item.programmableProperties, restrictedProperties)\r\n      for slot in item.getAllowedSlots()\r\n        requiredPropertiesNotOnThisItem = _.without(@requiredPropertiesPerSlot[slot], item.programmableProperties...)\r\n        if restrictedPropertiesOnThisItem.length or requiredPropertiesNotOnThisItem.length\r\n          restrictedGear[slot] ?= []\r\n          restrictedGear[slot].push(item.get('original')) unless item.get('original') in restrictedGear[slot]\r\n    @restrictedGearPerSlot = restrictedGear\r\n    @restrictedGearPerSlot\r\n\r\n  unequipLevelRestrictedItems: (equipment) ->\r\n    restrictedGear = @calculateRestrictedGearPerSlot()\r\n    for slot, items of restrictedGear\r\n      for item in items\r\n        equipped = equipment[slot]\r\n        if equipped and equipped is item\r\n          console.log 'Unequipping restricted item', equipped, 'for', slot, 'before level', @options.level.get('slug')\r\n          @unequipItemFromSlot @$el.find(\".item-slot[data-slot='#{slot}']\")\r\n          delete equipment[slot]\r\n    null\r\n\r\n  updateLevelRequiredItems: (equipment) ->\r\n    return unless heroClass = @selectedHero?.get 'heroClass'\r\n    requiredGear = @calculateRequiredGearPerSlot()\r\n    for slot, items of requiredGear when items.length\r\n      if slot in @ringSlots\r\n        validSlots = @ringSlots\r\n      else\r\n        validSlots = [slot]\r\n\r\n      continue if validSlots.some (slot) ->\r\n        equipped = equipment[slot]\r\n        equipped in items\r\n\r\n      # Actually, just let them play if they have equipped anything in that slot (and we haven't unequipped it due to restrictions).\r\n      # Rings often have unique effects, so this rule does not apply to them (they are still required even if there is a non-restricted ring equipped in the slot).\r\n      continue if equipment[slot] and slot not in @ringSlots\r\n\r\n      items = (item for item in items when heroClass in (@items.findWhere(original: item)?.classes ? []))\r\n      continue unless items.length  # If the required items are for another class, then let's not be finicky.\r\n\r\n      # We will point out the last (best) element that they own and can use, otherwise the first (cheapest).\r\n      items = _.sortBy items, (item) => @items.findWhere(original: item).get('tier') ? 9001\r\n      bestOwnedItem = _.findLast items, (item) -> me.ownsItem item\r\n      item = bestOwnedItem ? items[0]\r\n\r\n      # For the Tarnished Bronze Breastplate only, don't tell them they need it until they need it in the level, so we can show how to buy it.\r\n      slug = gearSlugs[item]\r\n      inCampaignView = $('#campaign-view').length\r\n      continue if slug is 'tarnished-bronze-breastplate' and inCampaignView and @options.level.get('slug') is 'the-raised-sword'\r\n\r\n      # Now we're definitely requiring and pointing out an item.\r\n      itemModel = @items.findWhere {original: item}\r\n      availableSlotSelector = \"#unequipped .item[data-item-id='#{itemModel.id}']\"\r\n      @highlightElement availableSlotSelector, delay: 500, sides: ['right'], rotation: Math.PI / 2\r\n      $itemEl = @$el.find(availableSlotSelector).addClass 'should-equip'\r\n      @$el.find(\"#equipped div[data-slot='#{slot}']\").addClass 'should-equip'\r\n      if itemOffsetTop = $itemEl[0]?.offsetTop\r\n        itemOffsetBottom = itemOffsetTop + $itemEl.outerHeight(true)\r\n        parentHeight = $itemEl.parent().height()\r\n        if itemOffsetBottom > $itemEl.parent().scrollTop() + parentHeight\r\n          $itemEl.parent().scrollTop itemOffsetBottom - parentHeight\r\n        else if itemOffsetTop < $itemEl.parent().scrollTop()\r\n          $itemEl.parent().scrollTop itemOffsetTop\r\n      @remainingRequiredEquipment.push slot: slot, item: item\r\n    null\r\n\r\n  setHero: (@selectedHero) ->\r\n    if @selectedHero.loading\r\n      @listenToOnce @selectedHero, 'sync', => @setHero? @selectedHero\r\n      return\r\n    @$el.removeClass('Warrior Ranger Wizard').addClass(@selectedHero.get('heroClass'))\r\n    @requireLevelEquipment()\r\n    @render()\r\n    @onEquipmentChanged()\r\n\r\n  onShown: ->\r\n    # Called when we switch tabs to this within the modal\r\n    @requireLevelEquipment()\r\n\r\n  onHidden: ->\r\n    # Called when the modal itself is dismissed\r\n    @endHighlight()\r\n    super()\r\n    @playSound 'game-menu-close'\r\n\r\n  onClickChooseHero: ->\r\n    @playSound 'menu-button-click'\r\n    @hide()\r\n    @trigger 'choose-hero-click'\r\n\r\n  onClickPlayLevel: (e) ->\r\n    return if @$el.find('#play-level-button').prop 'disabled'\r\n    levelSlug = @options.level.get('slug')\r\n    @playSound 'menu-button-click'\r\n    @showLoading()\r\n    ua = navigator.userAgent.toLowerCase()\r\n    isSafari = /safari/.test(ua) and not /chrome/.test(ua)\r\n    isTooShort = $(window).height() < 658  # Min vertical resolution needed at 1366px wide\r\n    if isTooShort and not me.isAdmin() and not hasGoneFullScreenOnce and not isSafari\r\n      @toggleFullscreen()\r\n      hasGoneFullScreenOnce = true\r\n    @updateConfig =>\r\n      @trigger? 'play-click'\r\n    window.tracker?.trackEvent 'Inventory Play', category: 'Play Level', level: levelSlug\r\n\r\n  updateConfig: (callback, skipSessionSave) ->\r\n    sessionHeroConfig = @options.session.get('heroConfig') ? {}\r\n    lastHeroConfig = me.get('heroConfig') ? {}\r\n    inventory = @getCurrentEquipmentConfig()\r\n    patchSession = patchMe = false\r\n    patchSession ||= not _.isEqual inventory, sessionHeroConfig.inventory\r\n    sessionHeroConfig.inventory = inventory\r\n    if hero = @selectedHero?.get('original')\r\n      patchSession ||= not _.isEqual hero, sessionHeroConfig.thangType\r\n      sessionHeroConfig.thangType = hero\r\n    patchMe ||= not _.isEqual inventory, lastHeroConfig.inventory\r\n    lastHeroConfig.inventory = inventory\r\n    if patchMe\r\n      console.log 'setting me.heroConfig to', JSON.stringify(lastHeroConfig)\r\n      me.set 'heroConfig', lastHeroConfig\r\n      me.patch()\r\n    if patchSession\r\n      console.log 'setting session.heroConfig to', JSON.stringify(sessionHeroConfig)\r\n      @options.session.set 'heroConfig', sessionHeroConfig\r\n      @options.session.patch success: callback unless skipSessionSave\r\n    else\r\n      callback?()\r\n\r\n  #- TODO: DRY this between PlayItemsModal and InventoryModal and PlayHeroesModal\r\n\r\n  onUnlockButtonClicked: (e) ->\r\n    e.stopPropagation()\r\n    button = $(e.target).closest('button')\r\n    item = @items.get(button.data('item-id'))\r\n    affordable = item.affordable\r\n    if not affordable\r\n      @playSound 'menu-button-click'\r\n      @askToBuyGems button unless features.freeOnly\r\n    else if button.hasClass('confirm')\r\n      @playSound 'menu-button-unlock-end'\r\n      purchase = Purchase.makeFor(item)\r\n      purchase.save()\r\n\r\n      #- set local changes to mimic what should happen on the server...\r\n      purchased = me.get('purchased') ? {}\r\n      purchased.items ?= []\r\n      purchased.items.push(item.get('original'))\r\n\r\n      me.set('purchased', purchased)\r\n      me.set('spent', (me.get('spent') ? 0) + item.get('gems'))\r\n\r\n      #- ...then rerender key bits\r\n      @itemGroups.lockedItems.remove(item)\r\n      @itemGroups.requiredPurchaseItems.remove(item)\r\n      # Redo all item sorting to make sure that we don't clobber state changes since last render.\r\n      equipped = _.values @getCurrentEquipmentConfig()\r\n      @sortItem(otherItem, equipped) for otherItem in @items.models\r\n      @renderSelectors('#unequipped', '#gems-count')\r\n\r\n      @requireLevelEquipment()\r\n      @delegateEvents()\r\n      @setUpDraggableEventsForAvailableEquipment()\r\n      @itemDetailsView.setItem(item)\r\n      @onScrollUnequipped true\r\n\r\n      Backbone.Mediator.publish 'store:item-purchased', item: item, itemSlug: item.get('slug')\r\n    else\r\n      @playSound 'menu-button-unlock-start'\r\n      button.addClass('confirm').text($.i18n.t('play.confirm'))\r\n      @$el.one 'click', (e) ->\r\n        button.removeClass('confirm').text($.i18n.t('play.unlock')) if e.target isnt button[0]\r\n\r\n  askToSignUp: ->\r\n    createAccountModal = new CreateAccountModal supermodel: @supermodel\r\n    return @openModalView createAccountModal\r\n\r\n  askToBuyGems: (unlockButton) ->\r\n    @$el.find('.unlock-button').popover 'destroy'\r\n    popoverTemplate = buyGemsPromptTemplate {}\r\n    unlockButton.popover(\r\n      animation: true\r\n      trigger: 'manual'\r\n      placement: 'top'\r\n      content: ' '  # template has it\r\n      container: @$el\r\n      template: popoverTemplate\r\n    ).popover 'show'\r\n    popover = unlockButton.data('bs.popover')\r\n    popover?.$tip?.i18n()\r\n\r\n  onBuyGemsPromptButtonClicked: (e) ->\r\n    @playSound 'menu-button-click'\r\n    return @askToSignUp() if me.get('anonymous')\r\n    @openModalView new BuyGemsModal()\r\n\r\n  onClickedSomewhere: (e) ->\r\n    return if @destroyed\r\n    @$el.find('.unlock-button').popover 'destroy'\r\n\r\n\r\n  #- Dynamic portrait loading\r\n\r\n  onScrollUnequipped: (forceLoadAll=false) ->\r\n    # dynamically load visible items when the user scrolls enough to see them\r\n    return if @destroyed\r\n    nanoContent = @$el.find('#unequipped .nano-content')\r\n    items = nanoContent.find('.item:visible:not(.loaded)')\r\n    threshold = nanoContent.height() + 100\r\n    for itemEl in items\r\n      itemEl = $(itemEl)\r\n      if itemEl.position().top < threshold or forceLoadAll\r\n        itemEl.addClass('loaded')\r\n        item = @items.get(itemEl.data('item-id'))\r\n        itemEl.find('img').attr('src', item.getPortraitURL())\r\n\r\n\r\n  #- Paper doll equipment updating\r\n  onEquipmentChanged: ->\r\n    heroClass = @selectedHero?.get('heroClass') ? 'Warrior'\r\n    gender = if @selectedHero?.get('slug') in heroGenders.male then 'male' else 'female'\r\n    @$el.find('#hero-image, #hero-image-hair, #hero-image-head, #hero-image-thumb').removeClass().addClass \"#{gender} #{heroClass}\"\r\n    equipment = @getCurrentEquipmentConfig()\r\n    @onScrollUnequipped()\r\n    return unless _.size(equipment) and @supermodel.finished()\r\n    @removeDollImages()\r\n    slotsWithImages = []\r\n    for slot, original of equipment\r\n      item = _.find @items.models, (item) -> item.get('original') is original\r\n      continue unless dollImages = item?.get('dollImages')\r\n      didAdd = @addDollImage slot, dollImages, heroClass, gender, item\r\n      slotsWithImages.push slot if didAdd if item.get('original') isnt '54ea39342b7506e891ca70f2'  # Circlet of the Magi needs hair under it\r\n    @$el.find('#hero-image-hair').toggle not ('head' in slotsWithImages)\r\n    @$el.find('#hero-image-thumb').toggle not ('gloves' in slotsWithImages)\r\n\r\n    @equipment = @options.equipment = equipment\r\n\r\n  removeDollImages: ->\r\n    @$el.find('.doll-image').remove()\r\n\r\n  addDollImage: (slot, dollImages, heroClass, gender, item) ->\r\n    heroClass = @selectedHero?.get('heroClass') ? 'Warrior'\r\n    gender = if @selectedHero?.get('slug') in heroGenders.male then 'male' else 'female'\r\n    didAdd = false\r\n    if slot is 'gloves'\r\n      if heroClass is 'Ranger'\r\n        imageKeys = [\"#{gender}#{heroClass}\", \"#{gender}#{heroClass}Thumb\"]\r\n      else\r\n        imageKeys = [\"#{gender}\", \"#{gender}Thumb\"]\r\n    else if heroClass is 'Wizard' and slot is 'torso'\r\n      imageKeys = [gender, \"#{gender}Back\"]\r\n    else if heroClass is 'Ranger' and slot is 'head' and item.get('original') in ['5441c2be4e9aeb727cc97105', '5441c3144e9aeb727cc97111']\r\n      # All-class headgear like faux fur hat, viking helmet is abusing ranger glove slot\r\n      imageKeys = [\"#{gender}Ranger\"]\r\n    else\r\n      imageKeys = [gender]\r\n    for imageKey in imageKeys\r\n      imageURL = dollImages[imageKey]\r\n      if not imageURL\r\n        console.log \"Hmm, should have #{slot} #{imageKey} paper doll image, but don't have it.\"\r\n      else\r\n        imageEl = $('<img>').attr('src', \"/file/#{imageURL}\").addClass(\"doll-image #{slot} #{heroClass} #{gender} #{_.string.underscored(imageKey).replace(/_/g, '-')}\").attr('draggable', false)\r\n        @$el.find('#equipped').append imageEl\r\n        didAdd = true\r\n    didAdd\r\n\r\n  destroy: ->\r\n    @$el.find('.unlock-button').popover 'destroy'\r\n    @$el.find('.ui-droppable').droppable 'destroy'\r\n    @$el.find('.ui-draggable').draggable('destroy').off 'dragstart'\r\n    @$el.find('.item-slot').off 'dragstart'\r\n    @stage?.removeAllChildren()\r\n    super()\r\n\r\n\r\nheroGenders =\r\n  male: ['knight', 'samurai', 'trapper', 'potion-master', 'goliath', 'assassin', 'necromancer', 'duelist', 'code-ninja']\r\n  female: ['captain', 'ninja', 'forest-archer', 'librarian', 'sorcerer', 'raider', 'guardian', 'pixie', 'master-wizard', 'champion']\r\n\r\ngear =\r\n  'simple-boots': '53e237bf53457600003e3f05'\r\n  'simple-sword': '53e218d853457600003e3ebe'\r\n  'tarnished-bronze-breastplate': '53e22eac53457600003e3efc'\r\n  'leather-boots': '53e2384453457600003e3f07'\r\n  'leather-belt': '5437002a7beba4a82024a97d'\r\n  'programmaticon-i': '53e4108204c00d4607a89f78'\r\n  'programmaticon-ii': '546e25d99df4a17d0d449be1'\r\n  'crude-glasses': '53e238df53457600003e3f0b'\r\n  'crude-builders-hammer': '53f4e6e3d822c23505b74f42'\r\n  'long-sword': '544d7d1f8494308424f564a3'\r\n  'sundial-wristwatch': '53e2396a53457600003e3f0f'\r\n  'bronze-shield': '544c310ae0017993fce214bf'\r\n  'wooden-glasses': '53e2167653457600003e3eb3'\r\n  'basic-flags': '545bacb41e649a4495f887da'\r\n  'roughedge': '544d7d918494308424f564a7'\r\n  'sharpened-sword': '544d7deb8494308424f564ab'\r\n  'crude-crossbow': '544d7ffd8494308424f564c3'\r\n  'crude-dagger': '544d952b8494308424f56517'\r\n  'weak-charge': '544d957d8494308424f5651f'\r\n  'enchanted-stick': '544d87188494308424f564f1'\r\n  'unholy-tome-i': '546374bc3839c6e02811d308'\r\n  'book-of-life-i': '546375653839c6e02811d30b'\r\n  'rough-sense-stone': '54693140a2b1f53ce79443bc'\r\n  'polished-sense-stone': '53e215a253457600003e3eaf'\r\n  'quartz-sense-stone': '54693240a2b1f53ce79443c5'\r\n  'wooden-builders-hammer': '54694ba3a2b1f53ce794444d'\r\n  'simple-wristwatch': '54693797a2b1f53ce79443e9'\r\n\r\ngearSlugs = _.invert gear\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/menu/item-view'\r\n\r\nmodule.exports = class ItemView extends CocoView\r\n  className: 'item-view'\r\n\r\n  template: template\r\n\r\n  initialize: (options) ->\r\n    super(arguments...)\r\n    @item = options.item\r\n    @includes = options.includes or {}\r\n\r\n  getRenderData: ->\r\n    c = super()\r\n    c.item = @item\r\n    c.includes = @includes\r\n    if @includes.props or @includes.stats\r\n      {props, stats} = @item.getFrontFacingStats()\r\n      c.props = props\r\n      c.stats = stats\r\n    c\r\n\r\n  afterRender: ->\r\n    @$el.data('item-id', @item.id)\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/menu/options-view'\r\n{me} = require 'core/auth'\r\nThangType = require 'models/ThangType'\r\nUser = require 'models/User'\r\nforms = require 'core/forms'\r\n\r\nmodule.exports = class OptionsView extends CocoView\r\n  id: 'options-view'\r\n  className: 'tab-pane'\r\n  template: template\r\n  aceConfig: {}\r\n  defaultConfig:\r\n    language: 'python'\r\n    keyBindings: 'default'\r\n    invisibles: false\r\n    indentGuides: false\r\n    behaviors: false\r\n    liveCompletion: true\r\n\r\n  events:\r\n    'change #option-music': 'updateMusic'\r\n    'change #option-invisibles': 'updateInvisibles'\r\n    'change #option-indent-guides': 'updateIndentGuides'\r\n    'change #option-behaviors': 'updateBehaviors'\r\n    'change #option-live-completion': 'updateLiveCompletion'\r\n    'click .profile-photo': 'onEditProfilePhoto'\r\n    'click .editable-icon': 'onEditProfilePhoto'\r\n    'keyup #player-name': -> @trigger 'nameChanged'\r\n\r\n  constructor: (options) ->\r\n    @uploadFilePath = \"db/user/#{me.id}\"\r\n    @onNameChange = _.debounce(@checkNameExists, 500)\r\n    @on 'nameChanged', @onNameChange\r\n    @playerName = me.get 'name'\r\n    require('core/services/filepicker')() unless window.application.isIPadApp  # Initialize if needed\r\n    super options\r\n\r\n  getRenderData: (c={}) ->\r\n    c = super(c)\r\n    @aceConfig = _.cloneDeep me.get('aceConfig') ? {}\r\n    @aceConfig = _.defaults @aceConfig, @defaultConfig\r\n    c.aceConfig = @aceConfig\r\n    c.music = me.get('music', true)\r\n    c\r\n\r\n  afterRender: ->\r\n    super()\r\n    @volumeSlider = @$el.find('#option-volume').slider(animate: 'fast', min: 0, max: 1, step: 0.05)\r\n    @volumeSlider.slider('value', me.get('volume'))\r\n    @volumeSlider.on('slide', @onVolumeSliderChange)\r\n    @volumeSlider.on('slidechange', @onVolumeSliderChange)\r\n\r\n  destroy: ->\r\n    @volumeSlider?.slider?('destroy')\r\n    super()\r\n\r\n  onVolumeSliderChange: (e) =>\r\n    volume = @volumeSlider.slider('value')\r\n    me.set 'volume', volume\r\n    @$el.find('#option-volume-value').text (volume * 100).toFixed(0) + '%'\r\n    Backbone.Mediator.publish 'level:set-volume', volume: volume\r\n    @playSound 'menu-button-click'  # Could have another volume-indicating noise\r\n\r\n  onHidden: ->\r\n    if @playerName and @playerName isnt me.get('name')\r\n      me.set 'name', @playerName\r\n    @aceConfig.invisibles = @$el.find('#option-invisibles').prop('checked')\r\n    @aceConfig.keyBindings = 'default'  # We used to give them the option, but we took it away.\r\n    @aceConfig.indentGuides = @$el.find('#option-indent-guides').prop('checked')\r\n    @aceConfig.behaviors = @$el.find('#option-behaviors').prop('checked')\r\n    @aceConfig.liveCompletion = @$el.find('#option-live-completion').prop('checked')\r\n    me.set 'aceConfig', @aceConfig\r\n    me.patch()\r\n    Backbone.Mediator.publish 'tome:change-config', {}\r\n\r\n  updateMusic: ->\r\n    me.set 'music', @$el.find('#option-music').prop('checked')\r\n\r\n  updateInvisibles: ->\r\n    @aceConfig.invisibles = @$el.find('#option-invisibles').prop('checked')\r\n\r\n  updateKeyBindings: ->\r\n    @aceConfig.keyBindings = @$el.find('#option-key-bindings').val()\r\n\r\n  updateIndentGuides: ->\r\n    @aceConfig.indentGuides = @$el.find('#option-indent-guides').prop('checked')\r\n\r\n  updateBehaviors: ->\r\n    @aceConfig.behaviors = @$el.find('#option-behaviors').prop('checked')\r\n\r\n  updateLiveCompletion: ->\r\n    @aceConfig.liveCompletion = @$el.find('#option-live-completion').prop('checked')\r\n\r\n  checkNameExists: =>\r\n    forms.clearFormAlerts(@$el)\r\n    name = $('#player-name').val()\r\n    User.getUnconflictedName name, (newName) =>\r\n      forms.clearFormAlerts(@$el)\r\n      if name isnt newName\r\n        forms.setErrorToProperty @$el, 'playerName', 'This name is already taken so you won\\'t be able to keep it.', true\r\n      else\r\n        @playerName = newName\r\n\r\n  onEditProfilePhoto: (e) ->\r\n    return if window.application.isIPadApp  # TODO: have an iPad-native way of uploading a photo, since we don't want to load FilePicker on iPad (memory)\r\n    @playSound 'menu-button-click'\r\n    photoContainer = @$el.find('.profile-photo')\r\n    onSaving = =>\r\n      photoContainer.addClass('saving')\r\n    onSaved = (uploadingPath) =>\r\n      me.set('photoURL', uploadingPath)\r\n      photoContainer.removeClass('saving').attr('src', me.getPhotoURL(photoContainer.width()))\r\n    filepicker.pick {mimetypes: 'image/*'}, @onImageChosen(onSaving, onSaved)\r\n\r\n  formatImagePostData: (inkBlob) ->\r\n    url: inkBlob.url, filename: inkBlob.filename, mimetype: inkBlob.mimetype, path: @uploadFilePath, force: true\r\n\r\n  onImageChosen: (onSaving, onSaved) ->\r\n    (inkBlob) =>\r\n      onSaving()\r\n      uploadingPath = [@uploadFilePath, inkBlob.filename].join('/')\r\n      $.ajax '/file', type: 'POST', data: @formatImagePostData(inkBlob), success: @onImageUploaded(onSaved, uploadingPath)\r\n\r\n  onImageUploaded: (onSaved, uploadingPath) ->\r\n    (e) =>\r\n      onSaved uploadingPath\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/menu/save-load-view'\r\n{me} = require 'core/auth'\r\nThangType = require 'models/ThangType'\r\n\r\nmodule.exports = class SaveLoadView extends CocoView\r\n  id: 'save-load-view'\r\n  className: 'tab-pane'\r\n  template: template\r\n\r\n  events:\r\n    'change #save-granularity-toggle input': 'onSaveGranularityChanged'\r\n\r\n  afterRender: ->\r\n    super()\r\n\r\n  onSaveGranularityChanged: (e) ->\r\n    @playSound 'menu-button-click'\r\n    toShow = $(e.target).val()\r\n    @$el.find('.save-list, .save-pane').hide()\r\n    @$el.find('.save-list.' + toShow + ', .save-pane.' + toShow).show()\r\n","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/modal/buy-gems-modal'\r\nstripeHandler = require 'core/services/stripe'\r\nutils = require 'core/utils'\r\nSubscribeModal = require 'views/core/SubscribeModal'\r\nProducts = require 'collections/Products'\r\n\r\nmodule.exports = class BuyGemsModal extends ModalView\r\n  id: \r\n    if (me.get('preferredLanguage',true) || 'en-US').split('-')[0] == 'nl'\r\n      'buy-gems-modal-nl'\r\n    else\r\n      'buy-gems-modal'\r\n  template: template\r\n  plain: true\r\n\r\n  subscriptions:\r\n    'ipad:products': 'onIPadProducts'\r\n    'ipad:iap-complete': 'onIAPComplete'\r\n    'stripe:received-token': 'onStripeReceivedToken'\r\n\r\n  events:\r\n    'click .product button:not(.start-subscription-button)': 'onClickProductButton'\r\n    'click #close-modal': 'hide'\r\n    'click .start-subscription-button': 'onClickStartSubscription'\r\n\r\n  constructor: (options) ->\r\n    super(options)\r\n    @timestampForPurchase = new Date().getTime()\r\n    @state = 'standby'\r\n    @products = new Products()\r\n    @products.comparator = 'amount'\r\n    if application.isIPadApp\r\n      @products = []\r\n      Backbone.Mediator.publish 'buy-gems-modal:update-products'\r\n    else\r\n      @supermodel.loadCollection(@products, 'products')\r\n      $.post '/db/payment/check-stripe-charges', (something, somethingElse, jqxhr) =>\r\n        if jqxhr.status is 201\r\n          @state = 'recovered_charge'\r\n          @render()\r\n\r\n  onLoaded: ->\r\n    @basicProduct = @products.findWhere { name: 'basic_subscription' }\r\n    if countrySpecificProduct = @products.findWhere { name: \"#{me.get('country')}_basic_subscription\" }\r\n      @basicProduct = countrySpecificProduct\r\n    @products.reset @products.filter (product) -> _.string.startsWith(product.get('name'), 'gems_')\r\n    super()\r\n\r\n  afterRender: ->\r\n    super()\r\n    return unless @supermodel.finished()\r\n    @playSound 'game-menu-open'\r\n    if @basicProduct\r\n      @$el.find('.subscription-gem-amount').text $.i18n.t('buy_gems.price').replace('{{gems}}', @basicProduct.get('gems'))\r\n\r\n  onHidden: ->\r\n    super()\r\n    @playSound 'game-menu-close'\r\n\r\n  onIPadProducts: (e) ->\r\n    # TODO: Update to handle new products collection\r\n#    newProducts = []\r\n#    for iapProduct in e.products\r\n#      localProduct = _.find @originalProducts, { id: iapProduct.id }\r\n#      continue unless localProduct\r\n#      localProduct.price = iapProduct.price\r\n#      newProducts.push localProduct\r\n#    @products = _.sortBy newProducts, 'gems'\r\n#    @render()\r\n\r\n  onClickProductButton: (e) ->\r\n    @playSound 'menu-button-click'\r\n    productID = $(e.target).closest('button').val()\r\n    # Don't throw error when product is not found\r\n    if productID.length == 0\r\n      return\r\n    product = @products.findWhere { name: productID }\r\n\r\n    if application.isIPadApp\r\n      Backbone.Mediator.publish 'buy-gems-modal:purchase-initiated', { productID: productID }\r\n\r\n    else\r\n      application.tracker?.trackEvent 'Started gem purchase', { productID: productID }\r\n      stripeHandler.open({\r\n        description: $.t(product.get('i18n'))\r\n        amount: product.get('amount')\r\n        bitcoin: true\r\n        alipay: if me.get('country') is 'china' or (me.get('preferredLanguage') or 'en-US')[...2] is 'zh' then true else 'auto'\r\n      })\r\n\r\n    @productBeingPurchased = product\r\n\r\n  onStripeReceivedToken: (e) ->\r\n    data = {\r\n      productID: @productBeingPurchased.get('name')\r\n      stripe: {\r\n        token: e.token.id\r\n        timestamp: @timestampForPurchase\r\n      }\r\n    }\r\n    @state = 'purchasing'\r\n    @render()\r\n    jqxhr = $.post('/db/payment', data)\r\n    jqxhr.done(=>\r\n      application.tracker?.trackEvent 'Finished gem purchase',\r\n        productID: @productBeingPurchased.get('name')\r\n        value: @productBeingPurchased.get('amount')\r\n      document.location.reload()\r\n    )\r\n    jqxhr.fail(=>\r\n      if jqxhr.status is 402\r\n        @state = 'declined'\r\n        @stateMessage = arguments[2]\r\n      else if jqxhr.status is 500\r\n        @state = 'retrying'\r\n        f = _.bind @onStripeReceivedToken, @, e\r\n        _.delay f, 2000\r\n      else\r\n        @state = 'unknown_error'\r\n        @stateMessage = \"#{jqxhr.status}: #{jqxhr.responseText}\"\r\n      @render()\r\n    )\r\n\r\n  onIAPComplete: (e) ->\r\n    product = @products.findWhere { name: e.productID }\r\n    purchased = me.get('purchased') ? {}\r\n    purchased = _.clone purchased\r\n    purchased.gems ?= 0\r\n    purchased.gems += product.gems\r\n    me.set('purchased', purchased)\r\n    @hide()\r\n\r\n  onClickStartSubscription: (e) ->\r\n    @openModalView new SubscribeModal()\r\n    window.tracker?.trackEvent 'Show subscription modal', category: 'Subscription', label: 'buy gems modal'\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/modal/item-details-view'\r\nCocoCollection = require 'collections/CocoCollection'\r\nLevelComponent = require 'models/LevelComponent'\r\n\r\n{downTheChain} = require 'lib/world/world_utils'\r\nutils = require 'core/utils'\r\n\r\nmodule.exports = class ItemDetailsView extends CocoView\r\n  id: \"item-details-view\"\r\n  template: template\r\n\r\n  constructor: ->\r\n    super(arguments...)\r\n    @propDocs = {}\r\n    @spellDocs = {}\r\n\r\n  setItem: (@item) ->\r\n    if @item\r\n      @spellDocs = {}\r\n      @item.name = utils.i18n @item.attributes, 'name'\r\n      @item.description = utils.i18n @item.attributes, 'description'\r\n      @item.affordable = me.gems() >= @item.get('gems')\r\n      @item.owned = me.ownsItem @item.get('original')\r\n      @item.comingSoon = not @item.getFrontFacingStats().props.length and not _.size @item.getFrontFacingStats().stats  # Temp: while there are placeholder items\r\n      @componentConfigs = (c.config for c in @item.get('components') when c.config)\r\n\r\n      stats = @item.getFrontFacingStats()\r\n      props = (p for p in stats.props when not @propDocs[p])\r\n      if props.length > 0 or ('cast' in stats.props)\r\n\r\n        docs = new CocoCollection([], {\r\n          url: '/db/level.component?view=prop-doc-lookup'\r\n          model: LevelComponent\r\n          project: [\r\n            'name'\r\n            'propertyDocumentation.name'\r\n            'propertyDocumentation.description'\r\n            'propertyDocumentation.i18n'\r\n          ]\r\n        })\r\n\r\n        docs.fetch({ data: {\r\n          componentOriginals: [c.original for c in @item.get('components')].join(',')\r\n          propertyNames: props.join(',')\r\n        }})\r\n        @listenToOnce docs, 'sync', @onDocsLoaded\r\n\r\n    @render()\r\n\r\n  onDocsLoaded: (levelComponents) ->\r\n    for component in levelComponents.models\r\n      for propDoc in component.get('propertyDocumentation')\r\n        if /^cast.+/.test propDoc.name\r\n          @spellDocs[propDoc.name] = propDoc\r\n        else\r\n          @propDocs[propDoc.name] = propDoc\r\n    @render()\r\n\r\n  afterRender: ->\r\n    super()\r\n    @$el.find('.nano:visible').nanoScroller({alwaysVisible: true})\r\n\r\n  getRenderData: ->\r\n    c = super()\r\n    c.item = @item\r\n    if @item\r\n      stats = @item.getFrontFacingStats()\r\n      c.stats = _.values(stats.stats)\r\n      _.last(c.stats).isLast = true if c.stats.length\r\n      c.props = []\r\n      stats.props = _.union stats.props, _.keys @spellDocs\r\n      codeLanguage = (me.get('aceConfig') ? {}).language or 'python'\r\n      for prop in stats.props\r\n        doc = @propDocs[prop] ? @spellDocs[prop] ? {}\r\n        description = utils.i18n doc, 'description'\r\n\r\n        if _.isObject description\r\n          description = description[codeLanguage] or _.values(description)[0]\r\n        if _.isString description\r\n          description = description.replace(/#{spriteName}/g, 'hero')\r\n          if fact = stats.stats.shieldDefenseFactor\r\n            description = description.replace(/#{shieldDefensePercent}%/g, fact.display)\r\n          if prop is 'buildTypes'\r\n            buildsConfig = _.find @componentConfigs, 'buildables'\r\n            description = description.replace '#{buildTypes}', \"`[\\\"#{_.keys(buildsConfig.buildables).join('\\\", \\\"')}\\\"]`\"\r\n          # We don't have the full components loaded here, so we can't really get most of these values.\r\n          componentConfigs = @componentConfigs ? []\r\n          description = description.replace /#{([^.]+?)}/g, (match, keyChain) ->\r\n            for componentConfig in componentConfigs\r\n              if value = downTheChain componentConfig, keyChain\r\n                return value\r\n            #console.log 'gotta find', keyChain, 'from', match\r\n            match\r\n          description = description.replace(/#{(.+?)}/g, '`$1`')\r\n          description = $(marked(description)).html()\r\n\r\n        c.props.push {\r\n          name: prop\r\n          description: description or '...'\r\n        }\r\n    c\r\n","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/modal/leaderboard-modal'\r\nLeaderboardTabView = require 'views/play/modal/LeaderboardTabView'\r\nLevel = require 'models/Level'\r\nutils = require 'core/utils'\r\n\r\nmodule.exports = class LeaderboardModal extends ModalView\r\n  id: 'leaderboard-modal'\r\n  template: template\r\n  instant: true\r\n  timespans: ['day', 'week', 'all']\r\n\r\n  subscriptions: {}\r\n\r\n  events:\r\n    'shown.bs.tab #leaderboard-nav a': 'onTabShown'\r\n    'click #close-modal': 'hide'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @levelSlug = @options.levelSlug\r\n    level = new Level({_id: @levelSlug})\r\n    level.project = ['name', 'i18n', 'scoreType', 'original']\r\n    @level = @supermodel.loadModel(level).model\r\n\r\n  getRenderData: (c) ->\r\n    c = super c\r\n    c.submenus = []\r\n    for scoreType in @level.get('scoreTypes') ? []\r\n      for timespan in @timespans\r\n        c.submenus.push scoreType: scoreType, timespan: timespan\r\n    c.levelName = utils.i18n @level.attributes, 'name'\r\n    c\r\n\r\n  afterRender: ->\r\n    super()\r\n    return unless @supermodel.finished()\r\n    for scoreType, scoreTypeIndex in @level.get('scoreTypes') ? []\r\n      for timespan, timespanIndex in @timespans\r\n        submenuView = new LeaderboardTabView scoreType: scoreType, timespan: timespan, level: @level\r\n        @insertSubView submenuView, @$el.find \"##{scoreType}-#{timespan}-view .leaderboard-tab-view\"\r\n        if scoreTypeIndex + timespanIndex is 0\r\n          submenuView.$el.parent().addClass 'active'\r\n          submenuView.onShown?()\r\n    @playSound 'game-menu-open'\r\n    @$el.find('.nano:visible').nanoScroller()\r\n\r\n  onTabShown: (e) ->\r\n    @playSound 'game-menu-tab-switch'\r\n    tabChunks = e.target.hash.substring(1).split '-'\r\n    scoreType = tabChunks[0 ... tabChunks.length - 2].join '-'\r\n    timespan = tabChunks[tabChunks.length - 2]\r\n    subview = _.find @subviews, scoreType: scoreType, timespan: timespan\r\n    subview.onShown?()\r\n    otherSubview.onHidden?() for subviewKey, otherSubview of @subviews when otherSubview isnt subview\r\n\r\n  onHidden: ->\r\n    super()\r\n    subview.onHidden?() for subviewKey, subview of @subviews\r\n    @playSound 'game-menu-close'\r\n","CocoView = require 'views/core/CocoView'\r\ntemplate = require 'templates/play/modal/leaderboard-tab-view'\r\nCocoCollection = require 'collections/CocoCollection'\r\nLevelSession = require 'models/LevelSession'\r\n\r\nclass TopScoresCollection extends CocoCollection\r\n  url: ''\r\n  model: LevelSession\r\n\r\n  constructor: (@level, @scoreType, @timespan) ->\r\n    super()\r\n    @url = \"/db/level/#{@level.get('original')}/top_scores/#{@scoreType}/#{@timespan}\"\r\n\r\nmodule.exports = class LeaderboardTabView extends CocoView\r\n  template: template\r\n  className: 'leaderboard-tab-view'\r\n\r\n  events:\r\n    'click tbody tr.viewable': 'onClickRow'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @level = @options.level\r\n    @scoreType = @options.scoreType ? 'time'\r\n    @timespan = @options.timespan\r\n\r\n  destroy: ->\r\n    super()\r\n\r\n  getRenderData: ->\r\n    c = super()\r\n    c.scoreType = @scoreType\r\n    c.timespan = @timespan\r\n    c.topScores = @formatTopScores()\r\n    c.loading = not @sessions or @sessions.loading\r\n    c._ = _\r\n    c\r\n\r\n  afterRender: ->\r\n    super()\r\n\r\n  formatTopScores: ->\r\n    return [] unless @sessions?.models\r\n    rows = []\r\n    for s in @sessions.models\r\n      row = {}\r\n      score = _.find s.get('state').topScores, type: @scoreType\r\n      row.ago = moment(new Date(score.date)).fromNow()\r\n      row.score = @formatScore score\r\n      row.creatorName = s.get 'creatorName'\r\n      row.creator = s.get 'creator'\r\n      row.session = s.id\r\n      row.codeLanguage = s.get 'codeLanguage'\r\n      row.hero = s.get('heroConfig')?.thangType\r\n      row.inventory = s.get('heroConfig')?.inventory\r\n      rows.push row\r\n    rows\r\n\r\n  formatScore: (score) ->\r\n    switch score.type\r\n      when 'time' then -score.score.toFixed(2) + 's'\r\n      when 'damage-taken' then -Math.round score.score\r\n      when 'damage-dealt', 'gold-collected', 'difficulty' then Math.round score.score\r\n      else score.score\r\n\r\n  onShown: ->\r\n    return if @hasShown\r\n    @hasShown = true\r\n    topScores = new TopScoresCollection @level, @scoreType, @timespan\r\n    @sessions = @supermodel.loadCollection(topScores, 'sessions', {cache: false}, 0).model\r\n\r\n  onClickRow: (e) ->\r\n    sessionID = $(e.target).closest('tr').data 'session-id'\r\n    url = \"/play/level/#{@level.get('slug')}?session=#{sessionID}&observing=true\"\r\n    window.open url, '_blank'\r\n","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/modal/play-account-modal'\r\nAccountSettingsView = require 'views/account/AccountSettingsView'\r\n\r\nmodule.exports = class PlayAccountModal extends ModalView\r\n  className: 'modal fade play-modal'\r\n  template: template\r\n  plain: true\r\n  id: 'play-account-modal'\r\n\r\n  events:\r\n    'click #save-button': -> @accountSettingsView.save()\r\n\r\n  constructor: (options) ->\r\n    super options\r\n\r\n  afterRender: ->\r\n    super()\r\n    return unless @supermodel.finished()\r\n    @playSound 'game-menu-open'\r\n    @accountSettingsView = new AccountSettingsView()\r\n    @insertSubView(@accountSettingsView)\r\n    @listenTo @accountSettingsView, 'input-changed', @onInputChanged\r\n    @listenTo @accountSettingsView, 'save-user-began', @onUserSaveBegan\r\n    @listenTo @accountSettingsView, 'save-user-success', @hide\r\n    @listenTo @accountSettingsView, 'save-user-error', @onUserSaveError\r\n\r\n  onHidden: ->\r\n    super()\r\n    @playSound 'game-menu-close'\r\n\r\n  onInputChanged: ->\r\n    @$el.find('#save-button')\r\n      .text($.i18n.t('common.save', defaultValue: 'Save'))\r\n      .addClass 'btn-info'\r\n      .removeClass 'disabled btn-danger'\r\n      .removeAttr 'disabled'\r\n\r\n  onUserSaveBegan: ->\r\n    @$el.find('#save-button')\r\n      .text($.i18n.t('common.saving', defaultValue: 'Saving...'))\r\n      .removeClass('btn-danger')\r\n      .addClass('btn-success').show()\r\n\r\n  onUserSaveError: ->\r\n    @$el.find('#save-button')\r\n      .text($.i18n.t('account_settings.error_saving', defaultValue: 'Error Saving'))\r\n      .removeClass('btn-success')\r\n      .addClass('btn-danger', 500)\r\n","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/modal/play-achievements-modal'\r\nCocoCollection = require 'collections/CocoCollection'\r\nAchievement = require 'models/Achievement'\r\nEarnedAchievement = require 'models/EarnedAchievement'\r\n\r\nutils = require 'core/utils'\r\n\r\nPAGE_SIZE = 200\r\n\r\nmodule.exports = class PlayAchievementsModal extends ModalView\r\n  className: 'modal fade play-modal'\r\n  template: template\r\n  id: 'play-achievements-modal'\r\n  plain: true\r\n\r\n  earnedMap: {}\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @achievements = new Backbone.Collection()\r\n    earnedMap = {}\r\n\r\n    achievementsFetcher = new CocoCollection([], {url: '/db/achievement', model: Achievement})\r\n    achievementsFetcher.setProjection([\r\n      'name'\r\n      'description'\r\n      'icon'\r\n      'worth'\r\n      'i18n'\r\n      'rewards'\r\n      'collection'\r\n      'function'\r\n      'query'\r\n    ])\r\n\r\n    earnedAchievementsFetcher = new CocoCollection([], {url: '/db/earned_achievement', model: EarnedAchievement})\r\n    earnedAchievementsFetcher.setProjection ['achievement', 'achievedAmount']\r\n\r\n    achievementsFetcher.skip = 0\r\n    achievementsFetcher.fetch cache: false, data: {skip: 0, limit: PAGE_SIZE}\r\n    earnedAchievementsFetcher.skip = 0\r\n    earnedAchievementsFetcher.fetch cache: false, data: {skip: 0, limit: PAGE_SIZE}\r\n\r\n    @listenTo achievementsFetcher, 'sync', @onAchievementsLoaded\r\n    @listenTo earnedAchievementsFetcher, 'sync', @onEarnedAchievementsLoaded\r\n    @stopListening @supermodel, 'loaded-all'\r\n\r\n    @supermodel.loadCollection(achievementsFetcher, 'achievement')\r\n    @supermodel.loadCollection(earnedAchievementsFetcher, 'achievement')\r\n\r\n    @onEverythingLoaded = _.after(2, @onEverythingLoaded)\r\n\r\n  onAchievementsLoaded: (fetcher) ->\r\n    needMore = fetcher.models.length is PAGE_SIZE\r\n    @achievements.add(fetcher.models)\r\n    if needMore\r\n      fetcher.skip += PAGE_SIZE\r\n      fetcher.fetch cache: false, data: {skip: fetcher.skip, limit: PAGE_SIZE}\r\n    else\r\n      @stopListening(fetcher)\r\n      @onEverythingLoaded()\r\n\r\n  onEarnedAchievementsLoaded: (fetcher) ->\r\n    needMore = fetcher.models.length is PAGE_SIZE\r\n    for earned in fetcher.models\r\n      @earnedMap[earned.get('achievement')] = earned\r\n    if needMore\r\n      fetcher.skip += PAGE_SIZE\r\n      fetcher.fetch cache: false, data: {skip: fetcher.skip, limit: PAGE_SIZE}\r\n    else\r\n      @stopListening(fetcher)\r\n      @onEverythingLoaded()\r\n\r\n  onEverythingLoaded: =>\r\n    @achievements.set(@achievements.filter((m) -> m.get('collection') isnt 'level.sessions' or m.get('query')?.team))\r\n    achievementsByDescription = earned: {}, unearned: {}\r\n    for achievement in @achievements.models\r\n      if earned = @earnedMap[achievement.id]\r\n        achievement.earned = earned\r\n        achievement.earnedDate = earned.getCreationDate()\r\n        expFunction = achievement.getExpFunction()\r\n        achievement.earnedGems = Math.round (achievement.get('rewards')?.gems or 0) * expFunction earned.get('achievedAmount')\r\n        achievement.earnedPoints = Math.round (achievement.get('worth', true) or 0) * expFunction earned.get('achievedAmount')\r\n      achievement.earnedDate ?= ''\r\n    for achievement in @achievements.models\r\n      if achievement.earned\r\n        holder = achievementsByDescription.earned\r\n      else\r\n        holder = achievementsByDescription.unearned\r\n      nextInSet = holder[achievement.get('description')]\r\n      [a, b] = [achievement.get('worth', true), nextInSet?.get('worth', true) ? 0]\r\n      if achievement.earned\r\n        shouldKeep = not nextInSet or a > b\r\n      else\r\n        shouldKeep = not nextInSet or a < b\r\n      if shouldKeep\r\n        holder[achievement.get('description')] = achievement\r\n    @achievements.set _.values(achievementsByDescription.earned).concat(_.values(achievementsByDescription.unearned))\r\n    @achievements.comparator = (m) -> m.earnedDate\r\n    @achievements.sort()\r\n    @achievements.set(@achievements.models.reverse())\r\n    for achievement in @achievements.models\r\n      achievement.name = utils.i18n achievement.attributes, 'name'\r\n      achievement.description = utils.i18n achievement.attributes, 'description'\r\n    @render()\r\n\r\n  afterRender: ->\r\n    super()\r\n    return unless @supermodel.finished()\r\n    @playSound 'game-menu-open'\r\n\r\n  onHidden: ->\r\n    super()\r\n    @playSound 'game-menu-close'\r\n","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/modal/play-heroes-modal'\r\nbuyGemsPromptTemplate = require 'templates/play/modal/buy-gems-prompt'\r\nCocoCollection = require 'collections/CocoCollection'\r\nThangType = require 'models/ThangType'\r\nSpriteBuilder = require 'lib/sprites/SpriteBuilder'\r\nAudioPlayer = require 'lib/AudioPlayer'\r\nutils = require 'core/utils'\r\nBuyGemsModal = require 'views/play/modal/BuyGemsModal'\r\nCreateAccountModal = require 'views/core/CreateAccountModal'\r\nPurchase = require 'models/Purchase'\r\nLayerAdapter = require 'lib/surface/LayerAdapter'\r\nLank = require 'lib/surface/Lank'\r\n\r\nmodule.exports = class PlayHeroesModal extends ModalView\r\n  className: 'modal fade play-modal'\r\n  template: template\r\n  id: 'play-heroes-modal'\r\n\r\n  events:\r\n    'slide.bs.carousel #hero-carousel': 'onHeroChanged'\r\n    'change #option-code-language': 'onCodeLanguageChanged'\r\n    'click #close-modal': 'hide'\r\n    'click #confirm-button': 'saveAndHide'\r\n    'click .unlock-button': 'onUnlockButtonClicked'\r\n    'click .buy-gems-prompt-button': 'onBuyGemsPromptButtonClicked'\r\n    'click': 'onClickedSomewhere'\r\n\r\n  shortcuts:\r\n    'left': -> @$el.find('#hero-carousel').carousel('prev') if @heroes.models.length and not @$el.hasClass 'secret'\r\n    'right': -> @$el.find('#hero-carousel').carousel('next') if @heroes.models.length and not @$el.hasClass 'secret'\r\n    'enter': -> @saveAndHide() if @visibleHero and not @visibleHero.locked\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    options ?= {}\r\n    @confirmButtonI18N = options.confirmButtonI18N ? \"common.save\"\r\n    @heroes = new CocoCollection([], {model: ThangType})\r\n    @heroes.url = '/db/thang.type?view=heroes'\r\n    @heroes.setProjection ['original','name','slug','soundTriggers','featureImages','gems','heroClass','description','components','extendedName','unlockLevelName','i18n','poseImage']\r\n    @heroes.comparator = 'gems'\r\n    @listenToOnce @heroes, 'sync', @onHeroesLoaded\r\n    @supermodel.loadCollection(@heroes, 'heroes')\r\n    @stages = {}\r\n    @layers = []\r\n    @session = options.session\r\n    @initCodeLanguageList options.hadEverChosenHero\r\n    @heroAnimationInterval = setInterval @animateHeroes, 1000\r\n\r\n  onHeroesLoaded: ->\r\n    @formatHero hero for hero in @heroes.models\r\n\r\n  formatHero: (hero) ->\r\n    hero.name = utils.i18n hero.attributes, 'extendedName'\r\n    hero.name ?= utils.i18n hero.attributes, 'name'\r\n    hero.description = utils.i18n hero.attributes, 'description'\r\n    hero.unlockLevelName = utils.i18n hero.attributes, 'unlockLevelName'\r\n    original = hero.get('original')\r\n    hero.locked = not me.ownsHero(original)\r\n    hero.purchasable = hero.locked and (original in (me.get('earned')?.heroes ? []))\r\n    if @options.level and allowedHeroes = @options.level.get 'allowedHeroes'\r\n      hero.restricted = not (hero.get('original') in allowedHeroes)\r\n    hero.class = (hero.get('heroClass') or 'warrior').toLowerCase()\r\n    hero.stats = hero.getHeroStats()\r\n\r\n  getRenderData: (context={}) ->\r\n    context = super(context)\r\n    context.heroes = @heroes.models\r\n    context.level = @options.level\r\n    context.codeLanguages = @codeLanguageList\r\n    context.codeLanguage = @codeLanguage = @options?.session?.get('codeLanguage') ? me.get('aceConfig')?.language ? 'python'\r\n    context.confirmButtonI18N = @confirmButtonI18N\r\n    context.visibleHero = @visibleHero\r\n    context.gems = me.gems()\r\n    context.isIE = @isIE()\r\n    context\r\n\r\n  afterRender: ->\r\n    super()\r\n    return unless @supermodel.finished()\r\n    @playSound 'game-menu-open'\r\n    @$el.find('.hero-avatar').addClass 'ie' if @isIE()\r\n    heroes = @heroes.models\r\n    @$el.find('.hero-indicator').each ->\r\n      heroID = $(@).data('hero-id')\r\n      hero = _.find heroes, (hero) -> hero.get('original') is heroID\r\n      $(@).find('.hero-avatar').css('background-image', \"url(#{hero.getPortraitURL()})\").addClass('has-tooltip').tooltip()\r\n    @canvasWidth = 313  # @$el.find('canvas').width() # unreliable, whatever\r\n    @canvasHeight = @$el.find('canvas').height()\r\n    heroConfig = @options?.session?.get('heroConfig') ? me.get('heroConfig') ? {}\r\n    heroIndex = Math.max 0, _.findIndex(heroes, ((hero) -> hero.get('original') is heroConfig.thangType))\r\n    @$el.find(\".hero-item:nth-child(#{heroIndex + 1}), .hero-indicator:nth-child(#{heroIndex + 1})\").addClass('active')\r\n    @onHeroChanged direction: null, relatedTarget: @$el.find('.hero-item')[heroIndex]\r\n    @$el.find('.hero-stat').addClass('has-tooltip').tooltip()\r\n    @buildCodeLanguages()\r\n\r\n  rerenderFooter: ->\r\n    @formatHero @visibleHero\r\n    @renderSelectors '#hero-footer'\r\n    @buildCodeLanguages()\r\n    @$el.find('#gems-count-container').toggle Boolean @visibleHero.purchasable\r\n\r\n  initCodeLanguageList: (hadEverChosenHero) ->\r\n    if application.isIPadApp\r\n      @codeLanguageList = [\r\n        {id: 'python', name: \"Python (#{$.i18n.t('choose_hero.default')})\"}\r\n        {id: 'javascript', name: 'JavaScript'}\r\n      ]\r\n    else\r\n      @codeLanguageList = switch me.getDefaultLanguageGroup()\r\n        when 'javascript'\r\n          [\r\n            {id: 'javascript', name: \"JavaScript (#{$.i18n.t('choose_hero.default')})\"}\r\n            {id: 'python', name: \"Python\"}\r\n            {id: 'coffeescript', name: \"CoffeeScript (#{$.i18n.t('choose_hero.experimental')})\"}\r\n            {id: 'lua', name: 'Lua'}\r\n          ]\r\n        else\r\n          [\r\n            {id: 'python', name: \"Python (#{$.i18n.t('choose_hero.default')})\"}\r\n            {id: 'javascript', name: 'JavaScript'}\r\n            {id: 'coffeescript', name: \"CoffeeScript (#{$.i18n.t('choose_hero.experimental')})\"}\r\n            {id: 'lua', name: 'Lua'}\r\n          ]\r\n\r\n      if me.isAdmin() or not application.isProduction()\r\n        @codeLanguageList.push {id: 'java', name: \"Java (#{$.i18n.t('choose_hero.experimental')})\"}\r\n\r\n  onHeroChanged: (e) ->\r\n    direction = e.direction  # 'left' or 'right'\r\n    heroItem = $(e.relatedTarget)\r\n    hero = _.find @heroes.models, (hero) -> hero.get('original') is heroItem.data('hero-id')\r\n    return console.error \"Couldn't find hero from heroItem:\", heroItem unless hero\r\n    heroIndex = heroItem.index()\r\n    hero = @loadHero hero, heroIndex\r\n    @preloadHero heroIndex + 1\r\n    @preloadHero heroIndex - 1\r\n    @selectedHero = hero unless hero.locked\r\n    @visibleHero = hero\r\n    @rerenderFooter()\r\n    @trigger 'hero-loaded', {hero: hero}\r\n\r\n  getFullHero: (original) ->\r\n    url = \"/db/thang.type/#{original}/version\"\r\n    if fullHero = @supermodel.getModel url\r\n      return fullHero\r\n    fullHero = new ThangType()\r\n    fullHero.setURL url\r\n    fullHero = (@supermodel.loadModel fullHero).model\r\n    fullHero\r\n\r\n  preloadHero: (heroIndex) ->\r\n    return unless hero = @heroes.models[heroIndex]\r\n    @loadHero hero, heroIndex, true\r\n\r\n  loadHero: (hero, heroIndex, preloading=false) ->\r\n    createjs.Ticker.removeEventListener 'tick', stage for stage in _.values @stages\r\n    createjs.Ticker.setFPS 30  # In case we paused it from being inactive somewhere else\r\n    if poseImage = hero.get 'poseImage'\r\n      $(\".hero-item[data-hero-id='#{hero.get('original')}'] canvas\").hide()\r\n      $(\".hero-item[data-hero-id='#{hero.get('original')}'] .hero-pose-image\").show().find('img').prop('src', '/file/' + poseImage)\r\n      @playSelectionSound hero unless preloading\r\n      return hero\r\n    if stage = @stages[heroIndex]\r\n      unless preloading\r\n        _.defer -> createjs.Ticker.addEventListener 'tick', stage  # Deferred, otherwise it won't start updating for some reason.\r\n        @playSelectionSound hero\r\n      return hero\r\n    fullHero = @getFullHero hero.get 'original'\r\n    onLoaded = =>\r\n      canvas = $(\".hero-item[data-hero-id='#{fullHero.get('original')}'] canvas\")\r\n      return unless canvas.length  # Don't render it if it's not on the screen.\r\n      unless fullHero.get 'raw'\r\n        console.error \"Couldn't make animation for #{fullHero.get('name')} with attributes #{_.cloneDeep(fullHero.attributes)}. Was it loaded with an improper projection or something?\", fullHero\r\n        @rerenderFooter()\r\n        return\r\n      canvas.show().prop width: @canvasWidth, height: @canvasHeight\r\n\r\n      layer = new LayerAdapter({webGL:true})\r\n      @layers.push layer\r\n      layer.resolutionFactor = 8 # hi res!\r\n      layer.buildAsync = false\r\n      multiplier = 7\r\n      layer.scaleX = layer.scaleY = multiplier\r\n      lank = new Lank(fullHero, {preloadSounds: false})\r\n\r\n      layer.addLank(lank)\r\n      layer.on 'new-spritesheet', ->\r\n        #- maybe put some more normalization here?\r\n        m = multiplier\r\n        m *= 0.75 if fullHero.get('slug') in ['knight', 'samurai', 'librarian', 'sorcerer', 'necromancer']  # These heroes are larger for some reason. Shrink 'em.\r\n        m *= 0.4 if fullHero.get('slug') is 'goliath'  # Just too big!\r\n        m *= 0.9 if fullHero.get('slug') is 'champion'  # Gotta fit her hair in there\r\n        layer.container.scaleX = layer.container.scaleY = m\r\n        layer.container.children[0].x = 160/m\r\n        layer.container.children[0].y = 250/m\r\n        if fullHero.get('slug') in ['forest-archer', 'librarian', 'sorcerer', 'potion-master', 'necromancer', 'code-ninja']\r\n          layer.container.children[0].y -= 3\r\n        if fullHero.get('slug') in ['librarian', 'sorcerer', 'potion-master', 'necromancer', 'goliath']\r\n          layer.container.children[0].x -= 3\r\n\r\n      stage = new createjs.SpriteStage(canvas[0])\r\n      @stages[heroIndex] = stage\r\n      stage.addChild layer.container\r\n      stage.update()\r\n      unless preloading\r\n        createjs.Ticker.addEventListener 'tick', stage\r\n        @playSelectionSound hero\r\n      @rerenderFooter()\r\n    if fullHero.loaded\r\n      _.defer onLoaded\r\n    else\r\n      @listenToOnce fullHero, 'sync', onLoaded\r\n    fullHero\r\n\r\n  animateHeroes: =>\r\n    return unless @visibleHero\r\n    heroIndex = Math.max 0, _.findIndex(@heroes.models, ((hero) => hero.get('original') is @visibleHero.get('original')))\r\n    animation = _.sample(['attack', 'move_side', 'move_fore'])  # Must be in LayerAdapter default actions.\r\n    @stages[heroIndex]?.children?[0]?.children?[0]?.gotoAndPlay? animation\r\n\r\n  playSelectionSound: (hero) ->\r\n    return if @$el.hasClass 'secret'\r\n    @currentSoundInstance?.stop()\r\n    return unless sounds = hero.get('soundTriggers')?.selected\r\n    return unless sound = sounds[Math.floor Math.random() * sounds.length]\r\n    name = AudioPlayer.nameForSoundReference sound\r\n    AudioPlayer.preloadSoundReference sound\r\n    @currentSoundInstance = AudioPlayer.playSound name, 1\r\n    @currentSoundInstance\r\n\r\n  buildCodeLanguages: ->\r\n    $select = @$el.find('#option-code-language')\r\n    $select.fancySelect().parent().find('.options li').each ->\r\n      languageName = $(@).text()\r\n      languageID = $(@).data('value')\r\n      blurb = $.i18n.t(\"choose_hero.#{languageID}_blurb\")\r\n      $(@).text(\"#{languageName} - #{blurb}\")\r\n\r\n  onCodeLanguageChanged: (e) ->\r\n    @codeLanguage = @$el.find('#option-code-language').val()\r\n    @codeLanguageChanged = true\r\n    window.tracker?.trackEvent 'Campaign changed code language', category: 'Campaign Hero Select', codeLanguage: @codeLanguage, levelSlug: @options.level?.get('slug')\r\n\r\n  #- Purchasing the hero\r\n\r\n  onUnlockButtonClicked: (e) ->\r\n    e.stopPropagation()\r\n    button = $(e.target).closest('button')\r\n    affordable = @visibleHero.get('gems') <= me.gems()\r\n    if not affordable\r\n      @playSound 'menu-button-click'\r\n      @askToBuyGems button unless features.freeOnly\r\n    else if button.hasClass('confirm')\r\n      @playSound 'menu-button-unlock-end'\r\n      purchase = Purchase.makeFor(@visibleHero)\r\n      purchase.save()\r\n\r\n      #- set local changes to mimic what should happen on the server...\r\n      purchased = me.get('purchased') ? {}\r\n      purchased.heroes ?= []\r\n      purchased.heroes.push(@visibleHero.get('original'))\r\n      me.set('purchased', purchased)\r\n      me.set('spent', (me.get('spent') ? 0) + @visibleHero.get('gems'))\r\n\r\n      #- ...then rerender visible hero\r\n      heroEntry = @$el.find(\".hero-item[data-hero-id='#{@visibleHero.get('original')}']\")\r\n      heroEntry.find('.hero-status-value').attr('data-i18n', 'play.available').i18n()\r\n      heroEntry.removeClass 'locked purchasable'\r\n      @selectedHero = @visibleHero\r\n      @rerenderFooter()\r\n\r\n      Backbone.Mediator.publish 'store:hero-purchased', hero: @visibleHero, heroSlug: @visibleHero.get('slug')\r\n    else\r\n      @playSound 'menu-button-unlock-start'\r\n      button.addClass('confirm').text($.i18n.t('play.confirm'))\r\n      @$el.one 'click', (e) ->\r\n        button.removeClass('confirm').text($.i18n.t('play.unlock')) if e.target isnt button[0]\r\n\r\n  askToSignUp: ->\r\n    createAccountModal = new CreateAccountModal supermodel: @supermodel\r\n    return @openModalView createAccountModal\r\n\r\n  askToBuyGems: (unlockButton) ->\r\n    @$el.find('.unlock-button').popover 'destroy'\r\n    popoverTemplate = buyGemsPromptTemplate {}\r\n    unlockButton.popover(\r\n      animation: true\r\n      trigger: 'manual'\r\n      placement: 'left'\r\n      content: ' '  # template has it\r\n      container: @$el\r\n      template: popoverTemplate\r\n    ).popover 'show'\r\n    popover = unlockButton.data('bs.popover')\r\n    popover?.$tip?.i18n()\r\n\r\n  onBuyGemsPromptButtonClicked: (e) ->\r\n    return @askToSignUp() if me.get('anonymous')\r\n    @openModalView new BuyGemsModal()\r\n\r\n  onClickedSomewhere: (e) ->\r\n    return if @destroyed\r\n    @$el.find('.unlock-button').popover 'destroy'\r\n\r\n\r\n  #- Exiting\r\n\r\n  saveAndHide: ->\r\n    hero = @selectedHero?.get('original')\r\n    hero ?= @visibleHero?.get('original') if @visibleHero?.loaded and not @visibleHero.locked\r\n    unless hero\r\n      console.error 'Somehow we tried to hide without having a hero selected yet...'\r\n      noty {\r\n        text: \"Error: hero not loaded. If this keeps happening, please report the bug.\"\r\n        layout: 'topCenter'\r\n        timeout: 10000\r\n        type: 'error'\r\n      }\r\n      return\r\n\r\n    if @session\r\n      changed = @updateHeroConfig(@session, hero)\r\n      if @session.get('codeLanguage') isnt @codeLanguage\r\n        @session.set('codeLanguage', @codeLanguage)\r\n        changed = true\r\n        #Backbone.Mediator.publish 'tome:change-language', language: @codeLanguage, reload: true  # We'll reload the PlayLevelView instead.\r\n\r\n      @session.patch() if changed\r\n\r\n    changed = @updateHeroConfig(me, hero)\r\n    aceConfig = _.clone(me.get('aceConfig')) or {}\r\n    if @codeLanguage isnt aceConfig.language\r\n      aceConfig.language = @codeLanguage\r\n      me.set 'aceConfig', aceConfig\r\n      changed = true\r\n\r\n    me.patch() if changed\r\n\r\n    @hide()\r\n    @trigger?('confirm-click', hero: @selectedHero)\r\n\r\n  updateHeroConfig: (model, hero) ->\r\n    return false unless hero\r\n    heroConfig = _.clone(model.get('heroConfig')) or {}\r\n    if heroConfig.thangType isnt hero\r\n      heroConfig.thangType = hero\r\n      model.set('heroConfig', heroConfig)\r\n      return true\r\n\r\n  onHidden: ->\r\n    super()\r\n    @playSound 'game-menu-close'\r\n\r\n  destroy: ->\r\n    clearInterval @heroAnimationInterval\r\n    for heroIndex, stage of @stages\r\n      createjs.Ticker.removeEventListener \"tick\", stage\r\n      stage.removeAllChildren()\r\n    layer.destroy() for layer in @layers\r\n    super()\r\n","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/modal/play-items-modal'\r\nbuyGemsPromptTemplate = require 'templates/play/modal/buy-gems-prompt'\r\nItemDetailsView = require './ItemDetailsView'\r\nBuyGemsModal = require 'views/play/modal/BuyGemsModal'\r\nCreateAccountModal = require 'views/core/CreateAccountModal'\r\n\r\nCocoCollection = require 'collections/CocoCollection'\r\nThangType = require 'models/ThangType'\r\nLevelComponent = require 'models/LevelComponent'\r\nLevel = require 'models/Level'\r\nPurchase = require 'models/Purchase'\r\n\r\nutils = require 'core/utils'\r\n\r\nPAGE_SIZE = 200\r\n\r\nslotToCategory = {\r\n  'right-hand': 'primary'\r\n\r\n  'left-hand': 'secondary'\r\n\r\n  'head': 'armor'\r\n  'torso': 'armor'\r\n  'gloves': 'armor'\r\n  'feet': 'armor'\r\n\r\n  'eyes': 'accessories'\r\n  'neck': 'accessories'\r\n  'wrists': 'accessories'\r\n  'left-ring': 'accessories'\r\n  'right-ring': 'accessories'\r\n  'waist': 'accessories'\r\n\r\n  'pet': 'misc'\r\n  'minion': 'misc'\r\n  'flag': 'misc'\r\n  'misc-0': 'misc'\r\n  'misc-1': 'misc'\r\n\r\n  'programming-book': 'books'\r\n}\r\n\r\nmodule.exports = class PlayItemsModal extends ModalView\r\n  className: 'modal fade play-modal'\r\n  template: template\r\n  id: 'play-items-modal'\r\n\r\n  events:\r\n    'click .item': 'onItemClicked'\r\n    'shown.bs.tab': 'onTabClicked'\r\n    'click .unlock-button': 'onUnlockButtonClicked'\r\n    'click .buy-gems-prompt-button': 'onBuyGemsPromptButtonClicked'\r\n    'click #close-modal': 'hide'\r\n    'click': 'onClickedSomewhere'\r\n    'update .tab-pane .nano': 'showVisibleItemImages'\r\n    'click #hero-type-select label': 'onClickHeroTypeSelect'\r\n\r\n  constructor: (options) ->\r\n    @showVisibleItemImages = _.throttle(_.bind(@showVisibleItemImages, @), 200)\r\n    super options\r\n    @items = new Backbone.Collection()\r\n    @itemCategoryCollections = {}\r\n\r\n    project = [\r\n      'name'\r\n      'components.config'\r\n      'components.original'\r\n      'slug'\r\n      'original'\r\n      'rasterIcon'\r\n      'gems'\r\n      'tier'\r\n      'description'\r\n      'i18n'\r\n      'heroClass'\r\n    ]\r\n\r\n    itemFetcher = new CocoCollection([], { url: '/db/thang.type?view=items', project: project, model: ThangType })\r\n    itemFetcher.skip = 0\r\n    itemFetcher.fetch({data: {skip: 0, limit: PAGE_SIZE}})\r\n    @listenTo itemFetcher, 'sync', @onItemsFetched\r\n    @stopListening @supermodel, 'loaded-all'\r\n    @supermodel.loadCollection(itemFetcher, 'items')\r\n    @idToItem = {}\r\n\r\n  onItemsFetched: (itemFetcher) ->\r\n    gemsOwned = me.gems()\r\n    needMore = itemFetcher.models.length is PAGE_SIZE\r\n    for model in itemFetcher.models\r\n      model.owned = me.ownsItem model.get('original')\r\n      continue unless (cost = model.get('gems')) or model.owned\r\n      category = slotToCategory[model.getAllowedSlots()[0]] or 'misc'\r\n      @itemCategoryCollections[category] ?= new Backbone.Collection()\r\n      collection = @itemCategoryCollections[category]\r\n      collection.comparator = (m) -> m.get('tier') ? m.get('gems')\r\n      collection.add(model)\r\n      model.name = utils.i18n model.attributes, 'name'\r\n      model.affordable = cost <= gemsOwned\r\n      model.silhouetted = not model.owned and model.isSilhouettedItem()\r\n      model.level = model.levelRequiredForItem() if model.get('tier')?\r\n      model.unequippable = not _.intersection(me.getHeroClasses(), model.getAllowedHeroClasses()).length\r\n      model.comingSoon = not model.getFrontFacingStats().props.length and not _.size(model.getFrontFacingStats().stats) and not model.owned  # Temp: while there are placeholder items\r\n      @idToItem[model.id] = model\r\n\r\n    if itemFetcher.skip isnt 0\r\n      # Make sure we render the newly fetched items, except the first time (when it happens automatically).\r\n      @render()\r\n\r\n    if needMore\r\n      itemFetcher.skip += PAGE_SIZE\r\n      itemFetcher.fetch({data: {skip: itemFetcher.skip, limit: PAGE_SIZE}})\r\n\r\n  getRenderData: (context={}) ->\r\n    context = super(context)\r\n    context.itemCategoryCollections = @itemCategoryCollections\r\n    context.itemCategories = _.keys @itemCategoryCollections\r\n    context.itemCategoryNames = ($.i18n.t \"items.#{category}\" for category in context.itemCategories)\r\n    context.gems = me.gems()\r\n    context\r\n\r\n  afterRender: ->\r\n    super()\r\n    return unless @supermodel.finished()\r\n    @playSound 'game-menu-open'\r\n    @$el.find('.nano:visible').nanoScroller({alwaysVisible: true})\r\n    @itemDetailsView = new ItemDetailsView()\r\n    @insertSubView(@itemDetailsView)\r\n    @$el.find(\"a[href='#item-category-armor']\").click()  # Start on armor tab, if it's there.\r\n    earnedLevels = me.get('earned')?.levels or []\r\n    if Level.levels['defense-of-plainswood'] not in earnedLevels\r\n      @$el.find('#misc-tab').hide()\r\n      @$el.find('#hero-type-select #warrior').click()  # Start on warrior tab, if low level.\r\n    @showVisibleItemImages()\r\n\r\n  onHidden: ->\r\n    super()\r\n    @playSound 'game-menu-close'\r\n\r\n\r\n  #- Click events\r\n\r\n  onItemClicked: (e) ->\r\n    return if $(e.target).closest('.unlock-button').length\r\n    @playSound 'menu-button-click'\r\n    itemEl = $(e.target).closest('.item')\r\n    wasSelected = itemEl.hasClass('selected')\r\n    @$el.find('.item.selected').removeClass('selected')\r\n    if wasSelected\r\n      item = null\r\n    else\r\n      item = @idToItem[itemEl.data('item-id')]\r\n      if item.silhouetted and not item.owned\r\n        item = null\r\n      else\r\n        itemEl.addClass('selected') unless wasSelected\r\n    @itemDetailsView.setItem(item)\r\n\r\n  onTabClicked: (e) ->\r\n    @playSound 'game-menu-tab-switch'\r\n    nano = $($(e.target).attr('href')).find('.nano')\r\n    nano.nanoScroller({alwaysVisible: true})\r\n    @paneNanoContent = nano.find('.nano-content')\r\n    @showVisibleItemImages()\r\n\r\n  showVisibleItemImages: ->\r\n    # dynamically load visible items when the user scrolls enough to see them\r\n    return console.error \"Couldn't update scroll, since paneNanoContent wasn't initialized.\" unless @paneNanoContent\r\n    items = @paneNanoContent.find('.item:not(.loaded)')\r\n    threshold = @paneNanoContent.height() + 100\r\n    for itemEl in items\r\n      itemEl = $(itemEl)\r\n      if itemEl.position().top < threshold\r\n        $(itemEl).addClass('loaded')\r\n        item = @idToItem[itemEl.data('item-id')]\r\n        itemEl.find('.item-silhouette, .item-img').attr('src', item.getPortraitURL())\r\n\r\n  onClickHeroTypeSelect: (e) ->\r\n    value = $(e.target).closest('label').attr('id')\r\n    tabContent = @$el.find('.tab-content')\r\n    tabContent.removeClass('filter-wizard filter-ranger filter-warrior')\r\n    tabContent.addClass(\"filter-#{value}\") if value isnt 'all'\r\n\r\n  onUnlockButtonClicked: (e) ->\r\n    e.stopPropagation()\r\n    button = $(e.target).closest('button')\r\n    item = @idToItem[button.data('item-id')]\r\n    gemsOwned = me.gems()\r\n    cost = item.get('gems') ? 0\r\n    affordable = cost <= gemsOwned\r\n    if not affordable\r\n      @playSound 'menu-button-click'\r\n      @askToBuyGems button unless features.freeOnly\r\n    else if button.hasClass('confirm')\r\n      @playSound 'menu-button-unlock-end'\r\n      purchase = Purchase.makeFor(item)\r\n      purchase.save()\r\n\r\n      #- set local changes to mimic what should happen on the server...\r\n      purchased = me.get('purchased') ? {}\r\n      purchased.items ?= []\r\n      purchased.items.push(item.get('original'))\r\n      item.owned = true\r\n      me.set('purchased', purchased)\r\n      me.set('spent', (me.get('spent') ? 0) + item.get('gems'))\r\n\r\n      #- ...then rerender key bits\r\n      @renderSelectors(\".item[data-item-id='#{item.id}']\", \"#gems-count\")\r\n      console.log('render selectors', \".item[data-item-id='#{item.id}']\", \"#gems-count\")\r\n      @itemDetailsView.render()\r\n      @showVisibleItemImages()\r\n\r\n      Backbone.Mediator.publish 'store:item-purchased', item: item, itemSlug: item.get('slug')\r\n    else\r\n      @playSound 'menu-button-unlock-start'\r\n      button.addClass('confirm').text($.i18n.t('play.confirm'))\r\n      @$el.one 'click', (e) ->\r\n        button.removeClass('confirm').text($.i18n.t('play.unlock')) if e.target isnt button[0]\r\n\r\n  askToSignUp: ->\r\n    createAccountModal = new CreateAccountModal supermodel: @supermodel\r\n    return @openModalView createAccountModal\r\n\r\n  askToBuyGems: (unlockButton) ->\r\n    @$el.find('.unlock-button').popover 'destroy'\r\n    popoverTemplate = buyGemsPromptTemplate {}\r\n    unlockButton.popover(\r\n      animation: true\r\n      trigger: 'manual'\r\n      placement: 'top'\r\n      content: ' '  # template has it\r\n      container: @$el\r\n      template: popoverTemplate\r\n    ).popover 'show'\r\n    popover = unlockButton.data('bs.popover')\r\n    popover?.$tip?.i18n()\r\n\r\n  onBuyGemsPromptButtonClicked: (e) ->\r\n    @playSound 'menu-button-click'\r\n    return @askToSignUp() if me.get('anonymous')\r\n    @openModalView new BuyGemsModal()\r\n\r\n  onClickedSomewhere: (e) ->\r\n    return if @destroyed\r\n    @$el.find('.unlock-button').popover 'destroy'\r\n\r\n  destroy: ->\r\n    @$el.find('.unlock-button').popover 'destroy'\r\n    super()\r\n","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/modal/play-settings-modal'\r\n\r\nmodule.exports = class PlaySettingsModal extends ModalView\r\n  className: 'modal fade play-modal'\r\n  template: template\r\n  modalWidthPercent: 90\r\n  id: 'play-settings-modal'\r\n  #instant: true\r\n\r\n  #events:\r\n  #  'change input.select': 'onSelectionChanged'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n\r\n  afterRender: ->\r\n    super()\r\n    return unless @supermodel.finished()\r\n    @playSound 'game-menu-open'\r\n\r\n  onHidden: ->\r\n    super()\r\n    @playSound 'game-menu-close'\r\n","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/modal/poll-modal'\r\nutils = require 'core/utils'\r\nUserPollsRecord = require 'models/UserPollsRecord'\r\n\r\nmodule.exports = class PollModal extends ModalView\r\n  id: 'poll-modal'\r\n  template: template\r\n\r\n  subscriptions: {}\r\n\r\n  events:\r\n    'click #close-modal': 'hide'\r\n    'click .answer:not(.selected)': 'onClickAnswer'\r\n\r\n  constructor: (options) ->\r\n    super options\r\n    @poll = options.poll\r\n    @userPollsRecord = options.userPollsRecord\r\n    @previousAnswer = (@userPollsRecord.get('polls') ? {})[@poll.id]\r\n    @previousReward = (@userPollsRecord.get('rewards') ? {})[@poll.id]\r\n\r\n  getRenderData: (c) ->\r\n    c = super c\r\n    c.poll = @poll\r\n    c.i18n = utils.i18n\r\n    c.marked = marked\r\n    c\r\n\r\n  afterRender: ->\r\n    super()\r\n    @playSound 'game-menu-open'\r\n    @updateAnswers()\r\n\r\n  onHidden: ->\r\n    super()\r\n    @playSound 'game-menu-close'\r\n\r\n  updateAnswers: (answered) ->\r\n    myAnswer = (@userPollsRecord.get('polls') ? {})[@poll.id]\r\n    answered = myAnswer?\r\n    @$el.find('table, .random-gems-container-wrapper').toggleClass 'answered', answered\r\n    return unless answered\r\n    @awardRandomGems()\r\n\r\n    # Count total votes and find the answer with the most votes.\r\n    [maxVotes, totalVotes] = [0, 0]\r\n    for answer in @poll.get('answers') or []\r\n      votes = answer.votes or 0\r\n      --votes if answer.key is @previousAnswer\r\n      ++votes if answer.key is myAnswer\r\n      answer.votes = votes\r\n      totalVotes += votes\r\n      maxVotes = Math.max maxVotes, votes or 0\r\n    @previousAnswer = myAnswer\r\n    @poll.set 'answers', @poll.get('answers')  # Update vote count locally (won't save to server).\r\n\r\n    # Update each answer cell according to its share of max and total votes.\r\n    for answer in @poll.get 'answers'\r\n      $answer = @$el.find(\".answer[data-answer='#{answer.key}']\")\r\n      $answer.toggleClass 'selected', answer.key is myAnswer\r\n      votes = answer.votes or 0\r\n      votes = maxVotes = totalVotes = 1 unless totalVotes  # If no votes yet, just pretend we voted for the first one.\r\n\r\n      widthPercentage = (100 * votes / maxVotes) + '%'\r\n      votePercentage = Math.round(100 * votes / totalVotes) + '%'\r\n      $answer.find('.progress-bar').css('width', '0%').animate({width: widthPercentage}, 'slow')\r\n      $answer.find('.vote-percentage').text votePercentage\r\n      $answer.find('.vote-count').text votes if me.isAdmin()\r\n\r\n    @trigger 'vote-updated'\r\n\r\n  onClickAnswer: (e) ->\r\n    $selectedAnswer = $(e.target).closest('.answer')\r\n    pollVotes = @userPollsRecord.get('polls') ? {}\r\n    pollVotes[@poll.id] = $selectedAnswer.data('answer').toString()\r\n    @userPollsRecord.set 'polls', pollVotes\r\n    @updateAnswers true\r\n    @userPollsRecord.save {polls: pollVotes}, {success: => @awardRandomGems?()}\r\n\r\n  awardRandomGems: ->\r\n    return unless reward = (@userPollsRecord.get('rewards') ? {})[@poll.id]\r\n    @$randomNumber = @$el.find('#random-number-comment').empty()\r\n    @$randomGems = @$el.find('#random-gems-comment').hide()\r\n    @$totalGems = @$el.find('#total-gems-comment').hide()\r\n    commentStart = commentStarts[me.get('aceConfig')?.language ? 'python']\r\n    randomNumber = reward.random\r\n    randomGems = Math.ceil 2 * randomNumber * reward.level\r\n    totalGems = if @previousReward then me.gems() else Math.round me.gems() + randomGems\r\n    playSound = @playSound\r\n\r\n    if @previousReward\r\n      utils.replaceText @$randomNumber.show(), commentStart + randomNumber.toFixed(7)\r\n      utils.replaceText @$randomGems.show(), commentStart + randomGems\r\n      utils.replaceText @$totalGems.show(), commentStart + totalGems\r\n    else\r\n      gemNoisesPlayed = 0\r\n      for i in [0 .. 1000] by 25\r\n        do (i) =>\r\n          @$randomNumber.queue ->\r\n            number = if i is 1000 then randomNumber else Math.random()\r\n            utils.replaceText $(@), commentStart + number.toFixed(7)\r\n            $(@).dequeue()\r\n            if Math.random() < randomGems / 40\r\n              gemTrigger = 'gem-' + (gemNoisesPlayed % 4)  # 4 gem sounds\r\n              ++gemNoisesPlayed\r\n              playSound gemTrigger, (0.475 + i / 2000)\r\n          @$randomNumber.delay 25\r\n      @$randomGems.delay(1100).queue ->\r\n        utils.replaceText $(@), commentStart + randomGems\r\n        $(@).show()\r\n        $(@).dequeue()\r\n      @$totalGems.delay(1200).queue ->\r\n        utils.replaceText $(@), commentStart + totalGems\r\n        $(@).show()\r\n        $(@).dequeue()\r\n\r\n      @previousReward = reward\r\n      _.delay (=>\r\n        return if @destroyed\r\n        earned = me.get('earned') ? {}\r\n        earned.gems += randomGems\r\n        me.set 'earned', earned\r\n        me.trigger 'change:earned'\r\n      ), 1200\r\n\r\n\r\ncommentStarts =\r\n  javascript: '// '\r\n  python: '# '\r\n  coffeescript: '# '\r\n  lua: '-- '\r\n  java: '// '\r\n","ModalView = require 'views/core/ModalView'\r\ntemplate = require 'templates/play/modal/share-progress-modal'\r\nstorage = require 'core/storage'\r\n\r\nmodule.exports = class ShareProgressModal extends ModalView\r\n  id: 'share-progress-modal'\r\n  template: template\r\n  plain: true\r\n  closesOnClickOutside: false\r\n\r\n  events:\r\n    'click .close-btn': 'hide'\r\n    'click .continue-link': 'hide'\r\n    'click .send-btn': 'onClickSend'\r\n\r\n  onClickSend: (e) ->\r\n    email = $('.email-input').val()\r\n    unless /[\\w\\.]+@\\w+\\.\\w+/.test email\r\n      $('.email-input').parent().addClass('has-error')\r\n      $('.email-invalid').show()\r\n      return false\r\n\r\n    request = @supermodel.addRequestResource 'send_one_time_email', {\r\n      url: '/db/user/-/send_one_time_email'\r\n      data: {email: email, type: 'share progress modal parent'}\r\n      method: 'POST'\r\n    }, 0\r\n    request.load()\r\n\r\n    storage.save 'sent-parent-email', true\r\n    @hide()\r\n"]}