{"version":3,"sources":["app/templates/teachers/markdown-resource-view.jade","app/views/teachers/MarkdownResourceView.coffee"],"names":[],"mappings":"AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3FA;AAAA;;ACAA;EAAA;;;AAAA,WAAW,QAAQ,qBAAR;;AACX,QAAQ,QAAQ,YAAR;;AACR,MAAM,QAAQ,KAAR;;AAEN,MAAM,CAAC,OAAP,GAAuB;;;;;;;iCACrB,KAAI;;iCACJ,WAAU,QAAQ,2CAAR;;iCACV,aAAY,SAAC,OAAD,EAAU,IAAV;IAAU,IAAC,QAAD;IACpB,qDAAM,OAAN;IACA,IAAC,QAAD,GAAW;WACX,CAAC,CAAC,GAAF,CAAM,eAAe,IAAC,KAAhB,GAAuB,KAA7B,EAAoC;aAAA,SAAC,IAAD;AAClC;QAAA,IAAG,IAAI,CAAC,OAAL,CAAa,iBAAb,MAAmC,CAAC,CAAvC;UACE,IAAI;UACJ,KAAC,QAAD,GAAW,OAAO,IAAP,EAAa;YAAA,UAAU,KAAV;WAAb,CAA6B,CAAC,OAA9B,CAAsC,QAAtC,EAAgD;YACzD,IAAG,QAAO,CAAV;qBACE,OADF;aAAA;qBAGE,6FAHF;;UADyD,CAAhD,EAFb;;QAQA,IAAG,KAAC,KAAD,KAAS,KAAZ;UACE,EAAE,MAAF,CAAS,CAAC,MAAV,CAAiB,EAAE,iGAAF,CAAjB,EADF;;eAGA,KAAC,OAAD;MAZkC;IAAA,QAApC;EAHU;;iCAkBZ,cAAa;IACX;WACA,IAAC,IAAG,CAAC,IAAL,CAAU,UAAV,CAAqB,CAAC,IAAtB,CAA2B;AACzB;MAAA,MAAM,EAAE,IAAF;MACN,IAAI,GAAG,CAAC,MAAJ;MACJ,OAAO,GAAG,CAAC,IAAJ,CAAS,OAAT;MACP,IAAG,IAAH;QACE,OAAO,IAAI,CAAC,OAAL,CAAa,QAAb,EAAsB,EAAtB,EADT;OAAA;QAGE,OAAO,SAHT;;MAKA,YAAY,KAAK,CAAC,aAAN,CAAoB,CAAE,GAAtB,EAA0B,IAA1B;MACZ,SAAS,CAAC,iBAAV,CAA4B,KAA5B;MACA,SAAS,CAAC,oBAAV,CAA+B,KAA/B;MACA,SAAS,CAAC,iBAAV,CAA4B,KAA5B;aACA,SAAS,CAAC,eAAV,GAA4B;IAbH,CAA3B;EAFW;;;;GArBqC","file":"public/javascripts/app/views/teachers/MarkdownResourceView.js","sourcesContent":["var __templateData = function anonymous(locals\n/**/) {\nvar buf = [];\nvar locals_ = (locals || {}),me = locals_.me,serverConfig = locals_.serverConfig,view = locals_.view,document = locals_.document;var accountLinks_mixin = function(){\nvar block = this.block, attributes = this.attributes || {}, escaped = this.escaped || {};\nbuf.push(\"<li><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\"), 'data-i18n':(\"nav.profile\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li><li><a href=\\\"/account/settings\\\" data-i18n=\\\"play.settings\\\"></a></li><li><a id=\\\"logout-button\\\" data-i18n=\\\"login.log_out\\\"></a></li>\");\n};\nbuf.push(\"<div class=\\\"style-flat\\\"><nav id=\\\"main-nav\\\" class=\\\"navbar navbar-default\\\"><div class=\\\"container-fluid container\\\"><div class=\\\"row\\\"><div class=\\\"col-md-12\\\"><div class=\\\"navbar-header\\\"><button data-toggle=\\\"collapse\\\" data-target=\\\"#navbar-collapse\\\" aria-expanded=\\\"false\\\" class=\\\"navbar-toggle collapsed\\\"><span data-i18n=\\\"nav.toggle_nav\\\" class=\\\"sr-only\\\"></span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span></button><a href=\\\"/\\\" class=\\\"navbar-brand\\\">\");\nif ( serverConfig.codeNinjas)\n{\nbuf.push(\"<img id=\\\"logo-img\\\" src=\\\"/images/pages/base/logo.png\\\" class=\\\"code-ninjas-powered-by\\\"/><img src=\\\"/images/pages/base/code-ninjas-logo-right.png\\\" class=\\\"code-ninjas-logo\\\"/>\");\n}\nelse\n{\nbuf.push(\"<img id=\\\"logo-img\\\" src=\\\"/images/pages/base/logo.png\\\"/>\");\n}\nbuf.push(\"<span class=\\\"glyphicon glyphicon-home\\\"></span></a></div><div id=\\\"navbar-collapse\\\" class=\\\"collapse navbar-collapse\\\"><ul class=\\\"nav navbar-nav\\\">\");\nif ( (!me.isStudent() && !me.isTeacher()))\n{\nbuf.push(\"<li><a href=\\\"/play\\\" data-i18n=\\\"common.play\\\"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"play/ladder\\\" data-i18n=\\\"game_menu.multiplayer_tab\\\"></a></li>\");\nif ( me.isStudent())\n{\nbuf.push(\"<li><a href=\\\"/students\\\" data-i18n=\\\"nav.my_courses\\\"></a></li>\");\n}\nif ( !me.isAnonymous() && me.isTeacher())\n{\nbuf.push(\"<li><a href=\\\"/teachers/classes\\\" data-i18n=\\\"nav.my_classrooms\\\"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a></li><li><a\" + (jade.attrs({ 'href':(view.forumLink()), 'data-i18n':(\"nav.forum\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li></ul>\");\nif ( me.isAnonymous())\n{\nbuf.push(\"<ul class=\\\"nav navbar-nav\\\"><li><a id=\\\"create-account-link\\\" data-i18n=\\\"login.sign_up\\\" class=\\\"signup-button\\\"></a></li><li><a id=\\\"login-link\\\" data-i18n=\\\"login.log_in\\\" class=\\\"login-button\\\"></a></li></ul>\");\n}\nelse\n{\nbuf.push(\"<ul class=\\\"nav navbar-nav hidden-md hidden-lg\\\"><li class=\\\"disabled\\\"><a><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),('img-circle-small'),('m-r-1'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/><span>\" + (jade.escape(null == (jade.interp = me.displayName()) ? \"\" : jade.interp)) + \"</span></a></li>\");\naccountLinks_mixin();\nbuf.push(\"</ul><ul class=\\\"nav navbar-nav\\\"><li class=\\\"dropdown hidden-xs hidden-sm\\\"><a href=\\\"#\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" class=\\\"dropdown-toggle\\\"><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),('img-circle-small'),('m-r-1'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/><span data-i18n=\\\"nav.my_account\\\"></span></a><ul class=\\\"dropdown-menu\\\"><li class=\\\"user-dropdown-header text-center\\\"><span class=\\\"user-level\\\">\" + (jade.escape(null == (jade.interp = me.level()) ? \"\" : jade.interp)) + \"</span><a\" + (jade.attrs({ 'href':(\"/user/\" + (me.getSlugOrID()) + \"\") }, {\"href\":true})) + \"><img\" + (jade.attrs({ 'src':(me.getPhotoURL()), \"class\": [('img-circle'),((me.isTeacher() ? 'border-navy' : ''))] }, {\"class\":true,\"src\":true})) + \"/></a><h5>\" + (jade.escape(null == (jade.interp = me.broadName()) ? \"\" : jade.interp)) + \"</h5></li>\");\naccountLinks_mixin();\nbuf.push(\"</ul></li></ul>\");\n}\nbuf.push(\"<ul class=\\\"nav navbar-nav\\\"><li><div id=\\\"language-dropdown-wrapper\\\"><select class=\\\"language-dropdown form-control\\\"></select></div></li></ul></div></div></div></div></nav>\");\nvar path = document.location.pathname\nbuf.push(\"<div id=\\\"teacher-dashboard-nav\\\"><nav class=\\\"navbar\\\"><div class=\\\"container-fluid container\\\"><div class=\\\"navbar-header\\\"><button type=\\\"button\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#teacher-dashboard-nav-collapse\\\" class=\\\"navbar-toggle collapsed\\\"><span class=\\\"sr-only\\\">Toggle navigation</span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span><span class=\\\"icon-bar\\\"></span></button><span data-i18n=\\\"teacher.teacher_dashboard\\\" class=\\\"navbar-brand text-h4\\\"></span></div><div id=\\\"teacher-dashboard-nav-collapse\\\" class=\\\"collapse navbar-collapse\\\"><ul class=\\\"nav navbar-nav\\\"><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/classes') === 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/classes\\\"><small data-i18n=\\\"teacher.my_classes\\\" class=\\\"label\\\"></small></a></li><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/courses') === 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/courses\\\"><small data-i18n=\\\"teacher.courses\\\" class=\\\"label\\\"></small></a></li><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/licenses') === 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/licenses\\\"><small data-i18n=\\\"teacher.enrollments\\\" class=\\\"label\\\"></small></a></li><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/resources') === 0 && path.indexOf('/teachers/resources/faq') !== 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/resources\\\"><small data-i18n=\\\"teacher.resource_hub\\\" class=\\\"label\\\"></small></a></li><li\" + (jade.attrs({ \"class\": [(path.indexOf('/teachers/resources/faq') === 0 ? 'active' : '')] }, {\"class\":true})) + \"><a href=\\\"/teachers/resources/faq\\\"><small data-i18n=\\\"teacher.educator_faq\\\" class=\\\"label\\\"></small></a></li></ul></div></div></nav></div><div id=\\\"site-content-area\\\"><div class=\\\"container\\\">\");\nif ( me.attributes.hourOfCode && me.isAnonymous() && view.name == 'cs1')\n{\nbuf.push(\"<div id=\\\"hour-of-code\\\"><h3><span data-i18n=\\\"teacher.hoc_welcome\\\"></span>!</h3><p><span data-i18n=\\\"teacher.hoc_intro\\\"></span>:</p><ol class=\\\"small\\\"><li><strong data-i18n=\\\"teacher.hoc_self_led\\\" class=\\\"spr\\\"> </strong>- <span data-i18n=\\\"teacher.hoc_self_led_desc\\\" class=\\\"spl spr\\\"> </span>- <a href=\\\"/play/game-dev-hoc?hour_of_code=true\\\"><span data-i18n=\\\"teacher.hoc_game_dev\\\"></span></a><span data-i18n=\\\"teacher.hoc_and\\\" class=\\\"spl spr\\\"></span><a href=\\\"/play?hour_of_code=true\\\"> <span data-i18n=\\\"teacher.hoc_programming\\\"></span></a>.</li><li><strong data-i18n=\\\"teacher.hoc_teacher_led\\\" class=\\\"spr\\\"></strong>- <span data-i18n=\\\"teacher.hoc_teacher_led_desc1\\\" class=\\\"spr\\\"></span><a href=\\\"/teachers/resources/cs1\\\"><span data-i18n=\\\"teacher.hoc_teacher_led_link\\\"></span></a><span data-i18n=\\\"teacher.hoc_teacher_led_desc2\\\" class=\\\"spl\\\"></span>.</li><li><strong data-i18n=\\\"teacher.hoc_group\\\" class=\\\"spr\\\"></strong>- <span data-i18n=\\\"teacher.hoc_group_desc_1\\\" class=\\\"spr\\\"> </span><a href=\\\"/teachers/resources/getting-started\\\"><span data-i18n=\\\"teacher.hoc_group_link\\\"></span></a><span data-i18n=\\\"teacher.hoc_group_desc_2\\\" class=\\\"spl\\\"></span>.</li></ol><p class=\\\"small\\\"><span data-i18n=\\\"teacher.hoc_additional_desc1\\\" class=\\\"spr\\\"></span><a href=\\\"/teachers/resources/\\\"><span data-i18n=\\\"teacher.resource_hub\\\"></span></a><span>. </span><span data-i18n=\\\"teacher.hoc_additional_desc2\\\"></span><span class=\\\"spr\\\">?</span><a href=\\\"mailto:schools@codecombat.com\\\"><span data-i18n=\\\"teacher.hoc_additional_contact\\\"></span></a>.  </p></div>\");\n}\nbuf.push(\"<span class=\\\"backlink\\\"><a href=\\\"/teachers/resources\\\">&lt; Back to Resource Hub</a></span>\");\nif ( view.content == '')\n{\nbuf.push(\"<div class=\\\"comingsoon\\\"><h4 style=\\\"text-align:center\\\"><i>This guide doesn't exist!</i></h4></div>\");\n}\nelse\n{\nbuf.push(\"<div class=\\\"print\\\"><div class=\\\"btn btn-md btn-navy\\\"><a href=\\\"javascript:window.print()\\\"><span class=\\\"glyphicon glyphicon-print\\\">&#160;</span>Print this guide</a></div></div><div\" + (jade.attrs({ 'id':(view.name), \"class\": [('lesson-plans')] }, {\"class\":true,\"id\":true})) + \">\" + (null == (jade.interp = view.content) ? \"\" : jade.interp) + \"</div>\");\n}\nbuf.push(\"</div></div><div class=\\\"container-fluid\\\"><div id=\\\"footer\\\" class=\\\"small\\\"><div class=\\\"container\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong>CodeCombat</strong></li><li><a href=\\\"/about\\\" data-i18n=\\\"nav.about\\\"></a></li><li><a href=\\\"/about#jobs\\\" data-i18n=\\\"nav.jobs\\\"></a></li><li><a href=\\\"http://blog.codecombat.com/\\\" data-i18n=\\\"nav.blog\\\"></a></li><li><a href=\\\"/legal\\\" data-i18n=\\\"nav.legal\\\"></a></li><li><a href=\\\"/privacy\\\" data-i18n=\\\"nav.privacy\\\"></a></li></ul></div>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.schools\\\"></strong></li><li><a href=\\\"/teachers/resources/faq\\\" data-i18n=\\\"teacher.educator_faq\\\"></a></li><li><a href=\\\"/teachers/classes\\\" data-i18n=\\\"nav.my_classrooms\\\"></a></li><li><a href=\\\"/teachers/resources\\\" data-i18n=\\\"nav.resource_hub\\\"></a></li><li><a href=\\\"/teachers/demo\\\" data-i18n=\\\"new_home.request_demo\\\"></a></li></ul></div>\");\n}\nbuf.push(\"<div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.get_involved\\\"></strong></li><li><a href=\\\"/community\\\" data-i18n=\\\"nav.community\\\"></a></li><li><a href=\\\"/contribute\\\" data-i18n=\\\"nav.contribute\\\"></a></li>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<li><a\" + (jade.attrs({ 'href':(view.forumLink()), 'data-i18n':(\"nav.forum\") }, {\"href\":true,\"data-i18n\":true})) + \"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"/play/ladder\\\" data-i18n=\\\"game_menu.multiplayer_tab\\\"></a></li><li><a href=\\\"https://github.com/codecombat/codecombat\\\" data-i18n=\\\"nav.open_source\\\"></a></li></ul></div><div class=\\\"col-sm-3\\\"><ul class=\\\"list-unstyled\\\"><li><strong data-i18n=\\\"nav.support\\\"></strong></li>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<li><a tabindex=\\\"-1\\\" data-i18n=\\\"nav.contact\\\" class=\\\"contact-modal\\\"></a></li>\");\n}\nbuf.push(\"<li><a href=\\\"https://www.facebook.com/codecombat\\\" data-i18n=\\\"nav.facebook\\\"></a></li><li><a href=\\\"https://twitter.com/codecombat\\\" data-i18n=\\\"nav.twitter\\\"></a></li></ul></div></div></div></div><div id=\\\"final-footer\\\" class=\\\"small text-center\\\">Copyright ©2016 CodeCombat. All Rights Reserved.<br class=\\\"hidden-lg hidden-md\\\"/><img src=\\\"/images/pages/base/logo.png\\\" alt=\\\"CodeCombat\\\"/><br class=\\\"hidden-lg hidden-md\\\"/>\");\nif ( !me.isStudent())\n{\nbuf.push(\"<span data-i18n=\\\"nav.help_pref\\\" class=\\\"spr\\\"></span>\");\nvar supportEmail = (me.get('preferredLanguage', true) || 'en-US').split('-')[0] == 'nl' ? 'klantenservice@codecombat.nl' : 'team@codecombat.com';\nbuf.push(\"<a\" + (jade.attrs({ 'href':(\"mailto:\" + supportEmail) }, {\"href\":true})) + \">\" + (jade.escape(null == (jade.interp = supportEmail) ? \"\" : jade.interp)) + \"</a><span data-i18n=\\\"nav.help_suff\\\" class=\\\"spl\\\"></span>\");\n}\nbuf.push(\"</div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","RootView = require 'views/core/RootView'\r\nutils = require 'core/utils'\r\nace = require 'ace'\r\n\r\nmodule.exports = class MarkdownResourceView extends RootView\r\n  id: 'markdown-resource-view'\r\n  template: require 'templates/teachers/markdown-resource-view'\r\n  initialize: (options, @name) ->\r\n    super(options)\r\n    @content = ''\r\n    $.get '/markdown/' + @name + '.md', (data) =>\r\n      if data.indexOf('<!doctype html>') is -1\r\n        i = 0\r\n        @content = marked(data, sanitize: false).replace /<\\/h5/g, () ->\r\n          if i++ == 0\r\n            '</h5'\r\n          else\r\n            '<a class=\"pull-right btn btn-md btn-navy back-to-top\" href=\"#logo-img\">Back to top</a></h5'\r\n\r\n      if @name is 'cs1'\r\n        $('body').append($(\"<img src='https://code.org/api/hour/begin_code_combat_teacher.png' style='visibility: hidden;'>\"))\r\n\r\n      @render()\r\n      \r\n\r\n  afterRender: ->\r\n    super()\r\n    @$el.find('pre>code').each ->\r\n      els = $(@)\r\n      c = els.parent()\r\n      lang = els.attr('class')\r\n      if lang\r\n        lang = lang.replace(/^lang-/,'')\r\n      else\r\n        lang = 'python'\r\n\r\n      aceEditor = utils.initializeACE c[0], lang\r\n      aceEditor.setShowInvisibles false\r\n      aceEditor.setBehavioursEnabled false\r\n      aceEditor.setAnimatedScroll false\r\n      aceEditor.$blockScrolling = Infinity\r\n"]}