{"version":3,"sources":["app/core/Router.coffee"],"names":[],"mappings":"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","file":"public/javascripts/app/core/Router.js","sourcesContent":["go = (path, options) -> -> @routeDirectly path, arguments, options\r\nredirect = (path) -> -> @navigate(path + document.location.search, { trigger: true, replace: true })\r\nutils = require './utils'\r\nViewLoadTimer = require 'core/ViewLoadTimer'\r\n\r\nmodule.exports = class CocoRouter extends Backbone.Router\r\n\r\n  initialize: ->\r\n    # http://nerds.airbnb.com/how-to-add-google-analytics-page-tracking-to-57536\r\n    @bind 'route', @_trackPageView\r\n    Backbone.Mediator.subscribe 'router:navigate', @onNavigate, @\r\n    @initializeSocialMediaServices = _.once @initializeSocialMediaServices\r\n\r\n  routes:\r\n    '': ->\r\n      if window.serverConfig.picoCTF\r\n        return @routeDirectly 'play/CampaignView', ['picoctf'], {}\r\n      if utils.getQueryVariable 'hour_of_code'\r\n        return @navigate \"/play?hour_of_code=true\", {trigger: true, replace: true}\r\n      return @routeDirectly('HomeView', [])\r\n\r\n    'about': go('AboutView')\r\n\r\n    'account': go('account/MainAccountView')\r\n    'account/settings': go('account/AccountSettingsRootView')\r\n    'account/unsubscribe': go('account/UnsubscribeView')\r\n    'account/payments': go('account/PaymentsView')\r\n    'account/subscription': go('account/SubscriptionView')\r\n    'account/invoices': go('account/InvoicesView')\r\n    'account/prepaid': go('account/PrepaidView')\r\n\r\n    'admin': go('admin/MainAdminView')\r\n    'admin/clas': go('admin/CLAsView')\r\n    'admin/classroom-content': go('admin/AdminClassroomContentView')\r\n    'admin/classroom-levels': go('admin/AdminClassroomLevelsView')\r\n    'admin/classrooms-progress': go('admin/AdminClassroomsProgressView')\r\n    'admin/design-elements': go('admin/DesignElementsView')\r\n    'admin/files': go('admin/FilesView')\r\n    'admin/analytics': go('admin/AnalyticsView')\r\n    'admin/analytics/subscriptions': go('admin/AnalyticsSubscriptionsView')\r\n    'admin/level-sessions': go('admin/LevelSessionsView')\r\n    'admin/school-counts': go('admin/SchoolCountsView')\r\n    'admin/school-licenses': go('admin/SchoolLicensesView')\r\n    'admin/base': go('admin/BaseView')\r\n    'admin/demo-requests': go('admin/DemoRequestsView')\r\n    'admin/trial-requests': go('admin/TrialRequestsView')\r\n    'admin/user-code-problems': go('admin/UserCodeProblemsView')\r\n    'admin/pending-patches': go('admin/PendingPatchesView')\r\n    'admin/codelogs': go('admin/CodeLogsView')\r\n    'admin/skipped-contacts': go('admin/SkippedContactsView')\r\n\r\n    'artisans': go('artisans/ArtisansView')\r\n\r\n    'artisans/level-tasks': go('artisans/LevelTasksView')\r\n    'artisans/solution-problems': go('artisans/SolutionProblemsView')\r\n    'artisans/thang-tasks': go('artisans/ThangTasksView')\r\n    'artisans/level-concepts': go('artisans/LevelConceptMap')\r\n    'artisans/level-guides': go('artisans/LevelGuidesView')\r\n    'artisans/student-solutions': go('artisans/StudentSolutionsView')\r\n    'artisans/tag-test': go('artisans/TagTestView')\r\n\r\n    'careers': => window.location.href = 'https://jobs.lever.co/codecombat'\r\n    'Careers': => window.location.href = 'https://jobs.lever.co/codecombat'\r\n\r\n    'cla': go('CLAView')\r\n\r\n    'clans': go('clans/ClansView')\r\n    'clans/:clanID': go('clans/ClanDetailsView')\r\n\r\n    'community': go('CommunityView')\r\n\r\n    'contribute': go('contribute/MainContributeView')\r\n    'contribute/adventurer': go('contribute/AdventurerView')\r\n    'contribute/ambassador': go('contribute/AmbassadorView')\r\n    'contribute/archmage': go('contribute/ArchmageView')\r\n    'contribute/artisan': go('contribute/ArtisanView')\r\n    'contribute/diplomat': go('contribute/DiplomatView')\r\n    'contribute/scribe': go('contribute/ScribeView')\r\n\r\n    'courses': redirect('/students') # Redirected 9/3/16\r\n    'Courses': redirect('/students') # Redirected 9/3/16\r\n    'courses/students': redirect('/students') # Redirected 9/3/16\r\n    'courses/teachers': redirect('/teachers/classes')\r\n    'courses/purchase': redirect('/teachers/licenses')\r\n    'courses/enroll(/:courseID)': redirect('/teachers/licenses')\r\n    'courses/update-account': redirect('students/update-account') # Redirected 9/3/16\r\n    'courses/:classroomID': -> @navigate(\"/students/#{arguments[0]}\", {trigger: true, replace: true}) # Redirected 9/3/16\r\n    'courses/:courseID/:courseInstanceID': -> @navigate(\"/students/#{arguments[0]}/#{arguments[1]}\", {trigger: true, replace: true}) # Redirected 9/3/16\r\n\r\n    'db/*path': 'routeToServer'\r\n    'demo(/*subpath)': go('DemoView')\r\n    'docs/components': go('docs/ComponentsDocumentationView')\r\n    'docs/systems': go('docs/SystemsDocumentationView')\r\n\r\n    'editor': go('CommunityView')\r\n\r\n    'editor/achievement': go('editor/achievement/AchievementSearchView')\r\n    'editor/achievement/:articleID': go('editor/achievement/AchievementEditView')\r\n    'editor/article': go('editor/article/ArticleSearchView')\r\n    'editor/article/preview': go('editor/article/ArticlePreviewView')\r\n    'editor/article/:articleID': go('editor/article/ArticleEditView')\r\n    'editor/level': go('editor/level/LevelSearchView')\r\n    'editor/level/:levelID': go('editor/level/LevelEditView')\r\n    'editor/thang': go('editor/thang/ThangTypeSearchView')\r\n    'editor/thang/:thangID': go('editor/thang/ThangTypeEditView')\r\n    'editor/campaign/:campaignID': go('editor/campaign/CampaignEditorView')\r\n    'editor/poll': go('editor/poll/PollSearchView')\r\n    'editor/poll/:articleID': go('editor/poll/PollEditView')\r\n    'editor/thang-tasks': go('editor/ThangTasksView')\r\n    'editor/verifier': go('editor/verifier/VerifierView')\r\n    'editor/verifier/:levelID': go('editor/verifier/VerifierView')\r\n    'editor/course': go('editor/course/CourseSearchView')\r\n    'editor/course/:courseID': go('editor/course/CourseEditView')\r\n\r\n    'file/*path': 'routeToServer'\r\n\r\n    'github/*path': 'routeToServer'\r\n\r\n    'hoc': -> @navigate \"/play?hour_of_code=true\", {trigger: true, replace: true}\r\n    'home': go('HomeView')\r\n\r\n    'i18n': go('i18n/I18NHomeView')\r\n    'i18n/thang/:handle': go('i18n/I18NEditThangTypeView')\r\n    'i18n/component/:handle': go('i18n/I18NEditComponentView')\r\n    'i18n/level/:handle': go('i18n/I18NEditLevelView')\r\n    'i18n/achievement/:handle': go('i18n/I18NEditAchievementView')\r\n    'i18n/campaign/:handle': go('i18n/I18NEditCampaignView')\r\n    'i18n/poll/:handle': go('i18n/I18NEditPollView')\r\n    'i18n/course/:handle': go('i18n/I18NEditCourseView')\r\n\r\n    'identify': go('user/IdentifyView')\r\n    'il-signup': go('account/IsraelSignupView')\r\n\r\n    'legal': go('LegalView')\r\n\r\n    'play(/)': go('play/CampaignView', { redirectStudents: true, redirectTeachers: true }) # extra slash is to get Facebook app to work\r\n    'play/ladder/:levelID/:leagueType/:leagueID': go('ladder/LadderView')\r\n    'play/ladder/:levelID': go('ladder/LadderView')\r\n    'play/ladder': go('ladder/MainLadderView')\r\n    'play/level/:levelID': go('play/level/PlayLevelView')\r\n    'play/game-dev-level/:levelID/:sessionID': go('play/level/PlayGameDevLevelView')\r\n    'play/web-dev-level/:levelID/:sessionID': go('play/level/PlayWebDevLevelView')\r\n    'play/spectate/:levelID': go('play/SpectateView')\r\n    'play/:map': go('play/CampaignView', { redirectStudents: true, redirectTeachers: true })\r\n\r\n    'preview': go('HomeView')\r\n\r\n    'privacy': go('PrivacyView')\r\n\r\n    'schools': go('HomeView')\r\n    'seen': go('HomeView')\r\n    'SEEN': go('HomeView')\r\n\r\n    'students': go('courses/CoursesView', { redirectTeachers: true })\r\n    'students/update-account': go('courses/CoursesUpdateAccountView', { redirectTeachers: true })\r\n    'students/:classroomID': go('courses/ClassroomView', { redirectTeachers: true, studentsOnly: true })\r\n    'students/:courseID/:courseInstanceID': go('courses/CourseDetailsView', { redirectTeachers: true, studentsOnly: true })\r\n    'teachers': redirect('/teachers/classes')\r\n    'teachers/classes': go('courses/TeacherClassesView', { redirectStudents: true, teachersOnly: true })\r\n    'teachers/classes/:classroomID/:studentID': go('teachers/TeacherStudentView', { redirectStudents: true, teachersOnly: true })\r\n    'teachers/classes/:classroomID': go('courses/TeacherClassView', { redirectStudents: true, teachersOnly: true })\r\n    'teachers/courses': go('courses/TeacherCoursesView', { redirectStudents: true })\r\n    'teachers/course-solution/:courseID/:language': go('teachers/TeacherCourseSolutionView', { redirectStudents: true })\r\n    'teachers/demo': go('teachers/RequestQuoteView', { redirectStudents: true })\r\n    'teachers/enrollments': redirect('/teachers/licenses')\r\n    'teachers/licenses': go('courses/EnrollmentsView', { redirectStudents: true, teachersOnly: true })\r\n    'teachers/freetrial': go('teachers/RequestQuoteView', { redirectStudents: true })\r\n    'teachers/quote': redirect('/teachers/demo')\r\n    'teachers/resources': go('teachers/ResourceHubView', { redirectStudents: true })\r\n    'teachers/resources/:name': go('teachers/MarkdownResourceView', { redirectStudents: true })\r\n    'teachers/signup': ->\r\n      return @routeDirectly('teachers/CreateTeacherAccountView', []) if me.isAnonymous()\r\n      return @navigate('/students', {trigger: true, replace: true}) if me.isStudent() and not me.isAdmin()\r\n      @navigate('/teachers/update-account', {trigger: true, replace: true})\r\n    'teachers/starter-licenses': go('teachers/StarterLicenseUpsellView', { redirectStudents: true, teachersOnly: true })\r\n    'teachers/update-account': ->\r\n      return @navigate('/teachers/signup', {trigger: true, replace: true}) if me.isAnonymous()\r\n      return @navigate('/students', {trigger: true, replace: true}) if me.isStudent() and not me.isAdmin()\r\n      @routeDirectly('teachers/ConvertToTeacherAccountView', [])\r\n\r\n    'test(/*subpath)': go('TestView')\r\n\r\n    'user/:slugOrID': go('user/MainUserView')\r\n    'user/:userID/verify/:verificationCode': go('user/EmailVerifiedView')\r\n\r\n    '*name/': 'removeTrailingSlash'\r\n    '*name': go('NotFoundView')\r\n\r\n  routeToServer: (e) ->\r\n    window.location.href = window.location.href\r\n\r\n  removeTrailingSlash: (e) ->\r\n    @navigate e, {trigger: true}\r\n\r\n  routeDirectly: (path, args=[], options={}) ->\r\n    @viewLoad = new ViewLoadTimer() unless options.recursive\r\n    if options.redirectStudents and me.isStudent() and not me.isAdmin()\r\n      return @redirectHome()\r\n    if options.redirectTeachers and me.isTeacher() and not me.isAdmin()\r\n      return @redirectHome()\r\n    if options.teachersOnly and not (me.isTeacher() or me.isAdmin())\r\n      return @routeDirectly('teachers/RestrictedToTeachersView')\r\n    if options.studentsOnly and not (me.isStudent() or me.isAdmin())\r\n      return @routeDirectly('courses/RestrictedToStudentsView')\r\n    leavingMessage = _.result(window.currentView, 'onLeaveMessage')\r\n    if leavingMessage\r\n      if not confirm(leavingMessage)\r\n        return @navigate(this.path, {replace: true})\r\n      else\r\n        window.currentView.onLeaveMessage = _.noop # to stop repeat confirm calls\r\n\r\n    # TODO: Combine these two?\r\n    if features.playViewsOnly and not (_.string.startsWith(document.location.pathname, '/play') or document.location.pathname is '/admin')\r\n      return @navigate('/play', { trigger: true, replace: true })\r\n    path = 'play/CampaignView' if features.playOnly and not /^(views)?\\/?play/.test(path)\r\n\r\n    path = \"views/#{path}\" if not _.string.startsWith(path, 'views/')\r\n    ViewClass = @tryToLoadModule path\r\n    if not ViewClass and application.moduleLoader.load(path)\r\n      @listenToOnce application.moduleLoader, 'load-complete', ->\r\n        options.recursive = true\r\n        @routeDirectly(path, args, options)\r\n      return\r\n    return go('NotFoundView') if not ViewClass\r\n    view = new ViewClass(options, args...)  # options, then any path fragment args\r\n    view.render()\r\n    @openView(view)\r\n    @viewLoad.setView(view)\r\n    @viewLoad.record()\r\n    \r\n  redirectHome: ->\r\n    homeUrl = switch \r\n      when me.isStudent() then '/students'\r\n      when me.isTeacher() then '/teachers'\r\n      else '/'\r\n    @navigate(homeUrl, {trigger: true, replace: true})\r\n\r\n  tryToLoadModule: (path) ->\r\n    try\r\n      return window.require(path)\r\n    catch error\r\n      if error.toString().search('Cannot find module \"' + path + '\" from') is -1\r\n        throw error\r\n\r\n  openView: (view) ->\r\n    @closeCurrentView()\r\n    $('#page-container').empty().append view.el\r\n    window.currentView = view\r\n    @activateTab()\r\n    view.afterInsert()\r\n    view.didReappear()\r\n    @path = document.location.pathname + document.location.search\r\n\r\n  closeCurrentView: ->\r\n    if window.currentView?.reloadOnClose\r\n      return document.location.reload()\r\n    window.currentModal?.hide?()\r\n    return unless window.currentView?\r\n    window.currentView.destroy()\r\n    $('.popover').popover 'hide'\r\n    $('#flying-focus').css({top: 0, left: 0}) # otherwise it might make the page unnecessarily tall\r\n    _.delay (->\r\n      $('html')[0].scrollTop = 0\r\n      $('body')[0].scrollTop = 0\r\n    ), 10\r\n\r\n  initializeSocialMediaServices: ->\r\n    return if application.testing or application.demoing\r\n    application.facebookHandler.loadAPI()\r\n    application.gplusHandler.loadAPI()\r\n    require('core/services/twitter')()\r\n\r\n  renderSocialButtons: =>\r\n    # TODO: Refactor remaining services to Handlers, use loadAPI success callback\r\n    @initializeSocialMediaServices()\r\n    $('.share-buttons, .partner-badges').addClass('fade-in').delay(10000).removeClass('fade-in', 5000)\r\n    application.facebookHandler.renderButtons()\r\n    application.gplusHandler.renderButtons()\r\n    twttr?.widgets?.load?()\r\n\r\n  activateTab: ->\r\n    base = _.string.words(document.location.pathname[1..], '/')[0]\r\n    $(\"ul.nav li.#{base}\").addClass('active')\r\n\r\n  _trackPageView: ->\r\n    window.tracker?.trackPageView()\r\n\r\n  onNavigate: (e, recursive=false) ->\r\n    @viewLoad = new ViewLoadTimer() unless recursive\r\n    if _.isString e.viewClass\r\n      ViewClass = @tryToLoadModule e.viewClass\r\n      if not ViewClass and application.moduleLoader.load(e.viewClass)\r\n        @listenToOnce application.moduleLoader, 'load-complete', ->\r\n          @onNavigate(e, true)\r\n        return\r\n      e.viewClass = ViewClass\r\n\r\n    manualView = e.view or e.viewClass\r\n    if (e.route is document.location.pathname) and not manualView\r\n      return document.location.reload()\r\n    @navigate e.route, {trigger: not manualView}\r\n    @_trackPageView()\r\n    return unless manualView\r\n    if e.viewClass\r\n      args = e.viewArgs or []\r\n      view = new e.viewClass(args...)\r\n      view.render()\r\n      @openView view\r\n      @viewLoad.setView(view)\r\n    else\r\n      @openView e.view\r\n      @viewLoad.setView(e.view)\r\n    @viewLoad.record()\r\n\r\n  navigate: (fragment, options) ->\r\n    super fragment, options\r\n    Backbone.Mediator.publish 'router:navigated', route: fragment\r\n\r\n  reload: ->\r\n    document.location.reload()\r\n"]}