{"version":3,"sources":["app/core/NameLoader.coffee"],"names":[],"mappings":";AAAA;EAAA;;;;AAAA,YAAY,QAAQ,gBAAR;;AAEZ,aAAa;;AAEP;;;;;;;;uBACJ,YAAW,SAAC,GAAD;AACT;IAAA,SAAS,CAAC,CAAC,IAAF;;AAAQ;WAAA;;YAAsB,CAAI,UAAW;uBAArC;;AAAA;;QAAR;IACT,KAAoB,MAAM,CAAC,MAA3B;AAAA,aAAO,MAAP;;IACA,eAAe;MACb,KAAK,kBADQ;MAEb,MAAM,MAFO;MAGb,MAAM;QAAC,KAAK,MAAN;OAHO;MAIb,SAAS,IAAC,YAJG;;AAOf,WAAO;EAVE;;uBAYX,cAAa,SAAC,QAAD;WACX,CAAC,CAAC,MAAF,CAAS,UAAT,EAAqB,QAArB;EADW;;uBAGb,UAAS,SAAC,EAAD;AACP;IAAA,yCAAiB,CAAE,mBAAhB,2CAA4C,CAAE,kBAAjD;AACE,aAAS,uCAAe,CAAE,kBAAjB,IAA2B,GAA3B,GAA6B,uCAAe,CAAE,iBAAjB,EADxC;;kDAEc,CAAE,mBAAhB,2CAA2C,CAAE,cAA7C,IAAqD;EAH9C;;;;GAhBc;;AAqBzB,MAAM,CAAC,OAAP,GAAqB","file":"public/javascripts/app/core/NameLoader.js","sourcesContent":["CocoClass = require 'core/CocoClass'\r\n\r\nnamesCache = {}\r\n\r\nclass NameLoader extends CocoClass\r\n  loadNames: (ids) ->\r\n    toLoad = _.uniq (id for id in ids when not namesCache[id])\r\n    return false unless toLoad.length\r\n    jqxhrOptions = {\r\n      url: '/db/user/x/names',\r\n      type: 'POST',\r\n      data: {ids: toLoad},\r\n      success: @loadedNames\r\n    }\r\n\r\n    return jqxhrOptions\r\n\r\n  loadedNames: (newNames) =>\r\n    _.extend namesCache, newNames\r\n\r\n  getName: (id) ->\r\n    if namesCache[id]?.firstName and namesCache[id]?.lastName\r\n      return \"#{namesCache[id]?.firstName} #{namesCache[id]?.lastName}\"\r\n    namesCache[id]?.firstName or namesCache[id]?.name or id\r\n\r\nmodule.exports = new NameLoader()\r\n"]}