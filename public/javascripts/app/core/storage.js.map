{"version":3,"sources":["app/core/storage.coffee"],"names":[],"mappings":";AACA,MAAM,CAAC,OAAO,CAAC,IAAf,GAAsB,SAAC,GAAD,EAAM,SAAN;AACpB;;IAD0B,YAAU;;EACpC,IAA0B,SAA1B;AAAA,WAAO,OAAO,CAAC,GAAR,CAAY,GAAZ,EAAP;;EACA,IAAI,YAAY,CAAC,OAAb,CAAqB,GAArB;EACJ,KAAmB,CAAnB;AAAA,WAAO,KAAP;;AACA;IACE,QAAQ,IAAI,CAAC,KAAL,CAAW,CAAX;AACR,WAAO,MAFT;GAAA;IAGM;IACJ,OAAO,CAAC,IAAR,CAAa,4BAAb,EAA2C,GAA3C;AACA,WAAO,KALT;;AAJoB;;AAYtB,MAAM,CAAC,OAAO,CAAC,IAAf,GAAsB,SAAC,GAAD,EAAM,KAAN,EAAa,mBAAb;;IACpB,sBAAuB,IAAI,EAAJ,GAAS;;EAChC,IAAG,mBAAH;WACE,OAAO,CAAC,GAAR,CAAY,GAAZ,EAAiB,KAAjB,EAAwB,mBAAxB,EADF;GAAA;WAGE,YAAY,CAAC,OAAb,CAAqB,GAArB,EAA0B,IAAI,CAAC,SAAL,CAAe,KAAf,CAA1B,EAHF;;AAFoB;;AAQtB,MAAM,CAAC,OAAO,CAAC,MAAf,GAAwB,SAAC,GAAD,EAAM,SAAN;;IAAM,YAAU;;EACtC,IAAG,SAAH;WACE,OAAO,CAAC,MAAR,CAAe,GAAf,EADF;GAAA;WAGE,YAAY,CAAC,UAAb,CAAwB,GAAxB,EAHF;;AADsB","file":"public/javascripts/app/core/storage.js","sourcesContent":["# Pass false for fromCache to fetch keys that have been stored outside of lscache.\r\nmodule.exports.load = (key, fromCache=true) ->\r\n  return lscache.get key if fromCache\r\n  s = localStorage.getItem(key)\r\n  return null unless s\r\n  try\r\n    value = JSON.parse(s)\r\n    return value\r\n  catch SyntaxError\r\n    console.warn('error loading from storage', key)\r\n    return null\r\n\r\n# Pass 0 for expirationInMinutes to persist it as long as possible outside of lscache expiration.\r\nmodule.exports.save = (key, value, expirationInMinutes) ->\r\n  expirationInMinutes ?= 7 * 24 * 60\r\n  if expirationInMinutes\r\n    lscache.set key, value, expirationInMinutes\r\n  else\r\n    localStorage.setItem key, JSON.stringify(value)\r\n\r\n# Pass false for fromCache to remove keys that have been stored outside of lscache.\r\nmodule.exports.remove = (key, fromCache=true) ->\r\n  if fromCache\r\n    lscache.remove key\r\n  else\r\n    localStorage.removeItem key\r\n"]}