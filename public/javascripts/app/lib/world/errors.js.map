{"version":3,"sources":["app/lib/world/errors.coffee"],"names":[],"mappings":";AAAA;EAAA;;;AAAA,SAAS,QAAQ,UAAR;;AAET,MAAM,CAAC,OAAO,CAAC,aAAf,GAAqC;;;EACnC,aAAC,UAAD,GAAY;;EACC,uBAAC,OAAD,EAAW,YAAX,EAA0B,YAA1B,EAAyC,YAAzC,EAAwD,WAAxD,EAAsE,YAAtE,EAAqF,IAArF;IAAC,IAAC,WAAD;IAAU,IAAC,gBAAD;IAAe,IAAC,gBAAD;IAAe,IAAC,gBAAD;IAAe,IAAC,eAAD;IAAc,IAAC,gBAAD;IAAe,IAAC,QAAD;IAChG,+CAAM,IAAC,QAAP;IACA,IAAC,KAAD,GAAQ;IACR,IAAG,+BAAH;MACE,KAAK,CAAC,iBAAN,CAAwB,IAAxB,EAA2B,IAAC,YAA5B,EADF;;EAHW;;0BAMb,WAAU;AACR;IAAA,IAAI,MAAI,IAAC,aAAL,GAAkB;IACtB,IAAG,IAAC,aAAD,KAAiB,QAApB;MACE,KAAK,kBADP;KAAA,MAEK,IAAG,IAAC,aAAD,KAAiB,SAApB;MACH,KAAK,iBAAe,IAAC,aAAhB,GAA6B,WAA7B,GAAuC,CAAI,IAAC,aAAD,GAAgB,CAAnB,GAA0B,GAA1B,GAAmC,EAApC,CAAvC,GAA8E,IADhF;KAAA,MAEA,IAAG,IAAC,aAAJ;MACH,KAAK,kBAAgB,IAAC,aAAjB,GAA8B,IADhC;KAAA;MAGH,KAAK,uBAHF;;IAKL,aAAa,OAAO,IAAC;IACrB,IAAO,wBAAP;MACE,aAAa,OADf;KAAA,MAEK,IAAG,CAAC,CAAC,OAAF,CAAU,IAAC,YAAX,CAAH;MACH,aAAa,QADV;;IAEL,eAAe,IAAC,aAAD,IAAkB,CAAI,IAAC,aAAY,CAAC,KAAd,CAAoB,UAApB;IACrC,IAAG,YAAH;MACE,IAAI;MACJ,IAAG,eAAc,QAAjB;QACE,IAAI,OAAK,IAAC,YAAN,GAAkB,KADxB;OAAA,MAEK,IAAG,eAAc,QAAjB;QACH,IAAG,IAAI,CAAC,KAAL,CAAW,IAAC,YAAZ,MAA4B,IAAC,YAAhC;UAAiD,IAAC,aAAlD;SAAA;UAAmE,IAAC,YAAW,CAAC,OAAb,CAAqB,CAArB,EAAnE;SADG;OAAA,MAEA,IAAG,eAAc,SAAjB;QACH,IAAI,KAAG,IAAC,aADL;OAAA,MAEA,IAAI,8BAAkB,IAAC,YAAW,CAAC,EAA/B,IAAsC,IAAC,YAAW,CAAC,qBAAvD;QAEH,IAAI,IAAC,YAAW,CAAC,QAAb,GAFD;OAAA,MAGA,IAAG,IAAC,YAAD,YAAwB,MAA3B;QACH,IAAI,IAAC,YAAW,CAAC,QAAb,GADD;;MAEL,YAAY,aAAa,IAAC,YAAD,YAAwB;MACjD,KAAK,wBAAsB,IAAC,aAAvB,GAAoC,cAApC,GAAkD,UAAlD,GAA6D,GAA7D,GAA+D,CAAI,CAAH,GAAU,QAAM,CAAN,GAAQ,GAAlB,GAA0B,EAA3B,CAA/D,GAA6F,IAdpG;KAAA,MAeK,IAAG,IAAC,aAAD,IAAkB,IAAC,aAAD,KAAmB,SAAxC;MACH,KAAK,kBADF;;IAEL,IAAwB,IAAC,QAAzB;MAAA,KAAK,OAAO,IAAC,SAAb;;WACA;EAnCQ;;;;GAR+C","file":"public/javascripts/app/lib/world/errors.js","sourcesContent":["Vector = require './vector'\r\n\r\nmodule.exports.ArgumentError = class ArgumentError extends Error\r\n  @className: 'ArgumentError'\r\n  constructor: (@message, @functionName, @argumentName, @intendedType, @actualValue, @numArguments, @hint) ->\r\n    super @message\r\n    @name = 'ArgumentError'\r\n    if Error.captureStackTrace?\r\n      Error.captureStackTrace @, @constructor\r\n\r\n  toString: ->\r\n    s = \"`#{@functionName}`\"\r\n    if @argumentName is 'return'\r\n      s += \"'s return value\"\r\n    else if @argumentName is '_excess'\r\n      s += \" takes only #{@numArguments} argument#{if @numArguments > 1 then 's' else ''}.\"\r\n    else if @argumentName\r\n      s += \"'s argument `#{@argumentName}`\"\r\n    else\r\n      s += ' takes no arguments.'\r\n\r\n    actualType = typeof @actualValue\r\n    if not @actualValue?\r\n      actualType = 'null'\r\n    else if _.isArray @actualValue\r\n      actualType = 'array'\r\n    typeMismatch = @intendedType and not @intendedType.match actualType\r\n    if typeMismatch\r\n      v = ''\r\n      if actualType is 'string'\r\n        v = \"\\\"#{@actualValue}\\\"\"\r\n      else if actualType is 'number'\r\n        if Math.round(@actualValue) is @actualValue then @actualValue else @actualValue.toFixed(2)\r\n      else if actualType is 'boolean'\r\n        v = \"#{@actualValue}\"\r\n      else if (@actualValue? and @actualValue.id and @actualValue.trackedPropertiesKeys)\r\n        # (Don't import Thang, but determine whether it is Thang.)\r\n        v = @actualValue.toString()\r\n      else if @actualValue instanceof Vector\r\n        v = @actualValue.toString()\r\n      showValue = showValue or @actualValue instanceof Vector\r\n      s += \" should have type `#{@intendedType}`, but got `#{actualType}`#{if v then \": `#{v}`\" else ''}.\"\r\n    else if @argumentName and @argumentName isnt '_excess'\r\n      s += ' has a problem.'\r\n    s += '\\n' + @message if @message\r\n    s\r\n"]}