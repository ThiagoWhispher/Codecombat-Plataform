{"version":3,"sources":["app/lib/surface/Dropper.coffee"],"names":[],"mappings":";AAAA;;AAAA,UAAgB;oBACd,aAAY;;oBACZ,cAAa;;EAEA;IACX,IAAC,SAAD,GAAY;aAAA,SAAC,CAAD;eAAO,KAAC,KAAD,CAAM,CAAN;MAAP;IAAA;EADD;;oBAGb,OAAM;AACJ;IAAA,KAAO,IAAC,WAAR;MACE,IAAC,WAAD,GAAc;AACd,aAFF;;IAIA,IAAkB,IAAC,YAAD,GAAe,CAAjC;MAAA,EAAE,IAAC,aAAH;;IAGA,MAAM,QAAQ,CAAC,MAAM,CAAC,MAAhB;IACN,SAAS,QAAQ,CAAC,MAAM,CAAC,cAAhB,CAA+B,CAA/B;IACT,IAAC,WAAD,IAAe,CAAC,MAAM,MAAP,IAAiB;IAGhC,IAAC,YAAD,IAAgB,SAAS,IAAC,WAAV;WAChB,IAAC,WAAD,GAAc,IAAC,WAAD,GAAc;EAdxB;;oBAgBN,OAAM;AACJ,WAAO,IAAC,YAAD,GAAe;EADlB;;;;;;AAGR,MAAM,CAAC,OAAP,GAAqB","file":"public/javascripts/app/lib/surface/Dropper.js","sourcesContent":["Dropper = class Dropper\r\n  lostFrames: 0.0\r\n  dropCounter: 0\r\n\r\n  constructor: ->\r\n    @listener = (e) => @tick(e)\r\n\r\n  tick: ->\r\n    unless @tickedOnce\r\n      @tickedOnce = true  # Can't get measured FPS on the 0th frame.\r\n      return\r\n\r\n    --@dropCounter if @dropCounter > 0\r\n\r\n    # Track number of frames we've lost since the last tick.\r\n    fps = createjs.Ticker.getFPS()\r\n    actual = createjs.Ticker.getMeasuredFPS(1)\r\n    @lostFrames += (fps - actual) / fps\r\n\r\n    # If lostFrames > 1, drop that number for the next tick.\r\n    @dropCounter += parseInt @lostFrames\r\n    @lostFrames = @lostFrames % 1\r\n\r\n  drop: ->\r\n    return @dropCounter > 0\r\n\r\nmodule.exports = new Dropper()\r\n"]}