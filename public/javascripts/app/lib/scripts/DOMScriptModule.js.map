{"version":3,"sources":["app/lib/scripts/DOMScriptModule.coffee"],"names":[],"mappings":";AAAA;EAAA;;;AAAA,eAAe,QAAQ,gBAAR;;AAEf,MAAM,CAAC,OAAP,GAAuB;;;;;;;EACrB,eAAC,UAAD,GAAY,SAAC,SAAD;AACV,WAAO;EADG;;4BAGZ,aAAY;AACV;IAAA,QAAQ;IACR,IAAgC,oCAAhC;MAAA,KAAK,CAAC,IAAN,CAAW,IAAC,cAAD,EAAX;;IACA,IAA2B,+BAA3B;MAAA,KAAK,CAAC,IAAN,CAAW,IAAC,SAAD,EAAX;;IACA,IAA4B,gCAA5B;MAAA,KAAK,CAAC,IAAN,CAAW,IAAC,UAAD,EAAX;;IACA,IAAkC,IAAC,UAAS,CAAC,GAAG,CAAC,WAAjD;MAAA,KAAK,CAAC,IAAN,CAAW,IAAC,gBAAD,EAAX;;IACA,IAAgC,oCAAhC;MAAA,KAAK,CAAC,IAAN,CAAW,IAAC,cAAD,EAAX;;AACA,WAAO;EAPG;;4BASZ,WAAU;AACR;IAAA,QAAQ;IACR,IAAsD,oCAAtD;MAAA,KAAK,CAAC,IAAN,CAAW;QAAC,WAAW,yBAAZ;OAAX;;IACA,IAAoD,+BAApD;MAAA,KAAK,CAAC,IAAN,CAAW;QAAC,WAAW,uBAAZ;OAAX;;AACA,WAAO;EAJC;;4BAMV,YAAW;AACT;IAAA,QAAQ;IACR,IAAuC,sCAAvC;MAAA,KAAK,CAAC,IAAN,CAAW,IAAC,gBAAD,CAAiB,KAAjB,CAAX;;IACA,IAAgC,oCAAhC;MAAA,KAAK,CAAC,IAAN,CAAW,IAAC,cAAD,EAAX;;WACA;EAJS;;4BAMX,gBAAe;AACb;IAAA,MAAM,IAAC,UAAS,CAAC;IACjB,OACE;MAAA,SAAS,qBAAT;MACA,OACE;QAAA,UAAU,GAAG,CAAC,SAAS,CAAC,MAAxB;QACA,OAAO,GAAG,CAAC,SAAS,CAAC,KADrB;QAEA,OAAO,GAAG,CAAC,SAAS,CAAC,KAFrB;QAGA,QAAQ,GAAG,CAAC,SAAS,CAAC,MAHtB;QAIA,UAAU,GAAG,CAAC,SAAS,CAAC,QAJxB;OAFF;;IAOF,IAAI,CAAC,KAAL,GAAa,CAAC,CAAC,IAAF,CAAO,IAAI,CAAC,KAAZ,EAAmB,SAAC,KAAD;aAAW,CAAI,CAAC,CAAC,WAAF,CAAc,KAAd;IAAf,CAAnB;IACb,IAAC,sBAAD,CAAuB,IAAvB;WACA;EAZa;;4BAcf,YAAW;AACT;IAAA,OACE;MAAA,SAAS,iBAAT;MACA,OACE;QAAA,UAAU,IAAC,UAAS,CAAC,GAAG,CAAC,KAAzB;OAFF;;WAGF;EALS;;4BAOX,kBAAiB,SAAC,SAAD;AACf;IAAA,IAAI;IACJ,CAAC,CAAC,SAAF,UAAc,IAAC,UAAS,CAAC,GAAG,CAAC,YAAf,KAA+B,IAA/B,YAAqC;IACnD,IAA2B,iBAA3B;MAAA,CAAC,CAAC,SAAF,GAAc,UAAd;;IACA,OACE;MAAA,SAAS,oBAAT;MACA,OAAO,CADP;;WAEF;EAPe;;4BASjB,WAAU;AACR;IAAA,QAAQ;IACR,OAAO,IAAC,UAAS,CAAC,GAAG,CAAC;IACtB,IAAyB,CAAC,CAAC,OAAF,CAAU,IAAV,CAAzB;MAAA,KAAK,CAAC,QAAN,GAAiB,KAAjB;;IACA,UAAa,IAAH,GAAa,wBAAb,GAA2C;AACrD,WAAO;MAAC,SAAS,OAAV;MAAmB,OAAO,KAA1B;;EALC;;4BAOV,gBAAe;AACb,WAAO;MAAC,SAAS,qBAAV;MAAiC,OAAO;QAAC,IAAI,IAAC,UAAS,CAAC,GAAG,CAAC,SAApB;OAAxC;;EADM;;;;GA9D8B","file":"public/javascripts/app/lib/scripts/DOMScriptModule.js","sourcesContent":["ScriptModule = require './ScriptModule'\r\n\r\nmodule.exports = class DOMScriptModule extends ScriptModule\r\n  @neededFor: (noteGroup) ->\r\n    return noteGroup.dom?\r\n\r\n  startNotes: ->\r\n    notes = []\r\n    notes.push(@highlightNote()) if @noteGroup.dom.highlight?\r\n    notes.push(@lockNote()) if @noteGroup.dom.lock?\r\n    notes.push(@focusNote()) if @noteGroup.dom.focus?\r\n    notes.push(@showVictoryNote()) if @noteGroup.dom.showVictory\r\n    notes.push(@letterboxNote()) if @noteGroup.dom.letterbox?\r\n    return notes\r\n\r\n  endNotes: ->\r\n    notes = []\r\n    notes.push({'channel': 'level:end-highlight-dom'}) if @noteGroup.dom.highlight?\r\n    notes.push({'channel': 'level:enable-controls'}) if @noteGroup.dom.lock?\r\n    return notes\r\n\r\n  skipNotes: ->\r\n    notes = []\r\n    notes.push(@showVictoryNote(false)) if @noteGroup.dom.showVictory?\r\n    notes.push(@letterboxNote()) if @noteGroup.dom.letterbox?\r\n    notes\r\n\r\n  highlightNote: ->\r\n    dom = @noteGroup.dom\r\n    note =\r\n      channel: 'level:highlight-dom'\r\n      event:\r\n        selector: dom.highlight.target\r\n        delay: dom.highlight.delay\r\n        sides: dom.highlight.sides\r\n        offset: dom.highlight.offset\r\n        rotation: dom.highlight.rotation\r\n    note.event = _.pick note.event, (value) -> not _.isUndefined value\r\n    @maybeApplyDelayToNote note\r\n    note\r\n\r\n  focusNote: ->\r\n    note =\r\n      channel: 'level:focus-dom'\r\n      event:\r\n        selector: @noteGroup.dom.focus\r\n    note\r\n\r\n  showVictoryNote: (showModal) ->\r\n    e = {}\r\n    e.showModal = @noteGroup.dom.showVictory in [true, 'Done Button And Modal']\r\n    e.showModal = showModal if showModal?\r\n    note =\r\n      channel: 'level:show-victory'\r\n      event: e\r\n    note\r\n\r\n  lockNote: ->\r\n    event = {}\r\n    lock = @noteGroup.dom.lock\r\n    event.controls = lock if _.isArray lock  # array: subset of controls\r\n    channel = if lock then 'level:disable-controls' else 'level:enable-controls'\r\n    return {channel: channel, event: event}\r\n\r\n  letterboxNote: ->\r\n    return {channel: 'level:set-letterbox', event: {on: @noteGroup.dom.letterbox}}\r\n"]}