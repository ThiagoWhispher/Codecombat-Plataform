{"version":3,"sources":["app/lib/scripts/PlaybackScriptModule.coffee"],"names":[],"mappings":";AAAA;EAAA;;;AAAA,eAAe,QAAQ,gBAAR;;AAEf,MAAM,CAAC,OAAP,GAAuB;;;;;;;EACrB,oBAAC,UAAD,GAAY,SAAC,SAAD;AACV,WAAO;EADG;;iCAGZ,aAAY;AACV;IAAA,QAAQ;IACR,IAA8B,uCAA9B;MAAA,KAAK,CAAC,IAAN,CAAW,IAAC,YAAD,EAAX;;IACA,IAA4B,qCAA5B;MAAA,KAAK,CAAC,IAAN,CAAW,IAAC,UAAD,EAAX;;AACA,WAAO;EAJG;;iCAMZ,WAAU;AACR;IAAA,QAAQ;AAIR,WAAO;EALC;;iCAOV,YAAW;AACT;IAAA,QAAQ;IACR,IAA8B,uCAA9B;MAAA,KAAK,CAAC,IAAN,CAAW,IAAC,YAAD,EAAX;;IACA,IAAgC,qCAAhC;MAAA,KAAK,CAAC,IAAN,CAAW,IAAC,UAAD,CAAW,IAAX,CAAX;;AACA,WAAO;EAJE;;iCAMX,cAAa;AACX;IAAA,OACE;MAAA,SAAS,mBAAT;MACA,OAAO;QAAC,SAAS,IAAC,UAAS,CAAC,QAAQ,CAAC,OAA9B;OADP;;AAEF,WAAO;EAJI;;iCAMb,YAAW,SAAC,OAAD;AACT;;MADU,UAAQ;;IAClB,QAAQ,IAAC,UAAS,CAAC,QAAQ,CAAC;IAC5B,OACE;MAAA,SAAS,gBAAT;MACA,OACE;QAAA,aAAa,KAAK,CAAC,WAAN,IAAqB,CAAlC;QACA,eAAkB,OAAH,GAAgB,CAAhB,GAAuB,KAAK,CAAC,QAD5C;OAFF;;IAIF,IAAkC,oBAAlC;MAAA,IAAI,CAAC,KAAK,CAAC,IAAX,GAAkB,KAAK,CAAC,OAAxB;;IACA,IAAoC,qBAApC;MAAA,IAAI,CAAC,KAAK,CAAC,KAAX,GAAmB,KAAK,CAAC,QAAzB;;AACA,WAAO;EATE;;;;GA7BuC","file":"public/javascripts/app/lib/scripts/PlaybackScriptModule.js","sourcesContent":["ScriptModule = require './ScriptModule'\r\n\r\nmodule.exports = class PlaybackScriptModule extends ScriptModule\r\n  @neededFor: (noteGroup) ->\r\n    return noteGroup.playback?\r\n\r\n  startNotes: ->\r\n    notes = []\r\n    notes.push(@playingNote()) if @noteGroup.playback.playing?\r\n    notes.push(@scrubNote()) if @noteGroup.playback.scrub?\r\n    return notes\r\n\r\n  endNotes: ->\r\n    notes = []\r\n    # TODO: Want scripts to end where the scrub should go, but this doesn't work\r\n    # when scripts go somewhere then do something else. Figure out a different technique?\r\n#    notes.push(@scrubNote(true)) if @noteGroup.playback.scrub?\r\n    return notes\r\n\r\n  skipNotes: ->\r\n    notes = []\r\n    notes.push(@playingNote()) if @noteGroup.playback.playing?\r\n    notes.push(@scrubNote(true)) if @noteGroup.playback.scrub?\r\n    return notes\r\n\r\n  playingNote: ->\r\n    note =\r\n      channel: 'level:set-playing'\r\n      event: {playing: @noteGroup.playback.playing}\r\n    return note\r\n\r\n  scrubNote: (instant=false) ->\r\n    scrub = @noteGroup.playback.scrub\r\n    note =\r\n      channel: 'level:set-time'\r\n      event:\r\n        frameOffset: scrub.frameOffset or 2\r\n        scrubDuration: if instant then 0 else scrub.duration\r\n    note.event.time = scrub.toTime if scrub.toTime?\r\n    note.event.ratio = scrub.toRatio if scrub.toRatio?\r\n    return note\r\n"]}